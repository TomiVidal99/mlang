var nu=Object.create;var Yn=Object.defineProperty;var ru=Object.getOwnPropertyDescriptor;var iu=Object.getOwnPropertyNames;var ou=Object.getPrototypeOf,su=Object.prototype.hasOwnProperty;var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),au=(t,e)=>{for(var n in e)Yn(t,n,{get:e[n],enumerable:!0})},_s=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of iu(e))!su.call(t,i)&&i!==n&&Yn(t,i,{get:()=>e[i],enumerable:!(r=ru(e,i))||r.enumerable});return t};var Se=(t,e,n)=>(n=t!=null?nu(ou(t)):{},_s(e||!t||!t.__esModule?Yn(n,"default",{value:t,enumerable:!0}):n,t)),cu=t=>_s(Yn({},"__esModule",{value:!0}),t);var Jn=x(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.thenable=me.typedArray=me.stringArray=me.array=me.func=me.error=me.number=me.string=me.boolean=void 0;function uu(t){return t===!0||t===!1}me.boolean=uu;function Rs(t){return typeof t=="string"||t instanceof String}me.string=Rs;function lu(t){return typeof t=="number"||t instanceof Number}me.number=lu;function du(t){return t instanceof Error}me.error=du;function Ds(t){return typeof t=="function"}me.func=Ds;function Cs(t){return Array.isArray(t)}me.array=Cs;function fu(t){return Cs(t)&&t.every(e=>Rs(e))}me.stringArray=fu;function hu(t,e){return Array.isArray(t)&&t.every(e)}me.typedArray=hu;function gu(t){return t&&Ds(t.then)}me.thenable=gu});var Kt=x(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.stringArray=Ne.array=Ne.func=Ne.error=Ne.number=Ne.string=Ne.boolean=void 0;function pu(t){return t===!0||t===!1}Ne.boolean=pu;function ks(t){return typeof t=="string"||t instanceof String}Ne.string=ks;function mu(t){return typeof t=="number"||t instanceof Number}Ne.number=mu;function yu(t){return t instanceof Error}Ne.error=yu;function vu(t){return typeof t=="function"}Ne.func=vu;function Es(t){return Array.isArray(t)}Ne.array=Es;function Tu(t){return Es(t)&&t.every(e=>ks(e))}Ne.stringArray=Tu});var Ui=x(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Message=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var wt=Kt(),Ns;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Ns=M.ErrorCodes||(M.ErrorCodes={}));var yn=class extends Error{constructor(e,n,r){super(n),this.code=wt.number(e)?e:Ns.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,yn.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};M.ResponseError=yn;var be=class{constructor(e){this.kind=e}static is(e){return e===be.auto||e===be.byName||e===be.byPosition}toString(){return this.kind}};M.ParameterStructures=be;be.auto=new be("auto");be.byPosition=new be("byPosition");be.byName=new be("byName");var ce=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return be.auto}};M.AbstractMessageSignature=ce;var bi=class extends ce{constructor(e){super(e,0)}};M.RequestType0=bi;var _i=class extends ce{constructor(e,n=be.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType=_i;var Ri=class extends ce{constructor(e,n=be.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType1=Ri;var Di=class extends ce{constructor(e){super(e,2)}};M.RequestType2=Di;var Ci=class extends ce{constructor(e){super(e,3)}};M.RequestType3=Ci;var ki=class extends ce{constructor(e){super(e,4)}};M.RequestType4=ki;var Ei=class extends ce{constructor(e){super(e,5)}};M.RequestType5=Ei;var Ni=class extends ce{constructor(e){super(e,6)}};M.RequestType6=Ni;var Si=class extends ce{constructor(e){super(e,7)}};M.RequestType7=Si;var Pi=class extends ce{constructor(e){super(e,8)}};M.RequestType8=Pi;var wi=class extends ce{constructor(e){super(e,9)}};M.RequestType9=wi;var xi=class extends ce{constructor(e,n=be.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType=xi;var Oi=class extends ce{constructor(e){super(e,0)}};M.NotificationType0=Oi;var Ii=class extends ce{constructor(e,n=be.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=Ii;var qi=class extends ce{constructor(e){super(e,2)}};M.NotificationType2=qi;var Mi=class extends ce{constructor(e){super(e,3)}};M.NotificationType3=Mi;var Fi=class extends ce{constructor(e){super(e,4)}};M.NotificationType4=Fi;var Ai=class extends ce{constructor(e){super(e,5)}};M.NotificationType5=Ai;var Li=class extends ce{constructor(e){super(e,6)}};M.NotificationType6=Li;var ji=class extends ce{constructor(e){super(e,7)}};M.NotificationType7=ji;var Wi=class extends ce{constructor(e){super(e,8)}};M.NotificationType8=Wi;var Hi=class extends ce{constructor(e){super(e,9)}};M.NotificationType9=Hi;var bu;(function(t){function e(i){let a=i;return a&&wt.string(a.method)&&(wt.string(a.id)||wt.number(a.id))}t.isRequest=e;function n(i){let a=i;return a&&wt.string(a.method)&&i.id===void 0}t.isNotification=n;function r(i){let a=i;return a&&(a.result!==void 0||!!a.error)&&(wt.string(a.id)||wt.number(a.id)||a.id===null)}t.isResponse=r})(bu=M.Message||(M.Message={}))});var Bi=x(lt=>{"use strict";var Ss;Object.defineProperty(lt,"__esModule",{value:!0});lt.LRUCache=lt.LinkedMap=lt.Touch=void 0;var Pe;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Pe=lt.Touch||(lt.Touch={}));var Qn=class{constructor(){this[Ss]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Pe.None){let r=this._map.get(e);if(r)return n!==Pe.None&&this.touch(r,n),r.value}set(e,n,r=Pe.None){let i=this._map.get(e);if(i)i.value=n,r!==Pe.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Pe.None:this.addItemLast(i);break;case Pe.First:this.addItemFirst(i);break;case Pe.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Ss=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Pe.First&&n!==Pe.Last)){if(n===Pe.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Pe.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};lt.LinkedMap=Qn;var Vi=class extends Qn{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Pe.AsNew){return super.get(e,n)}peek(e){return super.get(e,Pe.None)}set(e,n){return super.set(e,n,Pe.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};lt.LRUCache=Vi});var Ps=x(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.Disposable=void 0;var _u;(function(t){function e(n){return{dispose:n}}t.create=e})(_u=vn.Disposable||(vn.Disposable={}))});var vt=x(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var $i;function zi(){if($i===void 0)throw new Error("No runtime abstraction layer installed");return $i}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");$i=n}t.install=e})(zi||(zi={}));Gi.default=zi});var Yt=x(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.Emitter=xt.Event=void 0;var Ru=vt(),Du;(function(t){let e={dispose(){}};t.None=function(){return e}})(Du=xt.Event||(xt.Event={}));var Ki=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,a=this._callbacks.length;i<a;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,f=r.length;a<f;a++)try{n.push(r[a].apply(i[a],e))}catch(v){(0,Ru.default)().console.error(v)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Xt=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Ki),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=Xt._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};xt.Emitter=Xt;Xt._noop=function(){}});var er=x(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.CancellationTokenSource=Ot.CancellationToken=void 0;var Cu=vt(),ku=Kt(),Xi=Yt(),Yi;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Xi.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Xi.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||ku.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Yi=Ot.CancellationToken||(Ot.CancellationToken={}));var Eu=Object.freeze(function(t,e){let n=(0,Cu.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Zn=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Eu:(this._emitter||(this._emitter=new Xi.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ji=class{get token(){return this._token||(this._token=new Zn),this._token}cancel(){this._token?this._token.cancel():this._token=Yi.Cancelled}dispose(){this._token?this._token instanceof Zn&&this._token.dispose():this._token=Yi.None}};Ot.CancellationTokenSource=Ji});var ws=x(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.SharedArrayReceiverStrategy=Jt.SharedArraySenderStrategy=void 0;var Nu=er(),Tn;(function(t){t.Continue=0,t.Cancelled=1})(Tn||(Tn={}));var Qi=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=Tn.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,Tn.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Jt.SharedArraySenderStrategy=Qi;var Zi=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Tn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},eo=class{constructor(e){this.token=new Zi(e)}cancel(){}dispose(){}},to=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new Nu.CancellationTokenSource:new eo(n)}};Jt.SharedArrayReceiverStrategy=to});var ro=x(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.Semaphore=void 0;var Su=vt(),no=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Su.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};tr.Semaphore=no});var xs=x(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.ReadableStreamMessageReader=dt.AbstractMessageReader=dt.MessageReader=void 0;var oo=vt(),Qt=Kt(),io=Yt(),Pu=ro(),wu;(function(t){function e(n){let r=n;return r&&Qt.func(r.listen)&&Qt.func(r.dispose)&&Qt.func(r.onError)&&Qt.func(r.onClose)&&Qt.func(r.onPartialMessage)}t.is=e})(wu=dt.MessageReader||(dt.MessageReader={}));var nr=class{constructor(){this.errorEmitter=new io.Emitter,this.closeEmitter=new io.Emitter,this.partialMessageEmitter=new io.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Qt.string(e.message)?e.message:"unknown"}`)}};dt.AbstractMessageReader=nr;var so;(function(t){function e(n){let r,i,a,f=new Map,v,T=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(a=n.contentDecoder,f.set(a.name,a)),n.contentDecoders!==void 0)for(let D of n.contentDecoders)f.set(D.name,D);if(n.contentTypeDecoder!==void 0&&(v=n.contentTypeDecoder,T.set(v.name,v)),n.contentTypeDecoders!==void 0)for(let D of n.contentTypeDecoders)T.set(D.name,D)}return v===void 0&&(v=(0,oo.default)().applicationJson.decoder,T.set(v.name,v)),{charset:r,contentDecoder:a,contentDecoders:f,contentTypeDecoder:v,contentTypeDecoders:T}}t.fromOptions=e})(so||(so={}));var ao=class extends nr{constructor(e,n){super(),this.readable=e,this.options=so.fromOptions(n),this.buffer=(0,oo.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Pu.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let a=parseInt(i);if(isNaN(a)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=a}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,oo.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};dt.ReadableStreamMessageReader=ao});var Ms=x(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.WriteableStreamMessageWriter=ft.AbstractMessageWriter=ft.MessageWriter=void 0;var Os=vt(),bn=Kt(),xu=ro(),Is=Yt(),Ou="Content-Length: ",qs=`\r
`,Iu;(function(t){function e(n){let r=n;return r&&bn.func(r.dispose)&&bn.func(r.onClose)&&bn.func(r.onError)&&bn.func(r.write)}t.is=e})(Iu=ft.MessageWriter||(ft.MessageWriter={}));var rr=class{constructor(){this.errorEmitter=new Is.Emitter,this.closeEmitter=new Is.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${bn.string(e.message)?e.message:"unknown"}`)}};ft.AbstractMessageWriter=rr;var co;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Os.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Os.default)().applicationJson.encoder}}t.fromOptions=e})(co||(co={}));var uo=class extends rr{constructor(e,n){super(),this.writable=e,this.options=co.fromOptions(n),this.errorCount=0,this.writeSemaphore=new xu.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Ou,r.byteLength.toString(),qs),i.push(qs),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};ft.WriteableStreamMessageWriter=uo});var Fs=x(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.AbstractMessageBuffer=void 0;var qu=13,Mu=10,Fu=`\r
`,lo=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,a=0;e:for(;r<this._chunks.length;){let D=this._chunks[r];i=0;t:for(;i<D.length;){switch(D[i]){case qu:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Mu:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}a+=D.byteLength,r++}if(n!==4)return;let f=this._read(a+i),v=new Map,T=this.toString(f,"ascii").split(Fu);if(T.length<2)return v;for(let D=0;D<T.length-2;D++){let C=T[D],S=C.indexOf(":");if(S===-1)throw new Error("Message header must separate key and value using :");let N=C.substr(0,S),A=C.substr(S+1).trim();v.set(e?N.toLowerCase():N,A)}return v}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let a=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(a)}if(this._chunks[0].byteLength>e){let a=this._chunks[0],f=this.asNative(a,e);return this._chunks[0]=a.slice(e),this._totalLength-=e,f}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let a=this._chunks[i];if(a.byteLength>e){let f=a.slice(0,e);n.set(f,r),r+=e,this._chunks[i]=a.slice(e),this._totalLength-=e,e-=e}else n.set(a,r),r+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,e-=a.byteLength}return n}};ir.AbstractMessageBuffer=lo});var Vs=x(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.createMessageConnection=q.ConnectionOptions=q.MessageStrategy=q.CancellationStrategy=q.CancellationSenderStrategy=q.CancellationReceiverStrategy=q.RequestCancellationReceiverStrategy=q.IdCancellationReceiverStrategy=q.ConnectionStrategy=q.ConnectionError=q.ConnectionErrors=q.LogTraceNotification=q.SetTraceNotification=q.TraceFormat=q.TraceValues=q.Trace=q.NullLogger=q.ProgressType=q.ProgressToken=void 0;var As=vt(),de=Kt(),L=Ui(),Ls=Bi(),_n=Yt(),fo=er(),Dn;(function(t){t.type=new L.NotificationType("$/cancelRequest")})(Dn||(Dn={}));var js;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(js=q.ProgressToken||(q.ProgressToken={}));var Rn;(function(t){t.type=new L.NotificationType("$/progress")})(Rn||(Rn={}));var ho=class{constructor(){}};q.ProgressType=ho;var go;(function(t){function e(n){return de.func(n)}t.is=e})(go||(go={}));q.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var te;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(te=q.Trace||(q.Trace={}));var Au;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Au=q.TraceValues||(q.TraceValues={}));(function(t){function e(r){if(!de.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(te=q.Trace||(q.Trace={}));var $e;(function(t){t.Text="text",t.JSON="json"})($e=q.TraceFormat||(q.TraceFormat={}));(function(t){function e(n){return de.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})($e=q.TraceFormat||(q.TraceFormat={}));var Ws;(function(t){t.type=new L.NotificationType("$/setTrace")})(Ws=q.SetTraceNotification||(q.SetTraceNotification={}));var po;(function(t){t.type=new L.NotificationType("$/logTrace")})(po=q.LogTraceNotification||(q.LogTraceNotification={}));var or;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(or=q.ConnectionErrors||(q.ConnectionErrors={}));var Tt=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,Tt.prototype)}};q.ConnectionError=Tt;var Hs;(function(t){function e(n){let r=n;return r&&de.func(r.cancelUndispatched)}t.is=e})(Hs=q.ConnectionStrategy||(q.ConnectionStrategy={}));var vo;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&de.func(r.createCancellationTokenSource)&&(r.dispose===void 0||de.func(r.dispose))}t.is=e})(vo=q.IdCancellationReceiverStrategy||(q.IdCancellationReceiverStrategy={}));var Us;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&de.func(r.createCancellationTokenSource)&&(r.dispose===void 0||de.func(r.dispose))}t.is=e})(Us=q.RequestCancellationReceiverStrategy||(q.RequestCancellationReceiverStrategy={}));var mo;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new fo.CancellationTokenSource}});function e(n){return vo.is(n)||Us.is(n)}t.is=e})(mo=q.CancellationReceiverStrategy||(q.CancellationReceiverStrategy={}));var yo;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Dn.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&de.func(r.sendCancellation)&&de.func(r.cleanup)}t.is=e})(yo=q.CancellationSenderStrategy||(q.CancellationSenderStrategy={}));var To;(function(t){t.Message=Object.freeze({receiver:mo.Message,sender:yo.Message});function e(n){let r=n;return r&&mo.is(r.receiver)&&yo.is(r.sender)}t.is=e})(To=q.CancellationStrategy||(q.CancellationStrategy={}));var bo;(function(t){function e(n){let r=n;return r&&de.func(r.handleMessage)}t.is=e})(bo=q.MessageStrategy||(q.MessageStrategy={}));var Lu;(function(t){function e(n){let r=n;return r&&(To.is(r.cancellationStrategy)||Hs.is(r.connectionStrategy)||bo.is(r.messageStrategy))}t.is=e})(Lu=q.ConnectionOptions||(q.ConnectionOptions={}));var ze;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(ze||(ze={}));function ju(t,e,n,r){let i=n!==void 0?n:q.NullLogger,a=0,f=0,v=0,T="2.0",D,C=new Map,S,N=new Map,A=new Map,$,X=new Ls.LinkedMap,Z=new Map,H=new Set,y=new Map,g=te.Off,k=$e.Text,F,Y=ze.New,ne=new _n.Emitter,qe=new _n.Emitter,Ut=new _n.Emitter,Nt=new _n.Emitter,St=new _n.Emitter,Me=r&&r.cancellationStrategy?r.cancellationStrategy:To.Message;function fn(l){if(l===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+l.toString()}function Vt(l){return l===null?"res-unknown-"+(++v).toString():"res-"+l.toString()}function Un(){return"not-"+(++f).toString()}function si(l,_){L.Message.isRequest(_)?l.set(fn(_.id),_):L.Message.isResponse(_)?l.set(Vt(_.id),_):l.set(Un(),_)}function ai(l){}function Vn(){return Y===ze.Listening}function Bt(){return Y===ze.Closed}function pt(){return Y===ze.Disposed}function hn(){(Y===ze.New||Y===ze.Listening)&&(Y=ze.Closed,qe.fire(void 0))}function $t(l){ne.fire([l,void 0,void 0])}function ci(l){ne.fire(l)}t.onClose(hn),t.onError($t),e.onClose(hn),e.onError(ci);function Bn(){$||X.size===0||($=(0,As.default)().timer.setImmediate(()=>{$=void 0,ui()}))}function $n(l){L.Message.isRequest(l)?di(l):L.Message.isNotification(l)?hi(l):L.Message.isResponse(l)?fi(l):gn(l)}function ui(){if(X.size===0)return;let l=X.shift();try{let _=r?.messageStrategy;bo.is(_)?_.handleMessage(l,$n):$n(l)}finally{Bn()}}let li=l=>{try{if(L.Message.isNotification(l)&&l.method===Dn.type.method){let _=l.params.id,P=fn(_),I=X.get(P);if(L.Message.isRequest(I)){let ee=r?.connectionStrategy,ue=ee&&ee.cancelUndispatched?ee.cancelUndispatched(I,ai):void 0;if(ue&&(ue.error!==void 0||ue.result!==void 0)){X.delete(P),y.delete(_),ue.id=I.id,zt(ue,l.method,Date.now()),e.write(ue).catch(()=>i.error("Sending response for canceled message failed."));return}}let re=y.get(_);if(re!==void 0){re.cancel(),pn(l);return}else H.add(_)}si(X,l)}finally{Bn()}};function di(l){if(pt())return;function _(B,oe,Q){let pe={jsonrpc:T,id:l.id};B instanceof L.ResponseError?pe.error=B.toJson():pe.result=B===void 0?null:B,zt(pe,oe,Q),e.write(pe).catch(()=>i.error("Sending response failed."))}function P(B,oe,Q){let pe={jsonrpc:T,id:l.id,error:B.toJson()};zt(pe,oe,Q),e.write(pe).catch(()=>i.error("Sending response failed."))}function I(B,oe,Q){B===void 0&&(B=null);let pe={jsonrpc:T,id:l.id,result:B};zt(pe,oe,Q),e.write(pe).catch(()=>i.error("Sending response failed."))}mi(l);let re=C.get(l.method),ee,ue;re&&(ee=re.type,ue=re.handler);let le=Date.now();if(ue||D){let B=l.id??String(Date.now()),oe=vo.is(Me.receiver)?Me.receiver.createCancellationTokenSource(B):Me.receiver.createCancellationTokenSource(l);l.id!==null&&H.has(l.id)&&oe.cancel(),l.id!==null&&y.set(B,oe);try{let Q;if(ue)if(l.params===void 0){if(ee!==void 0&&ee.numberOfParams!==0){P(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${l.method} defines ${ee.numberOfParams} params but received none.`),l.method,le);return}Q=ue(oe.token)}else if(Array.isArray(l.params)){if(ee!==void 0&&ee.parameterStructures===L.ParameterStructures.byName){P(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by name but received parameters by position`),l.method,le);return}Q=ue(...l.params,oe.token)}else{if(ee!==void 0&&ee.parameterStructures===L.ParameterStructures.byPosition){P(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by position but received parameters by name`),l.method,le);return}Q=ue(l.params,oe.token)}else D&&(Q=D(l.method,l.params,oe.token));let pe=Q;Q?pe.then?pe.then(_e=>{y.delete(B),_(_e,l.method,le)},_e=>{y.delete(B),_e instanceof L.ResponseError?P(_e,l.method,le):_e&&de.string(_e.message)?P(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${_e.message}`),l.method,le):P(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,le)}):(y.delete(B),_(Q,l.method,le)):(y.delete(B),I(Q,l.method,le))}catch(Q){y.delete(B),Q instanceof L.ResponseError?_(Q,l.method,le):Q&&de.string(Q.message)?P(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${Q.message}`),l.method,le):P(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,le)}}else P(new L.ResponseError(L.ErrorCodes.MethodNotFound,`Unhandled method ${l.method}`),l.method,le)}function fi(l){if(!pt())if(l.id===null)l.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(l.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let _=l.id,P=Z.get(_);if(yi(l,P),P!==void 0){Z.delete(_);try{if(l.error){let I=l.error;P.reject(new L.ResponseError(I.code,I.message,I.data))}else if(l.result!==void 0)P.resolve(l.result);else throw new Error("Should never happen.")}catch(I){I.message?i.error(`Response handler '${P.method}' failed with message: ${I.message}`):i.error(`Response handler '${P.method}' failed unexpectedly.`)}}}}function hi(l){if(pt())return;let _,P;if(l.method===Dn.type.method){let I=l.params.id;H.delete(I),pn(l);return}else{let I=N.get(l.method);I&&(P=I.handler,_=I.type)}if(P||S)try{if(pn(l),P)if(l.params===void 0)_!==void 0&&_.numberOfParams!==0&&_.parameterStructures!==L.ParameterStructures.byName&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received none.`),P();else if(Array.isArray(l.params)){let I=l.params;l.method===Rn.type.method&&I.length===2&&js.is(I[0])?P({token:I[0],value:I[1]}):(_!==void 0&&(_.parameterStructures===L.ParameterStructures.byName&&i.error(`Notification ${l.method} defines parameters by name but received parameters by position`),_.numberOfParams!==l.params.length&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received ${I.length} arguments`)),P(...I))}else _!==void 0&&_.parameterStructures===L.ParameterStructures.byPosition&&i.error(`Notification ${l.method} defines parameters by position but received parameters by name`),P(l.params);else S&&S(l.method,l.params)}catch(I){I.message?i.error(`Notification handler '${l.method}' failed with message: ${I.message}`):i.error(`Notification handler '${l.method}' failed unexpectedly.`)}else Ut.fire(l)}function gn(l){if(!l){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(l,null,4)}`);let _=l;if(de.string(_.id)||de.number(_.id)){let P=_.id,I=Z.get(P);I&&I.reject(new Error("The received response has neither a result nor an error property."))}}function et(l){if(l!=null)switch(g){case te.Verbose:return JSON.stringify(l,null,4);case te.Compact:return JSON.stringify(l);default:return}}function gi(l){if(!(g===te.Off||!F))if(k===$e.Text){let _;(g===te.Verbose||g===te.Compact)&&l.params&&(_=`Params: ${et(l.params)}

`),F.log(`Sending request '${l.method} - (${l.id})'.`,_)}else mt("send-request",l)}function pi(l){if(!(g===te.Off||!F))if(k===$e.Text){let _;(g===te.Verbose||g===te.Compact)&&(l.params?_=`Params: ${et(l.params)}

`:_=`No parameters provided.

`),F.log(`Sending notification '${l.method}'.`,_)}else mt("send-notification",l)}function zt(l,_,P){if(!(g===te.Off||!F))if(k===$e.Text){let I;(g===te.Verbose||g===te.Compact)&&(l.error&&l.error.data?I=`Error data: ${et(l.error.data)}

`:l.result?I=`Result: ${et(l.result)}

`:l.error===void 0&&(I=`No result returned.

`)),F.log(`Sending response '${_} - (${l.id})'. Processing request took ${Date.now()-P}ms`,I)}else mt("send-response",l)}function mi(l){if(!(g===te.Off||!F))if(k===$e.Text){let _;(g===te.Verbose||g===te.Compact)&&l.params&&(_=`Params: ${et(l.params)}

`),F.log(`Received request '${l.method} - (${l.id})'.`,_)}else mt("receive-request",l)}function pn(l){if(!(g===te.Off||!F||l.method===po.type.method))if(k===$e.Text){let _;(g===te.Verbose||g===te.Compact)&&(l.params?_=`Params: ${et(l.params)}

`:_=`No parameters provided.

`),F.log(`Received notification '${l.method}'.`,_)}else mt("receive-notification",l)}function yi(l,_){if(!(g===te.Off||!F))if(k===$e.Text){let P;if((g===te.Verbose||g===te.Compact)&&(l.error&&l.error.data?P=`Error data: ${et(l.error.data)}

`:l.result?P=`Result: ${et(l.result)}

`:l.error===void 0&&(P=`No result returned.

`)),_){let I=l.error?` Request failed: ${l.error.message} (${l.error.code}).`:"";F.log(`Received response '${_.method} - (${l.id})' in ${Date.now()-_.timerStart}ms.${I}`,P)}else F.log(`Received response ${l.id} without active response promise.`,P)}else mt("receive-response",l)}function mt(l,_){if(!F||g===te.Off)return;let P={isLSPMessage:!0,type:l,message:_,timestamp:Date.now()};F.log(P)}function Pt(){if(Bt())throw new Tt(or.Closed,"Connection is closed.");if(pt())throw new Tt(or.Disposed,"Connection is disposed.")}function vi(){if(Vn())throw new Tt(or.AlreadyListening,"Connection is already listening")}function Ti(){if(!Vn())throw new Error("Call listen() first.")}function ct(l){return l===void 0?null:l}function zn(l){if(l!==null)return l}function Gn(l){return l!=null&&!Array.isArray(l)&&typeof l=="object"}function mn(l,_){switch(l){case L.ParameterStructures.auto:return Gn(_)?zn(_):[ct(_)];case L.ParameterStructures.byName:if(!Gn(_))throw new Error("Received parameters by name but param is not an object literal.");return zn(_);case L.ParameterStructures.byPosition:return[ct(_)];default:throw new Error(`Unknown parameter structure ${l.toString()}`)}}function Kn(l,_){let P,I=l.numberOfParams;switch(I){case 0:P=void 0;break;case 1:P=mn(l.parameterStructures,_[0]);break;default:P=[];for(let re=0;re<_.length&&re<I;re++)P.push(ct(_[re]));if(_.length<I)for(let re=_.length;re<I;re++)P.push(null);break}return P}let yt={sendNotification:(l,..._)=>{Pt();let P,I;if(de.string(l)){P=l;let ee=_[0],ue=0,le=L.ParameterStructures.auto;L.ParameterStructures.is(ee)&&(ue=1,le=ee);let B=_.length,oe=B-ue;switch(oe){case 0:I=void 0;break;case 1:I=mn(le,_[ue]);break;default:if(le===L.ParameterStructures.byName)throw new Error(`Received ${oe} parameters for 'by Name' notification parameter structure.`);I=_.slice(ue,B).map(Q=>ct(Q));break}}else{let ee=_;P=l.method,I=Kn(l,ee)}let re={jsonrpc:T,method:P,params:I};return pi(re),e.write(re).catch(ee=>{throw i.error("Sending notification failed."),ee})},onNotification:(l,_)=>{Pt();let P;return de.func(l)?S=l:_&&(de.string(l)?(P=l,N.set(l,{type:void 0,handler:_})):(P=l.method,N.set(l.method,{type:l,handler:_}))),{dispose:()=>{P!==void 0?N.delete(P):S=void 0}}},onProgress:(l,_,P)=>{if(A.has(_))throw new Error(`Progress handler for token ${_} already registered`);return A.set(_,P),{dispose:()=>{A.delete(_)}}},sendProgress:(l,_,P)=>yt.sendNotification(Rn.type,{token:_,value:P}),onUnhandledProgress:Nt.event,sendRequest:(l,..._)=>{Pt(),Ti();let P,I,re;if(de.string(l)){P=l;let B=_[0],oe=_[_.length-1],Q=0,pe=L.ParameterStructures.auto;L.ParameterStructures.is(B)&&(Q=1,pe=B);let _e=_.length;fo.CancellationToken.is(oe)&&(_e=_e-1,re=oe);let Le=_e-Q;switch(Le){case 0:I=void 0;break;case 1:I=mn(pe,_[Q]);break;default:if(pe===L.ParameterStructures.byName)throw new Error(`Received ${Le} parameters for 'by Name' request parameter structure.`);I=_.slice(Q,_e).map(p=>ct(p));break}}else{let B=_;P=l.method,I=Kn(l,B);let oe=l.numberOfParams;re=fo.CancellationToken.is(B[oe])?B[oe]:void 0}let ee=a++,ue;re&&(ue=re.onCancellationRequested(()=>{let B=Me.sender.sendCancellation(yt,ee);return B===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ee}`),Promise.resolve()):B.catch(()=>{i.log(`Sending cancellation messages for id ${ee} failed`)})}));let le={jsonrpc:T,id:ee,method:P,params:I};return gi(le),typeof Me.sender.enableCancellation=="function"&&Me.sender.enableCancellation(le),new Promise(async(B,oe)=>{let Q=Le=>{B(Le),Me.sender.cleanup(ee),ue?.dispose()},pe=Le=>{oe(Le),Me.sender.cleanup(ee),ue?.dispose()},_e={method:P,timerStart:Date.now(),resolve:Q,reject:pe};try{await e.write(le),Z.set(ee,_e)}catch(Le){throw i.error("Sending request failed."),_e.reject(new L.ResponseError(L.ErrorCodes.MessageWriteError,Le.message?Le.message:"Unknown reason")),Le}})},onRequest:(l,_)=>{Pt();let P=null;return go.is(l)?(P=void 0,D=l):de.string(l)?(P=null,_!==void 0&&(P=l,C.set(l,{handler:_,type:void 0}))):_!==void 0&&(P=l.method,C.set(l.method,{type:l,handler:_})),{dispose:()=>{P!==null&&(P!==void 0?C.delete(P):D=void 0)}}},hasPendingResponse:()=>Z.size>0,trace:async(l,_,P)=>{let I=!1,re=$e.Text;P!==void 0&&(de.boolean(P)?I=P:(I=P.sendNotification||!1,re=P.traceFormat||$e.Text)),g=l,k=re,g===te.Off?F=void 0:F=_,I&&!Bt()&&!pt()&&await yt.sendNotification(Ws.type,{value:te.toString(l)})},onError:ne.event,onClose:qe.event,onUnhandledNotification:Ut.event,onDispose:St.event,end:()=>{e.end()},dispose:()=>{if(pt())return;Y=ze.Disposed,St.fire(void 0);let l=new L.ResponseError(L.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let _ of Z.values())_.reject(l);Z=new Map,y=new Map,H=new Set,X=new Ls.LinkedMap,de.func(e.dispose)&&e.dispose(),de.func(t.dispose)&&t.dispose()},listen:()=>{Pt(),vi(),Y=ze.Listening,t.listen(li)},inspect:()=>{(0,As.default)().console.log("inspect")}};return yt.onNotification(po.type,l=>{if(g===te.Off||!F)return;let _=g===te.Verbose||g===te.Compact;F.log(l.message,_?l.verbose:void 0)}),yt.onNotification(Rn.type,l=>{let _=A.get(l.token);_?_(l.value):Nt.fire(l)}),yt}q.createMessageConnection=ju});var sr=x(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.ProgressType=b.ProgressToken=b.createMessageConnection=b.NullLogger=b.ConnectionOptions=b.ConnectionStrategy=b.AbstractMessageBuffer=b.WriteableStreamMessageWriter=b.AbstractMessageWriter=b.MessageWriter=b.ReadableStreamMessageReader=b.AbstractMessageReader=b.MessageReader=b.SharedArrayReceiverStrategy=b.SharedArraySenderStrategy=b.CancellationToken=b.CancellationTokenSource=b.Emitter=b.Event=b.Disposable=b.LRUCache=b.Touch=b.LinkedMap=b.ParameterStructures=b.NotificationType9=b.NotificationType8=b.NotificationType7=b.NotificationType6=b.NotificationType5=b.NotificationType4=b.NotificationType3=b.NotificationType2=b.NotificationType1=b.NotificationType0=b.NotificationType=b.ErrorCodes=b.ResponseError=b.RequestType9=b.RequestType8=b.RequestType7=b.RequestType6=b.RequestType5=b.RequestType4=b.RequestType3=b.RequestType2=b.RequestType1=b.RequestType0=b.RequestType=b.Message=b.RAL=void 0;b.MessageStrategy=b.CancellationStrategy=b.CancellationSenderStrategy=b.CancellationReceiverStrategy=b.ConnectionError=b.ConnectionErrors=b.LogTraceNotification=b.SetTraceNotification=b.TraceFormat=b.TraceValues=b.Trace=void 0;var ae=Ui();Object.defineProperty(b,"Message",{enumerable:!0,get:function(){return ae.Message}});Object.defineProperty(b,"RequestType",{enumerable:!0,get:function(){return ae.RequestType}});Object.defineProperty(b,"RequestType0",{enumerable:!0,get:function(){return ae.RequestType0}});Object.defineProperty(b,"RequestType1",{enumerable:!0,get:function(){return ae.RequestType1}});Object.defineProperty(b,"RequestType2",{enumerable:!0,get:function(){return ae.RequestType2}});Object.defineProperty(b,"RequestType3",{enumerable:!0,get:function(){return ae.RequestType3}});Object.defineProperty(b,"RequestType4",{enumerable:!0,get:function(){return ae.RequestType4}});Object.defineProperty(b,"RequestType5",{enumerable:!0,get:function(){return ae.RequestType5}});Object.defineProperty(b,"RequestType6",{enumerable:!0,get:function(){return ae.RequestType6}});Object.defineProperty(b,"RequestType7",{enumerable:!0,get:function(){return ae.RequestType7}});Object.defineProperty(b,"RequestType8",{enumerable:!0,get:function(){return ae.RequestType8}});Object.defineProperty(b,"RequestType9",{enumerable:!0,get:function(){return ae.RequestType9}});Object.defineProperty(b,"ResponseError",{enumerable:!0,get:function(){return ae.ResponseError}});Object.defineProperty(b,"ErrorCodes",{enumerable:!0,get:function(){return ae.ErrorCodes}});Object.defineProperty(b,"NotificationType",{enumerable:!0,get:function(){return ae.NotificationType}});Object.defineProperty(b,"NotificationType0",{enumerable:!0,get:function(){return ae.NotificationType0}});Object.defineProperty(b,"NotificationType1",{enumerable:!0,get:function(){return ae.NotificationType1}});Object.defineProperty(b,"NotificationType2",{enumerable:!0,get:function(){return ae.NotificationType2}});Object.defineProperty(b,"NotificationType3",{enumerable:!0,get:function(){return ae.NotificationType3}});Object.defineProperty(b,"NotificationType4",{enumerable:!0,get:function(){return ae.NotificationType4}});Object.defineProperty(b,"NotificationType5",{enumerable:!0,get:function(){return ae.NotificationType5}});Object.defineProperty(b,"NotificationType6",{enumerable:!0,get:function(){return ae.NotificationType6}});Object.defineProperty(b,"NotificationType7",{enumerable:!0,get:function(){return ae.NotificationType7}});Object.defineProperty(b,"NotificationType8",{enumerable:!0,get:function(){return ae.NotificationType8}});Object.defineProperty(b,"NotificationType9",{enumerable:!0,get:function(){return ae.NotificationType9}});Object.defineProperty(b,"ParameterStructures",{enumerable:!0,get:function(){return ae.ParameterStructures}});var _o=Bi();Object.defineProperty(b,"LinkedMap",{enumerable:!0,get:function(){return _o.LinkedMap}});Object.defineProperty(b,"LRUCache",{enumerable:!0,get:function(){return _o.LRUCache}});Object.defineProperty(b,"Touch",{enumerable:!0,get:function(){return _o.Touch}});var Wu=Ps();Object.defineProperty(b,"Disposable",{enumerable:!0,get:function(){return Wu.Disposable}});var Bs=Yt();Object.defineProperty(b,"Event",{enumerable:!0,get:function(){return Bs.Event}});Object.defineProperty(b,"Emitter",{enumerable:!0,get:function(){return Bs.Emitter}});var $s=er();Object.defineProperty(b,"CancellationTokenSource",{enumerable:!0,get:function(){return $s.CancellationTokenSource}});Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return $s.CancellationToken}});var zs=ws();Object.defineProperty(b,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return zs.SharedArraySenderStrategy}});Object.defineProperty(b,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return zs.SharedArrayReceiverStrategy}});var Ro=xs();Object.defineProperty(b,"MessageReader",{enumerable:!0,get:function(){return Ro.MessageReader}});Object.defineProperty(b,"AbstractMessageReader",{enumerable:!0,get:function(){return Ro.AbstractMessageReader}});Object.defineProperty(b,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Ro.ReadableStreamMessageReader}});var Do=Ms();Object.defineProperty(b,"MessageWriter",{enumerable:!0,get:function(){return Do.MessageWriter}});Object.defineProperty(b,"AbstractMessageWriter",{enumerable:!0,get:function(){return Do.AbstractMessageWriter}});Object.defineProperty(b,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Do.WriteableStreamMessageWriter}});var Hu=Fs();Object.defineProperty(b,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Hu.AbstractMessageBuffer}});var Re=Vs();Object.defineProperty(b,"ConnectionStrategy",{enumerable:!0,get:function(){return Re.ConnectionStrategy}});Object.defineProperty(b,"ConnectionOptions",{enumerable:!0,get:function(){return Re.ConnectionOptions}});Object.defineProperty(b,"NullLogger",{enumerable:!0,get:function(){return Re.NullLogger}});Object.defineProperty(b,"createMessageConnection",{enumerable:!0,get:function(){return Re.createMessageConnection}});Object.defineProperty(b,"ProgressToken",{enumerable:!0,get:function(){return Re.ProgressToken}});Object.defineProperty(b,"ProgressType",{enumerable:!0,get:function(){return Re.ProgressType}});Object.defineProperty(b,"Trace",{enumerable:!0,get:function(){return Re.Trace}});Object.defineProperty(b,"TraceValues",{enumerable:!0,get:function(){return Re.TraceValues}});Object.defineProperty(b,"TraceFormat",{enumerable:!0,get:function(){return Re.TraceFormat}});Object.defineProperty(b,"SetTraceNotification",{enumerable:!0,get:function(){return Re.SetTraceNotification}});Object.defineProperty(b,"LogTraceNotification",{enumerable:!0,get:function(){return Re.LogTraceNotification}});Object.defineProperty(b,"ConnectionErrors",{enumerable:!0,get:function(){return Re.ConnectionErrors}});Object.defineProperty(b,"ConnectionError",{enumerable:!0,get:function(){return Re.ConnectionError}});Object.defineProperty(b,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Re.CancellationReceiverStrategy}});Object.defineProperty(b,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Re.CancellationSenderStrategy}});Object.defineProperty(b,"CancellationStrategy",{enumerable:!0,get:function(){return Re.CancellationStrategy}});Object.defineProperty(b,"MessageStrategy",{enumerable:!0,get:function(){return Re.MessageStrategy}});var Uu=vt();b.RAL=Uu.default});var Xs=x(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var Gs=require("util"),ht=sr(),Zt=class extends ht.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Zt.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Gs.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Zt.emptyBuffer=Buffer.allocUnsafe(0);var Co=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ht.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ht.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ht.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),ht.Disposable.create(()=>this.stream.off("data",e))}},ko=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ht.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ht.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ht.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let a=f=>{f==null?r():i(f)};typeof e=="string"?this.stream.write(e,n,a):this.stream.write(e,a)})}end(){this.stream.end()}},Ks=Object.freeze({messageBuffer:Object.freeze({create:t=>new Zt(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Gs.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new Co(t),asWritableStream:t=>new ko(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Eo(){return Ks}(function(t){function e(){ht.RAL.install(Ks)}t.install=e})(Eo||(Eo={}));No.default=Eo});var Mt=x(G=>{"use strict";var Vu=G&&G.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Bu=G&&G.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Vu(e,t,n)};Object.defineProperty(G,"__esModule",{value:!0});G.createMessageConnection=G.createServerSocketTransport=G.createClientSocketTransport=G.createServerPipeTransport=G.createClientPipeTransport=G.generateRandomPipeName=G.StreamMessageWriter=G.StreamMessageReader=G.SocketMessageWriter=G.SocketMessageReader=G.PortMessageWriter=G.PortMessageReader=G.IPCMessageWriter=G.IPCMessageReader=void 0;var en=Xs();en.default.install();var Ys=require("path"),$u=require("os"),zu=require("crypto"),ur=require("net"),Fe=sr();Bu(sr(),G);var So=class extends Fe.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Fe.Disposable.create(()=>this.process.off("message",e))}};G.IPCMessageReader=So;var Po=class extends Fe.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};G.IPCMessageWriter=Po;var wo=class extends Fe.AbstractMessageReader{constructor(e){super(),this.onData=new Fe.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};G.PortMessageReader=wo;var xo=class extends Fe.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};G.PortMessageWriter=xo;var It=class extends Fe.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,en.default)().stream.asReadableStream(e),n)}};G.SocketMessageReader=It;var qt=class extends Fe.WriteableStreamMessageWriter{constructor(e,n){super((0,en.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};G.SocketMessageWriter=qt;var ar=class extends Fe.ReadableStreamMessageReader{constructor(e,n){super((0,en.default)().stream.asReadableStream(e),n)}};G.StreamMessageReader=ar;var cr=class extends Fe.WriteableStreamMessageWriter{constructor(e,n){super((0,en.default)().stream.asWritableStream(e),n)}};G.StreamMessageWriter=cr;var Js=process.env.XDG_RUNTIME_DIR,Gu=new Map([["linux",107],["darwin",103]]);function Ku(){let t=(0,zu.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Js?e=Ys.join(Js,`vscode-ipc-${t}.sock`):e=Ys.join($u.tmpdir(),`vscode-${t}.sock`);let n=Gu.get(process.platform);return n!==void 0&&e.length>n&&(0,en.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}G.generateRandomPipeName=Ku;function Xu(t,e="utf-8"){let n,r=new Promise((i,a)=>{n=i});return new Promise((i,a)=>{let f=(0,ur.createServer)(v=>{f.close(),n([new It(v,e),new qt(v,e)])});f.on("error",a),f.listen(t,()=>{f.removeListener("error",a),i({onConnected:()=>r})})})}G.createClientPipeTransport=Xu;function Yu(t,e="utf-8"){let n=(0,ur.createConnection)(t);return[new It(n,e),new qt(n,e)]}G.createServerPipeTransport=Yu;function Ju(t,e="utf-8"){let n,r=new Promise((i,a)=>{n=i});return new Promise((i,a)=>{let f=(0,ur.createServer)(v=>{f.close(),n([new It(v,e),new qt(v,e)])});f.on("error",a),f.listen(t,"127.0.0.1",()=>{f.removeListener("error",a),i({onConnected:()=>r})})})}G.createClientSocketTransport=Ju;function Qu(t,e="utf-8"){let n=(0,ur.createConnection)(t,"127.0.0.1");return[new It(n,e),new qt(n,e)]}G.createServerSocketTransport=Qu;function Zu(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function el(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function tl(t,e,n,r){n||(n=Fe.NullLogger);let i=Zu(t)?new ar(t):t,a=el(e)?new cr(e):e;return Fe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Fe.createMessageConnection)(i,a,n,r)}G.createMessageConnection=tl});var Oo=x((sg,Qs)=>{"use strict";Qs.exports=Mt()});var dr=x((Zs,lr)=>{(function(t){if(typeof lr=="object"&&typeof lr.exports=="object"){var e=t(require,Zs);e!==void 0&&(lr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(s){function d(h){return typeof h=="string"}s.is=d})(n=e.DocumentUri||(e.DocumentUri={}));var r;(function(s){function d(h){return typeof h=="string"}s.is=d})(r=e.URI||(e.URI={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function d(h){return typeof h=="number"&&s.MIN_VALUE<=h&&h<=s.MAX_VALUE}s.is=d})(i=e.integer||(e.integer={}));var a;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function d(h){return typeof h=="number"&&s.MIN_VALUE<=h&&h<=s.MAX_VALUE}s.is=d})(a=e.uinteger||(e.uinteger={}));var f;(function(s){function d(u,o){return u===Number.MAX_VALUE&&(u=a.MAX_VALUE),o===Number.MAX_VALUE&&(o=a.MAX_VALUE),{line:u,character:o}}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&p.uinteger(o.line)&&p.uinteger(o.character)}s.is=h})(f=e.Position||(e.Position={}));var v;(function(s){function d(u,o,m,R){if(p.uinteger(u)&&p.uinteger(o)&&p.uinteger(m)&&p.uinteger(R))return{start:f.create(u,o),end:f.create(m,R)};if(f.is(u)&&f.is(o))return{start:u,end:o};throw new Error("Range#create called with invalid arguments[".concat(u,", ").concat(o,", ").concat(m,", ").concat(R,"]"))}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&f.is(o.start)&&f.is(o.end)}s.is=h})(v=e.Range||(e.Range={}));var T;(function(s){function d(u,o){return{uri:u,range:o}}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&v.is(o.range)&&(p.string(o.uri)||p.undefined(o.uri))}s.is=h})(T=e.Location||(e.Location={}));var D;(function(s){function d(u,o,m,R){return{targetUri:u,targetRange:o,targetSelectionRange:m,originSelectionRange:R}}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&v.is(o.targetRange)&&p.string(o.targetUri)&&v.is(o.targetSelectionRange)&&(v.is(o.originSelectionRange)||p.undefined(o.originSelectionRange))}s.is=h})(D=e.LocationLink||(e.LocationLink={}));var C;(function(s){function d(u,o,m,R){return{red:u,green:o,blue:m,alpha:R}}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&p.numberRange(o.red,0,1)&&p.numberRange(o.green,0,1)&&p.numberRange(o.blue,0,1)&&p.numberRange(o.alpha,0,1)}s.is=h})(C=e.Color||(e.Color={}));var S;(function(s){function d(u,o){return{range:u,color:o}}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&v.is(o.range)&&C.is(o.color)}s.is=h})(S=e.ColorInformation||(e.ColorInformation={}));var N;(function(s){function d(u,o,m){return{label:u,textEdit:o,additionalTextEdits:m}}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&p.string(o.label)&&(p.undefined(o.textEdit)||F.is(o))&&(p.undefined(o.additionalTextEdits)||p.typedArray(o.additionalTextEdits,F.is))}s.is=h})(N=e.ColorPresentation||(e.ColorPresentation={}));var A;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(A=e.FoldingRangeKind||(e.FoldingRangeKind={}));var $;(function(s){function d(u,o,m,R,W,ge){var se={startLine:u,endLine:o};return p.defined(m)&&(se.startCharacter=m),p.defined(R)&&(se.endCharacter=R),p.defined(W)&&(se.kind=W),p.defined(ge)&&(se.collapsedText=ge),se}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&p.uinteger(o.startLine)&&p.uinteger(o.startLine)&&(p.undefined(o.startCharacter)||p.uinteger(o.startCharacter))&&(p.undefined(o.endCharacter)||p.uinteger(o.endCharacter))&&(p.undefined(o.kind)||p.string(o.kind))}s.is=h})($=e.FoldingRange||(e.FoldingRange={}));var X;(function(s){function d(u,o){return{location:u,message:o}}s.create=d;function h(u){var o=u;return p.defined(o)&&T.is(o.location)&&p.string(o.message)}s.is=h})(X=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var Z;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(Z=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var H;(function(s){s.Unnecessary=1,s.Deprecated=2})(H=e.DiagnosticTag||(e.DiagnosticTag={}));var y;(function(s){function d(h){var u=h;return p.objectLiteral(u)&&p.string(u.href)}s.is=d})(y=e.CodeDescription||(e.CodeDescription={}));var g;(function(s){function d(u,o,m,R,W,ge){var se={range:u,message:o};return p.defined(m)&&(se.severity=m),p.defined(R)&&(se.code=R),p.defined(W)&&(se.source=W),p.defined(ge)&&(se.relatedInformation=ge),se}s.create=d;function h(u){var o,m=u;return p.defined(m)&&v.is(m.range)&&p.string(m.message)&&(p.number(m.severity)||p.undefined(m.severity))&&(p.integer(m.code)||p.string(m.code)||p.undefined(m.code))&&(p.undefined(m.codeDescription)||p.string((o=m.codeDescription)===null||o===void 0?void 0:o.href))&&(p.string(m.source)||p.undefined(m.source))&&(p.undefined(m.relatedInformation)||p.typedArray(m.relatedInformation,X.is))}s.is=h})(g=e.Diagnostic||(e.Diagnostic={}));var k;(function(s){function d(u,o){for(var m=[],R=2;R<arguments.length;R++)m[R-2]=arguments[R];var W={title:u,command:o};return p.defined(m)&&m.length>0&&(W.arguments=m),W}s.create=d;function h(u){var o=u;return p.defined(o)&&p.string(o.title)&&p.string(o.command)}s.is=h})(k=e.Command||(e.Command={}));var F;(function(s){function d(m,R){return{range:m,newText:R}}s.replace=d;function h(m,R){return{range:{start:m,end:m},newText:R}}s.insert=h;function u(m){return{range:m,newText:""}}s.del=u;function o(m){var R=m;return p.objectLiteral(R)&&p.string(R.newText)&&v.is(R.range)}s.is=o})(F=e.TextEdit||(e.TextEdit={}));var Y;(function(s){function d(u,o,m){var R={label:u};return o!==void 0&&(R.needsConfirmation=o),m!==void 0&&(R.description=m),R}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&p.string(o.label)&&(p.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(p.string(o.description)||o.description===void 0)}s.is=h})(Y=e.ChangeAnnotation||(e.ChangeAnnotation={}));var ne;(function(s){function d(h){var u=h;return p.string(u)}s.is=d})(ne=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var qe;(function(s){function d(m,R,W){return{range:m,newText:R,annotationId:W}}s.replace=d;function h(m,R,W){return{range:{start:m,end:m},newText:R,annotationId:W}}s.insert=h;function u(m,R){return{range:m,newText:"",annotationId:R}}s.del=u;function o(m){var R=m;return F.is(R)&&(Y.is(R.annotationId)||ne.is(R.annotationId))}s.is=o})(qe=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var Ut;(function(s){function d(u,o){return{textDocument:u,edits:o}}s.create=d;function h(u){var o=u;return p.defined(o)&&Bt.is(o.textDocument)&&Array.isArray(o.edits)}s.is=h})(Ut=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Nt;(function(s){function d(u,o,m){var R={kind:"create",uri:u};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(R.options=o),m!==void 0&&(R.annotationId=m),R}s.create=d;function h(u){var o=u;return o&&o.kind==="create"&&p.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||p.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||p.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ne.is(o.annotationId))}s.is=h})(Nt=e.CreateFile||(e.CreateFile={}));var St;(function(s){function d(u,o,m,R){var W={kind:"rename",oldUri:u,newUri:o};return m!==void 0&&(m.overwrite!==void 0||m.ignoreIfExists!==void 0)&&(W.options=m),R!==void 0&&(W.annotationId=R),W}s.create=d;function h(u){var o=u;return o&&o.kind==="rename"&&p.string(o.oldUri)&&p.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||p.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||p.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ne.is(o.annotationId))}s.is=h})(St=e.RenameFile||(e.RenameFile={}));var Me;(function(s){function d(u,o,m){var R={kind:"delete",uri:u};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(R.options=o),m!==void 0&&(R.annotationId=m),R}s.create=d;function h(u){var o=u;return o&&o.kind==="delete"&&p.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||p.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||p.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||ne.is(o.annotationId))}s.is=h})(Me=e.DeleteFile||(e.DeleteFile={}));var fn;(function(s){function d(h){var u=h;return u&&(u.changes!==void 0||u.documentChanges!==void 0)&&(u.documentChanges===void 0||u.documentChanges.every(function(o){return p.string(o.kind)?Nt.is(o)||St.is(o)||Me.is(o):Ut.is(o)}))}s.is=d})(fn=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Vt=function(){function s(d,h){this.edits=d,this.changeAnnotations=h}return s.prototype.insert=function(d,h,u){var o,m;if(u===void 0?o=F.insert(d,h):ne.is(u)?(m=u,o=qe.insert(d,h,u)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(u),o=qe.insert(d,h,m)),this.edits.push(o),m!==void 0)return m},s.prototype.replace=function(d,h,u){var o,m;if(u===void 0?o=F.replace(d,h):ne.is(u)?(m=u,o=qe.replace(d,h,u)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(u),o=qe.replace(d,h,m)),this.edits.push(o),m!==void 0)return m},s.prototype.delete=function(d,h){var u,o;if(h===void 0?u=F.del(d):ne.is(h)?(o=h,u=qe.del(d,h)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(h),u=qe.del(d,o)),this.edits.push(u),o!==void 0)return o},s.prototype.add=function(d){this.edits.push(d)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(d){if(d===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),Un=function(){function s(d){this._annotations=d===void 0?Object.create(null):d,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(d,h){var u;if(ne.is(d)?u=d:(u=this.nextId(),h=d),this._annotations[u]!==void 0)throw new Error("Id ".concat(u," is already in use."));if(h===void 0)throw new Error("No annotation provided for id ".concat(u));return this._annotations[u]=h,this._size++,u},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),si=function(){function s(d){var h=this;this._textEditChanges=Object.create(null),d!==void 0?(this._workspaceEdit=d,d.documentChanges?(this._changeAnnotations=new Un(d.changeAnnotations),d.changeAnnotations=this._changeAnnotations.all(),d.documentChanges.forEach(function(u){if(Ut.is(u)){var o=new Vt(u.edits,h._changeAnnotations);h._textEditChanges[u.textDocument.uri]=o}})):d.changes&&Object.keys(d.changes).forEach(function(u){var o=new Vt(d.changes[u]);h._textEditChanges[u]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(d){if(Bt.is(d)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var h={uri:d.uri,version:d.version},u=this._textEditChanges[h.uri];if(!u){var o=[],m={textDocument:h,edits:o};this._workspaceEdit.documentChanges.push(m),u=new Vt(o,this._changeAnnotations),this._textEditChanges[h.uri]=u}return u}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var u=this._textEditChanges[d];if(!u){var o=[];this._workspaceEdit.changes[d]=o,u=new Vt(o),this._textEditChanges[d]=u}return u}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Un,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(d,h,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(h)||ne.is(h)?o=h:u=h;var m,R;if(o===void 0?m=Nt.create(d,u):(R=ne.is(o)?o:this._changeAnnotations.manage(o),m=Nt.create(d,u,R)),this._workspaceEdit.documentChanges.push(m),R!==void 0)return R},s.prototype.renameFile=function(d,h,u,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;Y.is(u)||ne.is(u)?m=u:o=u;var R,W;if(m===void 0?R=St.create(d,h,o):(W=ne.is(m)?m:this._changeAnnotations.manage(m),R=St.create(d,h,o,W)),this._workspaceEdit.documentChanges.push(R),W!==void 0)return W},s.prototype.deleteFile=function(d,h,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(h)||ne.is(h)?o=h:u=h;var m,R;if(o===void 0?m=Me.create(d,u):(R=ne.is(o)?o:this._changeAnnotations.manage(o),m=Me.create(d,u,R)),this._workspaceEdit.documentChanges.push(m),R!==void 0)return R},s}();e.WorkspaceChange=si;var ai;(function(s){function d(u){return{uri:u}}s.create=d;function h(u){var o=u;return p.defined(o)&&p.string(o.uri)}s.is=h})(ai=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Vn;(function(s){function d(u,o){return{uri:u,version:o}}s.create=d;function h(u){var o=u;return p.defined(o)&&p.string(o.uri)&&p.integer(o.version)}s.is=h})(Vn=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Bt;(function(s){function d(u,o){return{uri:u,version:o}}s.create=d;function h(u){var o=u;return p.defined(o)&&p.string(o.uri)&&(o.version===null||p.integer(o.version))}s.is=h})(Bt=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var pt;(function(s){function d(u,o,m,R){return{uri:u,languageId:o,version:m,text:R}}s.create=d;function h(u){var o=u;return p.defined(o)&&p.string(o.uri)&&p.string(o.languageId)&&p.integer(o.version)&&p.string(o.text)}s.is=h})(pt=e.TextDocumentItem||(e.TextDocumentItem={}));var hn;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function d(h){var u=h;return u===s.PlainText||u===s.Markdown}s.is=d})(hn=e.MarkupKind||(e.MarkupKind={}));var $t;(function(s){function d(h){var u=h;return p.objectLiteral(h)&&hn.is(u.kind)&&p.string(u.value)}s.is=d})($t=e.MarkupContent||(e.MarkupContent={}));var ci;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(ci=e.CompletionItemKind||(e.CompletionItemKind={}));var Bn;(function(s){s.PlainText=1,s.Snippet=2})(Bn=e.InsertTextFormat||(e.InsertTextFormat={}));var $n;(function(s){s.Deprecated=1})($n=e.CompletionItemTag||(e.CompletionItemTag={}));var ui;(function(s){function d(u,o,m){return{newText:u,insert:o,replace:m}}s.create=d;function h(u){var o=u;return o&&p.string(o.newText)&&v.is(o.insert)&&v.is(o.replace)}s.is=h})(ui=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var li;(function(s){s.asIs=1,s.adjustIndentation=2})(li=e.InsertTextMode||(e.InsertTextMode={}));var di;(function(s){function d(h){var u=h;return u&&(p.string(u.detail)||u.detail===void 0)&&(p.string(u.description)||u.description===void 0)}s.is=d})(di=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var fi;(function(s){function d(h){return{label:h}}s.create=d})(fi=e.CompletionItem||(e.CompletionItem={}));var hi;(function(s){function d(h,u){return{items:h||[],isIncomplete:!!u}}s.create=d})(hi=e.CompletionList||(e.CompletionList={}));var gn;(function(s){function d(u){return u.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=d;function h(u){var o=u;return p.string(o)||p.objectLiteral(o)&&p.string(o.language)&&p.string(o.value)}s.is=h})(gn=e.MarkedString||(e.MarkedString={}));var et;(function(s){function d(h){var u=h;return!!u&&p.objectLiteral(u)&&($t.is(u.contents)||gn.is(u.contents)||p.typedArray(u.contents,gn.is))&&(h.range===void 0||v.is(h.range))}s.is=d})(et=e.Hover||(e.Hover={}));var gi;(function(s){function d(h,u){return u?{label:h,documentation:u}:{label:h}}s.create=d})(gi=e.ParameterInformation||(e.ParameterInformation={}));var pi;(function(s){function d(h,u){for(var o=[],m=2;m<arguments.length;m++)o[m-2]=arguments[m];var R={label:h};return p.defined(u)&&(R.documentation=u),p.defined(o)?R.parameters=o:R.parameters=[],R}s.create=d})(pi=e.SignatureInformation||(e.SignatureInformation={}));var zt;(function(s){s.Text=1,s.Read=2,s.Write=3})(zt=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var mi;(function(s){function d(h,u){var o={range:h};return p.number(u)&&(o.kind=u),o}s.create=d})(mi=e.DocumentHighlight||(e.DocumentHighlight={}));var pn;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(pn=e.SymbolKind||(e.SymbolKind={}));var yi;(function(s){s.Deprecated=1})(yi=e.SymbolTag||(e.SymbolTag={}));var mt;(function(s){function d(h,u,o,m,R){var W={name:h,kind:u,location:{uri:m,range:o}};return R&&(W.containerName=R),W}s.create=d})(mt=e.SymbolInformation||(e.SymbolInformation={}));var Pt;(function(s){function d(h,u,o,m){return m!==void 0?{name:h,kind:u,location:{uri:o,range:m}}:{name:h,kind:u,location:{uri:o}}}s.create=d})(Pt=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var vi;(function(s){function d(u,o,m,R,W,ge){var se={name:u,detail:o,kind:m,range:R,selectionRange:W};return ge!==void 0&&(se.children=ge),se}s.create=d;function h(u){var o=u;return o&&p.string(o.name)&&p.number(o.kind)&&v.is(o.range)&&v.is(o.selectionRange)&&(o.detail===void 0||p.string(o.detail))&&(o.deprecated===void 0||p.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=h})(vi=e.DocumentSymbol||(e.DocumentSymbol={}));var Ti;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(Ti=e.CodeActionKind||(e.CodeActionKind={}));var ct;(function(s){s.Invoked=1,s.Automatic=2})(ct=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var zn;(function(s){function d(u,o,m){var R={diagnostics:u};return o!=null&&(R.only=o),m!=null&&(R.triggerKind=m),R}s.create=d;function h(u){var o=u;return p.defined(o)&&p.typedArray(o.diagnostics,g.is)&&(o.only===void 0||p.typedArray(o.only,p.string))&&(o.triggerKind===void 0||o.triggerKind===ct.Invoked||o.triggerKind===ct.Automatic)}s.is=h})(zn=e.CodeActionContext||(e.CodeActionContext={}));var Gn;(function(s){function d(u,o,m){var R={title:u},W=!0;return typeof o=="string"?(W=!1,R.kind=o):k.is(o)?R.command=o:R.edit=o,W&&m!==void 0&&(R.kind=m),R}s.create=d;function h(u){var o=u;return o&&p.string(o.title)&&(o.diagnostics===void 0||p.typedArray(o.diagnostics,g.is))&&(o.kind===void 0||p.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||k.is(o.command))&&(o.isPreferred===void 0||p.boolean(o.isPreferred))&&(o.edit===void 0||fn.is(o.edit))}s.is=h})(Gn=e.CodeAction||(e.CodeAction={}));var mn;(function(s){function d(u,o){var m={range:u};return p.defined(o)&&(m.data=o),m}s.create=d;function h(u){var o=u;return p.defined(o)&&v.is(o.range)&&(p.undefined(o.command)||k.is(o.command))}s.is=h})(mn=e.CodeLens||(e.CodeLens={}));var Kn;(function(s){function d(u,o){return{tabSize:u,insertSpaces:o}}s.create=d;function h(u){var o=u;return p.defined(o)&&p.uinteger(o.tabSize)&&p.boolean(o.insertSpaces)}s.is=h})(Kn=e.FormattingOptions||(e.FormattingOptions={}));var yt;(function(s){function d(u,o,m){return{range:u,target:o,data:m}}s.create=d;function h(u){var o=u;return p.defined(o)&&v.is(o.range)&&(p.undefined(o.target)||p.string(o.target))}s.is=h})(yt=e.DocumentLink||(e.DocumentLink={}));var l;(function(s){function d(u,o){return{range:u,parent:o}}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&v.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=h})(l=e.SelectionRange||(e.SelectionRange={}));var _;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(_=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var P;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(P=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var I;(function(s){function d(h){var u=h;return p.objectLiteral(u)&&(u.resultId===void 0||typeof u.resultId=="string")&&Array.isArray(u.data)&&(u.data.length===0||typeof u.data[0]=="number")}s.is=d})(I=e.SemanticTokens||(e.SemanticTokens={}));var re;(function(s){function d(u,o){return{range:u,text:o}}s.create=d;function h(u){var o=u;return o!=null&&v.is(o.range)&&p.string(o.text)}s.is=h})(re=e.InlineValueText||(e.InlineValueText={}));var ee;(function(s){function d(u,o,m){return{range:u,variableName:o,caseSensitiveLookup:m}}s.create=d;function h(u){var o=u;return o!=null&&v.is(o.range)&&p.boolean(o.caseSensitiveLookup)&&(p.string(o.variableName)||o.variableName===void 0)}s.is=h})(ee=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var ue;(function(s){function d(u,o){return{range:u,expression:o}}s.create=d;function h(u){var o=u;return o!=null&&v.is(o.range)&&(p.string(o.expression)||o.expression===void 0)}s.is=h})(ue=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var le;(function(s){function d(u,o){return{frameId:u,stoppedLocation:o}}s.create=d;function h(u){var o=u;return p.defined(o)&&v.is(u.stoppedLocation)}s.is=h})(le=e.InlineValueContext||(e.InlineValueContext={}));var B;(function(s){s.Type=1,s.Parameter=2;function d(h){return h===1||h===2}s.is=d})(B=e.InlayHintKind||(e.InlayHintKind={}));var oe;(function(s){function d(u){return{value:u}}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&(o.tooltip===void 0||p.string(o.tooltip)||$t.is(o.tooltip))&&(o.location===void 0||T.is(o.location))&&(o.command===void 0||k.is(o.command))}s.is=h})(oe=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var Q;(function(s){function d(u,o,m){var R={position:u,label:o};return m!==void 0&&(R.kind=m),R}s.create=d;function h(u){var o=u;return p.objectLiteral(o)&&f.is(o.position)&&(p.string(o.label)||p.typedArray(o.label,oe.is))&&(o.kind===void 0||B.is(o.kind))&&o.textEdits===void 0||p.typedArray(o.textEdits,F.is)&&(o.tooltip===void 0||p.string(o.tooltip)||$t.is(o.tooltip))&&(o.paddingLeft===void 0||p.boolean(o.paddingLeft))&&(o.paddingRight===void 0||p.boolean(o.paddingRight))}s.is=h})(Q=e.InlayHint||(e.InlayHint={}));var pe;(function(s){function d(h){var u=h;return p.objectLiteral(u)&&r.is(u.uri)&&p.string(u.name)}s.is=d})(pe=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var _e;(function(s){function d(m,R,W,ge){return new Le(m,R,W,ge)}s.create=d;function h(m){var R=m;return!!(p.defined(R)&&p.string(R.uri)&&(p.undefined(R.languageId)||p.string(R.languageId))&&p.uinteger(R.lineCount)&&p.func(R.getText)&&p.func(R.positionAt)&&p.func(R.offsetAt))}s.is=h;function u(m,R){for(var W=m.getText(),ge=o(R,function(Gt,Xn){var bs=Gt.range.start.line-Xn.range.start.line;return bs===0?Gt.range.start.character-Xn.range.start.character:bs}),se=W.length,Ve=ge.length-1;Ve>=0;Ve--){var Be=ge[Ve],ut=m.offsetAt(Be.range.start),z=m.offsetAt(Be.range.end);if(z<=se)W=W.substring(0,ut)+Be.newText+W.substring(z,W.length);else throw new Error("Overlapping edit");se=ut}return W}s.applyEdits=u;function o(m,R){if(m.length<=1)return m;var W=m.length/2|0,ge=m.slice(0,W),se=m.slice(W);o(ge,R),o(se,R);for(var Ve=0,Be=0,ut=0;Ve<ge.length&&Be<se.length;){var z=R(ge[Ve],se[Be]);z<=0?m[ut++]=ge[Ve++]:m[ut++]=se[Be++]}for(;Ve<ge.length;)m[ut++]=ge[Ve++];for(;Be<se.length;)m[ut++]=se[Be++];return m}})(_e=e.TextDocument||(e.TextDocument={}));var Le=function(){function s(d,h,u,o){this._uri=d,this._languageId=h,this._version=u,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(d){if(d){var h=this.offsetAt(d.start),u=this.offsetAt(d.end);return this._content.substring(h,u)}return this._content},s.prototype.update=function(d,h){this._content=d.text,this._version=h,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var d=[],h=this._content,u=!0,o=0;o<h.length;o++){u&&(d.push(o),u=!1);var m=h.charAt(o);u=m==="\r"||m===`
`,m==="\r"&&o+1<h.length&&h.charAt(o+1)===`
`&&o++}u&&h.length>0&&d.push(h.length),this._lineOffsets=d}return this._lineOffsets},s.prototype.positionAt=function(d){d=Math.max(Math.min(d,this._content.length),0);var h=this.getLineOffsets(),u=0,o=h.length;if(o===0)return f.create(0,d);for(;u<o;){var m=Math.floor((u+o)/2);h[m]>d?o=m:u=m+1}var R=u-1;return f.create(R,d-h[R])},s.prototype.offsetAt=function(d){var h=this.getLineOffsets();if(d.line>=h.length)return this._content.length;if(d.line<0)return 0;var u=h[d.line],o=d.line+1<h.length?h[d.line+1]:this._content.length;return Math.max(Math.min(u+d.character,o),u)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),p;(function(s){var d=Object.prototype.toString;function h(z){return typeof z<"u"}s.defined=h;function u(z){return typeof z>"u"}s.undefined=u;function o(z){return z===!0||z===!1}s.boolean=o;function m(z){return d.call(z)==="[object String]"}s.string=m;function R(z){return d.call(z)==="[object Number]"}s.number=R;function W(z,Gt,Xn){return d.call(z)==="[object Number]"&&Gt<=z&&z<=Xn}s.numberRange=W;function ge(z){return d.call(z)==="[object Number]"&&-2147483648<=z&&z<=2147483647}s.integer=ge;function se(z){return d.call(z)==="[object Number]"&&0<=z&&z<=2147483647}s.uinteger=se;function Ve(z){return d.call(z)==="[object Function]"}s.func=Ve;function Be(z){return z!==null&&typeof z=="object"}s.objectLiteral=Be;function ut(z,Gt){return Array.isArray(z)&&z.every(Gt)}s.typedArray=ut})(p||(p={}))})});var fe=x(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.ProtocolNotificationType=we.ProtocolNotificationType0=we.ProtocolRequestType=we.ProtocolRequestType0=we.RegistrationType=we.MessageDirection=void 0;var tn=Mt(),nl;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(nl=we.MessageDirection||(we.MessageDirection={}));var Io=class{constructor(e){this.method=e}};we.RegistrationType=Io;var qo=class extends tn.RequestType0{constructor(e){super(e)}};we.ProtocolRequestType0=qo;var Mo=class extends tn.RequestType{constructor(e){super(e,tn.ParameterStructures.byName)}};we.ProtocolRequestType=Mo;var Fo=class extends tn.NotificationType0{constructor(e){super(e)}};we.ProtocolNotificationType0=Fo;var Ao=class extends tn.NotificationType{constructor(e){super(e,tn.ParameterStructures.byName)}};we.ProtocolNotificationType=Ao});var fr=x(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.objectLiteral=ye.typedArray=ye.stringArray=ye.array=ye.func=ye.error=ye.number=ye.string=ye.boolean=void 0;function rl(t){return t===!0||t===!1}ye.boolean=rl;function ea(t){return typeof t=="string"||t instanceof String}ye.string=ea;function il(t){return typeof t=="number"||t instanceof Number}ye.number=il;function ol(t){return t instanceof Error}ye.error=ol;function sl(t){return typeof t=="function"}ye.func=sl;function ta(t){return Array.isArray(t)}ye.array=ta;function al(t){return ta(t)&&t.every(e=>ea(e))}ye.stringArray=al;function cl(t,e){return Array.isArray(t)&&t.every(e)}ye.typedArray=cl;function ul(t){return t!==null&&typeof t=="object"}ye.objectLiteral=ul});var ra=x(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.ImplementationRequest=void 0;var na=fe(),ll;(function(t){t.method="textDocument/implementation",t.messageDirection=na.MessageDirection.clientToServer,t.type=new na.ProtocolRequestType(t.method)})(ll=Cn.ImplementationRequest||(Cn.ImplementationRequest={}))});var oa=x(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.TypeDefinitionRequest=void 0;var ia=fe(),dl;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=ia.MessageDirection.clientToServer,t.type=new ia.ProtocolRequestType(t.method)})(dl=kn.TypeDefinitionRequest||(kn.TypeDefinitionRequest={}))});var sa=x(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.DidChangeWorkspaceFoldersNotification=bt.WorkspaceFoldersRequest=void 0;var hr=fe(),fl;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=hr.MessageDirection.serverToClient,t.type=new hr.ProtocolRequestType0(t.method)})(fl=bt.WorkspaceFoldersRequest||(bt.WorkspaceFoldersRequest={}));var hl;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=hr.MessageDirection.clientToServer,t.type=new hr.ProtocolNotificationType(t.method)})(hl=bt.DidChangeWorkspaceFoldersNotification||(bt.DidChangeWorkspaceFoldersNotification={}))});var ca=x(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.ConfigurationRequest=void 0;var aa=fe(),gl;(function(t){t.method="workspace/configuration",t.messageDirection=aa.MessageDirection.serverToClient,t.type=new aa.ProtocolRequestType(t.method)})(gl=En.ConfigurationRequest||(En.ConfigurationRequest={}))});var ua=x(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.ColorPresentationRequest=_t.DocumentColorRequest=void 0;var gr=fe(),pl;(function(t){t.method="textDocument/documentColor",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method)})(pl=_t.DocumentColorRequest||(_t.DocumentColorRequest={}));var ml;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method)})(ml=_t.ColorPresentationRequest||(_t.ColorPresentationRequest={}))});var da=x(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.FoldingRangeRequest=void 0;var la=fe(),yl;(function(t){t.method="textDocument/foldingRange",t.messageDirection=la.MessageDirection.clientToServer,t.type=new la.ProtocolRequestType(t.method)})(yl=Nn.FoldingRangeRequest||(Nn.FoldingRangeRequest={}))});var ha=x(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.DeclarationRequest=void 0;var fa=fe(),vl;(function(t){t.method="textDocument/declaration",t.messageDirection=fa.MessageDirection.clientToServer,t.type=new fa.ProtocolRequestType(t.method)})(vl=Sn.DeclarationRequest||(Sn.DeclarationRequest={}))});var pa=x(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.SelectionRangeRequest=void 0;var ga=fe(),Tl;(function(t){t.method="textDocument/selectionRange",t.messageDirection=ga.MessageDirection.clientToServer,t.type=new ga.ProtocolRequestType(t.method)})(Tl=Pn.SelectionRangeRequest||(Pn.SelectionRangeRequest={}))});var ma=x(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.WorkDoneProgressCancelNotification=Ge.WorkDoneProgressCreateRequest=Ge.WorkDoneProgress=void 0;var bl=Mt(),pr=fe(),_l;(function(t){t.type=new bl.ProgressType;function e(n){return n===t.type}t.is=e})(_l=Ge.WorkDoneProgress||(Ge.WorkDoneProgress={}));var Rl;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=pr.MessageDirection.serverToClient,t.type=new pr.ProtocolRequestType(t.method)})(Rl=Ge.WorkDoneProgressCreateRequest||(Ge.WorkDoneProgressCreateRequest={}));var Dl;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=pr.MessageDirection.clientToServer,t.type=new pr.ProtocolNotificationType(t.method)})(Dl=Ge.WorkDoneProgressCancelNotification||(Ge.WorkDoneProgressCancelNotification={}))});var ya=x(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.CallHierarchyOutgoingCallsRequest=Ke.CallHierarchyIncomingCallsRequest=Ke.CallHierarchyPrepareRequest=void 0;var nn=fe(),Cl;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(Cl=Ke.CallHierarchyPrepareRequest||(Ke.CallHierarchyPrepareRequest={}));var kl;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(kl=Ke.CallHierarchyIncomingCallsRequest||(Ke.CallHierarchyIncomingCallsRequest={}));var El;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(El=Ke.CallHierarchyOutgoingCallsRequest||(Ke.CallHierarchyOutgoingCallsRequest={}))});var va=x(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.SemanticTokensRefreshRequest=ve.SemanticTokensRangeRequest=ve.SemanticTokensDeltaRequest=ve.SemanticTokensRequest=ve.SemanticTokensRegistrationType=ve.TokenFormat=void 0;var gt=fe(),Nl;(function(t){t.Relative="relative"})(Nl=ve.TokenFormat||(ve.TokenFormat={}));var mr;(function(t){t.method="textDocument/semanticTokens",t.type=new gt.RegistrationType(t.method)})(mr=ve.SemanticTokensRegistrationType||(ve.SemanticTokensRegistrationType={}));var Sl;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=gt.MessageDirection.clientToServer,t.type=new gt.ProtocolRequestType(t.method),t.registrationMethod=mr.method})(Sl=ve.SemanticTokensRequest||(ve.SemanticTokensRequest={}));var Pl;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=gt.MessageDirection.clientToServer,t.type=new gt.ProtocolRequestType(t.method),t.registrationMethod=mr.method})(Pl=ve.SemanticTokensDeltaRequest||(ve.SemanticTokensDeltaRequest={}));var wl;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=gt.MessageDirection.clientToServer,t.type=new gt.ProtocolRequestType(t.method),t.registrationMethod=mr.method})(wl=ve.SemanticTokensRangeRequest||(ve.SemanticTokensRangeRequest={}));var xl;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=gt.MessageDirection.serverToClient,t.type=new gt.ProtocolRequestType0(t.method)})(xl=ve.SemanticTokensRefreshRequest||(ve.SemanticTokensRefreshRequest={}))});var ba=x(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.ShowDocumentRequest=void 0;var Ta=fe(),Ol;(function(t){t.method="window/showDocument",t.messageDirection=Ta.MessageDirection.serverToClient,t.type=new Ta.ProtocolRequestType(t.method)})(Ol=wn.ShowDocumentRequest||(wn.ShowDocumentRequest={}))});var Ra=x(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.LinkedEditingRangeRequest=void 0;var _a=fe(),Il;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=_a.MessageDirection.clientToServer,t.type=new _a.ProtocolRequestType(t.method)})(Il=xn.LinkedEditingRangeRequest||(xn.LinkedEditingRangeRequest={}))});var Da=x(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.WillDeleteFilesRequest=he.DidDeleteFilesNotification=he.DidRenameFilesNotification=he.WillRenameFilesRequest=he.DidCreateFilesNotification=he.WillCreateFilesRequest=he.FileOperationPatternKind=void 0;var je=fe(),ql;(function(t){t.file="file",t.folder="folder"})(ql=he.FileOperationPatternKind||(he.FileOperationPatternKind={}));var Ml;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=je.MessageDirection.clientToServer,t.type=new je.ProtocolRequestType(t.method)})(Ml=he.WillCreateFilesRequest||(he.WillCreateFilesRequest={}));var Fl;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=je.MessageDirection.clientToServer,t.type=new je.ProtocolNotificationType(t.method)})(Fl=he.DidCreateFilesNotification||(he.DidCreateFilesNotification={}));var Al;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=je.MessageDirection.clientToServer,t.type=new je.ProtocolRequestType(t.method)})(Al=he.WillRenameFilesRequest||(he.WillRenameFilesRequest={}));var Ll;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=je.MessageDirection.clientToServer,t.type=new je.ProtocolNotificationType(t.method)})(Ll=he.DidRenameFilesNotification||(he.DidRenameFilesNotification={}));var jl;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=je.MessageDirection.clientToServer,t.type=new je.ProtocolNotificationType(t.method)})(jl=he.DidDeleteFilesNotification||(he.DidDeleteFilesNotification={}));var Wl;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=je.MessageDirection.clientToServer,t.type=new je.ProtocolRequestType(t.method)})(Wl=he.WillDeleteFilesRequest||(he.WillDeleteFilesRequest={}))});var ka=x(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.MonikerRequest=Xe.MonikerKind=Xe.UniquenessLevel=void 0;var Ca=fe(),Hl;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Hl=Xe.UniquenessLevel||(Xe.UniquenessLevel={}));var Ul;(function(t){t.$import="import",t.$export="export",t.local="local"})(Ul=Xe.MonikerKind||(Xe.MonikerKind={}));var Vl;(function(t){t.method="textDocument/moniker",t.messageDirection=Ca.MessageDirection.clientToServer,t.type=new Ca.ProtocolRequestType(t.method)})(Vl=Xe.MonikerRequest||(Xe.MonikerRequest={}))});var Ea=x(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.TypeHierarchySubtypesRequest=Ye.TypeHierarchySupertypesRequest=Ye.TypeHierarchyPrepareRequest=void 0;var rn=fe(),Bl;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(Bl=Ye.TypeHierarchyPrepareRequest||(Ye.TypeHierarchyPrepareRequest={}));var $l;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})($l=Ye.TypeHierarchySupertypesRequest||(Ye.TypeHierarchySupertypesRequest={}));var zl;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(zl=Ye.TypeHierarchySubtypesRequest||(Ye.TypeHierarchySubtypesRequest={}))});var Na=x(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.InlineValueRefreshRequest=Rt.InlineValueRequest=void 0;var yr=fe(),Gl;(function(t){t.method="textDocument/inlineValue",t.messageDirection=yr.MessageDirection.clientToServer,t.type=new yr.ProtocolRequestType(t.method)})(Gl=Rt.InlineValueRequest||(Rt.InlineValueRequest={}));var Kl;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=yr.MessageDirection.serverToClient,t.type=new yr.ProtocolRequestType0(t.method)})(Kl=Rt.InlineValueRefreshRequest||(Rt.InlineValueRefreshRequest={}))});var Sa=x(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.InlayHintRefreshRequest=Je.InlayHintResolveRequest=Je.InlayHintRequest=void 0;var on=fe(),Xl;(function(t){t.method="textDocument/inlayHint",t.messageDirection=on.MessageDirection.clientToServer,t.type=new on.ProtocolRequestType(t.method)})(Xl=Je.InlayHintRequest||(Je.InlayHintRequest={}));var Yl;(function(t){t.method="inlayHint/resolve",t.messageDirection=on.MessageDirection.clientToServer,t.type=new on.ProtocolRequestType(t.method)})(Yl=Je.InlayHintResolveRequest||(Je.InlayHintResolveRequest={}));var Jl;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=on.MessageDirection.serverToClient,t.type=new on.ProtocolRequestType0(t.method)})(Jl=Je.InlayHintRefreshRequest||(Je.InlayHintRefreshRequest={}))});var wa=x(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.DiagnosticRefreshRequest=De.WorkspaceDiagnosticRequest=De.DocumentDiagnosticRequest=De.DocumentDiagnosticReportKind=De.DiagnosticServerCancellationData=void 0;var Pa=Mt(),Ql=fr(),sn=fe(),Zl;(function(t){function e(n){let r=n;return r&&Ql.boolean(r.retriggerRequest)}t.is=e})(Zl=De.DiagnosticServerCancellationData||(De.DiagnosticServerCancellationData={}));var ed;(function(t){t.Full="full",t.Unchanged="unchanged"})(ed=De.DocumentDiagnosticReportKind||(De.DocumentDiagnosticReportKind={}));var td;(function(t){t.method="textDocument/diagnostic",t.messageDirection=sn.MessageDirection.clientToServer,t.type=new sn.ProtocolRequestType(t.method),t.partialResult=new Pa.ProgressType})(td=De.DocumentDiagnosticRequest||(De.DocumentDiagnosticRequest={}));var nd;(function(t){t.method="workspace/diagnostic",t.messageDirection=sn.MessageDirection.clientToServer,t.type=new sn.ProtocolRequestType(t.method),t.partialResult=new Pa.ProgressType})(nd=De.WorkspaceDiagnosticRequest||(De.WorkspaceDiagnosticRequest={}));var rd;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=sn.MessageDirection.serverToClient,t.type=new sn.ProtocolRequestType0(t.method)})(rd=De.DiagnosticRefreshRequest||(De.DiagnosticRefreshRequest={}))});var Ia=x(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.DidCloseNotebookDocumentNotification=J.DidSaveNotebookDocumentNotification=J.DidChangeNotebookDocumentNotification=J.NotebookCellArrayChange=J.DidOpenNotebookDocumentNotification=J.NotebookDocumentSyncRegistrationType=J.NotebookDocument=J.NotebookCell=J.ExecutionSummary=J.NotebookCellKind=void 0;var On=dr(),Qe=fr(),tt=fe(),xa;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(xa=J.NotebookCellKind||(J.NotebookCellKind={}));var Oa;(function(t){function e(i,a){let f={executionOrder:i};return(a===!0||a===!1)&&(f.success=a),f}t.create=e;function n(i){let a=i;return Qe.objectLiteral(a)&&On.uinteger.is(a.executionOrder)&&(a.success===void 0||Qe.boolean(a.success))}t.is=n;function r(i,a){return i===a?!0:i==null||a===null||a===void 0?!1:i.executionOrder===a.executionOrder&&i.success===a.success}t.equals=r})(Oa=J.ExecutionSummary||(J.ExecutionSummary={}));var Lo;(function(t){function e(a,f){return{kind:a,document:f}}t.create=e;function n(a){let f=a;return Qe.objectLiteral(f)&&xa.is(f.kind)&&On.DocumentUri.is(f.document)&&(f.metadata===void 0||Qe.objectLiteral(f.metadata))}t.is=n;function r(a,f){let v=new Set;return a.document!==f.document&&v.add("document"),a.kind!==f.kind&&v.add("kind"),a.executionSummary!==f.executionSummary&&v.add("executionSummary"),(a.metadata!==void 0||f.metadata!==void 0)&&!i(a.metadata,f.metadata)&&v.add("metadata"),(a.executionSummary!==void 0||f.executionSummary!==void 0)&&!Oa.equals(a.executionSummary,f.executionSummary)&&v.add("executionSummary"),v}t.diff=r;function i(a,f){if(a===f)return!0;if(a==null||f===null||f===void 0||typeof a!=typeof f||typeof a!="object")return!1;let v=Array.isArray(a),T=Array.isArray(f);if(v!==T)return!1;if(v&&T){if(a.length!==f.length)return!1;for(let D=0;D<a.length;D++)if(!i(a[D],f[D]))return!1}if(Qe.objectLiteral(a)&&Qe.objectLiteral(f)){let D=Object.keys(a),C=Object.keys(f);if(D.length!==C.length||(D.sort(),C.sort(),!i(D,C)))return!1;for(let S=0;S<D.length;S++){let N=D[S];if(!i(a[N],f[N]))return!1}}return!0}})(Lo=J.NotebookCell||(J.NotebookCell={}));var id;(function(t){function e(r,i,a,f){return{uri:r,notebookType:i,version:a,cells:f}}t.create=e;function n(r){let i=r;return Qe.objectLiteral(i)&&Qe.string(i.uri)&&On.integer.is(i.version)&&Qe.typedArray(i.cells,Lo.is)}t.is=n})(id=J.NotebookDocument||(J.NotebookDocument={}));var In;(function(t){t.method="notebookDocument/sync",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.RegistrationType(t.method)})(In=J.NotebookDocumentSyncRegistrationType||(J.NotebookDocumentSyncRegistrationType={}));var od;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.ProtocolNotificationType(t.method),t.registrationMethod=In.method})(od=J.DidOpenNotebookDocumentNotification||(J.DidOpenNotebookDocumentNotification={}));var sd;(function(t){function e(r){let i=r;return Qe.objectLiteral(i)&&On.uinteger.is(i.start)&&On.uinteger.is(i.deleteCount)&&(i.cells===void 0||Qe.typedArray(i.cells,Lo.is))}t.is=e;function n(r,i,a){let f={start:r,deleteCount:i};return a!==void 0&&(f.cells=a),f}t.create=n})(sd=J.NotebookCellArrayChange||(J.NotebookCellArrayChange={}));var ad;(function(t){t.method="notebookDocument/didChange",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.ProtocolNotificationType(t.method),t.registrationMethod=In.method})(ad=J.DidChangeNotebookDocumentNotification||(J.DidChangeNotebookDocumentNotification={}));var cd;(function(t){t.method="notebookDocument/didSave",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.ProtocolNotificationType(t.method),t.registrationMethod=In.method})(cd=J.DidSaveNotebookDocumentNotification||(J.DidSaveNotebookDocumentNotification={}));var ud;(function(t){t.method="notebookDocument/didClose",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.ProtocolNotificationType(t.method),t.registrationMethod=In.method})(ud=J.DidCloseNotebookDocumentNotification||(J.DidCloseNotebookDocumentNotification={}))});var Ua=x(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.WorkspaceSymbolRequest=c.CodeActionResolveRequest=c.CodeActionRequest=c.DocumentSymbolRequest=c.DocumentHighlightRequest=c.ReferencesRequest=c.DefinitionRequest=c.SignatureHelpRequest=c.SignatureHelpTriggerKind=c.HoverRequest=c.CompletionResolveRequest=c.CompletionRequest=c.CompletionTriggerKind=c.PublishDiagnosticsNotification=c.WatchKind=c.RelativePattern=c.FileChangeType=c.DidChangeWatchedFilesNotification=c.WillSaveTextDocumentWaitUntilRequest=c.WillSaveTextDocumentNotification=c.TextDocumentSaveReason=c.DidSaveTextDocumentNotification=c.DidCloseTextDocumentNotification=c.DidChangeTextDocumentNotification=c.TextDocumentContentChangeEvent=c.DidOpenTextDocumentNotification=c.TextDocumentSyncKind=c.TelemetryEventNotification=c.LogMessageNotification=c.ShowMessageRequest=c.ShowMessageNotification=c.MessageType=c.DidChangeConfigurationNotification=c.ExitNotification=c.ShutdownRequest=c.InitializedNotification=c.InitializeErrorCodes=c.InitializeRequest=c.WorkDoneProgressOptions=c.TextDocumentRegistrationOptions=c.StaticRegistrationOptions=c.PositionEncodingKind=c.FailureHandlingKind=c.ResourceOperationKind=c.UnregistrationRequest=c.RegistrationRequest=c.DocumentSelector=c.NotebookCellTextDocumentFilter=c.NotebookDocumentFilter=c.TextDocumentFilter=void 0;c.TypeHierarchySubtypesRequest=c.TypeHierarchyPrepareRequest=c.MonikerRequest=c.MonikerKind=c.UniquenessLevel=c.WillDeleteFilesRequest=c.DidDeleteFilesNotification=c.WillRenameFilesRequest=c.DidRenameFilesNotification=c.WillCreateFilesRequest=c.DidCreateFilesNotification=c.FileOperationPatternKind=c.LinkedEditingRangeRequest=c.ShowDocumentRequest=c.SemanticTokensRegistrationType=c.SemanticTokensRefreshRequest=c.SemanticTokensRangeRequest=c.SemanticTokensDeltaRequest=c.SemanticTokensRequest=c.TokenFormat=c.CallHierarchyPrepareRequest=c.CallHierarchyOutgoingCallsRequest=c.CallHierarchyIncomingCallsRequest=c.WorkDoneProgressCancelNotification=c.WorkDoneProgressCreateRequest=c.WorkDoneProgress=c.SelectionRangeRequest=c.DeclarationRequest=c.FoldingRangeRequest=c.ColorPresentationRequest=c.DocumentColorRequest=c.ConfigurationRequest=c.DidChangeWorkspaceFoldersNotification=c.WorkspaceFoldersRequest=c.TypeDefinitionRequest=c.ImplementationRequest=c.ApplyWorkspaceEditRequest=c.ExecuteCommandRequest=c.PrepareRenameRequest=c.RenameRequest=c.PrepareSupportDefaultBehavior=c.DocumentOnTypeFormattingRequest=c.DocumentRangeFormattingRequest=c.DocumentFormattingRequest=c.DocumentLinkResolveRequest=c.DocumentLinkRequest=c.CodeLensRefreshRequest=c.CodeLensResolveRequest=c.CodeLensRequest=c.WorkspaceSymbolResolveRequest=void 0;c.DidCloseNotebookDocumentNotification=c.DidSaveNotebookDocumentNotification=c.DidChangeNotebookDocumentNotification=c.NotebookCellArrayChange=c.DidOpenNotebookDocumentNotification=c.NotebookDocumentSyncRegistrationType=c.NotebookDocument=c.NotebookCell=c.ExecutionSummary=c.NotebookCellKind=c.DiagnosticRefreshRequest=c.WorkspaceDiagnosticRequest=c.DocumentDiagnosticRequest=c.DocumentDiagnosticReportKind=c.DiagnosticServerCancellationData=c.InlayHintRefreshRequest=c.InlayHintResolveRequest=c.InlayHintRequest=c.InlineValueRefreshRequest=c.InlineValueRequest=c.TypeHierarchySupertypesRequest=void 0;var E=fe(),qa=dr(),Ce=fr(),ld=ra();Object.defineProperty(c,"ImplementationRequest",{enumerable:!0,get:function(){return ld.ImplementationRequest}});var dd=oa();Object.defineProperty(c,"TypeDefinitionRequest",{enumerable:!0,get:function(){return dd.TypeDefinitionRequest}});var Ma=sa();Object.defineProperty(c,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Ma.WorkspaceFoldersRequest}});Object.defineProperty(c,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Ma.DidChangeWorkspaceFoldersNotification}});var fd=ca();Object.defineProperty(c,"ConfigurationRequest",{enumerable:!0,get:function(){return fd.ConfigurationRequest}});var Fa=ua();Object.defineProperty(c,"DocumentColorRequest",{enumerable:!0,get:function(){return Fa.DocumentColorRequest}});Object.defineProperty(c,"ColorPresentationRequest",{enumerable:!0,get:function(){return Fa.ColorPresentationRequest}});var hd=da();Object.defineProperty(c,"FoldingRangeRequest",{enumerable:!0,get:function(){return hd.FoldingRangeRequest}});var gd=ha();Object.defineProperty(c,"DeclarationRequest",{enumerable:!0,get:function(){return gd.DeclarationRequest}});var pd=pa();Object.defineProperty(c,"SelectionRangeRequest",{enumerable:!0,get:function(){return pd.SelectionRangeRequest}});var jo=ma();Object.defineProperty(c,"WorkDoneProgress",{enumerable:!0,get:function(){return jo.WorkDoneProgress}});Object.defineProperty(c,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return jo.WorkDoneProgressCreateRequest}});Object.defineProperty(c,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return jo.WorkDoneProgressCancelNotification}});var Wo=ya();Object.defineProperty(c,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Wo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(c,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Wo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(c,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Wo.CallHierarchyPrepareRequest}});var an=va();Object.defineProperty(c,"TokenFormat",{enumerable:!0,get:function(){return an.TokenFormat}});Object.defineProperty(c,"SemanticTokensRequest",{enumerable:!0,get:function(){return an.SemanticTokensRequest}});Object.defineProperty(c,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return an.SemanticTokensDeltaRequest}});Object.defineProperty(c,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return an.SemanticTokensRangeRequest}});Object.defineProperty(c,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return an.SemanticTokensRefreshRequest}});Object.defineProperty(c,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return an.SemanticTokensRegistrationType}});var md=ba();Object.defineProperty(c,"ShowDocumentRequest",{enumerable:!0,get:function(){return md.ShowDocumentRequest}});var yd=Ra();Object.defineProperty(c,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return yd.LinkedEditingRangeRequest}});var Ft=Da();Object.defineProperty(c,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ft.FileOperationPatternKind}});Object.defineProperty(c,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ft.DidCreateFilesNotification}});Object.defineProperty(c,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ft.WillCreateFilesRequest}});Object.defineProperty(c,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ft.DidRenameFilesNotification}});Object.defineProperty(c,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ft.WillRenameFilesRequest}});Object.defineProperty(c,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ft.DidDeleteFilesNotification}});Object.defineProperty(c,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ft.WillDeleteFilesRequest}});var Ho=ka();Object.defineProperty(c,"UniquenessLevel",{enumerable:!0,get:function(){return Ho.UniquenessLevel}});Object.defineProperty(c,"MonikerKind",{enumerable:!0,get:function(){return Ho.MonikerKind}});Object.defineProperty(c,"MonikerRequest",{enumerable:!0,get:function(){return Ho.MonikerRequest}});var Uo=Ea();Object.defineProperty(c,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchyPrepareRequest}});Object.defineProperty(c,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchySubtypesRequest}});Object.defineProperty(c,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchySupertypesRequest}});var Aa=Na();Object.defineProperty(c,"InlineValueRequest",{enumerable:!0,get:function(){return Aa.InlineValueRequest}});Object.defineProperty(c,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Aa.InlineValueRefreshRequest}});var Vo=Sa();Object.defineProperty(c,"InlayHintRequest",{enumerable:!0,get:function(){return Vo.InlayHintRequest}});Object.defineProperty(c,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Vo.InlayHintResolveRequest}});Object.defineProperty(c,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Vo.InlayHintRefreshRequest}});var qn=wa();Object.defineProperty(c,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return qn.DiagnosticServerCancellationData}});Object.defineProperty(c,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return qn.DocumentDiagnosticReportKind}});Object.defineProperty(c,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return qn.DocumentDiagnosticRequest}});Object.defineProperty(c,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return qn.WorkspaceDiagnosticRequest}});Object.defineProperty(c,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return qn.DiagnosticRefreshRequest}});var nt=Ia();Object.defineProperty(c,"NotebookCellKind",{enumerable:!0,get:function(){return nt.NotebookCellKind}});Object.defineProperty(c,"ExecutionSummary",{enumerable:!0,get:function(){return nt.ExecutionSummary}});Object.defineProperty(c,"NotebookCell",{enumerable:!0,get:function(){return nt.NotebookCell}});Object.defineProperty(c,"NotebookDocument",{enumerable:!0,get:function(){return nt.NotebookDocument}});Object.defineProperty(c,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return nt.NotebookDocumentSyncRegistrationType}});Object.defineProperty(c,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return nt.DidOpenNotebookDocumentNotification}});Object.defineProperty(c,"NotebookCellArrayChange",{enumerable:!0,get:function(){return nt.NotebookCellArrayChange}});Object.defineProperty(c,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return nt.DidChangeNotebookDocumentNotification}});Object.defineProperty(c,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return nt.DidSaveNotebookDocumentNotification}});Object.defineProperty(c,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return nt.DidCloseNotebookDocumentNotification}});var La;(function(t){function e(n){let r=n;return Ce.string(r.language)||Ce.string(r.scheme)||Ce.string(r.pattern)}t.is=e})(La=c.TextDocumentFilter||(c.TextDocumentFilter={}));var ja;(function(t){function e(n){let r=n;return Ce.objectLiteral(r)&&(Ce.string(r.notebookType)||Ce.string(r.scheme)||Ce.string(r.pattern))}t.is=e})(ja=c.NotebookDocumentFilter||(c.NotebookDocumentFilter={}));var Wa;(function(t){function e(n){let r=n;return Ce.objectLiteral(r)&&(Ce.string(r.notebook)||ja.is(r.notebook))&&(r.language===void 0||Ce.string(r.language))}t.is=e})(Wa=c.NotebookCellTextDocumentFilter||(c.NotebookCellTextDocumentFilter={}));var Ha;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Ce.string(r)&&!La.is(r)&&!Wa.is(r))return!1;return!0}t.is=e})(Ha=c.DocumentSelector||(c.DocumentSelector={}));var vd;(function(t){t.method="client/registerCapability",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType(t.method)})(vd=c.RegistrationRequest||(c.RegistrationRequest={}));var Td;(function(t){t.method="client/unregisterCapability",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType(t.method)})(Td=c.UnregistrationRequest||(c.UnregistrationRequest={}));var bd;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(bd=c.ResourceOperationKind||(c.ResourceOperationKind={}));var _d;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(_d=c.FailureHandlingKind||(c.FailureHandlingKind={}));var Rd;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Rd=c.PositionEncodingKind||(c.PositionEncodingKind={}));var Dd;(function(t){function e(n){let r=n;return r&&Ce.string(r.id)&&r.id.length>0}t.hasId=e})(Dd=c.StaticRegistrationOptions||(c.StaticRegistrationOptions={}));var Cd;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Ha.is(r.documentSelector))}t.is=e})(Cd=c.TextDocumentRegistrationOptions||(c.TextDocumentRegistrationOptions={}));var kd;(function(t){function e(r){let i=r;return Ce.objectLiteral(i)&&(i.workDoneProgress===void 0||Ce.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&Ce.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(kd=c.WorkDoneProgressOptions||(c.WorkDoneProgressOptions={}));var Ed;(function(t){t.method="initialize",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Ed=c.InitializeRequest||(c.InitializeRequest={}));var Nd;(function(t){t.unknownProtocolVersion=1})(Nd=c.InitializeErrorCodes||(c.InitializeErrorCodes={}));var Sd;(function(t){t.method="initialized",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Sd=c.InitializedNotification||(c.InitializedNotification={}));var Pd;(function(t){t.method="shutdown",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType0(t.method)})(Pd=c.ShutdownRequest||(c.ShutdownRequest={}));var wd;(function(t){t.method="exit",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType0(t.method)})(wd=c.ExitNotification||(c.ExitNotification={}));var xd;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(xd=c.DidChangeConfigurationNotification||(c.DidChangeConfigurationNotification={}));var Od;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Od=c.MessageType||(c.MessageType={}));var Id;(function(t){t.method="window/showMessage",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolNotificationType(t.method)})(Id=c.ShowMessageNotification||(c.ShowMessageNotification={}));var qd;(function(t){t.method="window/showMessageRequest",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType(t.method)})(qd=c.ShowMessageRequest||(c.ShowMessageRequest={}));var Md;(function(t){t.method="window/logMessage",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolNotificationType(t.method)})(Md=c.LogMessageNotification||(c.LogMessageNotification={}));var Fd;(function(t){t.method="telemetry/event",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolNotificationType(t.method)})(Fd=c.TelemetryEventNotification||(c.TelemetryEventNotification={}));var Ad;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Ad=c.TextDocumentSyncKind||(c.TextDocumentSyncKind={}));var Ld;(function(t){t.method="textDocument/didOpen",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Ld=c.DidOpenTextDocumentNotification||(c.DidOpenTextDocumentNotification={}));var jd;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(jd=c.TextDocumentContentChangeEvent||(c.TextDocumentContentChangeEvent={}));var Wd;(function(t){t.method="textDocument/didChange",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Wd=c.DidChangeTextDocumentNotification||(c.DidChangeTextDocumentNotification={}));var Hd;(function(t){t.method="textDocument/didClose",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Hd=c.DidCloseTextDocumentNotification||(c.DidCloseTextDocumentNotification={}));var Ud;(function(t){t.method="textDocument/didSave",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Ud=c.DidSaveTextDocumentNotification||(c.DidSaveTextDocumentNotification={}));var Vd;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Vd=c.TextDocumentSaveReason||(c.TextDocumentSaveReason={}));var Bd;(function(t){t.method="textDocument/willSave",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Bd=c.WillSaveTextDocumentNotification||(c.WillSaveTextDocumentNotification={}));var $d;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})($d=c.WillSaveTextDocumentWaitUntilRequest||(c.WillSaveTextDocumentWaitUntilRequest={}));var zd;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(zd=c.DidChangeWatchedFilesNotification||(c.DidChangeWatchedFilesNotification={}));var Gd;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Gd=c.FileChangeType||(c.FileChangeType={}));var Kd;(function(t){function e(n){let r=n;return Ce.objectLiteral(r)&&(qa.URI.is(r.baseUri)||qa.WorkspaceFolder.is(r.baseUri))&&Ce.string(r.pattern)}t.is=e})(Kd=c.RelativePattern||(c.RelativePattern={}));var Xd;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Xd=c.WatchKind||(c.WatchKind={}));var Yd;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolNotificationType(t.method)})(Yd=c.PublishDiagnosticsNotification||(c.PublishDiagnosticsNotification={}));var Jd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Jd=c.CompletionTriggerKind||(c.CompletionTriggerKind={}));var Qd;(function(t){t.method="textDocument/completion",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Qd=c.CompletionRequest||(c.CompletionRequest={}));var Zd;(function(t){t.method="completionItem/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Zd=c.CompletionResolveRequest||(c.CompletionResolveRequest={}));var ef;(function(t){t.method="textDocument/hover",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(ef=c.HoverRequest||(c.HoverRequest={}));var tf;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(tf=c.SignatureHelpTriggerKind||(c.SignatureHelpTriggerKind={}));var nf;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(nf=c.SignatureHelpRequest||(c.SignatureHelpRequest={}));var rf;(function(t){t.method="textDocument/definition",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(rf=c.DefinitionRequest||(c.DefinitionRequest={}));var of;(function(t){t.method="textDocument/references",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(of=c.ReferencesRequest||(c.ReferencesRequest={}));var sf;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(sf=c.DocumentHighlightRequest||(c.DocumentHighlightRequest={}));var af;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(af=c.DocumentSymbolRequest||(c.DocumentSymbolRequest={}));var cf;(function(t){t.method="textDocument/codeAction",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(cf=c.CodeActionRequest||(c.CodeActionRequest={}));var uf;(function(t){t.method="codeAction/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(uf=c.CodeActionResolveRequest||(c.CodeActionResolveRequest={}));var lf;(function(t){t.method="workspace/symbol",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(lf=c.WorkspaceSymbolRequest||(c.WorkspaceSymbolRequest={}));var df;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(df=c.WorkspaceSymbolResolveRequest||(c.WorkspaceSymbolResolveRequest={}));var ff;(function(t){t.method="textDocument/codeLens",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(ff=c.CodeLensRequest||(c.CodeLensRequest={}));var hf;(function(t){t.method="codeLens/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(hf=c.CodeLensResolveRequest||(c.CodeLensResolveRequest={}));var gf;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType0(t.method)})(gf=c.CodeLensRefreshRequest||(c.CodeLensRefreshRequest={}));var pf;(function(t){t.method="textDocument/documentLink",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(pf=c.DocumentLinkRequest||(c.DocumentLinkRequest={}));var mf;(function(t){t.method="documentLink/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(mf=c.DocumentLinkResolveRequest||(c.DocumentLinkResolveRequest={}));var yf;(function(t){t.method="textDocument/formatting",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(yf=c.DocumentFormattingRequest||(c.DocumentFormattingRequest={}));var vf;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(vf=c.DocumentRangeFormattingRequest||(c.DocumentRangeFormattingRequest={}));var Tf;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Tf=c.DocumentOnTypeFormattingRequest||(c.DocumentOnTypeFormattingRequest={}));var bf;(function(t){t.Identifier=1})(bf=c.PrepareSupportDefaultBehavior||(c.PrepareSupportDefaultBehavior={}));var _f;(function(t){t.method="textDocument/rename",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(_f=c.RenameRequest||(c.RenameRequest={}));var Rf;(function(t){t.method="textDocument/prepareRename",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Rf=c.PrepareRenameRequest||(c.PrepareRenameRequest={}));var Df;(function(t){t.method="workspace/executeCommand",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Df=c.ExecuteCommandRequest||(c.ExecuteCommandRequest={}));var Cf;(function(t){t.method="workspace/applyEdit",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType("workspace/applyEdit")})(Cf=c.ApplyWorkspaceEditRequest||(c.ApplyWorkspaceEditRequest={}))});var Ba=x(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.createProtocolConnection=void 0;var Va=Mt();function kf(t,e,n,r){return Va.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Va.createMessageConnection)(t,e,n,r)}vr.createProtocolConnection=kf});var $a=x(xe=>{"use strict";var Ef=xe&&xe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Tr=xe&&xe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ef(e,t,n)};Object.defineProperty(xe,"__esModule",{value:!0});xe.LSPErrorCodes=xe.createProtocolConnection=void 0;Tr(Mt(),xe);Tr(dr(),xe);Tr(fe(),xe);Tr(Ua(),xe);var Nf=Ba();Object.defineProperty(xe,"createProtocolConnection",{enumerable:!0,get:function(){return Nf.createProtocolConnection}});var Sf;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(Sf=xe.LSPErrorCodes||(xe.LSPErrorCodes={}))});var Te=x(rt=>{"use strict";var Pf=rt&&rt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),za=rt&&rt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Pf(e,t,n)};Object.defineProperty(rt,"__esModule",{value:!0});rt.createProtocolConnection=void 0;var wf=Oo();za(Oo(),rt);za($a(),rt);function xf(t,e,n,r){return(0,wf.createMessageConnection)(t,e,n,r)}rt.createProtocolConnection=xf});var Bo=x(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.generateUuid=We.parse=We.isUUID=We.v4=We.empty=void 0;var Mn=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},U=class extends Mn{constructor(){super([U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),"-",U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),"-","4",U._randomHex(),U._randomHex(),U._randomHex(),"-",U._oneOf(U._timeHighBits),U._randomHex(),U._randomHex(),U._randomHex(),"-",U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return U._oneOf(U._chars)}};U._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];U._timeHighBits=["8","9","a","b"];We.empty=new Mn("00000000-0000-0000-0000-000000000000");function Ga(){return new U}We.v4=Ga;var Of=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ka(t){return Of.test(t)}We.isUUID=Ka;function If(t){if(!Ka(t))throw new Error("invalid uuid");return new Mn(t)}We.parse=If;function qf(){return Ga().asHex()}We.generateUuid=qf});var Xa=x(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.attachPartialResult=Ct.ProgressFeature=Ct.attachWorkDone=void 0;var Dt=Te(),Mf=Bo(),it=class{constructor(e,n){this._connection=e,this._token=n,it.Instances.set(this._token,this)}begin(e,n,r,i){let a={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(Dt.WorkDoneProgress.type,this._token,a)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(Dt.WorkDoneProgress.type,this._token,r)}done(){it.Instances.delete(this._token),this._connection.sendProgress(Dt.WorkDoneProgress.type,this._token,{kind:"end"})}};it.Instances=new Map;var br=class extends it{constructor(e,n){super(e,n),this._source=new Dt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Fn=class{constructor(){}begin(){}report(){}done(){}},_r=class extends Fn{constructor(){super(),this._source=new Dt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Ff(t,e){if(e===void 0||e.workDoneToken===void 0)return new Fn;let n=e.workDoneToken;return delete e.workDoneToken,new it(t,n)}Ct.attachWorkDone=Ff;var Af=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Dt.WorkDoneProgressCancelNotification.type,n=>{let r=it.Instances.get(n.token);(r instanceof br||r instanceof _r)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Fn:new it(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Mf.generateUuid)();return this.connection.sendRequest(Dt.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new br(this.connection,e))}else return Promise.resolve(new _r)}};Ct.ProgressFeature=Af;var $o;(function(t){t.type=new Dt.ProgressType})($o||($o={}));var zo=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress($o.type,this._token,e)}};function Lf(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new zo(t,n)}Ct.attachPartialResult=Lf});var Ya=x(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ConfigurationFeature=void 0;var jf=Te(),Wf=Jn(),Hf=t=>class extends t{getConfiguration(e){return e?Wf.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(jf.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};Rr.ConfigurationFeature=Hf});var Ja=x(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.WorkspaceFoldersFeature=void 0;var Dr=Te(),Uf=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Dr.Emitter,this.connection.onNotification(Dr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Dr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Dr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Cr.WorkspaceFoldersFeature=Uf});var Qa=x(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.CallHierarchyFeature=void 0;var Go=Te(),Vf=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Go.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{let n=Go.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=Go.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};kr.CallHierarchyFeature=Vf});var Xo=x(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.SemanticTokensBuilder=kt.SemanticTokensDiff=kt.SemanticTokensFeature=void 0;var Er=Te(),Bf=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Er.SemanticTokensRefreshRequest.type),on:e=>{let n=Er.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=Er.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=Er.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};kt.SemanticTokensFeature=Bf;var Nr=class{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,a=n-1;for(;i>=r&&a>=r&&this.originalSequence[i]===this.modifiedSequence[a];)i--,a--;(i<r||a<r)&&(i++,a++);let f=i-r+1,v=this.modifiedSequence.slice(r,a+1);return v.length===1&&v[0]===this.originalSequence[i]?[{start:r,deleteCount:f-1}]:[{start:r,deleteCount:f,data:v}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};kt.SemanticTokensDiff=Nr;var Ko=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,a){let f=e,v=n;this._dataLen>0&&(f-=this._prevLine,f===0&&(v-=this._prevChar)),this._data[this._dataLen++]=f,this._data[this._dataLen++]=v,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=a,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Nr(this._prevData,this._data).computeDiff()}:this.build()}};kt.SemanticTokensBuilder=Ko});var Za=x(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.ShowDocumentFeature=void 0;var $f=Te(),zf=t=>class extends t{showDocument(e){return this.connection.sendRequest($f.ShowDocumentRequest.type,e)}};Sr.ShowDocumentFeature=zf});var ec=x(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.FileOperationsFeature=void 0;var cn=Te(),Gf=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(cn.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(cn.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(cn.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(cn.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(cn.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(cn.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};Pr.FileOperationsFeature=Gf});var tc=x(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.LinkedEditingRangeFeature=void 0;var Kf=Te(),Xf=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(Kf.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};wr.LinkedEditingRangeFeature=Xf});var nc=x(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.TypeHierarchyFeature=void 0;var Yo=Te(),Yf=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(Yo.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{let n=Yo.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:e=>{let n=Yo.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};xr.TypeHierarchyFeature=Yf});var ic=x(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.InlineValueFeature=void 0;var rc=Te(),Jf=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(rc.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(rc.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};Or.InlineValueFeature=Jf});var oc=x(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.InlayHintFeature=void 0;var Jo=Te(),Qf=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Jo.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(Jo.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(Jo.InlayHintResolveRequest.type,(n,r)=>e(n,r))}}};Ir.InlayHintFeature=Qf});var sc=x(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.DiagnosticFeature=void 0;var An=Te(),Zf=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(An.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(An.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(An.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(An.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(An.WorkspaceDiagnosticRequest.partialResult,n)))}}};qr.DiagnosticFeature=Zf});var Zo=x(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.TextDocuments=void 0;var At=Te(),Qo=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new At.Emitter,this._onDidOpen=new At.Emitter,this._onDidClose=new At.Emitter,this._onDidSave=new At.Emitter,this._onWillSave=new At.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=At.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,a=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,a);let f=Object.freeze({document:a});this._onDidOpen.fire(f),this._onDidChangeContent.fire(f)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,a=r.contentChanges;if(a.length===0)return;let{version:f}=i;if(f==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let v=this._syncedDocuments.get(i.uri);v!==void 0&&(v=this._configuration.update(v,a,f),this._syncedDocuments.set(i.uri,v),this._onDidChangeContent.fire(Object.freeze({document:v})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let a=this._syncedDocuments.get(r.textDocument.uri);return a!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:a,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),At.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Mr.TextDocuments=Qo});var ts=x(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.NotebookDocuments=un.NotebookSyncFeature=void 0;var He=Te(),ac=Zo(),eh=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(He.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(He.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(He.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(He.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};un.NotebookSyncFeature=eh;var Et=class{onDidOpenTextDocument(e){return this.openHandler=e,He.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,He.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,He.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return Et.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return Et.NULL_DISPOSE}onDidSaveTextDocument(){return Et.NULL_DISPOSE}};Et.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var es=class{constructor(e){e instanceof ac.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new ac.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new He.Emitter,this._onDidChange=new He.Emitter,this._onDidSave=new He.Emitter,this._onDidClose=new He.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new Et,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let a of i.cellTextDocuments)n.openTextDocument({textDocument:a});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);if(a===void 0)return;a.version=i.notebookDocument.version;let f=a.metadata,v=!1,T=i.change;T.metadata!==void 0&&(v=!0,a.metadata=T.metadata);let D=[],C=[],S=[],N=[];if(T.cells!==void 0){let H=T.cells;if(H.structure!==void 0){let y=H.structure.array;if(a.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),H.structure.didOpen!==void 0)for(let g of H.structure.didOpen)n.openTextDocument({textDocument:g}),D.push(g.uri);if(H.structure.didClose)for(let g of H.structure.didClose)n.closeTextDocument({textDocument:g}),C.push(g.uri)}if(H.data!==void 0){let y=new Map(H.data.map(g=>[g.document,g]));for(let g=0;g<=a.cells.length;g++){let k=y.get(a.cells[g].document);if(k!==void 0){let F=a.cells.splice(g,1,k);if(S.push({old:F[0],new:k}),y.delete(k.document),y.size===0)break}}}if(H.textContent!==void 0)for(let y of H.textContent)n.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),N.push(y.document.uri)}this.updateCellMap(a);let A={notebookDocument:a};v&&(A.metadata={old:f,new:a.metadata});let $=[];for(let H of D)$.push(this.getNotebookCell(H));let X=[];for(let H of C)X.push(this.getNotebookCell(H));let Z=[];for(let H of N)Z.push(this.getNotebookCell(H));($.length>0||X.length>0||S.length>0||Z.length>0)&&(A.cells={added:$,removed:X,changed:{data:S,textContent:Z}}),(A.metadata!==void 0||A.cells!==void 0)&&this._onDidChange.fire(A)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);a!==void 0&&this._onDidSave.fire(a)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let a=this.notebookDocuments.get(i.notebookDocument.uri);if(a!==void 0){this._onDidClose.fire(a);for(let f of i.cellTextDocuments)n.closeTextDocument({textDocument:f});this.notebookDocuments.delete(i.notebookDocument.uri);for(let f of a.cells)this.notebookCellMap.delete(f.document)}})),He.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};un.NotebookDocuments=es});var cc=x(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.MonikerFeature=void 0;var th=Te(),nh=t=>class extends t{get moniker(){return{on:e=>{let n=th.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Fr.MonikerFeature=nh});var as=x(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.createConnection=K.combineFeatures=K.combineNotebooksFeatures=K.combineLanguagesFeatures=K.combineWorkspaceFeatures=K.combineWindowFeatures=K.combineClientFeatures=K.combineTracerFeatures=K.combineTelemetryFeatures=K.combineConsoleFeatures=K._NotebooksImpl=K._LanguagesImpl=K.BulkUnregistration=K.BulkRegistration=K.ErrorMessageTracker=void 0;var w=Te(),Ue=Jn(),rs=Bo(),j=Xa(),rh=Ya(),ih=Ja(),oh=Qa(),sh=Xo(),ah=Za(),ch=ec(),uh=tc(),lh=nc(),dh=ic(),fh=oc(),hh=sc(),gh=ts(),ph=cc();function ns(t){if(t!==null)return t}var is=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};K.ErrorMessageTracker=is;var Ar=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(w.MessageType.Error,e)}warn(e){this.send(w.MessageType.Warning,e)}info(e){this.send(w.MessageType.Info,e)}log(e){this.send(w.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(w.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,w.RAL)().console.error("Sending log message failed")})}},os=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:w.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(w.ShowMessageRequest.type,r).then(ns)}showWarningMessage(e,...n){let r={type:w.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(w.ShowMessageRequest.type,r).then(ns)}showInformationMessage(e,...n){let r={type:w.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(w.ShowMessageRequest.type,r).then(ns)}},uc=(0,ah.ShowDocumentFeature)((0,j.ProgressFeature)(os)),mh;(function(t){function e(){return new Lr}t.create=e})(mh=K.BulkRegistration||(K.BulkRegistration={}));var Lr=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=Ue.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=rs.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},yh;(function(t){function e(){return new Ln(void 0,[])}t.create=e})(yh=K.BulkUnregistration||(K.BulkUnregistration={}));var Ln=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(w.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=Ue.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(w.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},a=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},jr=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof Lr?this.registerMany(e):e instanceof Ln?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=Ue.string(n)?n:n.method,a=rs.generateUuid(),f={registrations:[{id:a,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(w.RegistrationRequest.type,f).then(v=>(e.add({id:a,method:i}),e),v=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(v)))}registerSingle2(e,n){let r=Ue.string(e)?e:e.method,i=rs.generateUuid(),a={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(w.RegistrationRequest.type,a).then(f=>w.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),f=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(f)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(w.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(w.RegistrationRequest.type,n).then(()=>new Ln(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ss=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(w.ApplyWorkspaceEditRequest.type,r)}},lc=(0,ch.FileOperationsFeature)((0,ih.WorkspaceFoldersFeature)((0,rh.ConfigurationFeature)(ss))),Wr=class{constructor(){this._trace=w.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==w.Trace.Off&&this.connection.sendNotification(w.LogTraceNotification.type,{message:e,verbose:this._trace===w.Trace.Verbose?n:void 0}).catch(()=>{})}},Hr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(w.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Ur=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,j.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,j.attachPartialResult)(this.connection,n)}};K._LanguagesImpl=Ur;var dc=(0,ph.MonikerFeature)((0,hh.DiagnosticFeature)((0,fh.InlayHintFeature)((0,dh.InlineValueFeature)((0,lh.TypeHierarchyFeature)((0,uh.LinkedEditingRangeFeature)((0,sh.SemanticTokensFeature)((0,oh.CallHierarchyFeature)(Ur)))))))),Vr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,j.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,j.attachPartialResult)(this.connection,n)}};K._NotebooksImpl=Vr;var fc=(0,gh.NotebookSyncFeature)(Vr);function hc(t,e){return function(n){return e(t(n))}}K.combineConsoleFeatures=hc;function gc(t,e){return function(n){return e(t(n))}}K.combineTelemetryFeatures=gc;function pc(t,e){return function(n){return e(t(n))}}K.combineTracerFeatures=pc;function mc(t,e){return function(n){return e(t(n))}}K.combineClientFeatures=mc;function yc(t,e){return function(n){return e(t(n))}}K.combineWindowFeatures=yc;function vc(t,e){return function(n){return e(t(n))}}K.combineWorkspaceFeatures=vc;function Tc(t,e){return function(n){return e(t(n))}}K.combineLanguagesFeatures=Tc;function bc(t,e){return function(n){return e(t(n))}}K.combineNotebooksFeatures=bc;function vh(t,e){function n(i,a,f){return i&&a?f(i,a):i||a}return{__brand:"features",console:n(t.console,e.console,hc),tracer:n(t.tracer,e.tracer,pc),telemetry:n(t.telemetry,e.telemetry,gc),client:n(t.client,e.client,mc),window:n(t.window,e.window,yc),workspace:n(t.workspace,e.workspace,vc),languages:n(t.languages,e.languages,Tc),notebooks:n(t.notebooks,e.notebooks,bc)}}K.combineFeatures=vh;function Th(t,e,n){let r=n&&n.console?new(n.console(Ar)):new Ar,i=t(r);r.rawAttach(i);let a=n&&n.tracer?new(n.tracer(Wr)):new Wr,f=n&&n.telemetry?new(n.telemetry(Hr)):new Hr,v=n&&n.client?new(n.client(jr)):new jr,T=n&&n.window?new(n.window(uc)):new uc,D=n&&n.workspace?new(n.workspace(lc)):new lc,C=n&&n.languages?new(n.languages(dc)):new dc,S=n&&n.notebooks?new(n.notebooks(fc)):new fc,N=[r,a,f,v,T,D,C,S];function A(y){return y instanceof Promise?y:Ue.thenable(y)?new Promise((g,k)=>{y.then(F=>g(F),F=>k(F))}):Promise.resolve(y)}let $,X,Z,H={listen:()=>i.listen(),sendRequest:(y,...g)=>i.sendRequest(Ue.string(y)?y:y.method,...g),onRequest:(y,g)=>i.onRequest(y,g),sendNotification:(y,g)=>{let k=Ue.string(y)?y:y.method;return arguments.length===1?i.sendNotification(k):i.sendNotification(k,g)},onNotification:(y,g)=>i.onNotification(y,g),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(X=y,{dispose:()=>{X=void 0}}),onInitialized:y=>i.onNotification(w.InitializedNotification.type,y),onShutdown:y=>($=y,{dispose:()=>{$=void 0}}),onExit:y=>(Z=y,{dispose:()=>{Z=void 0}}),get console(){return r},get telemetry(){return f},get tracer(){return a},get client(){return v},get window(){return T},get workspace(){return D},get languages(){return C},get notebooks(){return S},onDidChangeConfiguration:y=>i.onNotification(w.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(w.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(w.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(w.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(w.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(w.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(w.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(w.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(w.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(w.HoverRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onCompletion:y=>i.onRequest(w.CompletionRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onCompletionResolve:y=>i.onRequest(w.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(w.SignatureHelpRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onDeclaration:y=>i.onRequest(w.DeclarationRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onDefinition:y=>i.onRequest(w.DefinitionRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onTypeDefinition:y=>i.onRequest(w.TypeDefinitionRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onImplementation:y=>i.onRequest(w.ImplementationRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onReferences:y=>i.onRequest(w.ReferencesRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onDocumentHighlight:y=>i.onRequest(w.DocumentHighlightRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onDocumentSymbol:y=>i.onRequest(w.DocumentSymbolRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onWorkspaceSymbol:y=>i.onRequest(w.WorkspaceSymbolRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onWorkspaceSymbolResolve:y=>i.onRequest(w.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(w.CodeActionRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onCodeActionResolve:y=>i.onRequest(w.CodeActionResolveRequest.type,(g,k)=>y(g,k)),onCodeLens:y=>i.onRequest(w.CodeLensRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onCodeLensResolve:y=>i.onRequest(w.CodeLensResolveRequest.type,(g,k)=>y(g,k)),onDocumentFormatting:y=>i.onRequest(w.DocumentFormattingRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onDocumentRangeFormatting:y=>i.onRequest(w.DocumentRangeFormattingRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(w.DocumentOnTypeFormattingRequest.type,(g,k)=>y(g,k)),onRenameRequest:y=>i.onRequest(w.RenameRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onPrepareRename:y=>i.onRequest(w.PrepareRenameRequest.type,(g,k)=>y(g,k)),onDocumentLinks:y=>i.onRequest(w.DocumentLinkRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onDocumentLinkResolve:y=>i.onRequest(w.DocumentLinkResolveRequest.type,(g,k)=>y(g,k)),onDocumentColor:y=>i.onRequest(w.DocumentColorRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onColorPresentation:y=>i.onRequest(w.ColorPresentationRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onFoldingRanges:y=>i.onRequest(w.FoldingRangeRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onSelectionRanges:y=>i.onRequest(w.SelectionRangeRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onExecuteCommand:y=>i.onRequest(w.ExecuteCommandRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),dispose:()=>i.dispose()};for(let y of N)y.attach(H);return i.onRequest(w.InitializeRequest.type,y=>{e.initialize(y),Ue.string(y.trace)&&(a.trace=w.Trace.fromString(y.trace));for(let g of N)g.initialize(y.capabilities);if(X){let g=X(y,new w.CancellationTokenSource().token,(0,j.attachWorkDone)(i,y),void 0);return A(g).then(k=>{if(k instanceof w.ResponseError)return k;let F=k;F||(F={capabilities:{}});let Y=F.capabilities;Y||(Y={},F.capabilities=Y),Y.textDocumentSync===void 0||Y.textDocumentSync===null?Y.textDocumentSync=Ue.number(H.__textDocumentSync)?H.__textDocumentSync:w.TextDocumentSyncKind.None:!Ue.number(Y.textDocumentSync)&&!Ue.number(Y.textDocumentSync.change)&&(Y.textDocumentSync.change=Ue.number(H.__textDocumentSync)?H.__textDocumentSync:w.TextDocumentSyncKind.None);for(let ne of N)ne.fillServerCapabilities(Y);return F})}else{let g={capabilities:{textDocumentSync:w.TextDocumentSyncKind.None}};for(let k of N)k.fillServerCapabilities(g.capabilities);return g}}),i.onRequest(w.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,$)return $(new w.CancellationTokenSource().token)}),i.onNotification(w.ExitNotification.type,()=>{try{Z&&Z()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(w.SetTraceNotification.type,y=>{a.trace=w.Trace.fromString(y.value)}),H}K.createConnection=Th});var Rc=x(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.resolveModulePath=Oe.FileSystem=Oe.resolveGlobalYarnPath=Oe.resolveGlobalNodePath=Oe.resolve=Oe.uriToFilePath=void 0;var bh=require("url"),Ze=require("path"),cs=require("fs"),ds=require("child_process");function _h(t){let e=bh.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let a=n[0],f=n[1];a.length===0&&f.length>1&&f[1]===":"&&n.shift()}return Ze.normalize(n.join("/"))}Oe.uriToFilePath=_h;function us(){return process.platform==="win32"}function Br(t,e,n,r){let i="NODE_PATH",a=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((f,v)=>{let T=process.env,D=Object.create(null);Object.keys(T).forEach(C=>D[C]=T[C]),e&&cs.existsSync(e)&&(D[i]?D[i]=e+Ze.delimiter+D[i]:D[i]=e,r&&r(`NODE_PATH value is: ${D[i]}`)),D.ELECTRON_RUN_AS_NODE="1";try{let C=(0,ds.fork)("",[],{cwd:n,env:D,execArgv:["-e",a]});if(C.pid===void 0){v(new Error(`Starting process to resolve node module  ${t} failed`));return}C.on("error",N=>{v(N)}),C.on("message",N=>{N.c==="r"&&(C.send({c:"e"}),N.s?f(N.r):v(new Error(`Failed to resolve module: ${t}`)))});let S={c:"rs",a:t};C.send(S)}catch(C){v(C)}})}Oe.resolve=Br;function ls(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(a=>n[a]=process.env[a]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};us()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let a=(0,ds.spawnSync)(e,["config","get","prefix"],r).stdout;if(!a){t&&t("'npm config get prefix' didn't return a value.");return}let f=a.trim();return t&&t(`'npm config get prefix' value is: ${f}`),f.length>0?us()?Ze.join(f,"node_modules"):Ze.join(f,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Oe.resolveGlobalNodePath=ls;function Rh(t){let e="yarn",n={encoding:"utf8"};us()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,ds.spawnSync)(e,["global","dir","--json"],n),a=i.stdout;if(!a){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let f=a.trim().split(/\r?\n/);for(let v of f)try{let T=JSON.parse(v);if(T.type==="log")return Ze.join(T.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Oe.resolveGlobalYarnPath=Rh;var _c;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!cs.existsSync(__filename.toUpperCase())||!cs.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,a){return n()?Ze.normalize(a).indexOf(Ze.normalize(i))===0:Ze.normalize(a).toLowerCase().indexOf(Ze.normalize(i).toLowerCase())===0}t.isParent=r})(_c=Oe.FileSystem||(Oe.FileSystem={}));function Dh(t,e,n,r){return n?(Ze.isAbsolute(n)||(n=Ze.join(t,n)),Br(e,n,n,r).then(i=>_c.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Br(e,ls(r),t,r))):Br(e,ls(r),t,r)}Oe.resolveModulePath=Dh});var fs=x((dp,Dc)=>{"use strict";Dc.exports=Te()});var kc=x(ke=>{"use strict";var Ch=ke&&ke.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Cc=ke&&ke.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ch(e,t,n)};Object.defineProperty(ke,"__esModule",{value:!0});ke.ProposedFeatures=ke.NotebookDocuments=ke.TextDocuments=ke.SemanticTokensBuilder=void 0;var kh=Xo();Object.defineProperty(ke,"SemanticTokensBuilder",{enumerable:!0,get:function(){return kh.SemanticTokensBuilder}});Cc(Te(),ke);var Eh=Zo();Object.defineProperty(ke,"TextDocuments",{enumerable:!0,get:function(){return Eh.TextDocuments}});var Nh=ts();Object.defineProperty(ke,"NotebookDocuments",{enumerable:!0,get:function(){return Nh.NotebookDocuments}});Cc(as(),ke);var Sh;(function(t){t.all={__brand:"features"}})(Sh=ke.ProposedFeatures||(ke.ProposedFeatures={}))});var jt=x(Ae=>{"use strict";var Ph=Ae&&Ae.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Nc=Ae&&Ae.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ph(e,t,n)};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConnection=Ae.Files=void 0;var hs=Jn(),wh=as(),jn=Rc(),Lt=fs();Nc(fs(),Ae);Nc(kc(),Ae);var xh;(function(t){t.uriToFilePath=jn.uriToFilePath,t.resolveGlobalNodePath=jn.resolveGlobalNodePath,t.resolveGlobalYarnPath=jn.resolveGlobalYarnPath,t.resolve=jn.resolve,t.resolveModulePath=jn.resolveModulePath})(xh=Ae.Files||(Ae.Files={}));var Ec;function $r(){if(Ec!==void 0)try{Ec.end()}catch{}}var ln=!1,Sc;function Oh(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(Sc=setInterval(()=>{try{process.kill(r,0)}catch{$r(),process.exit(ln?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}Oh();var Ih={initialize:t=>{let e=t.processId;hs.number(e)&&Sc===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(ln?0:1)}},3e3)},get shutdownReceived(){return ln},set shutdownReceived(t){ln=t},exit:t=>{$r(),process.exit(t)}};function qh(t,e,n,r){let i,a,f,v;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),Lt.ConnectionStrategy.is(t)||Lt.ConnectionOptions.is(t)?v=t:(a=t,f=e,v=n),Mh(a,f,v,i)}Ae.createConnection=qh;function Mh(t,e,n,r){if(!t&&!e&&process.argv.length>2){let v,T,D=process.argv.slice(2);for(let C=0;C<D.length;C++){let S=D[C];if(S==="--node-ipc"){t=new Lt.IPCMessageReader(process),e=new Lt.IPCMessageWriter(process);break}else if(S==="--stdio"){t=process.stdin,e=process.stdout;break}else if(S==="--socket"){v=parseInt(D[C+1]);break}else if(S==="--pipe"){T=D[C+1];break}else{var i=S.split("=");if(i[0]==="--socket"){v=parseInt(i[1]);break}else if(i[0]==="--pipe"){T=i[1];break}}}if(v){let C=(0,Lt.createServerSocketTransport)(v);t=C[0],e=C[1]}else if(T){let C=(0,Lt.createServerPipeTransport)(T);t=C[0],e=C[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(hs.func(t.read)&&hs.func(t.on)){let v=t;v.on("end",()=>{$r(),process.exit(ln?0:1)}),v.on("close",()=>{$r(),process.exit(ln?0:1)})}let f=v=>(0,Lt.createProtocolConnection)(t,e,v,n);return(0,wh.createConnection)(f,Ih,r)}});var gs=x((gp,Pc)=>{"use strict";Pc.exports=jt()});var Kr=x((Gr,zr)=>{var Fh=Gr&&Gr.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};(function(t){if(typeof zr=="object"&&typeof zr.exports=="object"){var e=t(require,Gr);e!==void 0&&(zr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;var n=function(){function T(D,C,S,N){this._uri=D,this._languageId=C,this._version=S,this._content=N,this._lineOffsets=void 0}return Object.defineProperty(T.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),T.prototype.getText=function(D){if(D){var C=this.offsetAt(D.start),S=this.offsetAt(D.end);return this._content.substring(C,S)}return this._content},T.prototype.update=function(D,C){for(var S=0,N=D;S<N.length;S++){var A=N[S];if(T.isIncremental(A)){var $=f(A.range),X=this.offsetAt($.start),Z=this.offsetAt($.end);this._content=this._content.substring(0,X)+A.text+this._content.substring(Z,this._content.length);var H=Math.max($.start.line,0),y=Math.max($.end.line,0),g=this._lineOffsets,k=a(A.text,!1,X);if(y-H===k.length)for(var F=0,Y=k.length;F<Y;F++)g[F+H+1]=k[F];else k.length<1e4?g.splice.apply(g,Fh([H+1,y-H],k,!1)):this._lineOffsets=g=g.slice(0,H+1).concat(k,g.slice(y+1));var ne=A.text.length-(Z-X);if(ne!==0)for(var F=H+1+k.length,Y=g.length;F<Y;F++)g[F]=g[F]+ne}else if(T.isFull(A))this._content=A.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=C},T.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=a(this._content,!0)),this._lineOffsets},T.prototype.positionAt=function(D){D=Math.max(Math.min(D,this._content.length),0);var C=this.getLineOffsets(),S=0,N=C.length;if(N===0)return{line:0,character:D};for(;S<N;){var A=Math.floor((S+N)/2);C[A]>D?N=A:S=A+1}var $=S-1;return{line:$,character:D-C[$]}},T.prototype.offsetAt=function(D){var C=this.getLineOffsets();if(D.line>=C.length)return this._content.length;if(D.line<0)return 0;var S=C[D.line],N=D.line+1<C.length?C[D.line+1]:this._content.length;return Math.max(Math.min(S+D.character,N),S)},Object.defineProperty(T.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),T.isIncremental=function(D){var C=D;return C!=null&&typeof C.text=="string"&&C.range!==void 0&&(C.rangeLength===void 0||typeof C.rangeLength=="number")},T.isFull=function(D){var C=D;return C!=null&&typeof C.text=="string"&&C.range===void 0&&C.rangeLength===void 0},T}(),r;(function(T){function D(N,A,$,X){return new n(N,A,$,X)}T.create=D;function C(N,A,$){if(N instanceof n)return N.update(A,$),N;throw new Error("TextDocument.update: document must be created by TextDocument.create")}T.update=C;function S(N,A){for(var $=N.getText(),X=i(A.map(v),function(Y,ne){var qe=Y.range.start.line-ne.range.start.line;return qe===0?Y.range.start.character-ne.range.start.character:qe}),Z=0,H=[],y=0,g=X;y<g.length;y++){var k=g[y],F=N.offsetAt(k.range.start);if(F<Z)throw new Error("Overlapping edit");F>Z&&H.push($.substring(Z,F)),k.newText.length&&H.push(k.newText),Z=N.offsetAt(k.range.end)}return H.push($.substr(Z)),H.join("")}T.applyEdits=S})(r=e.TextDocument||(e.TextDocument={}));function i(T,D){if(T.length<=1)return T;var C=T.length/2|0,S=T.slice(0,C),N=T.slice(C);i(S,D),i(N,D);for(var A=0,$=0,X=0;A<S.length&&$<N.length;){var Z=D(S[A],N[$]);Z<=0?T[X++]=S[A++]:T[X++]=N[$++]}for(;A<S.length;)T[X++]=S[A++];for(;$<N.length;)T[X++]=N[$++];return T}function a(T,D,C){C===void 0&&(C=0);for(var S=D?[C]:[],N=0;N<T.length;N++){var A=T.charCodeAt(N);(A===13||A===10)&&(A===13&&N+1<T.length&&T.charCodeAt(N+1)===10&&N++,S.push(C+N+1))}return S}function f(T){var D=T.start,C=T.end;return D.line>C.line||D.line===C.line&&D.character>C.character?{start:C,end:D}:T}function v(T){var D=f(T.range);return D!==T.range?{newText:T.newText,range:D}:T}})});var Hh={};au(Hh,{connection:()=>Ie,docManager:()=>st,documents:()=>Ht,updateDocumentData:()=>oi,visitors:()=>at});module.exports=cu(Hh);var dn=Se(gs()),tu=Se(Kr());var Zr=Se(jt());var V=Se(jt());function Xr(){return[{label:"struct",insertText:"struct(${1:var});",insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[creating structures](https://docs.octave.org/v4.2.1/Creating-Structures.html#Creating-Structures)"}},{label:"for",insertText:"for (${1:var} = ${2})\n	${3}\n\nend",insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[for loop](https://docs.octave.org/v4.2.0/The-for-Statement.html)"}},{label:"while",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[while loop](https://docs.octave.org/v4.2.0/The-while-Statement.html)"}},{label:"if",insertText:`if (\${1:condition})
	\${2}

end`,insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[if statement](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"else",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[if statement else clause](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"elseif",insertText:"elseif (${1:condition})\n	${2}",insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[if statement elseif clause](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"switch",insertText:`switch (\${1:variable})
	case \${2}
otherwise

end`,insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[switch statement](https://docs.octave.org/v4.2.0/The-switch-Statement.html)"}},{label:"case",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[switch statement case clause](https://docs.octave.org/v4.2.0/The-switch-Statement.html#index-case-statement)"}},{label:"otherwise",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[switch statement otherwise clause](https://docs.octave.org/v4.2.0/The-switch-Statement.html#index-otherwise-statement)"}},{label:"break",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[break statement](https://docs.octave.org/v4.2.0/The-break-Statement.html#index-break-statement)"}},{label:"continue",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[continue statement](https://docs.octave.org/v4.2.0/The-continue-Statement.html#index-continue-statement)"}},{label:"return",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"return statement"}},{label:"end",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"block end marker"}},{label:"function",kind:V.CompletionItemKind.Keyword,insertText:"function ${1:funcName}(${2:funcArgs})\n	${3:funcBody}\nend",insertTextFormat:V.InsertTextFormat.Snippet,documentation:{kind:V.MarkupKind.Markdown,value:"[block end marker](https://docs.octave.org/v4.2.0/A-Sample-Function-Description.html#A-Sample-Function-Description)"}},{label:"do",kind:V.CompletionItemKind.Keyword,insertText:"do\n	${2:funcBody}\nuntil (${1:condition})",insertTextFormat:V.InsertTextFormat.Snippet,documentation:{kind:V.MarkupKind.Markdown,value:"[block end marker](https://docs.octave.org/v5.2.0/The-do_002duntil-Statement.html)"}}]}var O=Se(jt());function Yr(){return[{label:"quad",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:`: q = quad (f, a, b)
: q = quad (f, a, b, tol)
: q = quad (f, a, b, tol, sing)
: [q, ier, nfun, err] = quad (\u2026)
    Numerically evaluate the integral of f from a to b using Fortran routines from QUADPACK.
    f is a function handle, inline function, or a string containing the name of the function to evaluate. The function must have the form y = f (x) where y and x are scalars.
    a and b are the lower and upper limits of integration. Either or both may be infinite.
    The optional argument tol is a vector that specifies the desired accuracy of the result. The first element of the vector is the desired absolute tolerance, and the second element is the desired relative tolerance. To choose a relative test only, set the absolute tolerance to zero. To choose an absolute test only, set the relative tolerance to zero. Both tolerances default to sqrt (eps) or approximately 1.5e^{-8}.
    The optional argument sing is a vector of values at which the integrand is known to be singular.
    The result of the integration is returned in q.
    ier contains an integer error code (0 indicates a successful integration).
    nfun indicates the number of function evaluations that were made.
    err contains an estimate of the error in the solution.
    The function quad_options can set other optional parameters for quad.
    Note: because quad is written in Fortran it cannot be called recursively. This prevents its use in integrating over more than one variable by routines dblquad and triplequad.
    See also: quad_options, quadv, quadl, quadgk, quadcc, trapz, dblquad, triplequad. 

[quad function](https://octave.sourceforge.io/octave/function/quad.html)`}},{label:"inputParser",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:`Not documented 

[inputParser function](https://octave.sourceforge.io/octave/function/inputParser.html)`}},{label:"pol2cart",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:` __[x, y] = pol2cart (theta, r)__
 __[x, y, z] = pol2cart (theta, r, z)__
 __[x, y] = pol2cart (P)__
 __[x, y, z] = pol2cart (P)__
 __C = pol2cart (\u2026)__
    Transform polar or cylindrical coordinates to Cartesian coordinates.
    The inputs theta, r, (and z) must be the same shape, or scalar. If called with a single matrix argument then each row of P represents the polar/(cylindrical) coordinate (theta, r (, z)).
    theta describes the angle relative to the positive x-axis.
    r is the distance to the z-axis (0, 0, z).
    If only a single return argument is requested then return a matrix C where each row represents one Cartesian coordinate (x, y (, z)).
    See also: cart2pol, sph2cart, cart2sph. 

[pol2cart function](https://octave.sourceforge.io/octave/function/pol2cart.html)`}},{label:"deg2rad",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:` __rad = deg2rad (deg)__
    Convert degrees to radians.
    The input deg must be a scalar, vector, or N-dimensional array of double or single floating point values. deg may be complex in which case the real and imaginary components are converted separately.
    The output rad is the same size and shape as deg with degrees converted to radians using the conversion constant pi/180.
    Example:
    deg2rad ([0, 90, 180, 270, 360])
      \u21D2  0.00000   1.57080   3.14159   4.71239   6.28319
    See also: rad2deg. 

[deg2rad function](https://octave.sourceforge.io/octave/function/deg2rad.html)`}},{label:"length",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:` __length (a)__
    Return the length of the object a.
    The length is 0 for empty objects, 1 for scalars, and the number of elements for vectors. For matrix or N-dimensional objects, the length is the number of elements along the largest dimension (equivalent to max (size (a))).
    See also: numel, size. 

[length function](https://octave.sourceforge.io/octave/function/length.html)`}},{label:"struct",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:`  __s = struct ()__
 __s = struct (field1, value1, field2, value2, \u2026)__
 __s = struct (obj)__
    Create a scalar or array structure and initialize its values.
    The field1, field2, \u2026 variables are strings specifying the names of the fields and the value1, value2, \u2026 variables can be of any type.
    If the values are cell arrays, create a structure array and initialize its values. The dimensions of each cell array of values must match. Singleton cells and non-cell values are repeated so that they fill the entire array. If the cells are empty, create an empty structure array with the specified field names.
    If the argument is an object, return the underlying struct.
    Observe that the syntax is optimized for struct arrays. Consider the following examples:
    struct ("foo", 1)
     \u21D2 scalar structure containing the fields:
       foo =  1
    struct ("foo", {})
     \u21D2 0x0 struct array containing the fields:
       foo
    struct ("foo", { {} })
     \u21D2 scalar structure containing the fields:
       foo = {}(0x0)
    struct ("foo", {1, 2, 3})
     \u21D2 1x3 struct array containing the fields:
       foo
    The first case is an ordinary scalar struct\u2014one field, one value. The second produces an empty struct array with one field and no values, since being passed an empty cell array of struct array values. When the value is a cell array containing a single entry, this becomes a scalar struct with that single entry as the value of the field. That single entry happens to be an empty cell array.
    Finally, if the value is a non-scalar cell array, then struct produces a struct array.
    See also: cell2struct, fieldnames, getfield, setfield, rmfield, isfield, orderfields, isstruct, structfun. 

[struct function](https://octave.sourceforge.io/octave/function/struct.html)`}},{label:"addpath",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:` __addpath (dir1, \u2026)__
 __addpath (dir1, \u2026, option)__
    Add named directories to the function search path.
    If option is "-begin" or 0 (the default), prepend the directory name to the current path. If option is "-end" or 1, append the directory name to the current path. Directories added to the path must exist.
    In addition to accepting individual directory arguments, lists of directory names separated by pathsep are also accepted. For example:
    addpath ("dir1:/dir2:~/dir3")
    For each directory that is added, and that was not already in the path, addpath checks for the existence of a file named PKG_ADD (note lack of .m extension) and runs it if it exists.
    See also: path, rmpath, genpath, pathdef, savepath, pathsep. 

[addpath function](https://octave.sourceforge.io/octave/function/addpath.html)`}},{label:"argv",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:`Return the command line arguments passed to Octave.

For example, if you invoked Octave using the command

octave --no-line-editing --silent

argv would return a cell array of strings with the elements --no-line-editing and --silent.

If you write an executable Octave script, argv will return the list of arguments passed to the script. See \u2018Executable Octave Programs\u2019, for an example of how to create an executable Octave script.

[argv function](https://octave.sourceforge.io/octave/function/argv.html)`}},{label:"hold",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[hold function](https://octave.sourceforge.io/octave/function/hold.html)"}},{label:"axis",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[axis function](https://octave.sourceforge.io/octave/function/axis.html)"}},{label:"printf",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[printf function](https://octave.sourceforge.io/octave/function/printf.html)"}},{label:"figure",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[figure function](https://octave.sourceforge.io/octave/function/figure.html)"}},{label:"set",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[set function](https://octave.sourceforge.io/octave/function/set.html)"}},{label:"grid",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[grid function](https://octave.sourceforge.io/octave/function/grid.html)"}},{label:"clc",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[clc function](https://octave.sourceforge.io/octave/function/clc.html)"}},{label:"quit",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[quit function](https://docs.octave.org/interpreter/Quitting-Octave.html)"}},{label:"help",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[help function](https://octave.sourceforge.io/octave/function/help.html)"}},{label:"stem",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[stem function](https://octave.sourceforge.io/octave/function/stem.html)"}},{label:"plot",kind:O.CompletionItemKind.Function,documentation:{kind:O.MarkupKind.Markdown,value:"[plot function](https://octave.sourceforge.io/octave/function/plot.html)"}},{label:"abs",kind:O.CompletionItemKind.Function,documentation:"Return the absolute value of a number"},{label:"acos",kind:O.CompletionItemKind.Function,documentation:"Return the arccosine of a number"},{label:"acosh",kind:O.CompletionItemKind.Function,documentation:"Return the hyperbolic arccosine of a number"},{label:"angle",kind:O.CompletionItemKind.Function,documentation:"Return the angle (in radians) of a complex number"},{label:"arg",kind:O.CompletionItemKind.Function,documentation:"Return the argument (in radians) of a complex number"},{label:"asin",kind:O.CompletionItemKind.Function,documentation:"Return the arcsine of a number"},{label:"asinh",kind:O.CompletionItemKind.Function,documentation:"Return the hyperbolic arcsine of a number"},{label:"atan",kind:O.CompletionItemKind.Function,documentation:"Return the arctangent of a number"},{label:"atanh",kind:O.CompletionItemKind.Function,documentation:"Return the hyperbolic arctangent of a number"},{label:"ceil",kind:O.CompletionItemKind.Function,documentation:"Round up to the nearest integer"},{label:"conj",kind:O.CompletionItemKind.Function,documentation:"Return the complex conjugate of a number"},{label:"cos",kind:O.CompletionItemKind.Function,documentation:"Return the cosine of a number"},{label:"cosh",kind:O.CompletionItemKind.Function,documentation:"Return the hyperbolic cosine of a number"},{label:"cot",kind:O.CompletionItemKind.Function,documentation:"Return the cotangent of a number"},{label:"csc",kind:O.CompletionItemKind.Function,documentation:"Return the cosecant of a number"},{label:"det",kind:O.CompletionItemKind.Function,documentation:"Compute the determinant of a matrix"},{label:"diag",kind:O.CompletionItemKind.Function,documentation:"Extract or construct a diagonal matrix"},{label:"diff",kind:O.CompletionItemKind.Function,documentation:"Compute the difference between adjacent elements of a matrix"},{label:"disp",kind:O.CompletionItemKind.Function,documentation:"Display the value of an expression"},{label:"eig",kind:O.CompletionItemKind.Function,documentation:"Compute the eigenvalues and eigenvectors of a matrix"},{label:"eps",kind:O.CompletionItemKind.Constant,documentation:"Return the machine epsilon (smallest number representable in floating point arithmetic)"},{label:"erf",kind:O.CompletionItemKind.Function,documentation:"Return the error function of a number"},{label:"erfc",kind:O.CompletionItemKind.Function,documentation:"Return the complementary error function of a number"}]}var Wt=Se(require("os"));function Ah(){switch(Wt.platform()){case"linux":return`${Wt.homedir()}/.octaverc`;case"darwin":return`${Wt.homedir()}/.octaverc`;case"win32":return`${Wt.homedir()}\\Documents\\Octave\\octaverc`;default:throw new Error(`Unsupported platform: ${Wt.platform()}`)}}var ps={maxNumberOfProblems:200,maxFilesSearchDepth:3,defaultInitFile:Ah(),enableInitFile:!1,defaultExecPath:"/usr/bin/octave",defaultDebounceTimeMS:1e3};function wc(){return Xr().map(t=>t.label)}function xc(t){return/^[a-zA-Z]+$/.test(t)}function Oc(t){return!isNaN(parseFloat(t))}var Ic=Se(require("fs")),qc=Se(require("path"));function Mc(t){let e=[];function n(r){let i=Ic.default.readdirSync(r,{withFileTypes:!0});for(let a of i){let f=qc.default.join(r,a.name);a.isDirectory()?n(f):a.isFile()&&a.name.endsWith(".m")&&e.push(f)}}return n(t),e}var Fc=Se(require("fs")),Ac=Se(require("path")),Lc=require("url"),jc=Se(Kr());function Wc({workspace:t}){return Mc(t).map(r=>{let i=(0,Lc.pathToFileURL)(Ac.default.resolve(r)).toString(),a=Fc.default.readFileSync(r,"utf-8");return jc.TextDocument.create(i,"octave",1,a)})}function Hc({text:t,characterPosition:e}){let n=0,r=0,i=!1,a=!1;if(e>t.length)return[0,t.length-1];for(let f=0;f<e;f++){let v=t[f];v===`
`&&!i&&!a?(n++,r=0):v==="'"?i=!i:v==='"'?a=!a:r++}return[n,r]}var Uc=Se(jt());function Jr(t,e){let n=t.getText(),r=/[\w]+/g,i;for(;i=r.exec(n);){let a=i.index,f=i.index+i[0].length,v=Uc.Range.create(t.positionAt(a),t.positionAt(f));if(e.line===v.start.line&&e.character>=v.start.character&&e.character<=v.end.character)return v}}var ms=Se(gs());var ie={OUTPUT_VECTOR:1,EXPECTED_FN_IDENT:2,AST_MAX_STMNT_REACHED:3,FN_CALL_EXCEEDED_CALLS:4,FN_DEF_MISSING_END:5,MISSING_PAREN:6,EXPECTED_COMMA_PAREN:7,UNEXPECTED_NL:50,TOO_MANY_NL:60,STRUCT_BAD_ARGS:140,STRUCT_BAD_COMMA:141,MAX_ITERATION_COMMENTS_BEFORE:2e3,MAX_ITERATION_COMMENTS_AFTER:2001,MAX_ITERATION_PARSING_COMMENT_BEFORE:3001,PARSE_ERR_STMNT:4e3,COULD_NOT_FIND_RPAREN_STMNT:4001,MISSING_CONDITION_ELSEIF:4002,MISSING_END_STMNT:4002,UNEXPECTED_END_OF_STMNT:4003,VISITOR_COULDNT_FIND_REF:1e4,UNEXPECTED_UNDEFINED_TOKEN:2e4};var ot={start:{line:1,character:1},end:{line:1,character:2}};function ys(t,e){return{range:t?.range??ot,message:t.message,severity:e==="error"?ms.DiagnosticSeverity.Error:ms.DiagnosticSeverity.Warning,source:"mlang"}}function Vc(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<16;r++){let i=Math.floor(Math.random()*e.length);n+=e.charAt(i)}return n}function Qr(){return Yr().map(t=>t.label)}var Wn=Se(jt());function vs(t){let e=t?.arguments?.length!==void 0&&t?.arguments?.length>0?t.arguments.map((i,a)=>`${a!==0?" ":""}\${${a+1}:${i.name}${i.type!=="DEFAULT_ARGUMENT"?"":` = ${i.content}`}}`):"",n=t.type!=="FUNCTION"?t.name:`${t.name}(${Array.isArray(e)?e.map(i=>i):e});`;return{label:t.name,kind:t.type==="FUNCTION"?Wn.CompletionItemKind.Function:Wn.CompletionItemKind.Variable,documentation:t.documentation,data:t.arguments,insertText:n,insertTextFormat:Wn.InsertTextFormat.Snippet}}var ei=!0,Ts=!1,Lh=!1;function Bc({params:t,connection:e}){let n=t.capabilities;ei=!!(n.workspace!=null&&n.workspace.configuration),Ts=!!(n.workspace!=null&&n.workspace.workspaceFolders),Lh=!!(n.textDocument?.publishDiagnostics&&n.textDocument.publishDiagnostics.relatedInformation);let r={capabilities:{textDocumentSync:Zr.TextDocumentSyncKind.Incremental,completionProvider:{workDoneProgress:!0,resolveProvider:!0,completionItem:{labelDetailsSupport:!0},triggerCharacters:["qwertyuiopasdfghjkl\xF1zxcvbnm"]},definitionProvider:{workDoneProgress:!0},referencesProvider:{workDoneProgress:!0},workspace:{workspaceFolders:{supported:!0}}}};Ts&&(r.capabilities.workspace={workspaceFolders:{supported:!0}});let{workspaceFolders:i}=t;return i&&i.length>0&&i[0]?.name&&Wc({workspace:i[0].name}).forEach(f=>st.set(f.uri,f.getText())),r}async function $c({params:t,connection:e}){e.console.log("Mlang Initialized correctly!"),ei&&await e.client.register(Zr.DidChangeConfigurationNotification.type,void 0),Ts&&e.workspace.onDidChangeWorkspaceFolders(n=>{e.console.log("Workspace folder change event received.")})}function zc(t,e){let n=[],r=t.uri,i=Jr(t,e);if(i===void 0)return[];let a=at.get(r);if(a?.definitions===void 0)return[];let{references:f}=a,v=t.getText(i);return n.push(...f.filter(T=>T.name===v).map(T=>({range:T.position,uri:r}))),n}function Gc({params:t}){let e=Xr(),n=at.get(t.textDocument.uri);if(n?.definitions===void 0)return e;let{definitions:r}=n,i=Yr();e.push(...i),e.push(...r.map(T=>vs(T)).filter((T,D,C)=>D===C.findIndex(S=>S.label===T.label)));let v=st.getAllUris().filter(T=>T!==t.textDocument.uri).map(T=>at.get(T)).filter(T=>T!==void 0).flatMap(T=>T.definitions).filter(T=>T.context==="0").map(T=>vs(T));return e.push(...v),e}async function Kc({params:t,documents:e}){let n=t.textDocument.uri,r=t.position,i=e.get(n);if(!i)return null;let a=Jr(i,r);if(!a)return null;let f=i.getText(a),v=[],D=at.get(n)?.definitions;return D&&v.push(...D.filter(S=>S.name===f).map(S=>({range:S.position,uri:n}))),st.getAllUris().filter(S=>S!==t.textDocument.uri).forEach(S=>{at.get(S)?.definitions.filter(N=>N.context==="0").filter(N=>N.name===f).forEach(N=>{v.push({uri:S,range:N.position})})}),v.length>0?v:null}var Xc=["function","if","for","while","switch","do"],Yc=["until","endfunction","endif","endfor","endwhile","endswitch","end"];var jh={NL:`
`,EOF:"\0",AT:"@",COLON:":",COMMA:",",EQUALS:"=",GRATER_THAN:">",LESS_THAN:"<",AND:"&",OR:"|",EXCLAMATION:"!",SUBTRACTION:"-",ADDITION:"+",MULTIPLICATION:"*",DIVISION:"/",MODULUS:"%",EXPONENTIATION:"^",PERIOD:".",SEMICOLON:";",LBRACKET:"[",RBRACKET:"]",LSQUIRLY:"{",RSQUIRLY:"}",LPARENT:"(",RPARENT:")"};function Jc(t){for(let[e,n]of Object.entries(jh))if(n===t)return{content:e==="EOF"?"eof":t,type:e,position:null}}var Ee=5e3,ti=class{constructor(e){this.tokens=e;this.currentTokenIndex=0;this.statements=[];this.errors=[];this.warnings=[];this.contextDepth=["0"];this.parsingStatement=!1;this.parsingStatementType=null;this.counter=0}clearLintingMessages(){this.errors=[],this.warnings=[]}getCurrentContext(){return this.contextDepth[this.contextDepth.length-1]}getIntoNewContext(){let e=this.getCurrentContext(),n=Vc();return this.contextDepth.push(n),[e,n]}getBackOfContext(){let e=this.getCurrentContext(),n=this.contextDepth.pop();if(n===void 0)throw new Error("Expected newContext to be defined");return[e,n]}getCurrentToken(){return this.tokens[this.currentTokenIndex]}getNextToken(){if(!(this.currentTokenIndex>=this.tokens.length-1))return this.currentTokenIndex++,this.getCurrentToken()}getPrevToken(){if(!(this.currentTokenIndex<=0))return this.currentTokenIndex--,this.getCurrentToken()}parseStatement(){for(;this.getCurrentToken().type==="COMMENT"||this.getCurrentToken().type==="NL";)this.getNextToken();let e=this.getCurrentToken(),n=this.getNextToken();if(n===void 0)return null;if(this.parsingStatement&&this.parsingStatementType==="if"&&(e.content==="elseif"||e.content==="else")){if(e.content==="elseif"){if(n.type==="NL")return this.errors.push({message:"Missing condition",code:ie.MISSING_CONDITION_ELSEIF,range:this.getCurrentPosition(e)}),null;let r=0;do this.skipNL(!0);while(r<Ee&&this.getCurrentToken().type!=="RPARENT");this.logErrorMaxCallsReached(r,"Missing ')' in 'elseif'",ie.COULD_NOT_FIND_RPAREN_STMNT,e),this.getNextToken()}return null}if(typeof e.content=="string"&&Yc.includes(e.content)||e.type==="EOF")return this.parsingStatement?(this.getPrevToken(),null):(this.errors.push({message:`Unexpected ending of statement '${e.content}'`,code:ie.UNEXPECTED_END_OF_STMNT,range:{start:this.getCurrentPosition(e).start,end:this.getCurrentPosition(n).start}}),null);if((e.type==="IDENTIFIER"||e.type==="NATIVE_FUNCTION")&&n.type==="LPARENT"){this.getPrevToken();let r=this.getCurrentPosition();this.getNextToken();let i=this.getFunctionArguments();return this.getNextToken(),{type:"FUNCTION_CALL",supressOutput:this.isOutputSupressed(),context:this.getCurrentContext(),LHE:{type:"IDENTIFIER",value:e.content,position:r,functionData:{args:i}}}}else if(e.type==="IDENTIFIER"&&n.type==="EQUALS"){this.getNextToken();let r=this.parseExpression(),i=this.isOutputSupressed();return{type:"ASSIGNMENT",operator:n.content,supressOutput:i,context:this.getCurrentContext(),LHE:{type:"IDENTIFIER",value:e.content,position:this.getCurrentPosition(e)},RHE:r}}else if(e.type==="LBRACKET"){let[r,i]=this.getVectorArgs();if(i==="COMMA"&&r.every(a=>a.type==="IDENTIFIER")&&this.getCurrentToken().type==="EQUALS"){if(this.getCurrentToken().type!=="EQUALS")return this.errors.push({message:`Unexpected token ${this.stringifyTokenContent()}`,range:this.getCurrentPosition(),code:ie.OUTPUT_VECTOR}),null;let a=this.getNextToken();if(a===void 0)throw new Error("Unexpected undefined token. Code 50");if(a.type!=="IDENTIFIER"&&a.type!=="KEYWORD")return this.errors.push({message:`Expected a function call. Got ${this.stringifyTokenContent()}`,range:this.getCurrentPosition(),code:ie.EXPECTED_FN_IDENT}),null;this.getNextToken();let f=this.getFunctionArguments();return this.validateFnCallArgs(f),this.getNextToken(),{type:"MO_ASSIGNMENT",operator:"=",supressOutput:this.isOutputSupressed(),context:this.getCurrentContext(),LHE:{type:"VARIABLE_VECTOR",value:r},RHE:{type:"FUNCTION_CALL",position:this.getCurrentPosition(a),value:a.content,functionData:{args:f}}}}return null}else if(e.type==="KEYWORD"&&e.content==="function"){let r=this.getCurrentToken(),i=this.getNextToken();if(this.getPrevToken(),this.getPrevToken(),i===void 0)throw new Error("Unexpected undefined token. Code 60");return r.type==="IDENTIFIER"&&i.type==="EQUALS"?this.getFunctionDefintionWithOutput(!0):r.type==="LBRACKET"?this.getFunctionDefintionWithOutput(!1):this.getFunctionDefintionWithoutOutput()}else{if(e.type==="IDENTIFIER"&&n.type==="NL")return{type:"REFERENCE_CALL_VAR_FUNC",LHE:{type:"REFERENCE_CALL_VAR_FUNC",position:this.getCurrentPosition(e),value:e.content},supressOutput:!1,context:this.getCurrentContext()};if(e.type==="IDENTIFIER"&&(n.type==="EOF"||this.isTokenValidBasicDataType(n))){let r=0,i=[];for(;this.getCurrentToken().type!=="NL"&&this.getCurrentToken().type!=="EOF"&&this.isTokenValidBasicDataType(this.getCurrentToken(),!1)&&r<Ee;){let f=this.getNextToken();if(r++,f===void 0)throw new Error(`Unexpected undefined token. Error code ${ie.UNEXPECTED_UNDEFINED_TOKEN}`);if(this.isTokenValidBasicDataType(f,!1))i.push(f);else if(f.type==="LBRACKET"){let v=this.getVector();i.push(v)}}this.logErrorMaxCallsReached(r,"Could not parse function call",ie.FN_CALL_EXCEEDED_CALLS);let a=this.isOutputSupressed();return{type:"FUNCTION_CALL",context:this.getCurrentContext(),supressOutput:a,LHE:{type:"FUNCTION_CALL",position:this.getCurrentPosition(e),value:e.content,functionData:{args:i}}}}else{if(e.type==="KEYWORD"&&typeof e.content=="string"&&Xc.includes(e.content))return this.parseBasicStatements(e.content);if(e===void 0)throw new Error("Unexpected undefined token. Code 70");return this.errors.push({message:`Unexpected token. Got: "${this.stringifyTokenContent(e)}"`,range:e?.position??{start:{line:0,character:0},end:{line:0,character:0}},code:24}),null}}return null}parseBasicStatements(e){let n=this.getPrevToken(),r=n.position,i=this.getNextToken(),a=e==="do"?"until":`end${e}`;this.parsingStatement=!0,this.parsingStatementType=e,i?.type==="NL"&&this.errors.push({message:"Missing condition",code:ie.MISSING_CONDITION_ELSEIF,range:this.getCurrentPosition(n)});let f;if(i?.type==="LPARENT"){f=this.skipNL(!0);let N=0;for(;f!==void 0&&f.type!=="RPARENT"&&N<Ee;)N++,f=this.skipNL(!0);if(this.logErrorMaxCallsReached(N,'Missing ")"',ie.COULD_NOT_FIND_RPAREN_STMNT,n))return this.parsingStatement=!1,this.parsingStatementType=null,null;this.getNextToken()}else{f=i;let N=0;for(;f!==void 0&&f.type!=="NL"&&N<Ee;)f=this.getNextToken(),N++;if(this.logErrorMaxCallsReached(N,"Uncompleted statement",9999,n))return this.parsingStatement=!1,this.parsingStatementType=null,null;this.getNextToken()}if(f===void 0)return this.errors.push({message:"Could not parse statement, undefined Token",range:this.getCurrentPosition(this.getPrevToken()),code:ie.PARSE_ERR_STMNT}),this.parsingStatement=!1,this.parsingStatementType=null,null;let v=[],T=0;for(;!this.isEndStatementToken(a)&&!this.isEOF()&&T<Ee;){let N=this.parseStatement();N!==null&&v.push(N),T++}if(this.logErrorMaxCallsReached(this.getCurrentToken().type==="EOF"?Ee:T,`Could not find closing keyword 'end' or '${a}'`,ie.MISSING_END_STMNT,n))return this.parsingStatement=!1,this.parsingStatementType=null,null;let D=this.getIntoNewContext()[1],C={...r,end:this.getCurrentPosition().start};this.skipNL(!0);let S;switch(e){case"if":S="IF_STMNT";break;case"for":S="FOR_STMNT";break;case"while":S="WHILE_STMNT";break;case"switch":S="SWITCH_STMNT";break;case"do":S="DO_STMNT";break;default:throw new Error("Could not parse statement")}return this.parsingStatement=!1,this.parsingStatementType=null,{type:S,supressOutput:!0,context:D,LHE:{type:S,value:e,position:C},RHE:v}}getCurrentContent(){return JSON.stringify(this.getCurrentToken().content)}isEndStatementToken(e,n){return n!==void 0?n.content==="end"||n.content===e:this.getCurrentToken().content==="end"||this.getCurrentToken().content===e}parseStruct(){let e=[],n=this.getCurrentToken().position?.start??ot.start,r=0;do{let i=this.skipNL(!0);if(i!==void 0&&this.isValidStructType(i))e.push(i);else return null;let a=this.skipNL(!0);(a===void 0||a.type!=="COMMA"&&a.type!=="RSQUIRLY")&&this.errors.push({message:`Unexpected struct value. Got "${a?.type??"UNDEFINED"}". Code ${ie.STRUCT_BAD_COMMA.toString()}`,code:ie.STRUCT_BAD_ARGS,range:this.getCurrentPosition()}),r++}while(this.getCurrentToken().type!=="RSQUIRLY"&&this.getCurrentToken().type!=="EOF"&&this.currentTokenIndex<this.tokens.length&&r<Ee);return this.getNextToken(),{type:"STRUCT",content:e,position:{start:n,end:this.getCurrentPosition().end}}}isValidStructType(e){return!this.isTokenValidBasicDataType(e)&&e.type!=="VECTOR"&&e.type!=="STRUCT"?(this.errors.push({message:`Unexpected struct value. Got "${e.type}". Code ${ie.STRUCT_BAD_ARGS.toString()}`,code:ie.STRUCT_BAD_ARGS,range:this.getCurrentPosition()}),!1):!0}validateFnCallArgs(e){for(let n of e)n.type==="DEFAULT_VALUE_ARGUMENT"&&this.errors.push({message:"Unexpected default value argument in function call",range:this.getCurrentPosition(n),code:23})}getVectorArgs(){let e=[];if(this.getCurrentToken().type==="LBRACKET"&&this.getNextToken(),this.getCurrentToken().type==="RBRACKET")return this.getNextToken(),[[],"COMMA"];this.getCurrentToken().type==="LBRACKET"?(e.push(this.getVector()),this.getPrevToken()):this.isTokenValidBasicDataType(this.getCurrentToken())&&e.push(this.getCurrentToken());let n=this.getNextToken()?.type==="COMMA";return n?e.push(...this.getVectorValuesCommaSeparated()):e.push(...this.getVectorValuesColonSeparated()),this.getNextToken(),[e,n?"COMMA":"COLON"]}getVectorValuesColonSeparated(){let e=[];for(;this.getCurrentToken().type==="COLON"&&e.length<2;){let n=this.getNextToken();if(n===void 0)throw new Error("Unexpected undefined token. Code 80");n.type==="LBRACKET"?(e.push(this.getVector(n)),this.getPrevToken()):this.isTokenValidBasicDataType(n)&&e.push(n),this.getNextToken()}return this.getCurrentToken().type!=="RBRACKET"&&this.errors.push({message:"Unexpected vector value",range:this.getCurrentPosition(),code:22}),e}getVector(e){let[n]=this.getVectorArgs(),r=e??this.getCurrentToken();if(r===void 0)throw new Error("Unexpected undefined token. Code 130");let i=this.getCurrentPosition(r);return{type:"VECTOR",content:n,position:{start:i.start,end:n[n.length-1]?.position?.end??i.end}}}getVectorValuesCommaSeparated(){let e=[];for(;this.getCurrentToken().type==="COMMA";){let n=this.getNextToken();if(n===void 0)throw new Error("Unexpected undefined token. Code 120");if(n.type==="LBRACKET")e.push(this.getVector(n)),this.getPrevToken();else if(this.isTokenValidBasicDataType(n))e.push(n);else break;this.getNextToken()}return this.getCurrentToken().type!=="RBRACKET"&&this.errors.push({message:"Unexpected vector value",range:this.getCurrentPosition(),code:21}),e}getFunctionDefintionWithOutput(e){this.parsingStatement=!0;let[n,r]=this.getIntoNewContext(),i=this.getFunctionDefinitionDescription(!0),a,f=[];e?(a=this.getNextToken(),this.getNextToken()):(this.getNextToken(),this.getNextToken(),f.push(...this.getVariableVector()));let v=this.getNextToken();if(v===void 0)throw new Error("Unexpected undefined token. Code 110");if(v.type!=="IDENTIFIER")return this.errors.push({message:`Expected IDENTIFIER. Got: ${this.stringifyTokenContent(v)}`,range:this.getCurrentPosition(),code:20}),null;this.getNextToken();let T=this.getFunctionArguments();this.checkValidFunctionDefinitionArguments(T),i===""&&(i=this.getFunctionDefinitionDescription(!1)),this.getNextToken();let D=[],C=0;for(;!this.isEndFunctionToken()&&!this.isEOF()&&C<Ee;){let A=this.parseStatement();A!==null&&D.push(A),C++}this.logErrorMaxCallsReached(C,"Could not find closing keyword 'end'",ie.FN_DEF_MISSING_END);let S=this.getCurrentToken();if(S.type==="EOF")return this.errors.push({message:"Expected closing function 'end' or 'endfunction'",range:{start:this.getCurrentPosition(v).start,end:this.getCurrentPosition(v).end},code:19}),null;this.getNextToken(),this.getBackOfContext();let N={type:"FUNCTION_DEFINITION",value:"function",LHO:{type:"IDENTIFIER",value:v.content,position:this.getCurrentPosition(v),functionData:{args:T,description:i,closingToken:S,contextCreated:r}},RHO:D};return{type:"ASSIGNMENT",supressOutput:!0,context:n,LHE:{type:e?"IDENTIFIER":"VARIABLE_VECTOR",value:e&&a!==void 0?a.content:f,position:e&&a!==void 0?this.getCurrentPosition(a):void 0},RHE:N}}checkValidFunctionDefinitionArguments(e){let n=!0;return e.forEach(r=>{r.type==="IDENTIFIER"||r.type==="DEFAULT_VALUE_ARGUMENT"||(n=!1,this.errors.push({message:"Invalid function definition argument. ",range:this.getCurrentPosition(r),code:200}))}),n}getFunctionDefintionWithoutOutput(){this.parsingStatement=!0;let[e,n]=this.getIntoNewContext(),r=this.getFunctionDefinitionDescription(!0),i=this.getNextToken();if(i===void 0)throw new Error("Unexpected undefined token. Code 100");if(i.type!=="IDENTIFIER")return this.errors.push({message:`Expected IDENTIFIER. Got: ${this.stringifyTokenContent(i)}`,range:this.getCurrentPosition(),code:18}),null;this.getNextToken();let a=this.getFunctionArguments();this.checkValidFunctionDefinitionArguments(a),this.getNextToken(),r===""&&(this.getPrevToken(),r=this.getFunctionDefinitionDescription(!1),this.getNextToken());let f=[],v=0;for(;!this.isEndFunctionToken()&&!this.isEOF()&&v<Ee;){let D=this.parseStatement();D!==null&&f.push(D),v++}v>=Ee&&this.errors.push({message:"Max calls for statements in a function definition",range:this.getCurrentPosition(),code:16});let T=this.getCurrentToken();return T.type==="EOF"?(this.errors.push({message:"Expected closing function 'end' or 'endfunction'",range:{start:this.getCurrentPosition(i).start,end:this.getCurrentPosition(i).end},code:17}),null):(this.getNextToken(),this.getBackOfContext(),{type:"FUNCTION_DEFINITION",supressOutput:!0,context:e,LHE:{type:"IDENTIFIER",value:i.content,position:this.getCurrentPosition(i),functionData:{args:a,description:r,closingToken:T,contextCreated:n}},RHE:f})}getFunctionDefinitionDescription(e){let n=[],r=this.currentTokenIndex;if(e){let a=0;do{if(a++,this.currentTokenIndex===0)break;let f=this.getPrevTokenSkipNL();f?.type==="COMMENT"&&n.push(f)}while(this.getCurrentToken().type==="COMMENT"&&a<=Ee);this.logErrorMaxCallsReached(a,"Iterations exceeded trying to find function comments",ie.MAX_ITERATION_COMMENTS_BEFORE),n.reverse()}else{let a=0;do{a++;let f=this.skipNL(!0);f.type==="COMMENT"&&n.push(f)}while(this.getCurrentToken().type==="COMMENT"&&a<=Ee);this.logErrorMaxCallsReached(a,"Iterations exceeded trying to find function comments",ie.MAX_ITERATION_COMMENTS_AFTER)}return this.currentTokenIndex=r,n.map(a=>a.content).join(`
`)}getPrevTokenSkipNL(){let e,n=0;do e=this.getPrevToken(),n++;while(e?.type==="NL"&&n<Ee);return this.logErrorMaxCallsReached(n,"Max statement parsing reached while parsing comment",ie.MAX_ITERATION_PARSING_COMMENT_BEFORE),e}isOutputSupressed(){let e=this.getCurrentToken().type==="SEMICOLON";return e?(this.getNextToken(),e):(this.warnings.push({message:"Will output to the console",range:this.getCurrentPosition(this.getPrevToken()),code:15}),this.getNextToken(),!1)}getVariableVector(){let e=[];do{if(this.getCurrentToken().type!=="IDENTIFIER")return[];e.push(this.getCurrentToken());let n=this.getNextToken()?.type;if(n===void 0)throw new Error("Unexpected undefined token. Code 30");if(n!=="COMMA"&&n!=="RBRACKET")return this.errors.push({message:`Expected COMMA. Got: '${this.stringifyTokenContent(this.getCurrentToken())}'`,range:this.getCurrentPosition(),code:14}),e;if(this.getNextToken(),n==="RBRACKET")break}while(e[e.length-1].type!=="RBRACKET"&&this.currentTokenIndex<this.tokens.length);return e}parseExpression(){let e=this.getCurrentToken(),n,r=!0;switch(e.type){case"STRING":case"VECTOR":r=!1,n={type:e.type,value:e.content};break;case"NUMBER":n={type:e.type,value:e.content};break;case"IDENTIFIER":n=this.parseFunctionCall(),this.getPrevToken();break;case"AT":{this.getNextToken();let a=this.getFunctionArguments();this.validateFnCallArgs(a),this.getNextToken();let f=this.parseExpression();return{type:"ANONYMOUS_FUNCTION_DEFINITION",value:"@",position:this.getCurrentPosition(e),functionData:{args:a},RHO:f}}case"LPARENT":if(this.getNextToken(),n=this.parseExpression(),this.getCurrentToken().type!=="RPARENT"){this.errors.push({message:"Expected closing parenthesis ')'",range:this.getCurrentPosition(),code:13});return}break;case"LBRACKET":return{type:"VARIABLE_VECTOR",value:this.getVectorArgs()[0]};case"LSQUIRLY":{let a=this.parseStruct();return a===null?void 0:{type:"STRUCT",value:a?.content}}case"NL":this.errors.push({message:"Unexpected new line in expression.",range:this.getCurrentPosition(),code:ie.UNEXPECTED_NL});return;default:this.errors.push({message:`Unexpected token. ${this.stringifyTokenContent(e)}`,range:this.getCurrentPosition(),code:12});return}let i=this.getNextToken();if(i===void 0)throw new Error("Unexpected undefined token. Code 40");return r&&this.isBinaryOperator(i.type)?(this.getNextToken(),{type:"BINARY_OPERATION",value:i?.content??"",RHO:this.parseExpression(),LHO:n}):n}isTokenValidBasicDataType(e,n){let r=e.type==="IDENTIFIER"||e.type==="NUMBER"||e.type==="STRING";return!r&&(n===void 0||n===!0)&&this.errors.push({message:`Expected a valid data type. Got '${this.stringifyTokenContent()}'`,range:this.getCurrentPosition(),code:11}),r}parseFunctionCall(){let e=this.getCurrentToken();if(this.getNextToken()?.type==="LPARENT"){let n=this.getFunctionArguments();return this.validateFnCallArgs(n),this.getNextToken(),{type:"FUNCTION_CALL",value:e.content,position:this.getCurrentPosition(e),functionData:{args:n}}}else return{type:e.type,value:e.content,position:this.getCurrentPosition(e)}}getFunctionArguments(){let e=[];if(this.getCurrentToken().type!=="LPARENT")return this.errors.push({message:`Expected '(' for function call. Got: ${this.getCurrentToken().type}`,range:this.getCurrentPosition(),code:10}),e;do{let n=this.skipNL(!0),r=this.skipNL(!0);if(this.getPrevToken(),n.type==="IDENTIFIER"&&r.type==="EQUALS"){this.getNextToken();let a=this.skipNL(!0);this.isTokenDataType(a)||this.errors.push({message:`Expected a valid default value. Got ${this.stringifyTokenContent(a)}`,range:this.getCurrentPosition(a),code:9}),e.push({type:"DEFAULT_VALUE_ARGUMENT",content:n.content,position:n.position,defaultValue:a}),this.getNextToken(),n=null}else if(n.type==="IDENTIFIER"){if(this.skipNL(!0).type==="LPARENT"){let a=this.getFunctionArguments();this.validateFnCallArgs(a)}}else{if(n.type==="RPARENT")return e;if(n.type==="LBRACKET")e.push(this.getVector(n)),n=null;else if(n.type==="LSQUIRLY"){let a=this.parseStruct();if(n=null,a===null)return e;e.push(a)}else if(this.isTokenValidBasicDataType(n))this.getNextToken();else return this.errors.push({message:`Expected valid argument. Got ${this.stringifyTokenContent(n)}`,range:this.getCurrentPosition(),code:8}),e}n!==null&&e.push(n);let i=this.skipNL();if(i.type!=="COMMA"&&i.type!=="RPARENT")return this.errors.push({message:`Expected ',' or ')'. Got '${i.type}'`,range:this.getCurrentPosition(),code:ie.EXPECTED_COMMA_PAREN}),e}while(this.getCurrentToken().type!=="RPARENT"&&this.getCurrentToken().type!=="EOF");return this.getCurrentToken().type==="EOF"&&this.errors.push({message:"Expected closing parenthesis ')' for function call",range:this.getCurrentPosition(),code:ie.MISSING_PAREN}),e}stringifyTokenContent(e){return e===void 0&&(e=this.getCurrentToken()),Array.isArray(e.content)?`[${e.content.map(n=>n.content).join(", ")}]`:e.content}skipNL(e=!1){let n=0,r=this.getCurrentToken();for(e&&(r=this.getNextToken());this.getCurrentToken().type==="NL"&&n<=Ee;)r=this.getNextToken(),n++;if(this.logErrorMaxCallsReached(n,"Found too many new lines",ie.TOO_MANY_NL),r===void 0)throw new Error("EOF was never found");return r}isBinaryOperator(e){return e==="SUBTRACTION"||e==="DIVISION"||e==="ADDITION"||e==="MULTIPLICATION"}isEOF(e){return e!=null?e.type==="EOF":this.getCurrentToken().type==="EOF"}isEndFunctionToken(e){return e!=null?e.type==="KEYWORD"&&(e.content==="end"||e.content==="endfunction"):this.getCurrentToken().type==="KEYWORD"&&(this.getCurrentToken().content==="end"||this.getCurrentToken().content==="endfunction")}isTokenDataType(e){return e!=null?e.type==="IDENTIFIER"||e.type==="VECTOR"||e.type==="STRING"||e.type==="NUMBER"||e.type==="STRUCT":this.getCurrentToken().type==="IDENTIFIER"||this.getCurrentToken().type==="VECTOR"||this.getCurrentToken().type==="STRING"||this.getCurrentToken().type==="STRUCT"||this.getCurrentToken().type==="NUMBER"}logErrorMaxCallsReached(e,n,r,i){return e>=Ee?(this.errors.push({message:n,range:this.getCurrentPosition(i),code:r}),!0):!1}getStatements(){return this.statements}makeAST(){if(this.tokens.length<4)return{type:"Program",body:this.statements};let e=0;do{let n=this.parseStatement();n!==null&&this.statements.push(n),e++}while(this.getCurrentToken().type!=="EOF"&&e<Ee);return e>=Ee&&this.errors.push({message:"Maximum amount of statements reached.",range:this.getCurrentPosition(),code:ie.AST_MAX_STMNT_REACHED}),{type:"Program",body:this.statements}}getCurrentPosition(e){return e===void 0&&this.getCurrentToken()!==void 0?this.getCurrentToken().position:e===void 0&&this.getCurrentToken()===void 0?ot:e?.position!==null&&e?.position!==void 0?e.position:ot}getErrors(){return this.errors.forEach(e=>{if(e?.range===void 0)throw new Error("Unexpected undefined Range. "+JSON.stringify(e))}),this.errors}getWarnings(){return this.warnings}};var Qc=1e4,ni=class{constructor(e=""){this.currPos=0;this.nextPos=0;this.tokens=[];this.keywords=wc();this.nativeFunctions=Qr();this.text=e,this.readChar()}setInitialConditions(){this.currPos=0,this.nextPos=0,this.currChar="",this.nextChar="",this.tokens.length=0}updateText(e){this.text=e,this.setInitialConditions(),this.readChar()}getAllTokens(){let e=[],n=0;do e.push(this.getNextToken()),n++;while(e[e.length-1].type!=="EOF"&&n<=Qc);if(n>=Qc)throw new Error("Tokens calls exeeded. "+JSON.stringify(this.text)+" -> "+JSON.stringify(this.tokens.map(r=>r.type)));return e}getNextToken(){for(;this.currChar===" ";)this.readChar();let e=Jc(this.currChar);if(e!==void 0&&this.isValidStartingToken(e))return this.readChar(),this.addToken({...e,position:this.getPositionAfterCursor(e.type!=="EOF"?e.content:"")});if(this.currChar==="#"||this.currChar==="%"){let n=this.readComment();return this.addToken({type:"COMMENT",content:n,position:this.getPositionAfterCursor(n)})}else if(xc(this.currChar)){let n=this.readLiteral();return this.addToken({...this.tokenFromLiteral(n),position:this.getPositionAfterCursor(n)})}else if(Oc(this.currChar)){let n=this.readNumber();return this.addToken({type:"NUMBER",content:n,position:this.getPositionAfterCursor(n)})}else if(this.currChar==='"'||this.currChar==="'"){let n=this.readLiteralString();return this.addToken({type:"STRING",content:n,position:this.getPositionAfterCursor(n)})}else return this.readChar(),this.addToken({type:"ILLEGAL",content:"illegal",position:this.getPositionAfterCursor(this.currChar)})}getPositionAfterCursor(e){let n=this.currPos-e.length,r=this.currPos;this.currPos=n;let[i,a]=this.getRowsColsCursor(),[f,v]=this.getRowsColsCursor(e),T={start:{line:i,character:a},end:{line:f,character:v}};return this.currPos=r,T}isValidStartingToken(e){if(e.type!=="MODULUS")return!0;let n=this.tokens[this.tokens.length-1];return n!==void 0&&(n.type==="IDENTIFIER"||n.type==="NUMBER")}readComment(){let e="";do e+=this.currChar,this.readChar();while(this.currChar!==`
`&&this.currPos<this.text.length);return e}addToken(e){return this.tokens.push(e),e}tokenFromLiteral(e){return this.keywords.includes(e)?{type:"KEYWORD",content:e,position:this.getPosition(e)}:this.nativeFunctions.includes(e)?{type:"NATIVE_FUNCTION",content:e,position:this.getPosition(e)}:{type:"IDENTIFIER",content:e,position:this.getPosition(e)}}getPosition(e){let[n,r]=this.getRowsColsCursor(),[i,a]=this.getRowsColsCursor(e);return{start:{line:n,character:r},end:{line:i,character:a}}}getRowsColsCursor(e=null){let n=e!==null?this.currPos+e.length+1:this.currPos;return Hc({text:this.text,characterPosition:n})}readChar(){if(this.currPos>=this.text.length||this.text.length<=3){this.currChar="\0",this.nextChar="\0";return}this.nextPos===0?(this.currChar=this.text[0],this.nextChar=this.text[1],this.currPos=1,this.nextPos=2):this.nextPos>=this.text.length?(this.currChar=this.nextChar,this.nextChar="\0",this.currPos=this.nextPos):(this.currChar=this.nextChar,this.nextChar=this.text[this.nextPos],this.currPos=this.nextPos,this.nextPos++)}readLiteral(){let e="";for(;/[a-zA-Z0-9_]/.test(this.currChar)&&this.currPos<=this.text.length;)e+=this.currChar,this.readChar();return e}readNumber(){let e="";for(;/\d/.test(this.currChar)||/\.\d/.test(this.currChar+this.nextChar)||/e\d/.test(this.currChar+this.nextChar)||/e[++-]/.test(this.currChar+this.nextChar)||/-\d/.test(this.currChar+this.nextChar);)e+=this.currChar,this.readChar();return e}readLiteralString(){let e=this.currChar;do this.readChar(),e+=this.currChar;while(this.currChar!=='"'&&this.currChar!=="'"&&this.currChar!==`
`&&this.currPos<this.text.length);return this.readChar(),e}};var ri=class{constructor(){this.references=[];this.definitions=[];this.errors=[]}visitProgram(e){for(let n of e.body)this.visitStatement(n);this.finisHook()}getErrors(){return this.errors}visitStatement(e){if(e!=null)switch(e.type){case"ASSIGNMENT":if(e.LHE===void 0)return;e.LHE.type==="FUNCTION_DEFINITION"?this.visitExpression(e.LHE,"ASSIGNMENT",e.context):(this.visitExpression(e.LHE,"ASSIGNMENT",e.context),this.visitExpression(e.RHE,"ASSIGNMENT",e.context,!1));break;case"FUNCTION_DEFINITION":if(e.LHE===void 0)return;this.visitExpression(e.LHE,"FUNCTION_DEFINITION",e.context),(e?.RHE).forEach(n=>{this.visitStatement(n)});break;case"MO_ASSIGNMENT":if(e.LHE===void 0)return;this.visitExpression(e.LHE,"MO_ASSIGNMENT",e.context),this.visitExpression(e.RHE,"MO_ASSIGNMENT",e.context,!1);break;case"FUNCTION_CALL":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"FUNCTION_CALL",e.context);break;case"REFERENCE_CALL_VAR_FUNC":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"REFERENCE_CALL_VAR_FUNC",e.context);break;case"IF_STMNT":case"DO_STMNT":case"SWITCH_STMNT":case"FOR_STMNT":case"WHILE_STMNT":(e?.RHE).forEach(n=>{this.visitStatement(n)});break}}visitExpression(e,n,r,i=!0){if(e!=null)switch(e.type){case"IDENTIFIER":if((n==="ASSIGNMENT"||n==="FUNCTION_DEFINITION")&&i){let a=n==="FUNCTION_DEFINITION"?this.getNodeFunctionArgs(e).map(f=>{if(f.type!=="IDENTIFIER"&&f.type!=="DEFAULT_VALUE_ARGUMENT")return null;let v=f.type==="DEFAULT_VALUE_ARGUMENT"?"DEFAULT_ARGUMENT":"ARGUMENT",T=f.type==="DEFAULT_VALUE_ARGUMENT"?this.getDefaultValueContent(f):"",D=this.getTokenPosition(f),C={name:f.content,type:v,content:T,position:D,documentation:"",context:r};return this.definitions.push(C),C}).filter(f=>f!==null):[];this.definitions.push({name:e.value,position:e.position??ot,type:n==="ASSIGNMENT"?"VARIABLE":"FUNCTION",documentation:this.getDocumentationOrLineDefinition(e),arguments:a,context:r}),this.references.push({name:e.value,position:this.getExpressionPosition(e),type:n==="ASSIGNMENT"?"VARIABLE":"FUNCTION",documentation:e?.functionData?.description??""})}else n==="FUNCTION_CALL"?this.references.push({name:e.value,position:this.getExpressionPosition(e),type:"FUNCTION",documentation:e?.functionData?.description??""}):this.references.push({name:e.value,position:this.getExpressionPosition(e),type:"VARIABLE",documentation:e?.functionData?.description??""});if(e?.functionData?.args!==void 0){let f=this.getArgumentIdentifiersList(e).map(v=>({name:v.content,position:this.getTokenPosition(v),type:"VARIABLE",documentation:this.getDocumentationOrLineDefinition(e)}));this.references.push(...f)}e?.RHO!==null&&Array.isArray(e.RHO)&&e.RHO.forEach(a=>{this.visitStatement(a)});break;case"BINARY_OPERATION":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,null,r),this.visitExpression(e.RHO,null,r,!1);break;case"FUNCTION_DEFINITION":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,"FUNCTION_DEFINITION",e.LHO.functionData?.contextCreated??""),Array.isArray(e.RHO)&&e.RHO.forEach(a=>{this.visitStatement(a)});break;case"KEYWORD":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,null,r),this.visitExpression(e.RHO,null,r,!1);break;case"ANONYMOUS_FUNCTION_DEFINITION":e?.LHO?.value!==void 0&&e?.LHO?.position!==void 0&&this.definitions.push({name:e.LHO.value,position:e.LHO.position,type:"ANONYMOUS_FUNCTION",documentation:this.getDocumentationOrLineDefinition(e),context:r,arguments:e?.functionData?.args?.map(a=>({context:e?.functionData?.contextCreated??"",name:a.content,type:"ARGUMENT",position:this.getTokenPosition(a),documentation:""}))??[]}),this.references.push(...e?.functionData?.args?.map(a=>({name:a.content,position:this.getExpressionPosition(e),type:this.getReferenceTypeFromNode(e),documentation:e?.functionData?.description??""}))??[]),this.visitExpression(e.RHO,null,r,!1);break;case"VARIABLE_VECTOR":if(!Array.isArray(e.value)||!(e?.value?.length>1))return;e?.value!==void 0&&Array.isArray(e.value)&&e.value.forEach(a=>{if(a.type==="VECTOR"){this.getTokenIdentifiers(a).forEach(f=>{this.references.push({name:f.content,type:"VARIABLE",position:this.getTokenPosition(f),documentation:""})});return}a.type==="IDENTIFIER"&&this.definitions.push({name:a.content,type:"VARIABLE",position:this.getTokenPosition(a),documentation:this.getDocumentationOrLineDefinition(e),context:r})}),e.value.forEach(a=>{a.type==="IDENTIFIER"&&this.references.push({name:a.content,position:this.getTokenPosition(a),type:"VARIABLE",documentation:e?.functionData?.description??""})});break;case"FUNCTION_CALL":if(this.references.push({name:e.value,position:this.getExpressionPosition(e),documentation:this.getDocumentationOrLineDefinition(e),type:"FUNCTION"}),e?.functionData?.args===void 0)break;this.references.push(...this.getArgumentIdentifiersList(e).map(a=>({name:a.content,position:this.getTokenPosition(a),type:"VARIABLE",documentation:this.getDocumentationOrLineDefinition(e)})));break;case"REFERENCE_CALL_VAR_FUNC":this.references.push({name:e.value,position:this.getExpressionPosition(e),documentation:this.getDocumentationOrLineDefinition(e),type:"VARIABLE"});break}}getArgumentIdentifiersList(e){return e?.functionData?.args===void 0?[]:e.functionData.args.flatMap(n=>this.getTokenIdentifiers(n))}getTokenIdentifiers(e){return e.type==="VECTOR"?e.content.flatMap(n=>this.getTokenIdentifiers(n)):e.type==="IDENTIFIER"||e.type==="DEFAULT_VALUE_ARGUMENT"?[e]:[]}getExpressionPosition(e){return e.position===void 0?ot:e.position}getTokenPosition(e){return e.position===null?ot:e.position}getDefaultValueContent(e){return e?.defaultValue?.content===void 0||Array.isArray(e?.defaultValue?.content)?"":e.defaultValue.content}getNodeFunctionArgs(e){return e?.functionData?.args===void 0?[]:e.functionData.args}getDocumentationOrLineDefinition(e){return e?.functionData?.description!==void 0?e?.functionData?.description:(e?.RHO===void 0||Array.isArray(e.RHO),"")}getReferenceTypeFromNode(e){return e.type==="FUNCTION_CALL"||e.type==="FUNCTION_DEFINITION"||e.type==="ANONYMOUS_FUNCTION_DEFINITION"?"FUNCTION":"VARIABLE"}finisHook(){let e=this.definitions.map(i=>i.name),n=Qr();this.references.map(i=>i.name).forEach((i,a)=>{n.includes(i)||e.includes(i)||this.errors.push({message:`Could not find reference '${i}'`,code:ie.VISITOR_COULDNT_FIND_REF,range:this.references[a].position})})}};var Zc=Se(Kr());var ii=class{constructor(){this._documents=new Map}set(e,n){if(this._documents.has(e))return;let r=Zc.TextDocument.create(e,"octave",0,n);this._documents.set(e,r),oi(e,n)}get(e){return this._documents.get(e)}getAllDocuments(){return Array.from(this._documents,([e,n])=>n)}getAllUris(){return Array.from(this._documents,([e,n])=>e)}delete(e){this._documents.delete(e)}};var Wh=1e3,Ie=(0,dn.createConnection)(dn.ProposedFeatures.all),eu=ps,st=new ii,Ht=new dn.TextDocuments(tu.TextDocument),at=new Map,Hn=new Map;Ht.onDidChangeContent(t=>{oi(t.document.uri,t.document.getText())});Ht.onDidOpen(t=>{let e=t.document.getText(),n=t.document.uri;st.set(n,e)});Ie.onInitialize(t=>Bc({params:t,connection:Ie}));Ie.onInitialized(async t=>{await $c({params:t,connection:Ie})});Ie.onDefinition(async t=>await Kc({params:t,documents:Ht}));Ie.onReferences(t=>{let e=t.textDocument.uri,n=Ht.get(e);return n===void 0?[]:zc(n,t.position)});Ie.onDidChangeConfiguration(t=>{Ie.window.showInformationMessage("config: "+JSON.stringify(t.settings)),ei?eu=t.settings:eu=ps});Ht.onDidClose(t=>{let e=t.document.uri;st.delete(e)});Ie.onCompletion(t=>Gc({params:t}));Ie.onCompletionResolve(t=>t);Ht.listen(Ie);Ie.listen();Ie.onExit(()=>{Hn.forEach(t=>{clearTimeout(t)}),Hn.clear()});function oi(t,e){Hn.has(t)&&clearTimeout(Hn.get(t)),Hn.set(t,setTimeout(()=>{let n=st.get(t),r=e??n?.getText();if(n==null)return;let a=new ni(r).getAllTokens(),f=new ti(a),v=f.makeAST(),T=new ri,D=T.getErrors();T.visitProgram(v),at.set(t,T);let C=f.getErrors().map(A=>ys(A,"error")),S=f.getWarnings().map(A=>ys(A,"warn")),N=[...C,...S,...D];Ie.sendDiagnostics({uri:t,diagnostics:N}).catch(A=>{throw new Error(A)})},Wh))}0&&(module.exports={connection,docManager,documents,updateDocumentData,visitors});
