var Vd=Object.create;var sr=Object.defineProperty;var Bd=Object.getOwnPropertyDescriptor;var $d=Object.getOwnPropertyNames;var zd=Object.getPrototypeOf,Gd=Object.prototype.hasOwnProperty;var q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Yd=(t,e)=>{for(var n in e)sr(t,n,{get:e[n],enumerable:!0})},Ks=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $d(e))!Gd.call(t,i)&&i!==n&&sr(t,i,{get:()=>e[i],enumerable:!(r=Bd(e,i))||r.enumerable});return t};var Et=(t,e,n)=>(n=t!=null?Vd(zd(t)):{},Ks(e||!t||!t.__esModule?sr(n,"default",{value:t,enumerable:!0}):n,t)),Kd=t=>Ks(sr({},"__esModule",{value:!0}),t);var ar=q(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.thenable=Pe.typedArray=Pe.stringArray=Pe.array=Pe.func=Pe.error=Pe.number=Pe.string=Pe.boolean=void 0;function Qd(t){return t===!0||t===!1}Pe.boolean=Qd;function Qs(t){return typeof t=="string"||t instanceof String}Pe.string=Qs;function Xd(t){return typeof t=="number"||t instanceof Number}Pe.number=Xd;function Jd(t){return t instanceof Error}Pe.error=Jd;function Xs(t){return typeof t=="function"}Pe.func=Xs;function Js(t){return Array.isArray(t)}Pe.array=Js;function Zd(t){return Js(t)&&t.every(e=>Qs(e))}Pe.stringArray=Zd;function ef(t,e){return Array.isArray(t)&&t.every(e)}Pe.typedArray=ef;function tf(t){return t&&Xs(t.then)}Pe.thenable=tf});var rn=q(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.stringArray=qe.array=qe.func=qe.error=qe.number=qe.string=qe.boolean=void 0;function nf(t){return t===!0||t===!1}qe.boolean=nf;function Zs(t){return typeof t=="string"||t instanceof String}qe.string=Zs;function rf(t){return typeof t=="number"||t instanceof Number}qe.number=rf;function of(t){return t instanceof Error}qe.error=of;function sf(t){return typeof t=="function"}qe.func=sf;function ea(t){return Array.isArray(t)}qe.array=ea;function af(t){return ea(t)&&t.every(e=>Zs(e))}qe.stringArray=af});var so=q(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.Message=B.NotificationType9=B.NotificationType8=B.NotificationType7=B.NotificationType6=B.NotificationType5=B.NotificationType4=B.NotificationType3=B.NotificationType2=B.NotificationType1=B.NotificationType0=B.NotificationType=B.RequestType9=B.RequestType8=B.RequestType7=B.RequestType6=B.RequestType5=B.RequestType4=B.RequestType3=B.RequestType2=B.RequestType1=B.RequestType=B.RequestType0=B.AbstractMessageSignature=B.ParameterStructures=B.ResponseError=B.ErrorCodes=void 0;var Ht=rn(),Li;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Li||(B.ErrorCodes=Li={}));var Fi=class t extends Error{constructor(e,n,r){super(n),this.code=Ht.number(e)?e:Li.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};B.ResponseError=Fi;var Ve=class t{constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};B.ParameterStructures=Ve;Ve.auto=new Ve("auto");Ve.byPosition=new Ve("byPosition");Ve.byName=new Ve("byName");var ve=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ve.auto}};B.AbstractMessageSignature=ve;var qi=class extends ve{constructor(e){super(e,0)}};B.RequestType0=qi;var ji=class extends ve{constructor(e,n=Ve.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};B.RequestType=ji;var Ui=class extends ve{constructor(e,n=Ve.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};B.RequestType1=Ui;var Wi=class extends ve{constructor(e){super(e,2)}};B.RequestType2=Wi;var Hi=class extends ve{constructor(e){super(e,3)}};B.RequestType3=Hi;var Vi=class extends ve{constructor(e){super(e,4)}};B.RequestType4=Vi;var Bi=class extends ve{constructor(e){super(e,5)}};B.RequestType5=Bi;var $i=class extends ve{constructor(e){super(e,6)}};B.RequestType6=$i;var zi=class extends ve{constructor(e){super(e,7)}};B.RequestType7=zi;var Gi=class extends ve{constructor(e){super(e,8)}};B.RequestType8=Gi;var Yi=class extends ve{constructor(e){super(e,9)}};B.RequestType9=Yi;var Ki=class extends ve{constructor(e,n=Ve.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};B.NotificationType=Ki;var Qi=class extends ve{constructor(e){super(e,0)}};B.NotificationType0=Qi;var Xi=class extends ve{constructor(e,n=Ve.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};B.NotificationType1=Xi;var Ji=class extends ve{constructor(e){super(e,2)}};B.NotificationType2=Ji;var Zi=class extends ve{constructor(e){super(e,3)}};B.NotificationType3=Zi;var eo=class extends ve{constructor(e){super(e,4)}};B.NotificationType4=eo;var to=class extends ve{constructor(e){super(e,5)}};B.NotificationType5=to;var no=class extends ve{constructor(e){super(e,6)}};B.NotificationType6=no;var ro=class extends ve{constructor(e){super(e,7)}};B.NotificationType7=ro;var io=class extends ve{constructor(e){super(e,8)}};B.NotificationType8=io;var oo=class extends ve{constructor(e){super(e,9)}};B.NotificationType9=oo;var ta;(function(t){function e(i){let s=i;return s&&Ht.string(s.method)&&(Ht.string(s.id)||Ht.number(s.id))}t.isRequest=e;function n(i){let s=i;return s&&Ht.string(s.method)&&i.id===void 0}t.isNotification=n;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(Ht.string(s.id)||Ht.number(s.id)||s.id===null)}t.isResponse=r})(ta||(B.Message=ta={}))});var co=q(St=>{"use strict";var na;Object.defineProperty(St,"__esModule",{value:!0});St.LRUCache=St.LinkedMap=St.Touch=void 0;var je;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(je||(St.Touch=je={}));var cr=class{constructor(){this[na]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=je.None){let r=this._map.get(e);if(r)return n!==je.None&&this.touch(r,n),r.value}set(e,n,r=je.None){let i=this._map.get(e);if(i)i.value=n,r!==je.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case je.None:this.addItemLast(i);break;case je.First:this.addItemFirst(i);break;case je.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(na=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==je.First&&n!==je.Last)){if(n===je.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===je.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};St.LinkedMap=cr;var ao=class extends cr{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=je.AsNew){return super.get(e,n)}peek(e){return super.get(e,je.None)}set(e,n){return super.set(e,n,je.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};St.LRUCache=ao});var ia=q(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.Disposable=void 0;var ra;(function(t){function e(n){return{dispose:n}}t.create=e})(ra||(ur.Disposable=ra={}))});var Nt=q(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});var uo;function lo(){if(uo===void 0)throw new Error("No runtime abstraction layer installed");return uo}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");uo=n}t.install=e})(lo||(lo={}));fo.default=lo});var sn=q(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.Emitter=on.Event=void 0;var cf=Nt(),oa;(function(t){let e={dispose(){}};t.None=function(){return e}})(oa||(on.Event=oa={}));var ho=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,l=r.length;s<l;s++)try{n.push(r[s].apply(i[s],e))}catch(p){(0,cf.default)().console.error(p)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},lr=class t{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new ho),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};on.Emitter=lr;lr._noop=function(){}});var hr=q(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.CancellationTokenSource=an.CancellationToken=void 0;var uf=Nt(),lf=rn(),po=sn(),dr;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:po.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:po.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||lf.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(dr||(an.CancellationToken=dr={}));var df=Object.freeze(function(t,e){let n=(0,uf.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),fr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?df:(this._emitter||(this._emitter=new po.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},go=class{get token(){return this._token||(this._token=new fr),this._token}cancel(){this._token?this._token.cancel():this._token=dr.Cancelled}dispose(){this._token?this._token instanceof fr&&this._token.dispose():this._token=dr.None}};an.CancellationTokenSource=go});var sa=q(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.SharedArrayReceiverStrategy=cn.SharedArraySenderStrategy=void 0;var ff=hr(),Pn;(function(t){t.Continue=0,t.Cancelled=1})(Pn||(Pn={}));var mo=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=Pn.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,Pn.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};cn.SharedArraySenderStrategy=mo;var yo=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Pn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},vo=class{constructor(e){this.token=new yo(e)}cancel(){}dispose(){}},To=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new ff.CancellationTokenSource:new vo(n)}};cn.SharedArrayReceiverStrategy=To});var Co=q(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.Semaphore=void 0;var hf=Nt(),_o=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,hf.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};pr.Semaphore=_o});var ca=q(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.ReadableStreamMessageReader=wt.AbstractMessageReader=wt.MessageReader=void 0;var Ro=Nt(),un=rn(),bo=sn(),pf=Co(),aa;(function(t){function e(n){let r=n;return r&&un.func(r.listen)&&un.func(r.dispose)&&un.func(r.onError)&&un.func(r.onClose)&&un.func(r.onPartialMessage)}t.is=e})(aa||(wt.MessageReader=aa={}));var gr=class{constructor(){this.errorEmitter=new bo.Emitter,this.closeEmitter=new bo.Emitter,this.partialMessageEmitter=new bo.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${un.string(e.message)?e.message:"unknown"}`)}};wt.AbstractMessageReader=gr;var ko;(function(t){function e(n){let r,i,s,l=new Map,p,E=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,l.set(s.name,s)),n.contentDecoders!==void 0)for(let b of n.contentDecoders)l.set(b.name,b);if(n.contentTypeDecoder!==void 0&&(p=n.contentTypeDecoder,E.set(p.name,p)),n.contentTypeDecoders!==void 0)for(let b of n.contentTypeDecoders)E.set(b.name,b)}return p===void 0&&(p=(0,Ro.default)().applicationJson.decoder,E.set(p.name,p)),{charset:r,contentDecoder:s,contentDecoders:l,contentTypeDecoder:p,contentTypeDecoders:E}}t.fromOptions=e})(ko||(ko={}));var Do=class extends gr{constructor(e,n){super(),this.readable=e,this.options=ko.fromOptions(n),this.buffer=(0,Ro.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new pf.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Ro.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};wt.ReadableStreamMessageReader=Do});var ha=q(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.WriteableStreamMessageWriter=Pt.AbstractMessageWriter=Pt.MessageWriter=void 0;var ua=Nt(),xn=rn(),gf=Co(),la=sn(),mf="Content-Length: ",da=`\r
`,fa;(function(t){function e(n){let r=n;return r&&xn.func(r.dispose)&&xn.func(r.onClose)&&xn.func(r.onError)&&xn.func(r.write)}t.is=e})(fa||(Pt.MessageWriter=fa={}));var mr=class{constructor(){this.errorEmitter=new la.Emitter,this.closeEmitter=new la.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${xn.string(e.message)?e.message:"unknown"}`)}};Pt.AbstractMessageWriter=mr;var Eo;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,ua.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,ua.default)().applicationJson.encoder}}t.fromOptions=e})(Eo||(Eo={}));var So=class extends mr{constructor(e,n){super(),this.writable=e,this.options=Eo.fromOptions(n),this.errorCount=0,this.writeSemaphore=new gf.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(mf,r.byteLength.toString(),da),i.push(da),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Pt.WriteableStreamMessageWriter=So});var pa=q(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.AbstractMessageBuffer=void 0;var yf=13,vf=10,Tf=`\r
`,No=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,s=0;e:for(;r<this._chunks.length;){let b=this._chunks[r];for(i=0;i<b.length;){switch(b[i]){case yf:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case vf:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}s+=b.byteLength,r++}if(n!==4)return;let l=this._read(s+i),p=new Map,E=this.toString(l,"ascii").split(Tf);if(E.length<2)return p;for(let b=0;b<E.length-2;b++){let x=E[b],j=x.indexOf(":");if(j===-1)throw new Error(`Message header must separate key and value using ':'
${x}`);let U=x.substr(0,j),ee=x.substr(j+1).trim();p.set(e?U.toLowerCase():U,ee)}return p}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],l=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,l}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let l=s.slice(0,e);n.set(l,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};yr.AbstractMessageBuffer=No});var Ta=q(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.createMessageConnection=X.ConnectionOptions=X.MessageStrategy=X.CancellationStrategy=X.CancellationSenderStrategy=X.CancellationReceiverStrategy=X.RequestCancellationReceiverStrategy=X.IdCancellationReceiverStrategy=X.ConnectionStrategy=X.ConnectionError=X.ConnectionErrors=X.LogTraceNotification=X.SetTraceNotification=X.TraceFormat=X.TraceValues=X.Trace=X.NullLogger=X.ProgressType=X.ProgressToken=void 0;var ga=Nt(),Re=rn(),$=so(),ma=co(),In=sn(),wo=hr(),Mn;(function(t){t.type=new $.NotificationType("$/cancelRequest")})(Mn||(Mn={}));var Po;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(Po||(X.ProgressToken=Po={}));var On;(function(t){t.type=new $.NotificationType("$/progress")})(On||(On={}));var xo=class{constructor(){}};X.ProgressType=xo;var Io;(function(t){function e(n){return Re.func(n)}t.is=e})(Io||(Io={}));X.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var le;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(le||(X.Trace=le={}));var ya;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(ya||(X.TraceValues=ya={}));(function(t){function e(r){if(!Re.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(le||(X.Trace=le={}));var Qe;(function(t){t.Text="text",t.JSON="json"})(Qe||(X.TraceFormat=Qe={}));(function(t){function e(n){return Re.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Qe||(X.TraceFormat=Qe={}));var Oo;(function(t){t.type=new $.NotificationType("$/setTrace")})(Oo||(X.SetTraceNotification=Oo={}));var vr;(function(t){t.type=new $.NotificationType("$/logTrace")})(vr||(X.LogTraceNotification=vr={}));var An;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(An||(X.ConnectionErrors=An={}));var ln=class t extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};X.ConnectionError=ln;var Ao;(function(t){function e(n){let r=n;return r&&Re.func(r.cancelUndispatched)}t.is=e})(Ao||(X.ConnectionStrategy=Ao={}));var Tr;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Re.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Re.func(r.dispose))}t.is=e})(Tr||(X.IdCancellationReceiverStrategy=Tr={}));var Mo;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Re.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Re.func(r.dispose))}t.is=e})(Mo||(X.RequestCancellationReceiverStrategy=Mo={}));var _r;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new wo.CancellationTokenSource}});function e(n){return Tr.is(n)||Mo.is(n)}t.is=e})(_r||(X.CancellationReceiverStrategy=_r={}));var Cr;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Mn.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Re.func(r.sendCancellation)&&Re.func(r.cleanup)}t.is=e})(Cr||(X.CancellationSenderStrategy=Cr={}));var br;(function(t){t.Message=Object.freeze({receiver:_r.Message,sender:Cr.Message});function e(n){let r=n;return r&&_r.is(r.receiver)&&Cr.is(r.sender)}t.is=e})(br||(X.CancellationStrategy=br={}));var Rr;(function(t){function e(n){let r=n;return r&&Re.func(r.handleMessage)}t.is=e})(Rr||(X.MessageStrategy=Rr={}));var va;(function(t){function e(n){let r=n;return r&&(br.is(r.cancellationStrategy)||Ao.is(r.connectionStrategy)||Rr.is(r.messageStrategy))}t.is=e})(va||(X.ConnectionOptions=va={}));var ut;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(ut||(ut={}));function _f(t,e,n,r){let i=n!==void 0?n:X.NullLogger,s=0,l=0,p=0,E="2.0",b,x=new Map,j,U=new Map,ee=new Map,Te,be=new ma.LinkedMap,ke=new Map,oe=new Set,v=new Map,y=le.Off,w=Qe.Text,G,ce=ut.New,me=new In.Emitter,Me=new In.Emitter,Je=new In.Emitter,Ze=new In.Emitter,P=new In.Emitter,T=r&&r.cancellationStrategy?r.cancellationStrategy:br.Message;function L(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function F(d){return d===null?"res-unknown-"+(++p).toString():"res-"+d.toString()}function C(){return"not-"+(++l).toString()}function D(d,R){$.Message.isRequest(R)?d.set(L(R.id),R):$.Message.isResponse(R)?d.set(F(R.id),R):d.set(C(),R)}function S(d){}function M(){return ce===ut.Listening}function W(){return ce===ut.Closed}function O(){return ce===ut.Disposed}function z(){(ce===ut.New||ce===ut.Listening)&&(ce=ut.Closed,Me.fire(void 0))}function Y(d){me.fire([d,void 0,void 0])}function Ne(d){me.fire(d)}t.onClose(z),t.onError(Y),e.onClose(z),e.onError(Ne);function ue(){Te||be.size===0||(Te=(0,ga.default)().timer.setImmediate(()=>{Te=void 0,ht()}))}function He(d){$.Message.isRequest(d)?Kn(d):$.Message.isNotification(d)?Xn(d):$.Message.isResponse(d)?Qn(d):Zt(d)}function ht(){if(be.size===0)return;let d=be.shift();try{let R=r?.messageStrategy;Rr.is(R)?R.handleMessage(d,He):He(d)}finally{ue()}}let Yn=d=>{try{if($.Message.isNotification(d)&&d.method===Mn.type.method){let R=d.params.id,I=L(R),V=be.get(I);if($.Message.isRequest(V)){let de=r?.connectionStrategy,ye=de&&de.cancelUndispatched?de.cancelUndispatched(V,S):void 0;if(ye&&(ye.error!==void 0||ye.result!==void 0)){be.delete(I),v.delete(R),ye.id=V.id,Wt(ye,d.method,Date.now()),e.write(ye).catch(()=>i.error("Sending response for canceled message failed."));return}}let fe=v.get(R);if(fe!==void 0){fe.cancel(),en(d);return}else oe.add(R)}D(be,d)}finally{ue()}};function Kn(d){if(O())return;function R(J,he,se){let De={jsonrpc:E,id:d.id};J instanceof $.ResponseError?De.error=J.toJson():De.result=J===void 0?null:J,Wt(De,he,se),e.write(De).catch(()=>i.error("Sending response failed."))}function I(J,he,se){let De={jsonrpc:E,id:d.id,error:J.toJson()};Wt(De,he,se),e.write(De).catch(()=>i.error("Sending response failed."))}function V(J,he,se){J===void 0&&(J=null);let De={jsonrpc:E,id:d.id,result:J};Wt(De,he,se),e.write(De).catch(()=>i.error("Sending response failed."))}er(d);let fe=x.get(d.method),de,ye;fe&&(de=fe.type,ye=fe.handler);let _e=Date.now();if(ye||b){let J=d.id??String(Date.now()),he=Tr.is(T.receiver)?T.receiver.createCancellationTokenSource(J):T.receiver.createCancellationTokenSource(d);d.id!==null&&oe.has(d.id)&&he.cancel(),d.id!==null&&v.set(J,he);try{let se;if(ye)if(d.params===void 0){if(de!==void 0&&de.numberOfParams!==0){I(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${d.method} defines ${de.numberOfParams} params but received none.`),d.method,_e);return}se=ye(he.token)}else if(Array.isArray(d.params)){if(de!==void 0&&de.parameterStructures===$.ParameterStructures.byName){I(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,_e);return}se=ye(...d.params,he.token)}else{if(de!==void 0&&de.parameterStructures===$.ParameterStructures.byPosition){I(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,_e);return}se=ye(d.params,he.token)}else b&&(se=b(d.method,d.params,he.token));let De=se;se?De.then?De.then(Ie=>{v.delete(J),R(Ie,d.method,_e)},Ie=>{v.delete(J),Ie instanceof $.ResponseError?I(Ie,d.method,_e):Ie&&Re.string(Ie.message)?I(new $.ResponseError($.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${Ie.message}`),d.method,_e):I(new $.ResponseError($.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,_e)}):(v.delete(J),R(se,d.method,_e)):(v.delete(J),V(se,d.method,_e))}catch(se){v.delete(J),se instanceof $.ResponseError?R(se,d.method,_e):se&&Re.string(se.message)?I(new $.ResponseError($.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${se.message}`),d.method,_e):I(new $.ResponseError($.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,_e)}}else I(new $.ResponseError($.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,_e)}function Qn(d){if(!O())if(d.id===null)d.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let R=d.id,I=ke.get(R);if(tr(d,I),I!==void 0){ke.delete(R);try{if(d.error){let V=d.error;I.reject(new $.ResponseError(V.code,V.message,V.data))}else if(d.result!==void 0)I.resolve(d.result);else throw new Error("Should never happen.")}catch(V){V.message?i.error(`Response handler '${I.method}' failed with message: ${V.message}`):i.error(`Response handler '${I.method}' failed unexpectedly.`)}}}}function Xn(d){if(O())return;let R,I;if(d.method===Mn.type.method){let V=d.params.id;oe.delete(V),en(d);return}else{let V=U.get(d.method);V&&(I=V.handler,R=V.type)}if(I||j)try{if(en(d),I)if(d.params===void 0)R!==void 0&&R.numberOfParams!==0&&R.parameterStructures!==$.ParameterStructures.byName&&i.error(`Notification ${d.method} defines ${R.numberOfParams} params but received none.`),I();else if(Array.isArray(d.params)){let V=d.params;d.method===On.type.method&&V.length===2&&Po.is(V[0])?I({token:V[0],value:V[1]}):(R!==void 0&&(R.parameterStructures===$.ParameterStructures.byName&&i.error(`Notification ${d.method} defines parameters by name but received parameters by position`),R.numberOfParams!==d.params.length&&i.error(`Notification ${d.method} defines ${R.numberOfParams} params but received ${V.length} arguments`)),I(...V))}else R!==void 0&&R.parameterStructures===$.ParameterStructures.byPosition&&i.error(`Notification ${d.method} defines parameters by position but received parameters by name`),I(d.params);else j&&j(d.method,d.params)}catch(V){V.message?i.error(`Notification handler '${d.method}' failed with message: ${V.message}`):i.error(`Notification handler '${d.method}' failed unexpectedly.`)}else Je.fire(d)}function Zt(d){if(!d){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);let R=d;if(Re.string(R.id)||Re.number(R.id)){let I=R.id,V=ke.get(I);V&&V.reject(new Error("The received response has neither a result nor an error property."))}}function st(d){if(d!=null)switch(y){case le.Verbose:return JSON.stringify(d,null,4);case le.Compact:return JSON.stringify(d);default:return}}function Jn(d){if(!(y===le.Off||!G))if(w===Qe.Text){let R;(y===le.Verbose||y===le.Compact)&&d.params&&(R=`Params: ${st(d.params)}

`),G.log(`Sending request '${d.method} - (${d.id})'.`,R)}else Tt("send-request",d)}function Zn(d){if(!(y===le.Off||!G))if(w===Qe.Text){let R;(y===le.Verbose||y===le.Compact)&&(d.params?R=`Params: ${st(d.params)}

`:R=`No parameters provided.

`),G.log(`Sending notification '${d.method}'.`,R)}else Tt("send-notification",d)}function Wt(d,R,I){if(!(y===le.Off||!G))if(w===Qe.Text){let V;(y===le.Verbose||y===le.Compact)&&(d.error&&d.error.data?V=`Error data: ${st(d.error.data)}

`:d.result?V=`Result: ${st(d.result)}

`:d.error===void 0&&(V=`No result returned.

`)),G.log(`Sending response '${R} - (${d.id})'. Processing request took ${Date.now()-I}ms`,V)}else Tt("send-response",d)}function er(d){if(!(y===le.Off||!G))if(w===Qe.Text){let R;(y===le.Verbose||y===le.Compact)&&d.params&&(R=`Params: ${st(d.params)}

`),G.log(`Received request '${d.method} - (${d.id})'.`,R)}else Tt("receive-request",d)}function en(d){if(!(y===le.Off||!G||d.method===vr.type.method))if(w===Qe.Text){let R;(y===le.Verbose||y===le.Compact)&&(d.params?R=`Params: ${st(d.params)}

`:R=`No parameters provided.

`),G.log(`Received notification '${d.method}'.`,R)}else Tt("receive-notification",d)}function tr(d,R){if(!(y===le.Off||!G))if(w===Qe.Text){let I;if((y===le.Verbose||y===le.Compact)&&(d.error&&d.error.data?I=`Error data: ${st(d.error.data)}

`:d.result?I=`Result: ${st(d.result)}

`:d.error===void 0&&(I=`No result returned.

`)),R){let V=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";G.log(`Received response '${R.method} - (${d.id})' in ${Date.now()-R.timerStart}ms.${V}`,I)}else G.log(`Received response ${d.id} without active response promise.`,I)}else Tt("receive-response",d)}function Tt(d,R){if(!G||y===le.Off)return;let I={isLSPMessage:!0,type:d,message:R,timestamp:Date.now()};G.log(I)}function Dt(){if(W())throw new ln(An.Closed,"Connection is closed.");if(O())throw new ln(An.Disposed,"Connection is disposed.")}function nr(){if(M())throw new ln(An.AlreadyListening,"Connection is already listening")}function rr(){if(!M())throw new Error("Call listen() first.")}function pt(d){return d===void 0?null:d}function Sn(d){if(d!==null)return d}function Nn(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function tn(d,R){switch(d){case $.ParameterStructures.auto:return Nn(R)?Sn(R):[pt(R)];case $.ParameterStructures.byName:if(!Nn(R))throw new Error("Received parameters by name but param is not an object literal.");return Sn(R);case $.ParameterStructures.byPosition:return[pt(R)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function wn(d,R){let I,V=d.numberOfParams;switch(V){case 0:I=void 0;break;case 1:I=tn(d.parameterStructures,R[0]);break;default:I=[];for(let fe=0;fe<R.length&&fe<V;fe++)I.push(pt(R[fe]));if(R.length<V)for(let fe=R.length;fe<V;fe++)I.push(null);break}return I}let _t={sendNotification:(d,...R)=>{Dt();let I,V;if(Re.string(d)){I=d;let de=R[0],ye=0,_e=$.ParameterStructures.auto;$.ParameterStructures.is(de)&&(ye=1,_e=de);let J=R.length,he=J-ye;switch(he){case 0:V=void 0;break;case 1:V=tn(_e,R[ye]);break;default:if(_e===$.ParameterStructures.byName)throw new Error(`Received ${he} parameters for 'by Name' notification parameter structure.`);V=R.slice(ye,J).map(se=>pt(se));break}}else{let de=R;I=d.method,V=wn(d,de)}let fe={jsonrpc:E,method:I,params:V};return Zn(fe),e.write(fe).catch(de=>{throw i.error("Sending notification failed."),de})},onNotification:(d,R)=>{Dt();let I;return Re.func(d)?j=d:R&&(Re.string(d)?(I=d,U.set(d,{type:void 0,handler:R})):(I=d.method,U.set(d.method,{type:d,handler:R}))),{dispose:()=>{I!==void 0?U.delete(I):j=void 0}}},onProgress:(d,R,I)=>{if(ee.has(R))throw new Error(`Progress handler for token ${R} already registered`);return ee.set(R,I),{dispose:()=>{ee.delete(R)}}},sendProgress:(d,R,I)=>_t.sendNotification(On.type,{token:R,value:I}),onUnhandledProgress:Ze.event,sendRequest:(d,...R)=>{Dt(),rr();let I,V,fe;if(Re.string(d)){I=d;let J=R[0],he=R[R.length-1],se=0,De=$.ParameterStructures.auto;$.ParameterStructures.is(J)&&(se=1,De=J);let Ie=R.length;wo.CancellationToken.is(he)&&(Ie=Ie-1,fe=he);let Ke=Ie-se;switch(Ke){case 0:V=void 0;break;case 1:V=tn(De,R[se]);break;default:if(De===$.ParameterStructures.byName)throw new Error(`Received ${Ke} parameters for 'by Name' request parameter structure.`);V=R.slice(se,Ie).map(ir=>pt(ir));break}}else{let J=R;I=d.method,V=wn(d,J);let he=d.numberOfParams;fe=wo.CancellationToken.is(J[he])?J[he]:void 0}let de=s++,ye;fe&&(ye=fe.onCancellationRequested(()=>{let J=T.sender.sendCancellation(_t,de);return J===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${de}`),Promise.resolve()):J.catch(()=>{i.log(`Sending cancellation messages for id ${de} failed`)})}));let _e={jsonrpc:E,id:de,method:I,params:V};return Jn(_e),typeof T.sender.enableCancellation=="function"&&T.sender.enableCancellation(_e),new Promise(async(J,he)=>{let se=Ke=>{J(Ke),T.sender.cleanup(de),ye?.dispose()},De=Ke=>{he(Ke),T.sender.cleanup(de),ye?.dispose()},Ie={method:I,timerStart:Date.now(),resolve:se,reject:De};try{await e.write(_e),ke.set(de,Ie)}catch(Ke){throw i.error("Sending request failed."),Ie.reject(new $.ResponseError($.ErrorCodes.MessageWriteError,Ke.message?Ke.message:"Unknown reason")),Ke}})},onRequest:(d,R)=>{Dt();let I=null;return Io.is(d)?(I=void 0,b=d):Re.string(d)?(I=null,R!==void 0&&(I=d,x.set(d,{handler:R,type:void 0}))):R!==void 0&&(I=d.method,x.set(d.method,{type:d,handler:R})),{dispose:()=>{I!==null&&(I!==void 0?x.delete(I):b=void 0)}}},hasPendingResponse:()=>ke.size>0,trace:async(d,R,I)=>{let V=!1,fe=Qe.Text;I!==void 0&&(Re.boolean(I)?V=I:(V=I.sendNotification||!1,fe=I.traceFormat||Qe.Text)),y=d,w=fe,y===le.Off?G=void 0:G=R,V&&!W()&&!O()&&await _t.sendNotification(Oo.type,{value:le.toString(d)})},onError:me.event,onClose:Me.event,onUnhandledNotification:Je.event,onDispose:P.event,end:()=>{e.end()},dispose:()=>{if(O())return;ce=ut.Disposed,P.fire(void 0);let d=new $.ResponseError($.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let R of ke.values())R.reject(d);ke=new Map,v=new Map,oe=new Set,be=new ma.LinkedMap,Re.func(e.dispose)&&e.dispose(),Re.func(t.dispose)&&t.dispose()},listen:()=>{Dt(),nr(),ce=ut.Listening,t.listen(Yn)},inspect:()=>{(0,ga.default)().console.log("inspect")}};return _t.onNotification(vr.type,d=>{if(y===le.Off||!G)return;let R=y===le.Verbose||y===le.Compact;G.log(d.message,R?d.verbose:void 0)}),_t.onNotification(On.type,d=>{let R=ee.get(d.token);R?R(d.value):Ze.fire(d)}),_t}X.createMessageConnection=_f});var kr=q(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.ProgressType=_.ProgressToken=_.createMessageConnection=_.NullLogger=_.ConnectionOptions=_.ConnectionStrategy=_.AbstractMessageBuffer=_.WriteableStreamMessageWriter=_.AbstractMessageWriter=_.MessageWriter=_.ReadableStreamMessageReader=_.AbstractMessageReader=_.MessageReader=_.SharedArrayReceiverStrategy=_.SharedArraySenderStrategy=_.CancellationToken=_.CancellationTokenSource=_.Emitter=_.Event=_.Disposable=_.LRUCache=_.Touch=_.LinkedMap=_.ParameterStructures=_.NotificationType9=_.NotificationType8=_.NotificationType7=_.NotificationType6=_.NotificationType5=_.NotificationType4=_.NotificationType3=_.NotificationType2=_.NotificationType1=_.NotificationType0=_.NotificationType=_.ErrorCodes=_.ResponseError=_.RequestType9=_.RequestType8=_.RequestType7=_.RequestType6=_.RequestType5=_.RequestType4=_.RequestType3=_.RequestType2=_.RequestType1=_.RequestType0=_.RequestType=_.Message=_.RAL=void 0;_.MessageStrategy=_.CancellationStrategy=_.CancellationSenderStrategy=_.CancellationReceiverStrategy=_.ConnectionError=_.ConnectionErrors=_.LogTraceNotification=_.SetTraceNotification=_.TraceFormat=_.TraceValues=_.Trace=void 0;var ge=so();Object.defineProperty(_,"Message",{enumerable:!0,get:function(){return ge.Message}});Object.defineProperty(_,"RequestType",{enumerable:!0,get:function(){return ge.RequestType}});Object.defineProperty(_,"RequestType0",{enumerable:!0,get:function(){return ge.RequestType0}});Object.defineProperty(_,"RequestType1",{enumerable:!0,get:function(){return ge.RequestType1}});Object.defineProperty(_,"RequestType2",{enumerable:!0,get:function(){return ge.RequestType2}});Object.defineProperty(_,"RequestType3",{enumerable:!0,get:function(){return ge.RequestType3}});Object.defineProperty(_,"RequestType4",{enumerable:!0,get:function(){return ge.RequestType4}});Object.defineProperty(_,"RequestType5",{enumerable:!0,get:function(){return ge.RequestType5}});Object.defineProperty(_,"RequestType6",{enumerable:!0,get:function(){return ge.RequestType6}});Object.defineProperty(_,"RequestType7",{enumerable:!0,get:function(){return ge.RequestType7}});Object.defineProperty(_,"RequestType8",{enumerable:!0,get:function(){return ge.RequestType8}});Object.defineProperty(_,"RequestType9",{enumerable:!0,get:function(){return ge.RequestType9}});Object.defineProperty(_,"ResponseError",{enumerable:!0,get:function(){return ge.ResponseError}});Object.defineProperty(_,"ErrorCodes",{enumerable:!0,get:function(){return ge.ErrorCodes}});Object.defineProperty(_,"NotificationType",{enumerable:!0,get:function(){return ge.NotificationType}});Object.defineProperty(_,"NotificationType0",{enumerable:!0,get:function(){return ge.NotificationType0}});Object.defineProperty(_,"NotificationType1",{enumerable:!0,get:function(){return ge.NotificationType1}});Object.defineProperty(_,"NotificationType2",{enumerable:!0,get:function(){return ge.NotificationType2}});Object.defineProperty(_,"NotificationType3",{enumerable:!0,get:function(){return ge.NotificationType3}});Object.defineProperty(_,"NotificationType4",{enumerable:!0,get:function(){return ge.NotificationType4}});Object.defineProperty(_,"NotificationType5",{enumerable:!0,get:function(){return ge.NotificationType5}});Object.defineProperty(_,"NotificationType6",{enumerable:!0,get:function(){return ge.NotificationType6}});Object.defineProperty(_,"NotificationType7",{enumerable:!0,get:function(){return ge.NotificationType7}});Object.defineProperty(_,"NotificationType8",{enumerable:!0,get:function(){return ge.NotificationType8}});Object.defineProperty(_,"NotificationType9",{enumerable:!0,get:function(){return ge.NotificationType9}});Object.defineProperty(_,"ParameterStructures",{enumerable:!0,get:function(){return ge.ParameterStructures}});var Lo=co();Object.defineProperty(_,"LinkedMap",{enumerable:!0,get:function(){return Lo.LinkedMap}});Object.defineProperty(_,"LRUCache",{enumerable:!0,get:function(){return Lo.LRUCache}});Object.defineProperty(_,"Touch",{enumerable:!0,get:function(){return Lo.Touch}});var Cf=ia();Object.defineProperty(_,"Disposable",{enumerable:!0,get:function(){return Cf.Disposable}});var _a=sn();Object.defineProperty(_,"Event",{enumerable:!0,get:function(){return _a.Event}});Object.defineProperty(_,"Emitter",{enumerable:!0,get:function(){return _a.Emitter}});var Ca=hr();Object.defineProperty(_,"CancellationTokenSource",{enumerable:!0,get:function(){return Ca.CancellationTokenSource}});Object.defineProperty(_,"CancellationToken",{enumerable:!0,get:function(){return Ca.CancellationToken}});var ba=sa();Object.defineProperty(_,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return ba.SharedArraySenderStrategy}});Object.defineProperty(_,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return ba.SharedArrayReceiverStrategy}});var Fo=ca();Object.defineProperty(_,"MessageReader",{enumerable:!0,get:function(){return Fo.MessageReader}});Object.defineProperty(_,"AbstractMessageReader",{enumerable:!0,get:function(){return Fo.AbstractMessageReader}});Object.defineProperty(_,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Fo.ReadableStreamMessageReader}});var qo=ha();Object.defineProperty(_,"MessageWriter",{enumerable:!0,get:function(){return qo.MessageWriter}});Object.defineProperty(_,"AbstractMessageWriter",{enumerable:!0,get:function(){return qo.AbstractMessageWriter}});Object.defineProperty(_,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return qo.WriteableStreamMessageWriter}});var bf=pa();Object.defineProperty(_,"AbstractMessageBuffer",{enumerable:!0,get:function(){return bf.AbstractMessageBuffer}});var Le=Ta();Object.defineProperty(_,"ConnectionStrategy",{enumerable:!0,get:function(){return Le.ConnectionStrategy}});Object.defineProperty(_,"ConnectionOptions",{enumerable:!0,get:function(){return Le.ConnectionOptions}});Object.defineProperty(_,"NullLogger",{enumerable:!0,get:function(){return Le.NullLogger}});Object.defineProperty(_,"createMessageConnection",{enumerable:!0,get:function(){return Le.createMessageConnection}});Object.defineProperty(_,"ProgressToken",{enumerable:!0,get:function(){return Le.ProgressToken}});Object.defineProperty(_,"ProgressType",{enumerable:!0,get:function(){return Le.ProgressType}});Object.defineProperty(_,"Trace",{enumerable:!0,get:function(){return Le.Trace}});Object.defineProperty(_,"TraceValues",{enumerable:!0,get:function(){return Le.TraceValues}});Object.defineProperty(_,"TraceFormat",{enumerable:!0,get:function(){return Le.TraceFormat}});Object.defineProperty(_,"SetTraceNotification",{enumerable:!0,get:function(){return Le.SetTraceNotification}});Object.defineProperty(_,"LogTraceNotification",{enumerable:!0,get:function(){return Le.LogTraceNotification}});Object.defineProperty(_,"ConnectionErrors",{enumerable:!0,get:function(){return Le.ConnectionErrors}});Object.defineProperty(_,"ConnectionError",{enumerable:!0,get:function(){return Le.ConnectionError}});Object.defineProperty(_,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Le.CancellationReceiverStrategy}});Object.defineProperty(_,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Le.CancellationSenderStrategy}});Object.defineProperty(_,"CancellationStrategy",{enumerable:!0,get:function(){return Le.CancellationStrategy}});Object.defineProperty(_,"MessageStrategy",{enumerable:!0,get:function(){return Le.MessageStrategy}});var Rf=Nt();_.RAL=Rf.default});var Da=q(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});var Ra=require("util"),bt=kr(),Dr=class t extends bt.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Ra.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Dr.emptyBuffer=Buffer.allocUnsafe(0);var jo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),bt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),bt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),bt.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),bt.Disposable.create(()=>this.stream.off("data",e))}},Uo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),bt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),bt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),bt.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=l=>{l==null?r():i(l)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},ka=Object.freeze({messageBuffer:Object.freeze({create:t=>new Dr(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Ra.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new jo(t),asWritableStream:t=>new Uo(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Wo(){return ka}(function(t){function e(){bt.RAL.install(ka)}t.install=e})(Wo||(Wo={}));Ho.default=Wo});var $t=q(ne=>{"use strict";var kf=ne&&ne.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Df=ne&&ne.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&kf(e,t,n)};Object.defineProperty(ne,"__esModule",{value:!0});ne.createMessageConnection=ne.createServerSocketTransport=ne.createClientSocketTransport=ne.createServerPipeTransport=ne.createClientPipeTransport=ne.generateRandomPipeName=ne.StreamMessageWriter=ne.StreamMessageReader=ne.SocketMessageWriter=ne.SocketMessageReader=ne.PortMessageWriter=ne.PortMessageReader=ne.IPCMessageWriter=ne.IPCMessageReader=void 0;var dn=Da();dn.default.install();var Ea=require("path"),Ef=require("os"),Sf=require("crypto"),Nr=require("net"),Xe=kr();Df(kr(),ne);var Vo=class extends Xe.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Xe.Disposable.create(()=>this.process.off("message",e))}};ne.IPCMessageReader=Vo;var Bo=class extends Xe.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ne.IPCMessageWriter=Bo;var $o=class extends Xe.AbstractMessageReader{constructor(e){super(),this.onData=new Xe.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};ne.PortMessageReader=$o;var zo=class extends Xe.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ne.PortMessageWriter=zo;var Vt=class extends Xe.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,dn.default)().stream.asReadableStream(e),n)}};ne.SocketMessageReader=Vt;var Bt=class extends Xe.WriteableStreamMessageWriter{constructor(e,n){super((0,dn.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ne.SocketMessageWriter=Bt;var Er=class extends Xe.ReadableStreamMessageReader{constructor(e,n){super((0,dn.default)().stream.asReadableStream(e),n)}};ne.StreamMessageReader=Er;var Sr=class extends Xe.WriteableStreamMessageWriter{constructor(e,n){super((0,dn.default)().stream.asWritableStream(e),n)}};ne.StreamMessageWriter=Sr;var Sa=process.env.XDG_RUNTIME_DIR,Nf=new Map([["linux",107],["darwin",103]]);function wf(){let t=(0,Sf.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Sa?e=Ea.join(Sa,`vscode-ipc-${t}.sock`):e=Ea.join(Ef.tmpdir(),`vscode-${t}.sock`);let n=Nf.get(process.platform);return n!==void 0&&e.length>n&&(0,dn.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}ne.generateRandomPipeName=wf;function Pf(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let l=(0,Nr.createServer)(p=>{l.close(),n([new Vt(p,e),new Bt(p,e)])});l.on("error",s),l.listen(t,()=>{l.removeListener("error",s),i({onConnected:()=>r})})})}ne.createClientPipeTransport=Pf;function xf(t,e="utf-8"){let n=(0,Nr.createConnection)(t);return[new Vt(n,e),new Bt(n,e)]}ne.createServerPipeTransport=xf;function If(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let l=(0,Nr.createServer)(p=>{l.close(),n([new Vt(p,e),new Bt(p,e)])});l.on("error",s),l.listen(t,"127.0.0.1",()=>{l.removeListener("error",s),i({onConnected:()=>r})})})}ne.createClientSocketTransport=If;function Of(t,e="utf-8"){let n=(0,Nr.createConnection)(t,"127.0.0.1");return[new Vt(n,e),new Bt(n,e)]}ne.createServerSocketTransport=Of;function Af(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function Mf(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function Lf(t,e,n,r){n||(n=Xe.NullLogger);let i=Af(t)?new Er(t):t,s=Mf(e)?new Sr(e):e;return Xe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Xe.createMessageConnection)(i,s,n,r)}ne.createMessageConnection=Lf});var Go=q((Wp,Na)=>{"use strict";Na.exports=$t()});var Pr=q((wa,wr)=>{(function(t){if(typeof wr=="object"&&typeof wr.exports=="object"){var e=t(require,wa);e!==void 0&&(wr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(a){function f(h){return typeof h=="string"}a.is=f})(n||(e.DocumentUri=n={}));var r;(function(a){function f(h){return typeof h=="string"}a.is=f})(r||(e.URI=r={}));var i;(function(a){a.MIN_VALUE=-2147483648,a.MAX_VALUE=2147483647;function f(h){return typeof h=="number"&&a.MIN_VALUE<=h&&h<=a.MAX_VALUE}a.is=f})(i||(e.integer=i={}));var s;(function(a){a.MIN_VALUE=0,a.MAX_VALUE=2147483647;function f(h){return typeof h=="number"&&a.MIN_VALUE<=h&&h<=a.MAX_VALUE}a.is=f})(s||(e.uinteger=s={}));var l;(function(a){function f(c,o){return c===Number.MAX_VALUE&&(c=s.MAX_VALUE),o===Number.MAX_VALUE&&(o=s.MAX_VALUE),{line:c,character:o}}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&m.uinteger(o.line)&&m.uinteger(o.character)}a.is=h})(l||(e.Position=l={}));var p;(function(a){function f(c,o,g,k){if(m.uinteger(c)&&m.uinteger(o)&&m.uinteger(g)&&m.uinteger(k))return{start:l.create(c,o),end:l.create(g,k)};if(l.is(c)&&l.is(o))return{start:c,end:o};throw new Error("Range#create called with invalid arguments[".concat(c,", ").concat(o,", ").concat(g,", ").concat(k,"]"))}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&l.is(o.start)&&l.is(o.end)}a.is=h})(p||(e.Range=p={}));var E;(function(a){function f(c,o){return{uri:c,range:o}}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&p.is(o.range)&&(m.string(o.uri)||m.undefined(o.uri))}a.is=h})(E||(e.Location=E={}));var b;(function(a){function f(c,o,g,k){return{targetUri:c,targetRange:o,targetSelectionRange:g,originSelectionRange:k}}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&p.is(o.targetRange)&&m.string(o.targetUri)&&p.is(o.targetSelectionRange)&&(p.is(o.originSelectionRange)||m.undefined(o.originSelectionRange))}a.is=h})(b||(e.LocationLink=b={}));var x;(function(a){function f(c,o,g,k){return{red:c,green:o,blue:g,alpha:k}}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&m.numberRange(o.red,0,1)&&m.numberRange(o.green,0,1)&&m.numberRange(o.blue,0,1)&&m.numberRange(o.alpha,0,1)}a.is=h})(x||(e.Color=x={}));var j;(function(a){function f(c,o){return{range:c,color:o}}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&p.is(o.range)&&x.is(o.color)}a.is=h})(j||(e.ColorInformation=j={}));var U;(function(a){function f(c,o,g){return{label:c,textEdit:o,additionalTextEdits:g}}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&m.string(o.label)&&(m.undefined(o.textEdit)||G.is(o))&&(m.undefined(o.additionalTextEdits)||m.typedArray(o.additionalTextEdits,G.is))}a.is=h})(U||(e.ColorPresentation=U={}));var ee;(function(a){a.Comment="comment",a.Imports="imports",a.Region="region"})(ee||(e.FoldingRangeKind=ee={}));var Te;(function(a){function f(c,o,g,k,Q,Ee){var pe={startLine:c,endLine:o};return m.defined(g)&&(pe.startCharacter=g),m.defined(k)&&(pe.endCharacter=k),m.defined(Q)&&(pe.kind=Q),m.defined(Ee)&&(pe.collapsedText=Ee),pe}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&m.uinteger(o.startLine)&&m.uinteger(o.startLine)&&(m.undefined(o.startCharacter)||m.uinteger(o.startCharacter))&&(m.undefined(o.endCharacter)||m.uinteger(o.endCharacter))&&(m.undefined(o.kind)||m.string(o.kind))}a.is=h})(Te||(e.FoldingRange=Te={}));var be;(function(a){function f(c,o){return{location:c,message:o}}a.create=f;function h(c){var o=c;return m.defined(o)&&E.is(o.location)&&m.string(o.message)}a.is=h})(be||(e.DiagnosticRelatedInformation=be={}));var ke;(function(a){a.Error=1,a.Warning=2,a.Information=3,a.Hint=4})(ke||(e.DiagnosticSeverity=ke={}));var oe;(function(a){a.Unnecessary=1,a.Deprecated=2})(oe||(e.DiagnosticTag=oe={}));var v;(function(a){function f(h){var c=h;return m.objectLiteral(c)&&m.string(c.href)}a.is=f})(v||(e.CodeDescription=v={}));var y;(function(a){function f(c,o,g,k,Q,Ee){var pe={range:c,message:o};return m.defined(g)&&(pe.severity=g),m.defined(k)&&(pe.code=k),m.defined(Q)&&(pe.source=Q),m.defined(Ee)&&(pe.relatedInformation=Ee),pe}a.create=f;function h(c){var o,g=c;return m.defined(g)&&p.is(g.range)&&m.string(g.message)&&(m.number(g.severity)||m.undefined(g.severity))&&(m.integer(g.code)||m.string(g.code)||m.undefined(g.code))&&(m.undefined(g.codeDescription)||m.string((o=g.codeDescription)===null||o===void 0?void 0:o.href))&&(m.string(g.source)||m.undefined(g.source))&&(m.undefined(g.relatedInformation)||m.typedArray(g.relatedInformation,be.is))}a.is=h})(y||(e.Diagnostic=y={}));var w;(function(a){function f(c,o){for(var g=[],k=2;k<arguments.length;k++)g[k-2]=arguments[k];var Q={title:c,command:o};return m.defined(g)&&g.length>0&&(Q.arguments=g),Q}a.create=f;function h(c){var o=c;return m.defined(o)&&m.string(o.title)&&m.string(o.command)}a.is=h})(w||(e.Command=w={}));var G;(function(a){function f(g,k){return{range:g,newText:k}}a.replace=f;function h(g,k){return{range:{start:g,end:g},newText:k}}a.insert=h;function c(g){return{range:g,newText:""}}a.del=c;function o(g){var k=g;return m.objectLiteral(k)&&m.string(k.newText)&&p.is(k.range)}a.is=o})(G||(e.TextEdit=G={}));var ce;(function(a){function f(c,o,g){var k={label:c};return o!==void 0&&(k.needsConfirmation=o),g!==void 0&&(k.description=g),k}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&m.string(o.label)&&(m.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(m.string(o.description)||o.description===void 0)}a.is=h})(ce||(e.ChangeAnnotation=ce={}));var me;(function(a){function f(h){var c=h;return m.string(c)}a.is=f})(me||(e.ChangeAnnotationIdentifier=me={}));var Me;(function(a){function f(g,k,Q){return{range:g,newText:k,annotationId:Q}}a.replace=f;function h(g,k,Q){return{range:{start:g,end:g},newText:k,annotationId:Q}}a.insert=h;function c(g,k){return{range:g,newText:"",annotationId:k}}a.del=c;function o(g){var k=g;return G.is(k)&&(ce.is(k.annotationId)||me.is(k.annotationId))}a.is=o})(Me||(e.AnnotatedTextEdit=Me={}));var Je;(function(a){function f(c,o){return{textDocument:c,edits:o}}a.create=f;function h(c){var o=c;return m.defined(o)&&W.is(o.textDocument)&&Array.isArray(o.edits)}a.is=h})(Je||(e.TextDocumentEdit=Je={}));var Ze;(function(a){function f(c,o,g){var k={kind:"create",uri:c};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(k.options=o),g!==void 0&&(k.annotationId=g),k}a.create=f;function h(c){var o=c;return o&&o.kind==="create"&&m.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||m.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||m.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||me.is(o.annotationId))}a.is=h})(Ze||(e.CreateFile=Ze={}));var P;(function(a){function f(c,o,g,k){var Q={kind:"rename",oldUri:c,newUri:o};return g!==void 0&&(g.overwrite!==void 0||g.ignoreIfExists!==void 0)&&(Q.options=g),k!==void 0&&(Q.annotationId=k),Q}a.create=f;function h(c){var o=c;return o&&o.kind==="rename"&&m.string(o.oldUri)&&m.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||m.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||m.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||me.is(o.annotationId))}a.is=h})(P||(e.RenameFile=P={}));var T;(function(a){function f(c,o,g){var k={kind:"delete",uri:c};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(k.options=o),g!==void 0&&(k.annotationId=g),k}a.create=f;function h(c){var o=c;return o&&o.kind==="delete"&&m.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||m.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||m.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||me.is(o.annotationId))}a.is=h})(T||(e.DeleteFile=T={}));var L;(function(a){function f(h){var c=h;return c&&(c.changes!==void 0||c.documentChanges!==void 0)&&(c.documentChanges===void 0||c.documentChanges.every(function(o){return m.string(o.kind)?Ze.is(o)||P.is(o)||T.is(o):Je.is(o)}))}a.is=f})(L||(e.WorkspaceEdit=L={}));var F=function(){function a(f,h){this.edits=f,this.changeAnnotations=h}return a.prototype.insert=function(f,h,c){var o,g;if(c===void 0?o=G.insert(f,h):me.is(c)?(g=c,o=Me.insert(f,h,c)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(c),o=Me.insert(f,h,g)),this.edits.push(o),g!==void 0)return g},a.prototype.replace=function(f,h,c){var o,g;if(c===void 0?o=G.replace(f,h):me.is(c)?(g=c,o=Me.replace(f,h,c)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(c),o=Me.replace(f,h,g)),this.edits.push(o),g!==void 0)return g},a.prototype.delete=function(f,h){var c,o;if(h===void 0?c=G.del(f):me.is(h)?(o=h,c=Me.del(f,h)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(h),c=Me.del(f,o)),this.edits.push(c),o!==void 0)return o},a.prototype.add=function(f){this.edits.push(f)},a.prototype.all=function(){return this.edits},a.prototype.clear=function(){this.edits.splice(0,this.edits.length)},a.prototype.assertChangeAnnotations=function(f){if(f===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},a}(),C=function(){function a(f){this._annotations=f===void 0?Object.create(null):f,this._counter=0,this._size=0}return a.prototype.all=function(){return this._annotations},Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),a.prototype.manage=function(f,h){var c;if(me.is(f)?c=f:(c=this.nextId(),h=f),this._annotations[c]!==void 0)throw new Error("Id ".concat(c," is already in use."));if(h===void 0)throw new Error("No annotation provided for id ".concat(c));return this._annotations[c]=h,this._size++,c},a.prototype.nextId=function(){return this._counter++,this._counter.toString()},a}(),D=function(){function a(f){var h=this;this._textEditChanges=Object.create(null),f!==void 0?(this._workspaceEdit=f,f.documentChanges?(this._changeAnnotations=new C(f.changeAnnotations),f.changeAnnotations=this._changeAnnotations.all(),f.documentChanges.forEach(function(c){if(Je.is(c)){var o=new F(c.edits,h._changeAnnotations);h._textEditChanges[c.textDocument.uri]=o}})):f.changes&&Object.keys(f.changes).forEach(function(c){var o=new F(f.changes[c]);h._textEditChanges[c]=o})):this._workspaceEdit={}}return Object.defineProperty(a.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),a.prototype.getTextEditChange=function(f){if(W.is(f)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var h={uri:f.uri,version:f.version},c=this._textEditChanges[h.uri];if(!c){var o=[],g={textDocument:h,edits:o};this._workspaceEdit.documentChanges.push(g),c=new F(o,this._changeAnnotations),this._textEditChanges[h.uri]=c}return c}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var c=this._textEditChanges[f];if(!c){var o=[];this._workspaceEdit.changes[f]=o,c=new F(o),this._textEditChanges[f]=c}return c}},a.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new C,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},a.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},a.prototype.createFile=function(f,h,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ce.is(h)||me.is(h)?o=h:c=h;var g,k;if(o===void 0?g=Ze.create(f,c):(k=me.is(o)?o:this._changeAnnotations.manage(o),g=Ze.create(f,c,k)),this._workspaceEdit.documentChanges.push(g),k!==void 0)return k},a.prototype.renameFile=function(f,h,c,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var g;ce.is(c)||me.is(c)?g=c:o=c;var k,Q;if(g===void 0?k=P.create(f,h,o):(Q=me.is(g)?g:this._changeAnnotations.manage(g),k=P.create(f,h,o,Q)),this._workspaceEdit.documentChanges.push(k),Q!==void 0)return Q},a.prototype.deleteFile=function(f,h,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ce.is(h)||me.is(h)?o=h:c=h;var g,k;if(o===void 0?g=T.create(f,c):(k=me.is(o)?o:this._changeAnnotations.manage(o),g=T.create(f,c,k)),this._workspaceEdit.documentChanges.push(g),k!==void 0)return k},a}();e.WorkspaceChange=D;var S;(function(a){function f(c){return{uri:c}}a.create=f;function h(c){var o=c;return m.defined(o)&&m.string(o.uri)}a.is=h})(S||(e.TextDocumentIdentifier=S={}));var M;(function(a){function f(c,o){return{uri:c,version:o}}a.create=f;function h(c){var o=c;return m.defined(o)&&m.string(o.uri)&&m.integer(o.version)}a.is=h})(M||(e.VersionedTextDocumentIdentifier=M={}));var W;(function(a){function f(c,o){return{uri:c,version:o}}a.create=f;function h(c){var o=c;return m.defined(o)&&m.string(o.uri)&&(o.version===null||m.integer(o.version))}a.is=h})(W||(e.OptionalVersionedTextDocumentIdentifier=W={}));var O;(function(a){function f(c,o,g,k){return{uri:c,languageId:o,version:g,text:k}}a.create=f;function h(c){var o=c;return m.defined(o)&&m.string(o.uri)&&m.string(o.languageId)&&m.integer(o.version)&&m.string(o.text)}a.is=h})(O||(e.TextDocumentItem=O={}));var z;(function(a){a.PlainText="plaintext",a.Markdown="markdown";function f(h){var c=h;return c===a.PlainText||c===a.Markdown}a.is=f})(z||(e.MarkupKind=z={}));var Y;(function(a){function f(h){var c=h;return m.objectLiteral(h)&&z.is(c.kind)&&m.string(c.value)}a.is=f})(Y||(e.MarkupContent=Y={}));var Ne;(function(a){a.Text=1,a.Method=2,a.Function=3,a.Constructor=4,a.Field=5,a.Variable=6,a.Class=7,a.Interface=8,a.Module=9,a.Property=10,a.Unit=11,a.Value=12,a.Enum=13,a.Keyword=14,a.Snippet=15,a.Color=16,a.File=17,a.Reference=18,a.Folder=19,a.EnumMember=20,a.Constant=21,a.Struct=22,a.Event=23,a.Operator=24,a.TypeParameter=25})(Ne||(e.CompletionItemKind=Ne={}));var ue;(function(a){a.PlainText=1,a.Snippet=2})(ue||(e.InsertTextFormat=ue={}));var He;(function(a){a.Deprecated=1})(He||(e.CompletionItemTag=He={}));var ht;(function(a){function f(c,o,g){return{newText:c,insert:o,replace:g}}a.create=f;function h(c){var o=c;return o&&m.string(o.newText)&&p.is(o.insert)&&p.is(o.replace)}a.is=h})(ht||(e.InsertReplaceEdit=ht={}));var Yn;(function(a){a.asIs=1,a.adjustIndentation=2})(Yn||(e.InsertTextMode=Yn={}));var Kn;(function(a){function f(h){var c=h;return c&&(m.string(c.detail)||c.detail===void 0)&&(m.string(c.description)||c.description===void 0)}a.is=f})(Kn||(e.CompletionItemLabelDetails=Kn={}));var Qn;(function(a){function f(h){return{label:h}}a.create=f})(Qn||(e.CompletionItem=Qn={}));var Xn;(function(a){function f(h,c){return{items:h||[],isIncomplete:!!c}}a.create=f})(Xn||(e.CompletionList=Xn={}));var Zt;(function(a){function f(c){return c.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a.fromPlainText=f;function h(c){var o=c;return m.string(o)||m.objectLiteral(o)&&m.string(o.language)&&m.string(o.value)}a.is=h})(Zt||(e.MarkedString=Zt={}));var st;(function(a){function f(h){var c=h;return!!c&&m.objectLiteral(c)&&(Y.is(c.contents)||Zt.is(c.contents)||m.typedArray(c.contents,Zt.is))&&(h.range===void 0||p.is(h.range))}a.is=f})(st||(e.Hover=st={}));var Jn;(function(a){function f(h,c){return c?{label:h,documentation:c}:{label:h}}a.create=f})(Jn||(e.ParameterInformation=Jn={}));var Zn;(function(a){function f(h,c){for(var o=[],g=2;g<arguments.length;g++)o[g-2]=arguments[g];var k={label:h};return m.defined(c)&&(k.documentation=c),m.defined(o)?k.parameters=o:k.parameters=[],k}a.create=f})(Zn||(e.SignatureInformation=Zn={}));var Wt;(function(a){a.Text=1,a.Read=2,a.Write=3})(Wt||(e.DocumentHighlightKind=Wt={}));var er;(function(a){function f(h,c){var o={range:h};return m.number(c)&&(o.kind=c),o}a.create=f})(er||(e.DocumentHighlight=er={}));var en;(function(a){a.File=1,a.Module=2,a.Namespace=3,a.Package=4,a.Class=5,a.Method=6,a.Property=7,a.Field=8,a.Constructor=9,a.Enum=10,a.Interface=11,a.Function=12,a.Variable=13,a.Constant=14,a.String=15,a.Number=16,a.Boolean=17,a.Array=18,a.Object=19,a.Key=20,a.Null=21,a.EnumMember=22,a.Struct=23,a.Event=24,a.Operator=25,a.TypeParameter=26})(en||(e.SymbolKind=en={}));var tr;(function(a){a.Deprecated=1})(tr||(e.SymbolTag=tr={}));var Tt;(function(a){function f(h,c,o,g,k){var Q={name:h,kind:c,location:{uri:g,range:o}};return k&&(Q.containerName=k),Q}a.create=f})(Tt||(e.SymbolInformation=Tt={}));var Dt;(function(a){function f(h,c,o,g){return g!==void 0?{name:h,kind:c,location:{uri:o,range:g}}:{name:h,kind:c,location:{uri:o}}}a.create=f})(Dt||(e.WorkspaceSymbol=Dt={}));var nr;(function(a){function f(c,o,g,k,Q,Ee){var pe={name:c,detail:o,kind:g,range:k,selectionRange:Q};return Ee!==void 0&&(pe.children=Ee),pe}a.create=f;function h(c){var o=c;return o&&m.string(o.name)&&m.number(o.kind)&&p.is(o.range)&&p.is(o.selectionRange)&&(o.detail===void 0||m.string(o.detail))&&(o.deprecated===void 0||m.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}a.is=h})(nr||(e.DocumentSymbol=nr={}));var rr;(function(a){a.Empty="",a.QuickFix="quickfix",a.Refactor="refactor",a.RefactorExtract="refactor.extract",a.RefactorInline="refactor.inline",a.RefactorRewrite="refactor.rewrite",a.Source="source",a.SourceOrganizeImports="source.organizeImports",a.SourceFixAll="source.fixAll"})(rr||(e.CodeActionKind=rr={}));var pt;(function(a){a.Invoked=1,a.Automatic=2})(pt||(e.CodeActionTriggerKind=pt={}));var Sn;(function(a){function f(c,o,g){var k={diagnostics:c};return o!=null&&(k.only=o),g!=null&&(k.triggerKind=g),k}a.create=f;function h(c){var o=c;return m.defined(o)&&m.typedArray(o.diagnostics,y.is)&&(o.only===void 0||m.typedArray(o.only,m.string))&&(o.triggerKind===void 0||o.triggerKind===pt.Invoked||o.triggerKind===pt.Automatic)}a.is=h})(Sn||(e.CodeActionContext=Sn={}));var Nn;(function(a){function f(c,o,g){var k={title:c},Q=!0;return typeof o=="string"?(Q=!1,k.kind=o):w.is(o)?k.command=o:k.edit=o,Q&&g!==void 0&&(k.kind=g),k}a.create=f;function h(c){var o=c;return o&&m.string(o.title)&&(o.diagnostics===void 0||m.typedArray(o.diagnostics,y.is))&&(o.kind===void 0||m.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||w.is(o.command))&&(o.isPreferred===void 0||m.boolean(o.isPreferred))&&(o.edit===void 0||L.is(o.edit))}a.is=h})(Nn||(e.CodeAction=Nn={}));var tn;(function(a){function f(c,o){var g={range:c};return m.defined(o)&&(g.data=o),g}a.create=f;function h(c){var o=c;return m.defined(o)&&p.is(o.range)&&(m.undefined(o.command)||w.is(o.command))}a.is=h})(tn||(e.CodeLens=tn={}));var wn;(function(a){function f(c,o){return{tabSize:c,insertSpaces:o}}a.create=f;function h(c){var o=c;return m.defined(o)&&m.uinteger(o.tabSize)&&m.boolean(o.insertSpaces)}a.is=h})(wn||(e.FormattingOptions=wn={}));var _t;(function(a){function f(c,o,g){return{range:c,target:o,data:g}}a.create=f;function h(c){var o=c;return m.defined(o)&&p.is(o.range)&&(m.undefined(o.target)||m.string(o.target))}a.is=h})(_t||(e.DocumentLink=_t={}));var d;(function(a){function f(c,o){return{range:c,parent:o}}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&p.is(o.range)&&(o.parent===void 0||a.is(o.parent))}a.is=h})(d||(e.SelectionRange=d={}));var R;(function(a){a.namespace="namespace",a.type="type",a.class="class",a.enum="enum",a.interface="interface",a.struct="struct",a.typeParameter="typeParameter",a.parameter="parameter",a.variable="variable",a.property="property",a.enumMember="enumMember",a.event="event",a.function="function",a.method="method",a.macro="macro",a.keyword="keyword",a.modifier="modifier",a.comment="comment",a.string="string",a.number="number",a.regexp="regexp",a.operator="operator",a.decorator="decorator"})(R||(e.SemanticTokenTypes=R={}));var I;(function(a){a.declaration="declaration",a.definition="definition",a.readonly="readonly",a.static="static",a.deprecated="deprecated",a.abstract="abstract",a.async="async",a.modification="modification",a.documentation="documentation",a.defaultLibrary="defaultLibrary"})(I||(e.SemanticTokenModifiers=I={}));var V;(function(a){function f(h){var c=h;return m.objectLiteral(c)&&(c.resultId===void 0||typeof c.resultId=="string")&&Array.isArray(c.data)&&(c.data.length===0||typeof c.data[0]=="number")}a.is=f})(V||(e.SemanticTokens=V={}));var fe;(function(a){function f(c,o){return{range:c,text:o}}a.create=f;function h(c){var o=c;return o!=null&&p.is(o.range)&&m.string(o.text)}a.is=h})(fe||(e.InlineValueText=fe={}));var de;(function(a){function f(c,o,g){return{range:c,variableName:o,caseSensitiveLookup:g}}a.create=f;function h(c){var o=c;return o!=null&&p.is(o.range)&&m.boolean(o.caseSensitiveLookup)&&(m.string(o.variableName)||o.variableName===void 0)}a.is=h})(de||(e.InlineValueVariableLookup=de={}));var ye;(function(a){function f(c,o){return{range:c,expression:o}}a.create=f;function h(c){var o=c;return o!=null&&p.is(o.range)&&(m.string(o.expression)||o.expression===void 0)}a.is=h})(ye||(e.InlineValueEvaluatableExpression=ye={}));var _e;(function(a){function f(c,o){return{frameId:c,stoppedLocation:o}}a.create=f;function h(c){var o=c;return m.defined(o)&&p.is(c.stoppedLocation)}a.is=h})(_e||(e.InlineValueContext=_e={}));var J;(function(a){a.Type=1,a.Parameter=2;function f(h){return h===1||h===2}a.is=f})(J||(e.InlayHintKind=J={}));var he;(function(a){function f(c){return{value:c}}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&(o.tooltip===void 0||m.string(o.tooltip)||Y.is(o.tooltip))&&(o.location===void 0||E.is(o.location))&&(o.command===void 0||w.is(o.command))}a.is=h})(he||(e.InlayHintLabelPart=he={}));var se;(function(a){function f(c,o,g){var k={position:c,label:o};return g!==void 0&&(k.kind=g),k}a.create=f;function h(c){var o=c;return m.objectLiteral(o)&&l.is(o.position)&&(m.string(o.label)||m.typedArray(o.label,he.is))&&(o.kind===void 0||J.is(o.kind))&&o.textEdits===void 0||m.typedArray(o.textEdits,G.is)&&(o.tooltip===void 0||m.string(o.tooltip)||Y.is(o.tooltip))&&(o.paddingLeft===void 0||m.boolean(o.paddingLeft))&&(o.paddingRight===void 0||m.boolean(o.paddingRight))}a.is=h})(se||(e.InlayHint=se={}));var De;(function(a){function f(h){return{kind:"snippet",value:h}}a.createSnippet=f})(De||(e.StringValue=De={}));var Ie;(function(a){function f(h,c,o,g){return{insertText:h,filterText:c,range:o,command:g}}a.create=f})(Ie||(e.InlineCompletionItem=Ie={}));var Ke;(function(a){function f(h){return{items:h}}a.create=f})(Ke||(e.InlineCompletionList=Ke={}));var ir;(function(a){a.Invoked=0,a.Automatic=1})(ir||(e.InlineCompletionTriggerKind=ir={}));var Bs;(function(a){function f(h,c){return{range:h,text:c}}a.create=f})(Bs||(e.SelectedCompletionInfo=Bs={}));var $s;(function(a){function f(h,c){return{triggerKind:h,selectedCompletionInfo:c}}a.create=f})($s||(e.InlineCompletionContext=$s={}));var zs;(function(a){function f(h){var c=h;return m.objectLiteral(c)&&r.is(c.uri)&&m.string(c.name)}a.is=f})(zs||(e.WorkspaceFolder=zs={})),e.EOL=[`
`,`\r
`,"\r"];var Gs;(function(a){function f(g,k,Q,Ee){return new Hd(g,k,Q,Ee)}a.create=f;function h(g){var k=g;return!!(m.defined(k)&&m.string(k.uri)&&(m.undefined(k.languageId)||m.string(k.languageId))&&m.uinteger(k.lineCount)&&m.func(k.getText)&&m.func(k.positionAt)&&m.func(k.offsetAt))}a.is=h;function c(g,k){for(var Q=g.getText(),Ee=o(k,function(nn,or){var Ys=nn.range.start.line-or.range.start.line;return Ys===0?nn.range.start.character-or.range.start.character:Ys}),pe=Q.length,at=Ee.length-1;at>=0;at--){var ct=Ee[at],Ct=g.offsetAt(ct.range.start),te=g.offsetAt(ct.range.end);if(te<=pe)Q=Q.substring(0,Ct)+ct.newText+Q.substring(te,Q.length);else throw new Error("Overlapping edit");pe=Ct}return Q}a.applyEdits=c;function o(g,k){if(g.length<=1)return g;var Q=g.length/2|0,Ee=g.slice(0,Q),pe=g.slice(Q);o(Ee,k),o(pe,k);for(var at=0,ct=0,Ct=0;at<Ee.length&&ct<pe.length;){var te=k(Ee[at],pe[ct]);te<=0?g[Ct++]=Ee[at++]:g[Ct++]=pe[ct++]}for(;at<Ee.length;)g[Ct++]=Ee[at++];for(;ct<pe.length;)g[Ct++]=pe[ct++];return g}})(Gs||(e.TextDocument=Gs={}));var Hd=function(){function a(f,h,c,o){this._uri=f,this._languageId=h,this._version=c,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(a.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),a.prototype.getText=function(f){if(f){var h=this.offsetAt(f.start),c=this.offsetAt(f.end);return this._content.substring(h,c)}return this._content},a.prototype.update=function(f,h){this._content=f.text,this._version=h,this._lineOffsets=void 0},a.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var f=[],h=this._content,c=!0,o=0;o<h.length;o++){c&&(f.push(o),c=!1);var g=h.charAt(o);c=g==="\r"||g===`
`,g==="\r"&&o+1<h.length&&h.charAt(o+1)===`
`&&o++}c&&h.length>0&&f.push(h.length),this._lineOffsets=f}return this._lineOffsets},a.prototype.positionAt=function(f){f=Math.max(Math.min(f,this._content.length),0);var h=this.getLineOffsets(),c=0,o=h.length;if(o===0)return l.create(0,f);for(;c<o;){var g=Math.floor((c+o)/2);h[g]>f?o=g:c=g+1}var k=c-1;return l.create(k,f-h[k])},a.prototype.offsetAt=function(f){var h=this.getLineOffsets();if(f.line>=h.length)return this._content.length;if(f.line<0)return 0;var c=h[f.line],o=f.line+1<h.length?h[f.line+1]:this._content.length;return Math.max(Math.min(c+f.character,o),c)},Object.defineProperty(a.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),a}(),m;(function(a){var f=Object.prototype.toString;function h(te){return typeof te<"u"}a.defined=h;function c(te){return typeof te>"u"}a.undefined=c;function o(te){return te===!0||te===!1}a.boolean=o;function g(te){return f.call(te)==="[object String]"}a.string=g;function k(te){return f.call(te)==="[object Number]"}a.number=k;function Q(te,nn,or){return f.call(te)==="[object Number]"&&nn<=te&&te<=or}a.numberRange=Q;function Ee(te){return f.call(te)==="[object Number]"&&-2147483648<=te&&te<=2147483647}a.integer=Ee;function pe(te){return f.call(te)==="[object Number]"&&0<=te&&te<=2147483647}a.uinteger=pe;function at(te){return f.call(te)==="[object Function]"}a.func=at;function ct(te){return te!==null&&typeof te=="object"}a.objectLiteral=ct;function Ct(te,nn){return Array.isArray(te)&&te.every(nn)}a.typedArray=Ct})(m||(m={}))})});var Ce=q(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.ProtocolNotificationType=Be.ProtocolNotificationType0=Be.ProtocolRequestType=Be.ProtocolRequestType0=Be.RegistrationType=Be.MessageDirection=void 0;var fn=$t(),Pa;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(Pa||(Be.MessageDirection=Pa={}));var Yo=class{constructor(e){this.method=e}};Be.RegistrationType=Yo;var Ko=class extends fn.RequestType0{constructor(e){super(e)}};Be.ProtocolRequestType0=Ko;var Qo=class extends fn.RequestType{constructor(e){super(e,fn.ParameterStructures.byName)}};Be.ProtocolRequestType=Qo;var Xo=class extends fn.NotificationType0{constructor(e){super(e)}};Be.ProtocolNotificationType0=Xo;var Jo=class extends fn.NotificationType{constructor(e){super(e,fn.ParameterStructures.byName)}};Be.ProtocolNotificationType=Jo});var xr=q(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.objectLiteral=xe.typedArray=xe.stringArray=xe.array=xe.func=xe.error=xe.number=xe.string=xe.boolean=void 0;function Ff(t){return t===!0||t===!1}xe.boolean=Ff;function xa(t){return typeof t=="string"||t instanceof String}xe.string=xa;function qf(t){return typeof t=="number"||t instanceof Number}xe.number=qf;function jf(t){return t instanceof Error}xe.error=jf;function Uf(t){return typeof t=="function"}xe.func=Uf;function Ia(t){return Array.isArray(t)}xe.array=Ia;function Wf(t){return Ia(t)&&t.every(e=>xa(e))}xe.stringArray=Wf;function Hf(t,e){return Array.isArray(t)&&t.every(e)}xe.typedArray=Hf;function Vf(t){return t!==null&&typeof t=="object"}xe.objectLiteral=Vf});var Ma=q(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.ImplementationRequest=void 0;var Oa=Ce(),Aa;(function(t){t.method="textDocument/implementation",t.messageDirection=Oa.MessageDirection.clientToServer,t.type=new Oa.ProtocolRequestType(t.method)})(Aa||(Ir.ImplementationRequest=Aa={}))});var qa=q(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.TypeDefinitionRequest=void 0;var La=Ce(),Fa;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=La.MessageDirection.clientToServer,t.type=new La.ProtocolRequestType(t.method)})(Fa||(Or.TypeDefinitionRequest=Fa={}))});var Wa=q(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.DidChangeWorkspaceFoldersNotification=hn.WorkspaceFoldersRequest=void 0;var Ar=Ce(),ja;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Ar.MessageDirection.serverToClient,t.type=new Ar.ProtocolRequestType0(t.method)})(ja||(hn.WorkspaceFoldersRequest=ja={}));var Ua;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Ar.MessageDirection.clientToServer,t.type=new Ar.ProtocolNotificationType(t.method)})(Ua||(hn.DidChangeWorkspaceFoldersNotification=Ua={}))});var Ba=q(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ConfigurationRequest=void 0;var Ha=Ce(),Va;(function(t){t.method="workspace/configuration",t.messageDirection=Ha.MessageDirection.serverToClient,t.type=new Ha.ProtocolRequestType(t.method)})(Va||(Mr.ConfigurationRequest=Va={}))});var Ga=q(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.ColorPresentationRequest=pn.DocumentColorRequest=void 0;var Lr=Ce(),$a;(function(t){t.method="textDocument/documentColor",t.messageDirection=Lr.MessageDirection.clientToServer,t.type=new Lr.ProtocolRequestType(t.method)})($a||(pn.DocumentColorRequest=$a={}));var za;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Lr.MessageDirection.clientToServer,t.type=new Lr.ProtocolRequestType(t.method)})(za||(pn.ColorPresentationRequest=za={}))});var Qa=q(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.FoldingRangeRefreshRequest=gn.FoldingRangeRequest=void 0;var Fr=Ce(),Ya;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Fr.MessageDirection.clientToServer,t.type=new Fr.ProtocolRequestType(t.method)})(Ya||(gn.FoldingRangeRequest=Ya={}));var Ka;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=Fr.MessageDirection.serverToClient,t.type=new Fr.ProtocolRequestType0(t.method)})(Ka||(gn.FoldingRangeRefreshRequest=Ka={}))});var Za=q(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.DeclarationRequest=void 0;var Xa=Ce(),Ja;(function(t){t.method="textDocument/declaration",t.messageDirection=Xa.MessageDirection.clientToServer,t.type=new Xa.ProtocolRequestType(t.method)})(Ja||(qr.DeclarationRequest=Ja={}))});var nc=q(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.SelectionRangeRequest=void 0;var ec=Ce(),tc;(function(t){t.method="textDocument/selectionRange",t.messageDirection=ec.MessageDirection.clientToServer,t.type=new ec.ProtocolRequestType(t.method)})(tc||(jr.SelectionRangeRequest=tc={}))});var sc=q(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.WorkDoneProgressCancelNotification=xt.WorkDoneProgressCreateRequest=xt.WorkDoneProgress=void 0;var Bf=$t(),Ur=Ce(),rc;(function(t){t.type=new Bf.ProgressType;function e(n){return n===t.type}t.is=e})(rc||(xt.WorkDoneProgress=rc={}));var ic;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Ur.MessageDirection.serverToClient,t.type=new Ur.ProtocolRequestType(t.method)})(ic||(xt.WorkDoneProgressCreateRequest=ic={}));var oc;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Ur.MessageDirection.clientToServer,t.type=new Ur.ProtocolNotificationType(t.method)})(oc||(xt.WorkDoneProgressCancelNotification=oc={}))});var lc=q(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.CallHierarchyOutgoingCallsRequest=It.CallHierarchyIncomingCallsRequest=It.CallHierarchyPrepareRequest=void 0;var mn=Ce(),ac;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolRequestType(t.method)})(ac||(It.CallHierarchyPrepareRequest=ac={}));var cc;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolRequestType(t.method)})(cc||(It.CallHierarchyIncomingCallsRequest=cc={}));var uc;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolRequestType(t.method)})(uc||(It.CallHierarchyOutgoingCallsRequest=uc={}))});var mc=q($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.SemanticTokensRefreshRequest=$e.SemanticTokensRangeRequest=$e.SemanticTokensDeltaRequest=$e.SemanticTokensRequest=$e.SemanticTokensRegistrationType=$e.TokenFormat=void 0;var Rt=Ce(),dc;(function(t){t.Relative="relative"})(dc||($e.TokenFormat=dc={}));var Ln;(function(t){t.method="textDocument/semanticTokens",t.type=new Rt.RegistrationType(t.method)})(Ln||($e.SemanticTokensRegistrationType=Ln={}));var fc;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Rt.MessageDirection.clientToServer,t.type=new Rt.ProtocolRequestType(t.method),t.registrationMethod=Ln.method})(fc||($e.SemanticTokensRequest=fc={}));var hc;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Rt.MessageDirection.clientToServer,t.type=new Rt.ProtocolRequestType(t.method),t.registrationMethod=Ln.method})(hc||($e.SemanticTokensDeltaRequest=hc={}));var pc;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Rt.MessageDirection.clientToServer,t.type=new Rt.ProtocolRequestType(t.method),t.registrationMethod=Ln.method})(pc||($e.SemanticTokensRangeRequest=pc={}));var gc;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Rt.MessageDirection.serverToClient,t.type=new Rt.ProtocolRequestType0(t.method)})(gc||($e.SemanticTokensRefreshRequest=gc={}))});var Tc=q(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.ShowDocumentRequest=void 0;var yc=Ce(),vc;(function(t){t.method="window/showDocument",t.messageDirection=yc.MessageDirection.serverToClient,t.type=new yc.ProtocolRequestType(t.method)})(vc||(Wr.ShowDocumentRequest=vc={}))});var bc=q(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.LinkedEditingRangeRequest=void 0;var _c=Ce(),Cc;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=_c.MessageDirection.clientToServer,t.type=new _c.ProtocolRequestType(t.method)})(Cc||(Hr.LinkedEditingRangeRequest=Cc={}))});var Pc=q(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.WillDeleteFilesRequest=Ue.DidDeleteFilesNotification=Ue.DidRenameFilesNotification=Ue.WillRenameFilesRequest=Ue.DidCreateFilesNotification=Ue.WillCreateFilesRequest=Ue.FileOperationPatternKind=void 0;var et=Ce(),Rc;(function(t){t.file="file",t.folder="folder"})(Rc||(Ue.FileOperationPatternKind=Rc={}));var kc;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=et.MessageDirection.clientToServer,t.type=new et.ProtocolRequestType(t.method)})(kc||(Ue.WillCreateFilesRequest=kc={}));var Dc;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=et.MessageDirection.clientToServer,t.type=new et.ProtocolNotificationType(t.method)})(Dc||(Ue.DidCreateFilesNotification=Dc={}));var Ec;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=et.MessageDirection.clientToServer,t.type=new et.ProtocolRequestType(t.method)})(Ec||(Ue.WillRenameFilesRequest=Ec={}));var Sc;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=et.MessageDirection.clientToServer,t.type=new et.ProtocolNotificationType(t.method)})(Sc||(Ue.DidRenameFilesNotification=Sc={}));var Nc;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=et.MessageDirection.clientToServer,t.type=new et.ProtocolNotificationType(t.method)})(Nc||(Ue.DidDeleteFilesNotification=Nc={}));var wc;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=et.MessageDirection.clientToServer,t.type=new et.ProtocolRequestType(t.method)})(wc||(Ue.WillDeleteFilesRequest=wc={}))});var Mc=q(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.MonikerRequest=Ot.MonikerKind=Ot.UniquenessLevel=void 0;var xc=Ce(),Ic;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Ic||(Ot.UniquenessLevel=Ic={}));var Oc;(function(t){t.$import="import",t.$export="export",t.local="local"})(Oc||(Ot.MonikerKind=Oc={}));var Ac;(function(t){t.method="textDocument/moniker",t.messageDirection=xc.MessageDirection.clientToServer,t.type=new xc.ProtocolRequestType(t.method)})(Ac||(Ot.MonikerRequest=Ac={}))});var jc=q(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.TypeHierarchySubtypesRequest=At.TypeHierarchySupertypesRequest=At.TypeHierarchyPrepareRequest=void 0;var yn=Ce(),Lc;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=yn.MessageDirection.clientToServer,t.type=new yn.ProtocolRequestType(t.method)})(Lc||(At.TypeHierarchyPrepareRequest=Lc={}));var Fc;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=yn.MessageDirection.clientToServer,t.type=new yn.ProtocolRequestType(t.method)})(Fc||(At.TypeHierarchySupertypesRequest=Fc={}));var qc;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=yn.MessageDirection.clientToServer,t.type=new yn.ProtocolRequestType(t.method)})(qc||(At.TypeHierarchySubtypesRequest=qc={}))});var Hc=q(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.InlineValueRefreshRequest=vn.InlineValueRequest=void 0;var Vr=Ce(),Uc;(function(t){t.method="textDocument/inlineValue",t.messageDirection=Vr.MessageDirection.clientToServer,t.type=new Vr.ProtocolRequestType(t.method)})(Uc||(vn.InlineValueRequest=Uc={}));var Wc;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=Vr.MessageDirection.serverToClient,t.type=new Vr.ProtocolRequestType0(t.method)})(Wc||(vn.InlineValueRefreshRequest=Wc={}))});var zc=q(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.InlayHintRefreshRequest=Mt.InlayHintResolveRequest=Mt.InlayHintRequest=void 0;var Tn=Ce(),Vc;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Tn.MessageDirection.clientToServer,t.type=new Tn.ProtocolRequestType(t.method)})(Vc||(Mt.InlayHintRequest=Vc={}));var Bc;(function(t){t.method="inlayHint/resolve",t.messageDirection=Tn.MessageDirection.clientToServer,t.type=new Tn.ProtocolRequestType(t.method)})(Bc||(Mt.InlayHintResolveRequest=Bc={}));var $c;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Tn.MessageDirection.serverToClient,t.type=new Tn.ProtocolRequestType0(t.method)})($c||(Mt.InlayHintRefreshRequest=$c={}))});var Zc=q(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.DiagnosticRefreshRequest=tt.WorkspaceDiagnosticRequest=tt.DocumentDiagnosticRequest=tt.DocumentDiagnosticReportKind=tt.DiagnosticServerCancellationData=void 0;var Jc=$t(),$f=xr(),_n=Ce(),Gc;(function(t){function e(n){let r=n;return r&&$f.boolean(r.retriggerRequest)}t.is=e})(Gc||(tt.DiagnosticServerCancellationData=Gc={}));var Yc;(function(t){t.Full="full",t.Unchanged="unchanged"})(Yc||(tt.DocumentDiagnosticReportKind=Yc={}));var Kc;(function(t){t.method="textDocument/diagnostic",t.messageDirection=_n.MessageDirection.clientToServer,t.type=new _n.ProtocolRequestType(t.method),t.partialResult=new Jc.ProgressType})(Kc||(tt.DocumentDiagnosticRequest=Kc={}));var Qc;(function(t){t.method="workspace/diagnostic",t.messageDirection=_n.MessageDirection.clientToServer,t.type=new _n.ProtocolRequestType(t.method),t.partialResult=new Jc.ProgressType})(Qc||(tt.WorkspaceDiagnosticRequest=Qc={}));var Xc;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=_n.MessageDirection.serverToClient,t.type=new _n.ProtocolRequestType0(t.method)})(Xc||(tt.DiagnosticRefreshRequest=Xc={}))});var su=q(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.DidCloseNotebookDocumentNotification=Se.DidSaveNotebookDocumentNotification=Se.DidChangeNotebookDocumentNotification=Se.NotebookCellArrayChange=Se.DidOpenNotebookDocumentNotification=Se.NotebookDocumentSyncRegistrationType=Se.NotebookDocument=Se.NotebookCell=Se.ExecutionSummary=Se.NotebookCellKind=void 0;var Fn=Pr(),lt=xr(),gt=Ce(),Zo;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(Zo||(Se.NotebookCellKind=Zo={}));var es;(function(t){function e(i,s){let l={executionOrder:i};return(s===!0||s===!1)&&(l.success=s),l}t.create=e;function n(i){let s=i;return lt.objectLiteral(s)&&Fn.uinteger.is(s.executionOrder)&&(s.success===void 0||lt.boolean(s.success))}t.is=n;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=r})(es||(Se.ExecutionSummary=es={}));var Br;(function(t){function e(s,l){return{kind:s,document:l}}t.create=e;function n(s){let l=s;return lt.objectLiteral(l)&&Zo.is(l.kind)&&Fn.DocumentUri.is(l.document)&&(l.metadata===void 0||lt.objectLiteral(l.metadata))}t.is=n;function r(s,l){let p=new Set;return s.document!==l.document&&p.add("document"),s.kind!==l.kind&&p.add("kind"),s.executionSummary!==l.executionSummary&&p.add("executionSummary"),(s.metadata!==void 0||l.metadata!==void 0)&&!i(s.metadata,l.metadata)&&p.add("metadata"),(s.executionSummary!==void 0||l.executionSummary!==void 0)&&!es.equals(s.executionSummary,l.executionSummary)&&p.add("executionSummary"),p}t.diff=r;function i(s,l){if(s===l)return!0;if(s==null||l===null||l===void 0||typeof s!=typeof l||typeof s!="object")return!1;let p=Array.isArray(s),E=Array.isArray(l);if(p!==E)return!1;if(p&&E){if(s.length!==l.length)return!1;for(let b=0;b<s.length;b++)if(!i(s[b],l[b]))return!1}if(lt.objectLiteral(s)&&lt.objectLiteral(l)){let b=Object.keys(s),x=Object.keys(l);if(b.length!==x.length||(b.sort(),x.sort(),!i(b,x)))return!1;for(let j=0;j<b.length;j++){let U=b[j];if(!i(s[U],l[U]))return!1}}return!0}})(Br||(Se.NotebookCell=Br={}));var eu;(function(t){function e(r,i,s,l){return{uri:r,notebookType:i,version:s,cells:l}}t.create=e;function n(r){let i=r;return lt.objectLiteral(i)&&lt.string(i.uri)&&Fn.integer.is(i.version)&&lt.typedArray(i.cells,Br.is)}t.is=n})(eu||(Se.NotebookDocument=eu={}));var Cn;(function(t){t.method="notebookDocument/sync",t.messageDirection=gt.MessageDirection.clientToServer,t.type=new gt.RegistrationType(t.method)})(Cn||(Se.NotebookDocumentSyncRegistrationType=Cn={}));var tu;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=gt.MessageDirection.clientToServer,t.type=new gt.ProtocolNotificationType(t.method),t.registrationMethod=Cn.method})(tu||(Se.DidOpenNotebookDocumentNotification=tu={}));var nu;(function(t){function e(r){let i=r;return lt.objectLiteral(i)&&Fn.uinteger.is(i.start)&&Fn.uinteger.is(i.deleteCount)&&(i.cells===void 0||lt.typedArray(i.cells,Br.is))}t.is=e;function n(r,i,s){let l={start:r,deleteCount:i};return s!==void 0&&(l.cells=s),l}t.create=n})(nu||(Se.NotebookCellArrayChange=nu={}));var ru;(function(t){t.method="notebookDocument/didChange",t.messageDirection=gt.MessageDirection.clientToServer,t.type=new gt.ProtocolNotificationType(t.method),t.registrationMethod=Cn.method})(ru||(Se.DidChangeNotebookDocumentNotification=ru={}));var iu;(function(t){t.method="notebookDocument/didSave",t.messageDirection=gt.MessageDirection.clientToServer,t.type=new gt.ProtocolNotificationType(t.method),t.registrationMethod=Cn.method})(iu||(Se.DidSaveNotebookDocumentNotification=iu={}));var ou;(function(t){t.method="notebookDocument/didClose",t.messageDirection=gt.MessageDirection.clientToServer,t.type=new gt.ProtocolNotificationType(t.method),t.registrationMethod=Cn.method})(ou||(Se.DidCloseNotebookDocumentNotification=ou={}))});var uu=q($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.InlineCompletionRequest=void 0;var au=Ce(),cu;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=au.MessageDirection.clientToServer,t.type=new au.ProtocolRequestType(t.method)})(cu||($r.InlineCompletionRequest=cu={}))});var bl=q(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.WorkspaceSymbolRequest=u.CodeActionResolveRequest=u.CodeActionRequest=u.DocumentSymbolRequest=u.DocumentHighlightRequest=u.ReferencesRequest=u.DefinitionRequest=u.SignatureHelpRequest=u.SignatureHelpTriggerKind=u.HoverRequest=u.CompletionResolveRequest=u.CompletionRequest=u.CompletionTriggerKind=u.PublishDiagnosticsNotification=u.WatchKind=u.RelativePattern=u.FileChangeType=u.DidChangeWatchedFilesNotification=u.WillSaveTextDocumentWaitUntilRequest=u.WillSaveTextDocumentNotification=u.TextDocumentSaveReason=u.DidSaveTextDocumentNotification=u.DidCloseTextDocumentNotification=u.DidChangeTextDocumentNotification=u.TextDocumentContentChangeEvent=u.DidOpenTextDocumentNotification=u.TextDocumentSyncKind=u.TelemetryEventNotification=u.LogMessageNotification=u.ShowMessageRequest=u.ShowMessageNotification=u.MessageType=u.DidChangeConfigurationNotification=u.ExitNotification=u.ShutdownRequest=u.InitializedNotification=u.InitializeErrorCodes=u.InitializeRequest=u.WorkDoneProgressOptions=u.TextDocumentRegistrationOptions=u.StaticRegistrationOptions=u.PositionEncodingKind=u.FailureHandlingKind=u.ResourceOperationKind=u.UnregistrationRequest=u.RegistrationRequest=u.DocumentSelector=u.NotebookCellTextDocumentFilter=u.NotebookDocumentFilter=u.TextDocumentFilter=void 0;u.MonikerRequest=u.MonikerKind=u.UniquenessLevel=u.WillDeleteFilesRequest=u.DidDeleteFilesNotification=u.WillRenameFilesRequest=u.DidRenameFilesNotification=u.WillCreateFilesRequest=u.DidCreateFilesNotification=u.FileOperationPatternKind=u.LinkedEditingRangeRequest=u.ShowDocumentRequest=u.SemanticTokensRegistrationType=u.SemanticTokensRefreshRequest=u.SemanticTokensRangeRequest=u.SemanticTokensDeltaRequest=u.SemanticTokensRequest=u.TokenFormat=u.CallHierarchyPrepareRequest=u.CallHierarchyOutgoingCallsRequest=u.CallHierarchyIncomingCallsRequest=u.WorkDoneProgressCancelNotification=u.WorkDoneProgressCreateRequest=u.WorkDoneProgress=u.SelectionRangeRequest=u.DeclarationRequest=u.FoldingRangeRefreshRequest=u.FoldingRangeRequest=u.ColorPresentationRequest=u.DocumentColorRequest=u.ConfigurationRequest=u.DidChangeWorkspaceFoldersNotification=u.WorkspaceFoldersRequest=u.TypeDefinitionRequest=u.ImplementationRequest=u.ApplyWorkspaceEditRequest=u.ExecuteCommandRequest=u.PrepareRenameRequest=u.RenameRequest=u.PrepareSupportDefaultBehavior=u.DocumentOnTypeFormattingRequest=u.DocumentRangesFormattingRequest=u.DocumentRangeFormattingRequest=u.DocumentFormattingRequest=u.DocumentLinkResolveRequest=u.DocumentLinkRequest=u.CodeLensRefreshRequest=u.CodeLensResolveRequest=u.CodeLensRequest=u.WorkspaceSymbolResolveRequest=void 0;u.InlineCompletionRequest=u.DidCloseNotebookDocumentNotification=u.DidSaveNotebookDocumentNotification=u.DidChangeNotebookDocumentNotification=u.NotebookCellArrayChange=u.DidOpenNotebookDocumentNotification=u.NotebookDocumentSyncRegistrationType=u.NotebookDocument=u.NotebookCell=u.ExecutionSummary=u.NotebookCellKind=u.DiagnosticRefreshRequest=u.WorkspaceDiagnosticRequest=u.DocumentDiagnosticRequest=u.DocumentDiagnosticReportKind=u.DiagnosticServerCancellationData=u.InlayHintRefreshRequest=u.InlayHintResolveRequest=u.InlayHintRequest=u.InlineValueRefreshRequest=u.InlineValueRequest=u.TypeHierarchySupertypesRequest=u.TypeHierarchySubtypesRequest=u.TypeHierarchyPrepareRequest=void 0;var N=Ce(),lu=Pr(),Oe=xr(),zf=Ma();Object.defineProperty(u,"ImplementationRequest",{enumerable:!0,get:function(){return zf.ImplementationRequest}});var Gf=qa();Object.defineProperty(u,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Gf.TypeDefinitionRequest}});var vl=Wa();Object.defineProperty(u,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return vl.WorkspaceFoldersRequest}});Object.defineProperty(u,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return vl.DidChangeWorkspaceFoldersNotification}});var Yf=Ba();Object.defineProperty(u,"ConfigurationRequest",{enumerable:!0,get:function(){return Yf.ConfigurationRequest}});var Tl=Ga();Object.defineProperty(u,"DocumentColorRequest",{enumerable:!0,get:function(){return Tl.DocumentColorRequest}});Object.defineProperty(u,"ColorPresentationRequest",{enumerable:!0,get:function(){return Tl.ColorPresentationRequest}});var _l=Qa();Object.defineProperty(u,"FoldingRangeRequest",{enumerable:!0,get:function(){return _l.FoldingRangeRequest}});Object.defineProperty(u,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return _l.FoldingRangeRefreshRequest}});var Kf=Za();Object.defineProperty(u,"DeclarationRequest",{enumerable:!0,get:function(){return Kf.DeclarationRequest}});var Qf=nc();Object.defineProperty(u,"SelectionRangeRequest",{enumerable:!0,get:function(){return Qf.SelectionRangeRequest}});var os=sc();Object.defineProperty(u,"WorkDoneProgress",{enumerable:!0,get:function(){return os.WorkDoneProgress}});Object.defineProperty(u,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return os.WorkDoneProgressCreateRequest}});Object.defineProperty(u,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return os.WorkDoneProgressCancelNotification}});var ss=lc();Object.defineProperty(u,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return ss.CallHierarchyIncomingCallsRequest}});Object.defineProperty(u,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return ss.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(u,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return ss.CallHierarchyPrepareRequest}});var bn=mc();Object.defineProperty(u,"TokenFormat",{enumerable:!0,get:function(){return bn.TokenFormat}});Object.defineProperty(u,"SemanticTokensRequest",{enumerable:!0,get:function(){return bn.SemanticTokensRequest}});Object.defineProperty(u,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return bn.SemanticTokensDeltaRequest}});Object.defineProperty(u,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return bn.SemanticTokensRangeRequest}});Object.defineProperty(u,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return bn.SemanticTokensRefreshRequest}});Object.defineProperty(u,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return bn.SemanticTokensRegistrationType}});var Xf=Tc();Object.defineProperty(u,"ShowDocumentRequest",{enumerable:!0,get:function(){return Xf.ShowDocumentRequest}});var Jf=bc();Object.defineProperty(u,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Jf.LinkedEditingRangeRequest}});var zt=Pc();Object.defineProperty(u,"FileOperationPatternKind",{enumerable:!0,get:function(){return zt.FileOperationPatternKind}});Object.defineProperty(u,"DidCreateFilesNotification",{enumerable:!0,get:function(){return zt.DidCreateFilesNotification}});Object.defineProperty(u,"WillCreateFilesRequest",{enumerable:!0,get:function(){return zt.WillCreateFilesRequest}});Object.defineProperty(u,"DidRenameFilesNotification",{enumerable:!0,get:function(){return zt.DidRenameFilesNotification}});Object.defineProperty(u,"WillRenameFilesRequest",{enumerable:!0,get:function(){return zt.WillRenameFilesRequest}});Object.defineProperty(u,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return zt.DidDeleteFilesNotification}});Object.defineProperty(u,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return zt.WillDeleteFilesRequest}});var as=Mc();Object.defineProperty(u,"UniquenessLevel",{enumerable:!0,get:function(){return as.UniquenessLevel}});Object.defineProperty(u,"MonikerKind",{enumerable:!0,get:function(){return as.MonikerKind}});Object.defineProperty(u,"MonikerRequest",{enumerable:!0,get:function(){return as.MonikerRequest}});var cs=jc();Object.defineProperty(u,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return cs.TypeHierarchyPrepareRequest}});Object.defineProperty(u,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return cs.TypeHierarchySubtypesRequest}});Object.defineProperty(u,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return cs.TypeHierarchySupertypesRequest}});var Cl=Hc();Object.defineProperty(u,"InlineValueRequest",{enumerable:!0,get:function(){return Cl.InlineValueRequest}});Object.defineProperty(u,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Cl.InlineValueRefreshRequest}});var us=zc();Object.defineProperty(u,"InlayHintRequest",{enumerable:!0,get:function(){return us.InlayHintRequest}});Object.defineProperty(u,"InlayHintResolveRequest",{enumerable:!0,get:function(){return us.InlayHintResolveRequest}});Object.defineProperty(u,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return us.InlayHintRefreshRequest}});var qn=Zc();Object.defineProperty(u,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return qn.DiagnosticServerCancellationData}});Object.defineProperty(u,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return qn.DocumentDiagnosticReportKind}});Object.defineProperty(u,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return qn.DocumentDiagnosticRequest}});Object.defineProperty(u,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return qn.WorkspaceDiagnosticRequest}});Object.defineProperty(u,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return qn.DiagnosticRefreshRequest}});var mt=su();Object.defineProperty(u,"NotebookCellKind",{enumerable:!0,get:function(){return mt.NotebookCellKind}});Object.defineProperty(u,"ExecutionSummary",{enumerable:!0,get:function(){return mt.ExecutionSummary}});Object.defineProperty(u,"NotebookCell",{enumerable:!0,get:function(){return mt.NotebookCell}});Object.defineProperty(u,"NotebookDocument",{enumerable:!0,get:function(){return mt.NotebookDocument}});Object.defineProperty(u,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return mt.NotebookDocumentSyncRegistrationType}});Object.defineProperty(u,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return mt.DidOpenNotebookDocumentNotification}});Object.defineProperty(u,"NotebookCellArrayChange",{enumerable:!0,get:function(){return mt.NotebookCellArrayChange}});Object.defineProperty(u,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return mt.DidChangeNotebookDocumentNotification}});Object.defineProperty(u,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return mt.DidSaveNotebookDocumentNotification}});Object.defineProperty(u,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return mt.DidCloseNotebookDocumentNotification}});var Zf=uu();Object.defineProperty(u,"InlineCompletionRequest",{enumerable:!0,get:function(){return Zf.InlineCompletionRequest}});var ts;(function(t){function e(n){let r=n;return Oe.string(r)||Oe.string(r.language)||Oe.string(r.scheme)||Oe.string(r.pattern)}t.is=e})(ts||(u.TextDocumentFilter=ts={}));var ns;(function(t){function e(n){let r=n;return Oe.objectLiteral(r)&&(Oe.string(r.notebookType)||Oe.string(r.scheme)||Oe.string(r.pattern))}t.is=e})(ns||(u.NotebookDocumentFilter=ns={}));var rs;(function(t){function e(n){let r=n;return Oe.objectLiteral(r)&&(Oe.string(r.notebook)||ns.is(r.notebook))&&(r.language===void 0||Oe.string(r.language))}t.is=e})(rs||(u.NotebookCellTextDocumentFilter=rs={}));var is;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Oe.string(r)&&!ts.is(r)&&!rs.is(r))return!1;return!0}t.is=e})(is||(u.DocumentSelector=is={}));var du;(function(t){t.method="client/registerCapability",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolRequestType(t.method)})(du||(u.RegistrationRequest=du={}));var fu;(function(t){t.method="client/unregisterCapability",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolRequestType(t.method)})(fu||(u.UnregistrationRequest=fu={}));var hu;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(hu||(u.ResourceOperationKind=hu={}));var pu;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(pu||(u.FailureHandlingKind=pu={}));var gu;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(gu||(u.PositionEncodingKind=gu={}));var mu;(function(t){function e(n){let r=n;return r&&Oe.string(r.id)&&r.id.length>0}t.hasId=e})(mu||(u.StaticRegistrationOptions=mu={}));var yu;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||is.is(r.documentSelector))}t.is=e})(yu||(u.TextDocumentRegistrationOptions=yu={}));var vu;(function(t){function e(r){let i=r;return Oe.objectLiteral(i)&&(i.workDoneProgress===void 0||Oe.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&Oe.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(vu||(u.WorkDoneProgressOptions=vu={}));var Tu;(function(t){t.method="initialize",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(Tu||(u.InitializeRequest=Tu={}));var _u;(function(t){t.unknownProtocolVersion=1})(_u||(u.InitializeErrorCodes=_u={}));var Cu;(function(t){t.method="initialized",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType(t.method)})(Cu||(u.InitializedNotification=Cu={}));var bu;(function(t){t.method="shutdown",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType0(t.method)})(bu||(u.ShutdownRequest=bu={}));var Ru;(function(t){t.method="exit",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType0(t.method)})(Ru||(u.ExitNotification=Ru={}));var ku;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType(t.method)})(ku||(u.DidChangeConfigurationNotification=ku={}));var Du;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(Du||(u.MessageType=Du={}));var Eu;(function(t){t.method="window/showMessage",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolNotificationType(t.method)})(Eu||(u.ShowMessageNotification=Eu={}));var Su;(function(t){t.method="window/showMessageRequest",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolRequestType(t.method)})(Su||(u.ShowMessageRequest=Su={}));var Nu;(function(t){t.method="window/logMessage",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolNotificationType(t.method)})(Nu||(u.LogMessageNotification=Nu={}));var wu;(function(t){t.method="telemetry/event",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolNotificationType(t.method)})(wu||(u.TelemetryEventNotification=wu={}));var Pu;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Pu||(u.TextDocumentSyncKind=Pu={}));var xu;(function(t){t.method="textDocument/didOpen",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType(t.method)})(xu||(u.DidOpenTextDocumentNotification=xu={}));var Iu;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(Iu||(u.TextDocumentContentChangeEvent=Iu={}));var Ou;(function(t){t.method="textDocument/didChange",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType(t.method)})(Ou||(u.DidChangeTextDocumentNotification=Ou={}));var Au;(function(t){t.method="textDocument/didClose",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType(t.method)})(Au||(u.DidCloseTextDocumentNotification=Au={}));var Mu;(function(t){t.method="textDocument/didSave",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType(t.method)})(Mu||(u.DidSaveTextDocumentNotification=Mu={}));var Lu;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Lu||(u.TextDocumentSaveReason=Lu={}));var Fu;(function(t){t.method="textDocument/willSave",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType(t.method)})(Fu||(u.WillSaveTextDocumentNotification=Fu={}));var qu;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(qu||(u.WillSaveTextDocumentWaitUntilRequest=qu={}));var ju;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolNotificationType(t.method)})(ju||(u.DidChangeWatchedFilesNotification=ju={}));var Uu;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Uu||(u.FileChangeType=Uu={}));var Wu;(function(t){function e(n){let r=n;return Oe.objectLiteral(r)&&(lu.URI.is(r.baseUri)||lu.WorkspaceFolder.is(r.baseUri))&&Oe.string(r.pattern)}t.is=e})(Wu||(u.RelativePattern=Wu={}));var Hu;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Hu||(u.WatchKind=Hu={}));var Vu;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolNotificationType(t.method)})(Vu||(u.PublishDiagnosticsNotification=Vu={}));var Bu;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Bu||(u.CompletionTriggerKind=Bu={}));var $u;(function(t){t.method="textDocument/completion",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})($u||(u.CompletionRequest=$u={}));var zu;(function(t){t.method="completionItem/resolve",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(zu||(u.CompletionResolveRequest=zu={}));var Gu;(function(t){t.method="textDocument/hover",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(Gu||(u.HoverRequest=Gu={}));var Yu;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(Yu||(u.SignatureHelpTriggerKind=Yu={}));var Ku;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(Ku||(u.SignatureHelpRequest=Ku={}));var Qu;(function(t){t.method="textDocument/definition",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(Qu||(u.DefinitionRequest=Qu={}));var Xu;(function(t){t.method="textDocument/references",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(Xu||(u.ReferencesRequest=Xu={}));var Ju;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(Ju||(u.DocumentHighlightRequest=Ju={}));var Zu;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(Zu||(u.DocumentSymbolRequest=Zu={}));var el;(function(t){t.method="textDocument/codeAction",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(el||(u.CodeActionRequest=el={}));var tl;(function(t){t.method="codeAction/resolve",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(tl||(u.CodeActionResolveRequest=tl={}));var nl;(function(t){t.method="workspace/symbol",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(nl||(u.WorkspaceSymbolRequest=nl={}));var rl;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(rl||(u.WorkspaceSymbolResolveRequest=rl={}));var il;(function(t){t.method="textDocument/codeLens",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(il||(u.CodeLensRequest=il={}));var ol;(function(t){t.method="codeLens/resolve",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(ol||(u.CodeLensResolveRequest=ol={}));var sl;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolRequestType0(t.method)})(sl||(u.CodeLensRefreshRequest=sl={}));var al;(function(t){t.method="textDocument/documentLink",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(al||(u.DocumentLinkRequest=al={}));var cl;(function(t){t.method="documentLink/resolve",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(cl||(u.DocumentLinkResolveRequest=cl={}));var ul;(function(t){t.method="textDocument/formatting",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(ul||(u.DocumentFormattingRequest=ul={}));var ll;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(ll||(u.DocumentRangeFormattingRequest=ll={}));var dl;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(dl||(u.DocumentRangesFormattingRequest=dl={}));var fl;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(fl||(u.DocumentOnTypeFormattingRequest=fl={}));var hl;(function(t){t.Identifier=1})(hl||(u.PrepareSupportDefaultBehavior=hl={}));var pl;(function(t){t.method="textDocument/rename",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(pl||(u.RenameRequest=pl={}));var gl;(function(t){t.method="textDocument/prepareRename",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(gl||(u.PrepareRenameRequest=gl={}));var ml;(function(t){t.method="workspace/executeCommand",t.messageDirection=N.MessageDirection.clientToServer,t.type=new N.ProtocolRequestType(t.method)})(ml||(u.ExecuteCommandRequest=ml={}));var yl;(function(t){t.method="workspace/applyEdit",t.messageDirection=N.MessageDirection.serverToClient,t.type=new N.ProtocolRequestType("workspace/applyEdit")})(yl||(u.ApplyWorkspaceEditRequest=yl={}))});var kl=q(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.createProtocolConnection=void 0;var Rl=$t();function eh(t,e,n,r){return Rl.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Rl.createMessageConnection)(t,e,n,r)}zr.createProtocolConnection=eh});var El=q(ze=>{"use strict";var th=ze&&ze.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Gr=ze&&ze.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&th(e,t,n)};Object.defineProperty(ze,"__esModule",{value:!0});ze.LSPErrorCodes=ze.createProtocolConnection=void 0;Gr($t(),ze);Gr(Pr(),ze);Gr(Ce(),ze);Gr(bl(),ze);var nh=kl();Object.defineProperty(ze,"createProtocolConnection",{enumerable:!0,get:function(){return nh.createProtocolConnection}});var Dl;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(Dl||(ze.LSPErrorCodes=Dl={}))});var we=q(yt=>{"use strict";var rh=yt&&yt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Sl=yt&&yt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&rh(e,t,n)};Object.defineProperty(yt,"__esModule",{value:!0});yt.createProtocolConnection=void 0;var ih=Go();Sl(Go(),yt);Sl(El(),yt);function oh(t,e,n,r){return(0,ih.createMessageConnection)(t,e,n,r)}yt.createProtocolConnection=oh});var ls=q(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.generateUuid=nt.parse=nt.isUUID=nt.v4=nt.empty=void 0;var jn=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Un=class t extends jn{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};Un._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Un._timeHighBits=["8","9","a","b"];nt.empty=new jn("00000000-0000-0000-0000-000000000000");function Nl(){return new Un}nt.v4=Nl;var sh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function wl(t){return sh.test(t)}nt.isUUID=wl;function ah(t){if(!wl(t))throw new Error("invalid uuid");return new jn(t)}nt.parse=ah;function ch(){return Nl().asHex()}nt.generateUuid=ch});var Pl=q(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.attachPartialResult=Ft.ProgressFeature=Ft.attachWorkDone=void 0;var Lt=we(),uh=ls(),Gt=class t{constructor(e,n){this._connection=e,this._token=n,t.Instances.set(this._token,this)}begin(e,n,r,i){let s={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(Lt.WorkDoneProgress.type,this._token,s)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(Lt.WorkDoneProgress.type,this._token,r)}done(){t.Instances.delete(this._token),this._connection.sendProgress(Lt.WorkDoneProgress.type,this._token,{kind:"end"})}};Gt.Instances=new Map;var Yr=class extends Gt{constructor(e,n){super(e,n),this._source=new Lt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Wn=class{constructor(){}begin(){}report(){}done(){}},Kr=class extends Wn{constructor(){super(),this._source=new Lt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function lh(t,e){if(e===void 0||e.workDoneToken===void 0)return new Wn;let n=e.workDoneToken;return delete e.workDoneToken,new Gt(t,n)}Ft.attachWorkDone=lh;var dh=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Lt.WorkDoneProgressCancelNotification.type,n=>{let r=Gt.Instances.get(n.token);(r instanceof Yr||r instanceof Kr)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Wn:new Gt(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,uh.generateUuid)();return this.connection.sendRequest(Lt.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Yr(this.connection,e))}else return Promise.resolve(new Kr)}};Ft.ProgressFeature=dh;var ds;(function(t){t.type=new Lt.ProgressType})(ds||(ds={}));var fs=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(ds.type,this._token,e)}};function fh(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new fs(t,n)}Ft.attachPartialResult=fh});var xl=q(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.ConfigurationFeature=void 0;var hh=we(),ph=ar(),gh=t=>class extends t{getConfiguration(e){return e?ph.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(hh.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};Qr.ConfigurationFeature=gh});var Il=q(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.WorkspaceFoldersFeature=void 0;var Xr=we(),mh=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Xr.Emitter,this.connection.onNotification(Xr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Xr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Xr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Jr.WorkspaceFoldersFeature=mh});var Ol=q(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.CallHierarchyFeature=void 0;var hs=we(),yh=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(hs.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{let n=hs.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=hs.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Zr.CallHierarchyFeature=yh});var gs=q(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.SemanticTokensBuilder=qt.SemanticTokensDiff=qt.SemanticTokensFeature=void 0;var ei=we(),vh=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(ei.SemanticTokensRefreshRequest.type),on:e=>{let n=ei.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=ei.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=ei.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};qt.SemanticTokensFeature=vh;var ti=class{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,s=n-1;for(;i>=r&&s>=r&&this.originalSequence[i]===this.modifiedSequence[s];)i--,s--;(i<r||s<r)&&(i++,s++);let l=i-r+1,p=this.modifiedSequence.slice(r,s+1);return p.length===1&&p[0]===this.originalSequence[i]?[{start:r,deleteCount:l-1}]:[{start:r,deleteCount:l,data:p}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};qt.SemanticTokensDiff=ti;var ps=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,s){let l=e,p=n;this._dataLen>0&&(l-=this._prevLine,l===0&&(p-=this._prevChar)),this._data[this._dataLen++]=l,this._data[this._dataLen++]=p,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new ti(this._prevData,this._data).computeDiff()}:this.build()}};qt.SemanticTokensBuilder=ps});var Al=q(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.ShowDocumentFeature=void 0;var Th=we(),_h=t=>class extends t{showDocument(e){return this.connection.sendRequest(Th.ShowDocumentRequest.type,e)}};ni.ShowDocumentFeature=_h});var Ml=q(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.FileOperationsFeature=void 0;var Rn=we(),Ch=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(Rn.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(Rn.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(Rn.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(Rn.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(Rn.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(Rn.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};ri.FileOperationsFeature=Ch});var Ll=q(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.LinkedEditingRangeFeature=void 0;var bh=we(),Rh=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(bh.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};ii.LinkedEditingRangeFeature=Rh});var Fl=q(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.TypeHierarchyFeature=void 0;var ms=we(),kh=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(ms.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{let n=ms.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:e=>{let n=ms.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};oi.TypeHierarchyFeature=kh});var jl=q(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.InlineValueFeature=void 0;var ql=we(),Dh=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(ql.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(ql.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};si.InlineValueFeature=Dh});var Wl=q(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.FoldingRangeFeature=void 0;var Ul=we(),Eh=t=>class extends t{get foldingRange(){return{refresh:()=>this.connection.sendRequest(Ul.FoldingRangeRefreshRequest.type),on:e=>{let n=Ul.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ai.FoldingRangeFeature=Eh});var Hl=q(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.InlayHintFeature=void 0;var ys=we(),Sh=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(ys.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(ys.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(ys.InlayHintResolveRequest.type,(n,r)=>e(n,r))}}};ci.InlayHintFeature=Sh});var Vl=q(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.DiagnosticFeature=void 0;var Hn=we(),Nh=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Hn.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(Hn.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Hn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(Hn.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Hn.WorkspaceDiagnosticRequest.partialResult,n)))}}};ui.DiagnosticFeature=Nh});var Ts=q(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.TextDocuments=void 0;var Yt=we(),vs=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Yt.Emitter,this._onDidOpen=new Yt.Emitter,this._onDidClose=new Yt.Emitter,this._onDidSave=new Yt.Emitter,this._onWillSave=new Yt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Yt.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,s=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,s);let l=Object.freeze({document:s});this._onDidOpen.fire(l),this._onDidChangeContent.fire(l)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,s=r.contentChanges;if(s.length===0)return;let{version:l}=i;if(l==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let p=this._syncedDocuments.get(i.uri);p!==void 0&&(p=this._configuration.update(p,s,l),this._syncedDocuments.set(i.uri,p),this._onDidChangeContent.fire(Object.freeze({document:p})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let s=this._syncedDocuments.get(r.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Yt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};li.TextDocuments=vs});var Cs=q(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.NotebookDocuments=kn.NotebookSyncFeature=void 0;var rt=we(),Bl=Ts(),wh=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(rt.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(rt.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(rt.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(rt.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};kn.NotebookSyncFeature=wh;var di=class t{onDidOpenTextDocument(e){return this.openHandler=e,rt.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,rt.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,rt.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};di.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var _s=class{constructor(e){e instanceof Bl.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new Bl.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new rt.Emitter,this._onDidChange=new rt.Emitter,this._onDidSave=new rt.Emitter,this._onDidClose=new rt.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new di,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let s of i.cellTextDocuments)n.openTextDocument({textDocument:s});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s===void 0)return;s.version=i.notebookDocument.version;let l=s.metadata,p=!1,E=i.change;E.metadata!==void 0&&(p=!0,s.metadata=E.metadata);let b=[],x=[],j=[],U=[];if(E.cells!==void 0){let oe=E.cells;if(oe.structure!==void 0){let v=oe.structure.array;if(s.cells.splice(v.start,v.deleteCount,...v.cells!==void 0?v.cells:[]),oe.structure.didOpen!==void 0)for(let y of oe.structure.didOpen)n.openTextDocument({textDocument:y}),b.push(y.uri);if(oe.structure.didClose)for(let y of oe.structure.didClose)n.closeTextDocument({textDocument:y}),x.push(y.uri)}if(oe.data!==void 0){let v=new Map(oe.data.map(y=>[y.document,y]));for(let y=0;y<=s.cells.length;y++){let w=v.get(s.cells[y].document);if(w!==void 0){let G=s.cells.splice(y,1,w);if(j.push({old:G[0],new:w}),v.delete(w.document),v.size===0)break}}}if(oe.textContent!==void 0)for(let v of oe.textContent)n.changeTextDocument({textDocument:v.document,contentChanges:v.changes}),U.push(v.document.uri)}this.updateCellMap(s);let ee={notebookDocument:s};p&&(ee.metadata={old:l,new:s.metadata});let Te=[];for(let oe of b)Te.push(this.getNotebookCell(oe));let be=[];for(let oe of x)be.push(this.getNotebookCell(oe));let ke=[];for(let oe of U)ke.push(this.getNotebookCell(oe));(Te.length>0||be.length>0||j.length>0||ke.length>0)&&(ee.cells={added:Te,removed:be,changed:{data:j,textContent:ke}}),(ee.metadata!==void 0||ee.cells!==void 0)&&this._onDidChange.fire(ee)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let l of i.cellTextDocuments)n.closeTextDocument({textDocument:l});this.notebookDocuments.delete(i.notebookDocument.uri);for(let l of s.cells)this.notebookCellMap.delete(l.document)}})),rt.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};kn.NotebookDocuments=_s});var $l=q(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.MonikerFeature=void 0;var Ph=we(),xh=t=>class extends t{get moniker(){return{on:e=>{let n=Ph.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};fi.MonikerFeature=xh});var Ss=q(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.createConnection=ae.combineFeatures=ae.combineNotebooksFeatures=ae.combineLanguagesFeatures=ae.combineWorkspaceFeatures=ae.combineWindowFeatures=ae.combineClientFeatures=ae.combineTracerFeatures=ae.combineTelemetryFeatures=ae.combineConsoleFeatures=ae._NotebooksImpl=ae._LanguagesImpl=ae.BulkUnregistration=ae.BulkRegistration=ae.ErrorMessageTracker=void 0;var A=we(),it=ar(),Rs=ls(),K=Pl(),Ih=xl(),Oh=Il(),Ah=Ol(),Mh=gs(),Lh=Al(),Fh=Ml(),qh=Ll(),jh=Fl(),Uh=jl(),Wh=Wl(),Hh=Hl(),Vh=Vl(),Bh=Cs(),$h=$l();function bs(t){if(t!==null)return t}var ks=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};ae.ErrorMessageTracker=ks;var hi=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(A.MessageType.Error,e)}warn(e){this.send(A.MessageType.Warning,e)}info(e){this.send(A.MessageType.Info,e)}log(e){this.send(A.MessageType.Log,e)}debug(e){this.send(A.MessageType.Debug,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(A.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,A.RAL)().console.error("Sending log message failed")})}},Ds=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:A.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(A.ShowMessageRequest.type,r).then(bs)}showWarningMessage(e,...n){let r={type:A.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(A.ShowMessageRequest.type,r).then(bs)}showInformationMessage(e,...n){let r={type:A.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(A.ShowMessageRequest.type,r).then(bs)}},zl=(0,Lh.ShowDocumentFeature)((0,K.ProgressFeature)(Ds)),Gl;(function(t){function e(){return new pi}t.create=e})(Gl||(ae.BulkRegistration=Gl={}));var pi=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=it.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Rs.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Yl;(function(t){function e(){return new Vn(void 0,[])}t.create=e})(Yl||(ae.BulkUnregistration=Yl={}));var Vn=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(A.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=it.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(A.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},s=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},gi=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof pi?this.registerMany(e):e instanceof Vn?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=it.string(n)?n:n.method,s=Rs.generateUuid(),l={registrations:[{id:s,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(A.RegistrationRequest.type,l).then(p=>(e.add({id:s,method:i}),e),p=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(p)))}registerSingle2(e,n){let r=it.string(e)?e:e.method,i=Rs.generateUuid(),s={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(A.RegistrationRequest.type,s).then(l=>A.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),l=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(l)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(A.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(A.RegistrationRequest.type,n).then(()=>new Vn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},Es=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(A.ApplyWorkspaceEditRequest.type,r)}},Kl=(0,Fh.FileOperationsFeature)((0,Oh.WorkspaceFoldersFeature)((0,Ih.ConfigurationFeature)(Es))),mi=class{constructor(){this._trace=A.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==A.Trace.Off&&this.connection.sendNotification(A.LogTraceNotification.type,{message:e,verbose:this._trace===A.Trace.Verbose?n:void 0}).catch(()=>{})}},yi=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(A.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},vi=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,K.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,K.attachPartialResult)(this.connection,n)}};ae._LanguagesImpl=vi;var Ql=(0,Wh.FoldingRangeFeature)((0,$h.MonikerFeature)((0,Vh.DiagnosticFeature)((0,Hh.InlayHintFeature)((0,Uh.InlineValueFeature)((0,jh.TypeHierarchyFeature)((0,qh.LinkedEditingRangeFeature)((0,Mh.SemanticTokensFeature)((0,Ah.CallHierarchyFeature)(vi))))))))),Ti=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,K.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,K.attachPartialResult)(this.connection,n)}};ae._NotebooksImpl=Ti;var Xl=(0,Bh.NotebookSyncFeature)(Ti);function Jl(t,e){return function(n){return e(t(n))}}ae.combineConsoleFeatures=Jl;function Zl(t,e){return function(n){return e(t(n))}}ae.combineTelemetryFeatures=Zl;function ed(t,e){return function(n){return e(t(n))}}ae.combineTracerFeatures=ed;function td(t,e){return function(n){return e(t(n))}}ae.combineClientFeatures=td;function nd(t,e){return function(n){return e(t(n))}}ae.combineWindowFeatures=nd;function rd(t,e){return function(n){return e(t(n))}}ae.combineWorkspaceFeatures=rd;function id(t,e){return function(n){return e(t(n))}}ae.combineLanguagesFeatures=id;function od(t,e){return function(n){return e(t(n))}}ae.combineNotebooksFeatures=od;function zh(t,e){function n(i,s,l){return i&&s?l(i,s):i||s}return{__brand:"features",console:n(t.console,e.console,Jl),tracer:n(t.tracer,e.tracer,ed),telemetry:n(t.telemetry,e.telemetry,Zl),client:n(t.client,e.client,td),window:n(t.window,e.window,nd),workspace:n(t.workspace,e.workspace,rd),languages:n(t.languages,e.languages,id),notebooks:n(t.notebooks,e.notebooks,od)}}ae.combineFeatures=zh;function Gh(t,e,n){let r=n&&n.console?new(n.console(hi)):new hi,i=t(r);r.rawAttach(i);let s=n&&n.tracer?new(n.tracer(mi)):new mi,l=n&&n.telemetry?new(n.telemetry(yi)):new yi,p=n&&n.client?new(n.client(gi)):new gi,E=n&&n.window?new(n.window(zl)):new zl,b=n&&n.workspace?new(n.workspace(Kl)):new Kl,x=n&&n.languages?new(n.languages(Ql)):new Ql,j=n&&n.notebooks?new(n.notebooks(Xl)):new Xl,U=[r,s,l,p,E,b,x,j];function ee(v){return v instanceof Promise?v:it.thenable(v)?new Promise((y,w)=>{v.then(G=>y(G),G=>w(G))}):Promise.resolve(v)}let Te,be,ke,oe={listen:()=>i.listen(),sendRequest:(v,...y)=>i.sendRequest(it.string(v)?v:v.method,...y),onRequest:(v,y)=>i.onRequest(v,y),sendNotification:(v,y)=>{let w=it.string(v)?v:v.method;return i.sendNotification(w,y)},onNotification:(v,y)=>i.onNotification(v,y),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:v=>(be=v,{dispose:()=>{be=void 0}}),onInitialized:v=>i.onNotification(A.InitializedNotification.type,v),onShutdown:v=>(Te=v,{dispose:()=>{Te=void 0}}),onExit:v=>(ke=v,{dispose:()=>{ke=void 0}}),get console(){return r},get telemetry(){return l},get tracer(){return s},get client(){return p},get window(){return E},get workspace(){return b},get languages(){return x},get notebooks(){return j},onDidChangeConfiguration:v=>i.onNotification(A.DidChangeConfigurationNotification.type,v),onDidChangeWatchedFiles:v=>i.onNotification(A.DidChangeWatchedFilesNotification.type,v),__textDocumentSync:void 0,onDidOpenTextDocument:v=>i.onNotification(A.DidOpenTextDocumentNotification.type,v),onDidChangeTextDocument:v=>i.onNotification(A.DidChangeTextDocumentNotification.type,v),onDidCloseTextDocument:v=>i.onNotification(A.DidCloseTextDocumentNotification.type,v),onWillSaveTextDocument:v=>i.onNotification(A.WillSaveTextDocumentNotification.type,v),onWillSaveTextDocumentWaitUntil:v=>i.onRequest(A.WillSaveTextDocumentWaitUntilRequest.type,v),onDidSaveTextDocument:v=>i.onNotification(A.DidSaveTextDocumentNotification.type,v),sendDiagnostics:v=>i.sendNotification(A.PublishDiagnosticsNotification.type,v),onHover:v=>i.onRequest(A.HoverRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),void 0)),onCompletion:v=>i.onRequest(A.CompletionRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onCompletionResolve:v=>i.onRequest(A.CompletionResolveRequest.type,v),onSignatureHelp:v=>i.onRequest(A.SignatureHelpRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),void 0)),onDeclaration:v=>i.onRequest(A.DeclarationRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onDefinition:v=>i.onRequest(A.DefinitionRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onTypeDefinition:v=>i.onRequest(A.TypeDefinitionRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onImplementation:v=>i.onRequest(A.ImplementationRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onReferences:v=>i.onRequest(A.ReferencesRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onDocumentHighlight:v=>i.onRequest(A.DocumentHighlightRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onDocumentSymbol:v=>i.onRequest(A.DocumentSymbolRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onWorkspaceSymbol:v=>i.onRequest(A.WorkspaceSymbolRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onWorkspaceSymbolResolve:v=>i.onRequest(A.WorkspaceSymbolResolveRequest.type,v),onCodeAction:v=>i.onRequest(A.CodeActionRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onCodeActionResolve:v=>i.onRequest(A.CodeActionResolveRequest.type,(y,w)=>v(y,w)),onCodeLens:v=>i.onRequest(A.CodeLensRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onCodeLensResolve:v=>i.onRequest(A.CodeLensResolveRequest.type,(y,w)=>v(y,w)),onDocumentFormatting:v=>i.onRequest(A.DocumentFormattingRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),void 0)),onDocumentRangeFormatting:v=>i.onRequest(A.DocumentRangeFormattingRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),void 0)),onDocumentOnTypeFormatting:v=>i.onRequest(A.DocumentOnTypeFormattingRequest.type,(y,w)=>v(y,w)),onRenameRequest:v=>i.onRequest(A.RenameRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),void 0)),onPrepareRename:v=>i.onRequest(A.PrepareRenameRequest.type,(y,w)=>v(y,w)),onDocumentLinks:v=>i.onRequest(A.DocumentLinkRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onDocumentLinkResolve:v=>i.onRequest(A.DocumentLinkResolveRequest.type,(y,w)=>v(y,w)),onDocumentColor:v=>i.onRequest(A.DocumentColorRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onColorPresentation:v=>i.onRequest(A.ColorPresentationRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onFoldingRanges:v=>i.onRequest(A.FoldingRangeRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onSelectionRanges:v=>i.onRequest(A.SelectionRangeRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),(0,K.attachPartialResult)(i,y))),onExecuteCommand:v=>i.onRequest(A.ExecuteCommandRequest.type,(y,w)=>v(y,w,(0,K.attachWorkDone)(i,y),void 0)),dispose:()=>i.dispose()};for(let v of U)v.attach(oe);return i.onRequest(A.InitializeRequest.type,v=>{e.initialize(v),it.string(v.trace)&&(s.trace=A.Trace.fromString(v.trace));for(let y of U)y.initialize(v.capabilities);if(be){let y=be(v,new A.CancellationTokenSource().token,(0,K.attachWorkDone)(i,v),void 0);return ee(y).then(w=>{if(w instanceof A.ResponseError)return w;let G=w;G||(G={capabilities:{}});let ce=G.capabilities;ce||(ce={},G.capabilities=ce),ce.textDocumentSync===void 0||ce.textDocumentSync===null?ce.textDocumentSync=it.number(oe.__textDocumentSync)?oe.__textDocumentSync:A.TextDocumentSyncKind.None:!it.number(ce.textDocumentSync)&&!it.number(ce.textDocumentSync.change)&&(ce.textDocumentSync.change=it.number(oe.__textDocumentSync)?oe.__textDocumentSync:A.TextDocumentSyncKind.None);for(let me of U)me.fillServerCapabilities(ce);return G})}else{let y={capabilities:{textDocumentSync:A.TextDocumentSyncKind.None}};for(let w of U)w.fillServerCapabilities(y.capabilities);return y}}),i.onRequest(A.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,Te)return Te(new A.CancellationTokenSource().token)}),i.onNotification(A.ExitNotification.type,()=>{try{ke&&ke()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(A.SetTraceNotification.type,v=>{s.trace=A.Trace.fromString(v.value)}),oe}ae.createConnection=Gh});var sd=q(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.resolveModulePath=Ge.FileSystem=Ge.resolveGlobalYarnPath=Ge.resolveGlobalNodePath=Ge.resolve=Ge.uriToFilePath=void 0;var Yh=require("url"),dt=require("path"),Ns=require("fs"),Is=require("child_process");function Kh(t){let e=Yh.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let s=n[0],l=n[1];s.length===0&&l.length>1&&l[1]===":"&&n.shift()}return dt.normalize(n.join("/"))}Ge.uriToFilePath=Kh;function ws(){return process.platform==="win32"}function _i(t,e,n,r){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((l,p)=>{let E=process.env,b=Object.create(null);Object.keys(E).forEach(x=>b[x]=E[x]),e&&Ns.existsSync(e)&&(b[i]?b[i]=e+dt.delimiter+b[i]:b[i]=e,r&&r(`NODE_PATH value is: ${b[i]}`)),b.ELECTRON_RUN_AS_NODE="1";try{let x=(0,Is.fork)("",[],{cwd:n,env:b,execArgv:["-e",s]});if(x.pid===void 0){p(new Error(`Starting process to resolve node module  ${t} failed`));return}x.on("error",U=>{p(U)}),x.on("message",U=>{U.c==="r"&&(x.send({c:"e"}),U.s?l(U.r):p(new Error(`Failed to resolve module: ${t}`)))});let j={c:"rs",a:t};x.send(j)}catch(x){p(x)}})}Ge.resolve=_i;function Ps(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(s=>n[s]=process.env[s]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};ws()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=(0,Is.spawnSync)(e,["config","get","prefix"],r).stdout;if(!s){t&&t("'npm config get prefix' didn't return a value.");return}let l=s.trim();return t&&t(`'npm config get prefix' value is: ${l}`),l.length>0?ws()?dt.join(l,"node_modules"):dt.join(l,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Ge.resolveGlobalNodePath=Ps;function Qh(t){let e="yarn",n={encoding:"utf8"};ws()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,Is.spawnSync)(e,["global","dir","--json"],n),s=i.stdout;if(!s){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let l=s.trim().split(/\r?\n/);for(let p of l)try{let E=JSON.parse(p);if(E.type==="log")return dt.join(E.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Ge.resolveGlobalYarnPath=Qh;var xs;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!Ns.existsSync(__filename.toUpperCase())||!Ns.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,s){return n()?dt.normalize(s).indexOf(dt.normalize(i))===0:dt.normalize(s).toLowerCase().indexOf(dt.normalize(i).toLowerCase())===0}t.isParent=r})(xs||(Ge.FileSystem=xs={}));function Xh(t,e,n,r){return n?(dt.isAbsolute(n)||(n=dt.join(t,n)),_i(e,n,n,r).then(i=>xs.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>_i(e,Ps(r),t,r))):_i(e,Ps(r),t,r)}Ge.resolveModulePath=Xh});var Os=q((Kg,ad)=>{"use strict";ad.exports=we()});var cd=q(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.InlineCompletionFeature=void 0;var Jh=we(),Zh=t=>class extends t{get inlineCompletion(){return{on:e=>this.connection.onRequest(Jh.InlineCompletionRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};Ci.InlineCompletionFeature=Zh});var dd=q(We=>{"use strict";var ep=We&&We.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ld=We&&We.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ep(e,t,n)};Object.defineProperty(We,"__esModule",{value:!0});We.ProposedFeatures=We.NotebookDocuments=We.TextDocuments=We.SemanticTokensBuilder=void 0;var tp=gs();Object.defineProperty(We,"SemanticTokensBuilder",{enumerable:!0,get:function(){return tp.SemanticTokensBuilder}});var np=cd();ld(we(),We);var rp=Ts();Object.defineProperty(We,"TextDocuments",{enumerable:!0,get:function(){return rp.TextDocuments}});var ip=Cs();Object.defineProperty(We,"NotebookDocuments",{enumerable:!0,get:function(){return ip.NotebookDocuments}});ld(Ss(),We);var ud;(function(t){t.all={__brand:"features",languages:np.InlineCompletionFeature}})(ud||(We.ProposedFeatures=ud={}))});var Qt=q(ot=>{"use strict";var op=ot&&ot.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),gd=ot&&ot.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&op(e,t,n)};Object.defineProperty(ot,"__esModule",{value:!0});ot.createConnection=ot.Files=void 0;var fd=require("node:util"),As=ar(),sp=Ss(),Bn=sd(),Kt=Os();gd(Os(),ot);gd(dd(),ot);var hd;(function(t){t.uriToFilePath=Bn.uriToFilePath,t.resolveGlobalNodePath=Bn.resolveGlobalNodePath,t.resolveGlobalYarnPath=Bn.resolveGlobalYarnPath,t.resolve=Bn.resolve,t.resolveModulePath=Bn.resolveModulePath})(hd||(ot.Files=hd={}));var pd;function bi(){if(pd!==void 0)try{pd.end()}catch{}}var Dn=!1,md;function ap(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(md=setInterval(()=>{try{process.kill(r,0)}catch{bi(),process.exit(Dn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}ap();var cp={initialize:t=>{let e=t.processId;As.number(e)&&md===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(Dn?0:1)}},3e3)},get shutdownReceived(){return Dn},set shutdownReceived(t){Dn=t},exit:t=>{bi(),process.exit(t)}};function up(t,e,n,r){let i,s,l,p;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),Kt.ConnectionStrategy.is(t)||Kt.ConnectionOptions.is(t)?p=t:(s=t,l=e,p=n),lp(s,l,p,i)}ot.createConnection=up;function lp(t,e,n,r){let i=!1;if(!t&&!e&&process.argv.length>2){let E,b,x=process.argv.slice(2);for(let j=0;j<x.length;j++){let U=x[j];if(U==="--node-ipc"){t=new Kt.IPCMessageReader(process),e=new Kt.IPCMessageWriter(process);break}else if(U==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(U==="--socket"){E=parseInt(x[j+1]);break}else if(U==="--pipe"){b=x[j+1];break}else{var s=U.split("=");if(s[0]==="--socket"){E=parseInt(s[1]);break}else if(s[0]==="--pipe"){b=s[1];break}}}if(E){let j=(0,Kt.createServerSocketTransport)(E);t=j[0],e=j[1]}else if(b){let j=(0,Kt.createServerPipeTransport)(b);t=j[0],e=j[1]}}var l="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+l);if(!e)throw new Error("Connection output stream is not set. "+l);if(As.func(t.read)&&As.func(t.on)){let E=t;E.on("end",()=>{bi(),process.exit(Dn?0:1)}),E.on("close",()=>{bi(),process.exit(Dn?0:1)})}let p=E=>{let b=(0,Kt.createProtocolConnection)(t,e,E,n);return i&&dp(E),b};return(0,sp.createConnection)(p,cp,r)}function dp(t){function e(r){return r.map(i=>typeof i=="string"?i:(0,fd.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...s){if(!i)if(s.length===0)t.error("Assertion failed");else{let[l,...p]=s;t.error(`Assertion failed: ${l} ${e(p)}`)}},console.count=function(i="default"){let s=String(i),l=n.get(s)??0;l+=1,n.set(s,l),t.log(`${s}: ${s}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){t.log(e(i))},console.dir=function(i,s){t.log((0,fd.inspect)(i,s))},console.log=function(...i){t.log(e(i))},console.error=function(...i){t.error(e(i))},console.trace=function(...i){let s=new Error().stack.replace(/(.+\n){2}/,""),l="Trace";i.length!==0&&(l+=`: ${e(i)}`),t.log(`${l}
${s}`)},console.warn=function(...i){t.warn(e(i))}}});var Ms=q((em,yd)=>{"use strict";yd.exports=Qt()});var bp={};Yd(bp,{connection:()=>Ae,documents:()=>Jt,updateDocumentData:()=>Ni,visitors:()=>vt});module.exports=Kd(bp);var Ut=Et(Ms());var Ri=class t{constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(let r of e)if(t.isIncremental(r)){let i=_d(r.range),s=this.offsetAt(i.start),l=this.offsetAt(i.end);this._content=this._content.substring(0,s)+r.text+this._content.substring(l,this._content.length);let p=Math.max(i.start.line,0),E=Math.max(i.end.line,0),b=this._lineOffsets,x=vd(r.text,!1,s);if(E-p===x.length)for(let U=0,ee=x.length;U<ee;U++)b[U+p+1]=x[U];else x.length<1e4?b.splice(p+1,E-p,...x):this._lineOffsets=b=b.slice(0,p+1).concat(x,b.slice(E+1));let j=r.text.length-(l-s);if(j!==0)for(let U=p+1+x.length,ee=b.length;U<ee;U++)b[U]=b[U]+j}else if(t.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=vd(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){let l=Math.floor((r+i)/2);n[l]>e?i=l:r=l+1}let s=r-1;return e=this.ensureBeforeEOL(e,n[s]),{line:s,character:e-n[s]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line];if(e.character<=0)return r;let i=e.line+1<n.length?n[e.line+1]:this._content.length,s=Math.min(r+e.character,i);return this.ensureBeforeEOL(s,r)}ensureBeforeEOL(e,n){for(;e>n&&Td(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},jt;(function(t){function e(i,s,l,p){return new Ri(i,s,l,p)}t.create=e;function n(i,s,l){if(i instanceof Ri)return i.update(s,l),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=n;function r(i,s){let l=i.getText(),p=Ls(s.map(fp),(x,j)=>{let U=x.range.start.line-j.range.start.line;return U===0?x.range.start.character-j.range.start.character:U}),E=0,b=[];for(let x of p){let j=i.offsetAt(x.range.start);if(j<E)throw new Error("Overlapping edit");j>E&&b.push(l.substring(E,j)),x.newText.length&&b.push(x.newText),E=i.offsetAt(x.range.end)}return b.push(l.substr(E)),b.join("")}t.applyEdits=r})(jt||(jt={}));function Ls(t,e){if(t.length<=1)return t;let n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);Ls(r,e),Ls(i,e);let s=0,l=0,p=0;for(;s<r.length&&l<i.length;)e(r[s],i[l])<=0?t[p++]=r[s++]:t[p++]=i[l++];for(;s<r.length;)t[p++]=r[s++];for(;l<i.length;)t[p++]=i[l++];return t}function vd(t,e,n=0){let r=e?[n]:[];for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);Td(s)&&(s===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Td(t){return t===13||t===10}function _d(t){let e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}function fp(t){let e=_d(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var Pi=Et(Qt());var Z=Et(Qt());function ki(){return[{label:"for",insertText:"for (${1:var} = ${2})\n	${3}\n\nend",insertTextFormat:Z.InsertTextFormat.Snippet,kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[for loop](https://docs.octave.org/v4.2.0/The-for-Statement.html)"}},{label:"while",kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[while loop](https://docs.octave.org/v4.2.0/The-while-Statement.html)"}},{label:"if",insertText:`if (\${1:condition})
	\${2}

end`,insertTextFormat:Z.InsertTextFormat.Snippet,kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[if statement](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"else",kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[if statement else clause](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"elseif",insertText:"elseif (${1:condition})\n	${2}",insertTextFormat:Z.InsertTextFormat.Snippet,kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[if statement elseif clause](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"switch",insertText:`switch (\${1:variable})
	case \${2}
otherwise

end`,insertTextFormat:Z.InsertTextFormat.Snippet,kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[switch statement](https://docs.octave.org/v4.2.0/The-switch-Statement.html)"}},{label:"case",kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[switch statement case clause](https://docs.octave.org/v4.2.0/The-switch-Statement.html#index-case-statement)"}},{label:"otherwise",kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[switch statement otherwise clause](https://docs.octave.org/v4.2.0/The-switch-Statement.html#index-otherwise-statement)"}},{label:"break",kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[break statement](https://docs.octave.org/v4.2.0/The-break-Statement.html#index-break-statement)"}},{label:"continue",kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"[continue statement](https://docs.octave.org/v4.2.0/The-continue-Statement.html#index-continue-statement)"}},{label:"return",kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"return statement"}},{label:"end",kind:Z.CompletionItemKind.Keyword,documentation:{kind:Z.MarkupKind.Markdown,value:"block end marker"}},{label:"function",kind:Z.CompletionItemKind.Keyword,insertText:"function ${1:funcName}(${2:funcArgs})\n	${3:funcBody}\nend",insertTextFormat:Z.InsertTextFormat.Snippet,documentation:{kind:Z.MarkupKind.Markdown,value:"[block end marker](https://docs.octave.org/v4.2.0/A-Sample-Function-Description.html#A-Sample-Function-Description)"}},{label:"do",kind:Z.CompletionItemKind.Keyword,insertText:"do\n	${2:funcBody}\nuntil (${1:condition})",insertTextFormat:Z.InsertTextFormat.Snippet,documentation:{kind:Z.MarkupKind.Markdown,value:"[block end marker](https://docs.octave.org/v5.2.0/The-do_002duntil-Statement.html)"}}]}var H=Et(Qt());function Di(){return[{label:"quad",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:`: q = quad (f, a, b)
: q = quad (f, a, b, tol)
: q = quad (f, a, b, tol, sing)
: [q, ier, nfun, err] = quad (\u2026)
    Numerically evaluate the integral of f from a to b using Fortran routines from QUADPACK.
    f is a function handle, inline function, or a string containing the name of the function to evaluate. The function must have the form y = f (x) where y and x are scalars.
    a and b are the lower and upper limits of integration. Either or both may be infinite.
    The optional argument tol is a vector that specifies the desired accuracy of the result. The first element of the vector is the desired absolute tolerance, and the second element is the desired relative tolerance. To choose a relative test only, set the absolute tolerance to zero. To choose an absolute test only, set the relative tolerance to zero. Both tolerances default to sqrt (eps) or approximately 1.5e^{-8}.
    The optional argument sing is a vector of values at which the integrand is known to be singular.
    The result of the integration is returned in q.
    ier contains an integer error code (0 indicates a successful integration).
    nfun indicates the number of function evaluations that were made.
    err contains an estimate of the error in the solution.
    The function quad_options can set other optional parameters for quad.
    Note: because quad is written in Fortran it cannot be called recursively. This prevents its use in integrating over more than one variable by routines dblquad and triplequad.
    See also: quad_options, quadv, quadl, quadgk, quadcc, trapz, dblquad, triplequad. 

[quad function](https://octave.sourceforge.io/octave/function/quad.html)`}},{label:"inputParser",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:`Not documented 

[inputParser function](https://octave.sourceforge.io/octave/function/inputParser.html)`}},{label:"pol2cart",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:` __[x, y] = pol2cart (theta, r)__
 __[x, y, z] = pol2cart (theta, r, z)__
 __[x, y] = pol2cart (P)__
 __[x, y, z] = pol2cart (P)__
 __C = pol2cart (\u2026)__
    Transform polar or cylindrical coordinates to Cartesian coordinates.
    The inputs theta, r, (and z) must be the same shape, or scalar. If called with a single matrix argument then each row of P represents the polar/(cylindrical) coordinate (theta, r (, z)).
    theta describes the angle relative to the positive x-axis.
    r is the distance to the z-axis (0, 0, z).
    If only a single return argument is requested then return a matrix C where each row represents one Cartesian coordinate (x, y (, z)).
    See also: cart2pol, sph2cart, cart2sph. 

[pol2cart function](https://octave.sourceforge.io/octave/function/pol2cart.html)`}},{label:"deg2rad",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:` __rad = deg2rad (deg)__
    Convert degrees to radians.
    The input deg must be a scalar, vector, or N-dimensional array of double or single floating point values. deg may be complex in which case the real and imaginary components are converted separately.
    The output rad is the same size and shape as deg with degrees converted to radians using the conversion constant pi/180.
    Example:
    deg2rad ([0, 90, 180, 270, 360])
      \u21D2  0.00000   1.57080   3.14159   4.71239   6.28319
    See also: rad2deg. 

[deg2rad function](https://octave.sourceforge.io/octave/function/deg2rad.html)`}},{label:"length",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:` __length (a)__
    Return the length of the object a.
    The length is 0 for empty objects, 1 for scalars, and the number of elements for vectors. For matrix or N-dimensional objects, the length is the number of elements along the largest dimension (equivalent to max (size (a))).
    See also: numel, size. 

[length function](https://octave.sourceforge.io/octave/function/length.html)`}},{label:"struct",insertText:"struct(${1:var});",insertTextFormat:H.InsertTextFormat.Snippet,kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:`  __s = struct ()__
 __s = struct (field1, value1, field2, value2, \u2026)__
 __s = struct (obj)__
    Create a scalar or array structure and initialize its values.
    The field1, field2, \u2026 variables are strings specifying the names of the fields and the value1, value2, \u2026 variables can be of any type.
    If the values are cell arrays, create a structure array and initialize its values. The dimensions of each cell array of values must match. Singleton cells and non-cell values are repeated so that they fill the entire array. If the cells are empty, create an empty structure array with the specified field names.
    If the argument is an object, return the underlying struct.
    Observe that the syntax is optimized for struct arrays. Consider the following examples:
    struct ("foo", 1)
     \u21D2 scalar structure containing the fields:
       foo =  1
    struct ("foo", {})
     \u21D2 0x0 struct array containing the fields:
       foo
    struct ("foo", { {} })
     \u21D2 scalar structure containing the fields:
       foo = {}(0x0)
    struct ("foo", {1, 2, 3})
     \u21D2 1x3 struct array containing the fields:
       foo
    The first case is an ordinary scalar struct\u2014one field, one value. The second produces an empty struct array with one field and no values, since being passed an empty cell array of struct array values. When the value is a cell array containing a single entry, this becomes a scalar struct with that single entry as the value of the field. That single entry happens to be an empty cell array.
    Finally, if the value is a non-scalar cell array, then struct produces a struct array.
    See also: cell2struct, fieldnames, getfield, setfield, rmfield, isfield, orderfields, isstruct, structfun. 

[struct function](https://octave.sourceforge.io/octave/function/struct.html)`}},{label:"addpath",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:` __addpath (dir1, \u2026)__
 __addpath (dir1, \u2026, option)__
    Add named directories to the function search path.
    If option is "-begin" or 0 (the default), prepend the directory name to the current path. If option is "-end" or 1, append the directory name to the current path. Directories added to the path must exist.
    In addition to accepting individual directory arguments, lists of directory names separated by pathsep are also accepted. For example:
    addpath ("dir1:/dir2:~/dir3")
    For each directory that is added, and that was not already in the path, addpath checks for the existence of a file named PKG_ADD (note lack of .m extension) and runs it if it exists.
    See also: path, rmpath, genpath, pathdef, savepath, pathsep. 

[addpath function](https://octave.sourceforge.io/octave/function/addpath.html)`}},{label:"argv",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:`Return the command line arguments passed to Octave.

For example, if you invoked Octave using the command

octave --no-line-editing --silent

argv would return a cell array of strings with the elements --no-line-editing and --silent.

If you write an executable Octave script, argv will return the list of arguments passed to the script. See \u2018Executable Octave Programs\u2019, for an example of how to create an executable Octave script.

[argv function](https://octave.sourceforge.io/octave/function/argv.html)`}},{label:"hold",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[hold function](https://octave.sourceforge.io/octave/function/hold.html)"}},{label:"axis",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[axis function](https://octave.sourceforge.io/octave/function/axis.html)"}},{label:"printf",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[printf function](https://octave.sourceforge.io/octave/function/printf.html)"}},{label:"figure",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[figure function](https://octave.sourceforge.io/octave/function/figure.html)"}},{label:"set",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[set function](https://octave.sourceforge.io/octave/function/set.html)"}},{label:"grid",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[grid function](https://octave.sourceforge.io/octave/function/grid.html)"}},{label:"clc",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[clc function](https://octave.sourceforge.io/octave/function/clc.html)"}},{label:"quit",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[quit function](https://docs.octave.org/interpreter/Quitting-Octave.html)"}},{label:"help",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[help function](https://octave.sourceforge.io/octave/function/help.html)"}},{label:"stem",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[stem function](https://octave.sourceforge.io/octave/function/stem.html)"}},{label:"plot",kind:H.CompletionItemKind.Function,documentation:{kind:H.MarkupKind.Markdown,value:"[plot function](https://octave.sourceforge.io/octave/function/plot.html)"}},{label:"abs",kind:H.CompletionItemKind.Function,documentation:"Return the absolute value of a number"},{label:"acos",kind:H.CompletionItemKind.Function,documentation:"Return the arccosine of a number"},{label:"acosh",kind:H.CompletionItemKind.Function,documentation:"Return the hyperbolic arccosine of a number"},{label:"angle",kind:H.CompletionItemKind.Function,documentation:"Return the angle (in radians) of a complex number"},{label:"arg",kind:H.CompletionItemKind.Function,documentation:"Return the argument (in radians) of a complex number"},{label:"asin",kind:H.CompletionItemKind.Function,documentation:"Return the arcsine of a number"},{label:"asinh",kind:H.CompletionItemKind.Function,documentation:"Return the hyperbolic arcsine of a number"},{label:"atan",kind:H.CompletionItemKind.Function,documentation:"Return the arctangent of a number"},{label:"atanh",kind:H.CompletionItemKind.Function,documentation:"Return the hyperbolic arctangent of a number"},{label:"ceil",kind:H.CompletionItemKind.Function,documentation:"Round up to the nearest integer"},{label:"conj",kind:H.CompletionItemKind.Function,documentation:"Return the complex conjugate of a number"},{label:"cos",kind:H.CompletionItemKind.Function,documentation:"Return the cosine of a number"},{label:"cosh",kind:H.CompletionItemKind.Function,documentation:"Return the hyperbolic cosine of a number"},{label:"cot",kind:H.CompletionItemKind.Function,documentation:"Return the cotangent of a number"},{label:"csc",kind:H.CompletionItemKind.Function,documentation:"Return the cosecant of a number"},{label:"det",kind:H.CompletionItemKind.Function,documentation:"Compute the determinant of a matrix"},{label:"diag",kind:H.CompletionItemKind.Function,documentation:"Extract or construct a diagonal matrix"},{label:"diff",kind:H.CompletionItemKind.Function,documentation:"Compute the difference between adjacent elements of a matrix"},{label:"disp",kind:H.CompletionItemKind.Function,documentation:"Display the value of an expression"},{label:"eig",kind:H.CompletionItemKind.Function,documentation:"Compute the eigenvalues and eigenvectors of a matrix"},{label:"eps",kind:H.CompletionItemKind.Constant,documentation:"Return the machine epsilon (smallest number representable in floating point arithmetic)"},{label:"erf",kind:H.CompletionItemKind.Function,documentation:"Return the error function of a number"},{label:"erfc",kind:H.CompletionItemKind.Function,documentation:"Return the complementary error function of a number"}]}var Xt=Et(require("os"));function hp(){switch(Xt.platform()){case"linux":return`${Xt.homedir()}/.octaverc`;case"darwin":return`${Xt.homedir()}/.octaverc`;case"win32":return`${Xt.homedir()}\\Documents\\Octave\\octaverc`;default:throw new Error(`Unsupported platform: ${Xt.platform()}`)}}var Fs={maxNumberOfProblems:1e3,maxFilesSearchDepth:3,defaultInitFile:hp(),enableInitFile:!1,defaultExecPath:"/usr/bin/octave",defaultDebounceTimeMS:1e3},kt=Fs;function qs(t){kt=t}function Cd(){return ki().map(t=>t.label)}function bd(t){return/^[a-zA-Z]+$/.test(t)}function Rd(t){return!isNaN(parseFloat(t))}var pp=require("fs"),gp=require("path");function kd(t){let e=[];function n(r){let i=pp.readdirSync(r,{withFileTypes:!0});for(let s of i){let l=gp.join(r,s.name);s.isDirectory()?n(l):s.isFile()&&s.name.endsWith(".m")&&e.push(l)}}return n(t),e}var Dd=require("url");var mp=require("fs"),yp=require("path");function Ed({workspace:t}){return kd(t).map(r=>{let i=(0,Dd.pathToFileURL)(yp.resolve(r)).toString(),s=mp.readFileSync(r,"utf-8");return jt.create(i,"octave",1,s)})}function Sd({text:t,characterPosition:e}){let n=0,r=0,i=!1,s=!1;if(e>t.length)return[0,t.length-1];for(let l=0;l<e;l++){let p=t[l];p===`
`&&!i&&!s?(n++,r=0):p==="'"?i=!i:p==='"'?s=!s:r++}return[n,r]}var Nd=Et(Qt());function Ei(t,e){let n=t.getText(),r=/[\w]+/g,i;for(;i=r.exec(n);){let s=i.index,l=i.index+i[0].length,p=Nd.Range.create(t.positionAt(s),t.positionAt(l));if(e.line===p.start.line&&e.character>=p.start.character&&e.character<=p.end.character)return p}}var js=Et(Ms());var re={OUTPUT_VECTOR:1,EXPECTED_FN_IDENT:2,AST_MAX_STMNT_REACHED:3,FN_CALL_EXCEEDED_CALLS:4,FN_DEF_MISSING_END:5,MISSING_PAREN:6,EXPECTED_COMMA_PAREN:7,UNEXPECTED_NL:50,UNDEFINED_TOKEN:55,TOO_MANY_NL:60,CELL_ARR_BAD_ARGS:140,CELL_ARR_BAD_COMMA:141,CELL_ARR_BAD_MISSING_END:142,CELL_ARR_ACCESS_MISSING_END:160,CELL_ARR_ACCESS_BAD_ARGS:161,MISSING_PATH:200,TOO_MANY_ARGS:201,MAX_ITERATION_COMMENTS_BEFORE:2e3,MAX_ITERATION_COMMENTS_AFTER:2001,MAX_ITERATION_PARSING_COMMENT_BEFORE:3001,PARSE_ERR_STMNT:4e3,COULD_NOT_FIND_RPAREN_STMNT:4001,MISSING_CONDITION_ELSEIF:4002,MISSING_END_STMNT:4002,UNEXPECTED_END_OF_STMNT:4003,MISSING_EQUALS_STMNT:4004,MISSING_EQUALS_FOR_LOOP:4005,MISSING_END_KEYWORD_FOR_LOOP:4006,MISSING_END_RPAREN_FOR_LOOP:4007,WRONG_DATA_TYPE_FOR_LOOP:5001,VISITOR_COULDNT_FIND_REF:1e4,UNEXPECTED_UNDEFINED_TOKEN:2e4};var ie={start:{line:1,character:1},end:{line:1,character:2}};function Us(t,e){return{range:t?.range??ie,message:t.message,severity:e==="error"?js.DiagnosticSeverity.Error:js.DiagnosticSeverity.Warning,source:"mlang"}}function wd(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<16;r++){let i=Math.floor(Math.random()*e.length);n+=e.charAt(i)}return n}function Si(){return Di().map(t=>t.label)}var $n=Et(Qt());function Ws(t){let e=t?.arguments?.length!==void 0&&t?.arguments?.length>0?t.arguments.map((i,s)=>`${s!==0?" ":""}\${${s+1}:${i.name}${i.type!=="DEFAULT_ARGUMENT"?"":` = ${i.content}`}}`):"",n=t.type!=="FUNCTION"?t.name:`${t.name}(${Array.isArray(e)?e.map(i=>i):e})`;return{label:t.name,kind:t.type==="FUNCTION"?$n.CompletionItemKind.Function:$n.CompletionItemKind.Variable,documentation:t.documentation,data:t.arguments,insertText:n,insertTextFormat:$n.InsertTextFormat.Snippet}}var vp=require("node:path"),Tp=require("node:os");function Pd(t){return t[0]==="~"?vp.join(Tp.homedir(),t.slice(1)):t}function xd(t){return t.replace(/^["'](.*)["']$/,"$1")}var ft=require("fs");var Id;(()=>{"use strict";var t={975:P=>{function T(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function L(C,D){for(var S,M="",W=0,O=-1,z=0,Y=0;Y<=C.length;++Y){if(Y<C.length)S=C.charCodeAt(Y);else{if(S===47)break;S=47}if(S===47){if(!(O===Y-1||z===1))if(O!==Y-1&&z===2){if(M.length<2||W!==2||M.charCodeAt(M.length-1)!==46||M.charCodeAt(M.length-2)!==46){if(M.length>2){var Ne=M.lastIndexOf("/");if(Ne!==M.length-1){Ne===-1?(M="",W=0):W=(M=M.slice(0,Ne)).length-1-M.lastIndexOf("/"),O=Y,z=0;continue}}else if(M.length===2||M.length===1){M="",W=0,O=Y,z=0;continue}}D&&(M.length>0?M+="/..":M="..",W=2)}else M.length>0?M+="/"+C.slice(O+1,Y):M=C.slice(O+1,Y),W=Y-O-1;O=Y,z=0}else S===46&&z!==-1?++z:z=-1}return M}var F={resolve:function(){for(var C,D="",S=!1,M=arguments.length-1;M>=-1&&!S;M--){var W;M>=0?W=arguments[M]:(C===void 0&&(C=process.cwd()),W=C),T(W),W.length!==0&&(D=W+"/"+D,S=W.charCodeAt(0)===47)}return D=L(D,!S),S?D.length>0?"/"+D:"/":D.length>0?D:"."},normalize:function(C){if(T(C),C.length===0)return".";var D=C.charCodeAt(0)===47,S=C.charCodeAt(C.length-1)===47;return(C=L(C,!D)).length!==0||D||(C="."),C.length>0&&S&&(C+="/"),D?"/"+C:C},isAbsolute:function(C){return T(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,D=0;D<arguments.length;++D){var S=arguments[D];T(S),S.length>0&&(C===void 0?C=S:C+="/"+S)}return C===void 0?".":F.normalize(C)},relative:function(C,D){if(T(C),T(D),C===D||(C=F.resolve(C))===(D=F.resolve(D)))return"";for(var S=1;S<C.length&&C.charCodeAt(S)===47;++S);for(var M=C.length,W=M-S,O=1;O<D.length&&D.charCodeAt(O)===47;++O);for(var z=D.length-O,Y=W<z?W:z,Ne=-1,ue=0;ue<=Y;++ue){if(ue===Y){if(z>Y){if(D.charCodeAt(O+ue)===47)return D.slice(O+ue+1);if(ue===0)return D.slice(O+ue)}else W>Y&&(C.charCodeAt(S+ue)===47?Ne=ue:ue===0&&(Ne=0));break}var He=C.charCodeAt(S+ue);if(He!==D.charCodeAt(O+ue))break;He===47&&(Ne=ue)}var ht="";for(ue=S+Ne+1;ue<=M;++ue)ue!==M&&C.charCodeAt(ue)!==47||(ht.length===0?ht+="..":ht+="/..");return ht.length>0?ht+D.slice(O+Ne):(O+=Ne,D.charCodeAt(O)===47&&++O,D.slice(O))},_makeLong:function(C){return C},dirname:function(C){if(T(C),C.length===0)return".";for(var D=C.charCodeAt(0),S=D===47,M=-1,W=!0,O=C.length-1;O>=1;--O)if((D=C.charCodeAt(O))===47){if(!W){M=O;break}}else W=!1;return M===-1?S?"/":".":S&&M===1?"//":C.slice(0,M)},basename:function(C,D){if(D!==void 0&&typeof D!="string")throw new TypeError('"ext" argument must be a string');T(C);var S,M=0,W=-1,O=!0;if(D!==void 0&&D.length>0&&D.length<=C.length){if(D.length===C.length&&D===C)return"";var z=D.length-1,Y=-1;for(S=C.length-1;S>=0;--S){var Ne=C.charCodeAt(S);if(Ne===47){if(!O){M=S+1;break}}else Y===-1&&(O=!1,Y=S+1),z>=0&&(Ne===D.charCodeAt(z)?--z==-1&&(W=S):(z=-1,W=Y))}return M===W?W=Y:W===-1&&(W=C.length),C.slice(M,W)}for(S=C.length-1;S>=0;--S)if(C.charCodeAt(S)===47){if(!O){M=S+1;break}}else W===-1&&(O=!1,W=S+1);return W===-1?"":C.slice(M,W)},extname:function(C){T(C);for(var D=-1,S=0,M=-1,W=!0,O=0,z=C.length-1;z>=0;--z){var Y=C.charCodeAt(z);if(Y!==47)M===-1&&(W=!1,M=z+1),Y===46?D===-1?D=z:O!==1&&(O=1):D!==-1&&(O=-1);else if(!W){S=z+1;break}}return D===-1||M===-1||O===0||O===1&&D===M-1&&D===S+1?"":C.slice(D,M)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(D,S){var M=S.dir||S.root,W=S.base||(S.name||"")+(S.ext||"");return M?M===S.root?M+W:M+"/"+W:W}(0,C)},parse:function(C){T(C);var D={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return D;var S,M=C.charCodeAt(0),W=M===47;W?(D.root="/",S=1):S=0;for(var O=-1,z=0,Y=-1,Ne=!0,ue=C.length-1,He=0;ue>=S;--ue)if((M=C.charCodeAt(ue))!==47)Y===-1&&(Ne=!1,Y=ue+1),M===46?O===-1?O=ue:He!==1&&(He=1):O!==-1&&(He=-1);else if(!Ne){z=ue+1;break}return O===-1||Y===-1||He===0||He===1&&O===Y-1&&O===z+1?Y!==-1&&(D.base=D.name=z===0&&W?C.slice(1,Y):C.slice(z,Y)):(z===0&&W?(D.name=C.slice(1,O),D.base=C.slice(1,Y)):(D.name=C.slice(z,O),D.base=C.slice(z,Y)),D.ext=C.slice(O,Y)),z>0?D.dir=C.slice(0,z-1):W&&(D.dir="/"),D},sep:"/",delimiter:":",win32:null,posix:null};F.posix=F,P.exports=F}},e={};function n(P){var T=e[P];if(T!==void 0)return T.exports;var L=e[P]={exports:{}};return t[P](L,L.exports,n),L.exports}n.d=(P,T)=>{for(var L in T)n.o(T,L)&&!n.o(P,L)&&Object.defineProperty(P,L,{enumerable:!0,get:T[L]})},n.o=(P,T)=>Object.prototype.hasOwnProperty.call(P,T),n.r=P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})};var r={};let i;n.r(r),n.d(r,{URI:()=>U,Utils:()=>Ze}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let s=/^\w[\w\d+.-]*$/,l=/^\//,p=/^\/\//;function E(P,T){if(!P.scheme&&T)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${P.authority}", path: "${P.path}", query: "${P.query}", fragment: "${P.fragment}"}`);if(P.scheme&&!s.test(P.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(P.path){if(P.authority){if(!l.test(P.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(P.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let b="",x="/",j=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class U{static isUri(T){return T instanceof U||!!T&&typeof T.authority=="string"&&typeof T.fragment=="string"&&typeof T.path=="string"&&typeof T.query=="string"&&typeof T.scheme=="string"&&typeof T.fsPath=="string"&&typeof T.with=="function"&&typeof T.toString=="function"}scheme;authority;path;query;fragment;constructor(T,L,F,C,D,S=!1){typeof T=="object"?(this.scheme=T.scheme||b,this.authority=T.authority||b,this.path=T.path||b,this.query=T.query||b,this.fragment=T.fragment||b):(this.scheme=function(M,W){return M||W?M:"file"}(T,S),this.authority=L||b,this.path=function(M,W){switch(M){case"https":case"http":case"file":W?W[0]!==x&&(W=x+W):W=x}return W}(this.scheme,F||b),this.query=C||b,this.fragment=D||b,E(this,S))}get fsPath(){return v(this,!1)}with(T){if(!T)return this;let{scheme:L,authority:F,path:C,query:D,fragment:S}=T;return L===void 0?L=this.scheme:L===null&&(L=b),F===void 0?F=this.authority:F===null&&(F=b),C===void 0?C=this.path:C===null&&(C=b),D===void 0?D=this.query:D===null&&(D=b),S===void 0?S=this.fragment:S===null&&(S=b),L===this.scheme&&F===this.authority&&C===this.path&&D===this.query&&S===this.fragment?this:new Te(L,F,C,D,S)}static parse(T,L=!1){let F=j.exec(T);return F?new Te(F[2]||b,ce(F[4]||b),ce(F[5]||b),ce(F[7]||b),ce(F[9]||b),L):new Te(b,b,b,b,b)}static file(T){let L=b;if(i&&(T=T.replace(/\\/g,x)),T[0]===x&&T[1]===x){let F=T.indexOf(x,2);F===-1?(L=T.substring(2),T=x):(L=T.substring(2,F),T=T.substring(F)||x)}return new Te("file",L,T,b,b)}static from(T){let L=new Te(T.scheme,T.authority,T.path,T.query,T.fragment);return E(L,!0),L}toString(T=!1){return y(this,T)}toJSON(){return this}static revive(T){if(T){if(T instanceof U)return T;{let L=new Te(T);return L._formatted=T.external,L._fsPath=T._sep===ee?T.fsPath:null,L}}return T}}let ee=i?1:void 0;class Te extends U{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=v(this,!1)),this._fsPath}toString(T=!1){return T?y(this,!0):(this._formatted||(this._formatted=y(this,!1)),this._formatted)}toJSON(){let T={$mid:1};return this._fsPath&&(T.fsPath=this._fsPath,T._sep=ee),this._formatted&&(T.external=this._formatted),this.path&&(T.path=this.path),this.scheme&&(T.scheme=this.scheme),this.authority&&(T.authority=this.authority),this.query&&(T.query=this.query),this.fragment&&(T.fragment=this.fragment),T}}let be={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function ke(P,T,L){let F,C=-1;for(let D=0;D<P.length;D++){let S=P.charCodeAt(D);if(S>=97&&S<=122||S>=65&&S<=90||S>=48&&S<=57||S===45||S===46||S===95||S===126||T&&S===47||L&&S===91||L&&S===93||L&&S===58)C!==-1&&(F+=encodeURIComponent(P.substring(C,D)),C=-1),F!==void 0&&(F+=P.charAt(D));else{F===void 0&&(F=P.substr(0,D));let M=be[S];M!==void 0?(C!==-1&&(F+=encodeURIComponent(P.substring(C,D)),C=-1),F+=M):C===-1&&(C=D)}}return C!==-1&&(F+=encodeURIComponent(P.substring(C))),F!==void 0?F:P}function oe(P){let T;for(let L=0;L<P.length;L++){let F=P.charCodeAt(L);F===35||F===63?(T===void 0&&(T=P.substr(0,L)),T+=be[F]):T!==void 0&&(T+=P[L])}return T!==void 0?T:P}function v(P,T){let L;return L=P.authority&&P.path.length>1&&P.scheme==="file"?`//${P.authority}${P.path}`:P.path.charCodeAt(0)===47&&(P.path.charCodeAt(1)>=65&&P.path.charCodeAt(1)<=90||P.path.charCodeAt(1)>=97&&P.path.charCodeAt(1)<=122)&&P.path.charCodeAt(2)===58?T?P.path.substr(1):P.path[1].toLowerCase()+P.path.substr(2):P.path,i&&(L=L.replace(/\//g,"\\")),L}function y(P,T){let L=T?oe:ke,F="",{scheme:C,authority:D,path:S,query:M,fragment:W}=P;if(C&&(F+=C,F+=":"),(D||C==="file")&&(F+=x,F+=x),D){let O=D.indexOf("@");if(O!==-1){let z=D.substr(0,O);D=D.substr(O+1),O=z.lastIndexOf(":"),O===-1?F+=L(z,!1,!1):(F+=L(z.substr(0,O),!1,!1),F+=":",F+=L(z.substr(O+1),!1,!0)),F+="@"}D=D.toLowerCase(),O=D.lastIndexOf(":"),O===-1?F+=L(D,!1,!0):(F+=L(D.substr(0,O),!1,!0),F+=D.substr(O))}if(S){if(S.length>=3&&S.charCodeAt(0)===47&&S.charCodeAt(2)===58){let O=S.charCodeAt(1);O>=65&&O<=90&&(S=`/${String.fromCharCode(O+32)}:${S.substr(3)}`)}else if(S.length>=2&&S.charCodeAt(1)===58){let O=S.charCodeAt(0);O>=65&&O<=90&&(S=`${String.fromCharCode(O+32)}:${S.substr(2)}`)}F+=L(S,!0,!1)}return M&&(F+="?",F+=L(M,!1,!1)),W&&(F+="#",F+=T?W:ke(W,!1,!1)),F}function w(P){try{return decodeURIComponent(P)}catch{return P.length>3?P.substr(0,3)+w(P.substr(3)):P}}let G=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ce(P){return P.match(G)?P.replace(G,T=>w(T)):P}var me=n(975);let Me=me.posix||me,Je="/";var Ze;(function(P){P.joinPath=function(T,...L){return T.with({path:Me.join(T.path,...L)})},P.resolvePath=function(T,...L){let F=T.path,C=!1;F[0]!==Je&&(F=Je+F,C=!0);let D=Me.resolve(F,...L);return C&&D[0]===Je&&!T.authority&&(D=D.substring(1)),T.with({path:D})},P.dirname=function(T){if(T.path.length===0||T.path===Je)return T;let L=Me.dirname(T.path);return L.length===1&&L.charCodeAt(0)===46&&(L=""),T.with({path:L})},P.basename=function(T){return Me.basename(T.path)},P.extname=function(T){return Me.extname(T.path)}})(Ze||(Ze={})),Id=r})();var{URI:En,Utils:Om}=Id;var zn=require("path");var Hs=class{_documents=new Map;constructor(){}set(e,n){if(this._documents.has(e))return;let r=jt.create(e,"octave",0,n);this._documents.set(e,r),Ni(e,n)}has(e){return this._documents.has(e)}get(e){return this._documents.get(e)}getAllDocuments(){return Array.from(this._documents,([e,n])=>n)}getAllUris(){return Array.from(this._documents,([e,n])=>e)}delete(e){this._documents.delete(e)}},Ye=new Hs;function wi(t,e=0){let n=Pd(t);if(e>kt.maxNumberOfProblems)return[];try{if((0,ft.existsSync)(n)){let r=(0,ft.lstatSync)(n);if(r.isFile()){let i=En.file(n).toString();if(Ye.has(i))return[];let s=(0,ft.readFileSync)(n,"utf8").toString();return Ye.set(i,s),[]}else{if(r.isDirectory())return(0,ft.readdirSync)(n).flatMap(s=>{let l=(0,zn.join)(n,s);return wi(l,e+1)});if(r.isSymbolicLink()){let i=(0,ft.readlinkSync)(n);if(i){let s=(0,zn.join)((0,zn.dirname)(n),i);if((0,ft.existsSync)(s))return wi(s,e+1)}return[n]}}return[n]}}catch{return[n]}return[]}var xi=!0,Vs=!0,_p=!1;function Od({params:t,connection:e}){let n=t.capabilities;xi=!!(n.workspace!=null&&n.workspace.configuration),Vs=!!(n.workspace!=null&&n.workspace.workspaceFolders),_p=!!(n.textDocument?.publishDiagnostics&&n.textDocument.publishDiagnostics.relatedInformation);let r={capabilities:{textDocumentSync:Pi.TextDocumentSyncKind.Incremental,completionProvider:{workDoneProgress:!0,resolveProvider:!0,completionItem:{labelDetailsSupport:!0},triggerCharacters:["qwertyuiopasdfghjkl\xF1zxcvbnm"]},definitionProvider:{workDoneProgress:!0},referencesProvider:{workDoneProgress:!0}}};Vs&&(r.capabilities.workspace={workspaceFolders:{supported:!0}});let{workspaceFolders:i}=t;return i&&i.length>0&&i[0]?.name&&Ed({workspace:En.parse(i[0].uri).fsPath}).forEach(l=>{console.error(JSON.stringify({uri:l.uri,text:l.getText()})),Ye.set(l.uri,l.getText())}),r}async function Ad({params:t,connection:e}){e.console.log("Mlang Initialized correctly!"),xi&&await e.client.register(Pi.DidChangeConfigurationNotification.type,void 0),Vs&&e.workspace.onDidChangeWorkspaceFolders(n=>{e.console.log("Workspace folder change event received.")})}function Md(t,e){let n=[],r=t.uri,i=Ei(t,e);if(i===void 0)return[];let s=vt.get(r);if(s?.definitions===void 0)return[];let{references:l}=s,p=t.getText(i);return n.push(...l.filter(E=>E.name===p).map(E=>({range:E.position,uri:r}))),n}function Ld({params:t}){let e=ki(),n=vt.get(t.textDocument.uri);if(n?.definitions===void 0)return e;let{definitions:r}=n,i=Di();console.error("Calling completion!"),e.push(...i),e.push(...r.map(E=>Ws(E)).filter((E,b,x)=>b===x.findIndex(j=>j.label===E.label)));let p=Ye.getAllUris().filter(E=>E!==t.textDocument.uri).map(E=>vt.get(E)).filter(E=>E!==void 0).flatMap(E=>E.definitions).filter(E=>E.context==="0").map(E=>Ws(E));return e.push(...p),e}async function Fd({params:t,documents:e}){let n=t.textDocument.uri,r=t.position,i=e.get(n);if(!i)return null;let s=Ei(i,r);if(!s)return null;let l=i.getText(s),p=[],b=vt.get(n)?.definitions;return b&&p.push(...b.filter(j=>j.name===l).map(j=>({range:j.position,uri:n}))),Ye.getAllUris().filter(j=>j!==t.textDocument.uri).forEach(j=>{vt.get(j)?.definitions.filter(U=>U.context==="0").filter(U=>U.name===l).forEach(U=>{p.push({uri:j,range:U.position})})}),p.length>0?p:null}var qd=["function","if","for","while","switch","do"],jd=["until","endfunction","endif","endfor","endwhile","endswitch","end"];var Cp={NL:`
`,EOF:"\0",AT:"@",COLON:":",COMMA:",",EQUALS:"=",GRATER_THAN:">",LESS_THAN:"<",AND:"&",OR:"|",EXCLAMATION:"!",SUBTRACTION:"-",ADDITION:"+",MULTIPLICATION:"*",DIVISION:"/",MODULUS:"%",EXPONENTIATION:"^",PERIOD:".",SEMICOLON:";",LBRACKET:"[",RBRACKET:"]",LSQUIRLY:"{",RSQUIRLY:"}",LPARENT:"(",RPARENT:")"};function Ud(t){for(let[e,n]of Object.entries(Cp))if(n===t)return{content:e==="EOF"?"eof":t,type:e,position:null}}var Fe=5e3,Ii=class{constructor(e){this.tokens=e}currentTokenIndex=0;statements=[];errors=[];warnings=[];contextDepth=["0"];parsingStatement=!1;parsingStatementType=null;clearLintingMessages(){this.errors=[],this.warnings=[]}getCurrentContext(){return this.contextDepth[this.contextDepth.length-1]}getIntoNewContext(){let e=this.getCurrentContext(),n=wd();return this.contextDepth.push(n),[e,n]}getBackOfContext(){let e=this.getCurrentContext(),n=this.contextDepth.pop();if(n===void 0)throw new Error("Expected newContext to be defined");return[e,n]}getCurrentToken(){return this.tokens[this.currentTokenIndex]}getNextToken(){if(!(this.currentTokenIndex>=this.tokens.length-1))return this.currentTokenIndex++,this.getCurrentToken()}getPrevToken(){if(!(this.currentTokenIndex<=0))return this.currentTokenIndex--,this.getCurrentToken()}parseStatement(){for(;this.getCurrentToken().type==="COMMENT"||this.getCurrentToken().type==="NL";)this.getNextToken();let e=this.getCurrentToken(),n=this.getNextToken();if(n===void 0)return null;if(this.parsingStatement&&this.parsingStatementType==="if"&&(e.content==="elseif"||e.content==="else"))return e.content==="elseif"&&(this.consumeStatementCondition(e.position,n.type==="LPARENT"),this.consumeStatementsInsideBasicStatement(e,"endif")),null;if(this.parsingStatement&&this.parsingStatementType==="do"&&e.content==="until")return this.getPrevToken(),null;if(typeof e.content=="string"&&jd.includes(e.content)||e.type==="EOF")return this.parsingStatement?(this.getPrevToken(),null):(this.errors.push({message:`Unexpected ending of statement '${e.content}'`,code:re.UNEXPECTED_END_OF_STMNT,range:{start:this.getCurrentPosition(e).start,end:this.getCurrentPosition(n).start}}),null);if((e.type==="IDENTIFIER"||e.type==="STRUCT_ACCESS"||e.type==="CELL_ARRAY_ACCESS"||e.type==="NATIVE_FUNCTION")&&n.type==="LPARENT"){this.getPrevToken();let r=this.getCurrentPosition();this.getNextToken();let i=this.getFunctionArguments();return this.getNextToken(),{type:"FUNCTION_CALL",supressOutput:this.isOutputSupressed(),context:this.getCurrentContext(),LHE:{type:"IDENTIFIER",value:e.content,position:r,functionData:{args:i}}}}else if((e.type==="IDENTIFIER"||e.type==="STRUCT_ACCESS"||e.type==="CELL_ARRAY_ACCESS")&&n.type==="EQUALS"){let r=this.getLineContent();this.getNextToken();let i=this.parseExpression(),s=this.isOutputSupressed();return{type:"ASSIGNMENT",operator:n.content,supressOutput:s,context:this.getCurrentContext(),LHE:{type:e.type,value:e.content,position:this.getCurrentPosition(e),lineContent:r},RHE:i}}else if(e.type==="LBRACKET"){let[r,i]=this.getVectorArgs();if(i==="COMMA"&&r.every(s=>s.type==="IDENTIFIER")&&this.getCurrentToken().type==="EQUALS"){if(this.getCurrentToken().type!=="EQUALS")return this.errors.push({message:`Unexpected token ${this.stringifyTokenContent()}`,range:this.getCurrentPosition(),code:re.OUTPUT_VECTOR}),null;let s=this.getNextToken();if(s===void 0)throw new Error("Unexpected undefined token. Code 50");if(s.type!=="IDENTIFIER"&&s.type!=="KEYWORD")return this.errors.push({message:`Expected a function call. Got ${this.stringifyTokenContent()}`,range:this.getCurrentPosition(),code:re.EXPECTED_FN_IDENT}),null;this.getNextToken();let l=this.getFunctionArguments();return this.validateFnCallArgs(l),this.getNextToken(),{type:"MO_ASSIGNMENT",operator:"=",supressOutput:this.isOutputSupressed(),context:this.getCurrentContext(),LHE:{type:"VARIABLE_VECTOR",value:r},RHE:{type:"FUNCTION_CALL",position:this.getCurrentPosition(s),value:s.content,functionData:{args:l}}}}return null}else if(e.type==="KEYWORD"&&e.content==="function"){let r=this.getCurrentToken(),i=this.getNextToken();if(this.getPrevToken(),this.getPrevToken(),i===void 0)throw this.errors.push({code:re.UNDEFINED_TOKEN,message:"Unexpected undefined token",range:r.position??e.position??ie}),new Error("Unexpected undefined token. Code 60");return r.type==="IDENTIFIER"&&i.type==="EQUALS"?this.getFunctionDefintionWithOutput(!0):r.type==="LBRACKET"?this.getFunctionDefintionWithOutput(!1):this.getFunctionDefintionWithoutOutput()}else if(e.type==="KEYWORD"&&typeof e.content=="string"&&qd.includes(e.content))switch(e.content){case"if":case"while":return this.parseBasicIfStatements(e.content);case"for":return this.parseForStatement(e);case"do":return this.parseDoUntilStatement(e);default:return this.parseBasicIfStatements(e.content)}else if((e.type==="IDENTIFIER"||e.type==="NATIVE_FUNCTION"||e.type==="CELL_ARRAY_ACCESS"||e.type==="STRUCT_ACCESS")&&(n.type==="SEMICOLON"||n.type==="NL"||n.type==="EOF")){let r=this.isOutputSupressed();return{type:"REFERENCE_CALL_VAR_FUNC",LHE:{type:"REFERENCE_CALL_VAR_FUNC",position:this.getCurrentPosition(e),value:e.content},supressOutput:r,context:this.getCurrentContext()}}else if(e.type==="IDENTIFIER"&&(n.type==="EOF"||this.isTokenValidBasicDataType(n))){let r=0,i=[];for(;this.getCurrentToken().type!=="NL"&&this.getCurrentToken().type!=="EOF"&&this.isTokenValidBasicDataType(this.getCurrentToken(),!1)&&r<Fe;){let l=this.getNextToken();if(r++,l===void 0)throw new Error(`Unexpected undefined token. Error code ${re.UNEXPECTED_UNDEFINED_TOKEN}`);if(this.isTokenValidBasicDataType(l,!1))i.push(l);else if(l.type==="LBRACKET"){let p=this.getVector();i.push(p)}}this.logErrorMaxCallsReached(r,"Could not parse function call",re.FN_CALL_EXCEEDED_CALLS);let s=this.isOutputSupressed();return{type:"FUNCTION_CALL",context:this.getCurrentContext(),supressOutput:s,LHE:{type:"FUNCTION_CALL",position:this.getCurrentPosition(e),value:e.content,functionData:{args:i}}}}else{if(e===void 0)throw new Error("Unexpected undefined token. Code 70");return this.errors.push({message:`Unexpected token. Got: "${this.stringifyTokenContent(e)}"`,range:e?.position??{start:{line:0,character:0},end:{line:0,character:0}},code:24}),null}}parseDoUntilStatement(e){this.parsingStatement=!0,this.parsingStatementType="do";let[n,r]=this.consumeStatementsInsideBasicStatement(this.getCurrentToken(),"until"),i=this.getCurrentPosition(),s=this.getNextToken()?.type==="LPARENT";return s&&this.skipNL(!0),this.consumeStatementCondition(i,s)?{type:"DO_STMNT",context:this.getCurrentContext(),supressOutput:!0,LHE:{type:"DO_STMNT",value:e.content,position:this.getCurrentPosition(e)},RHE:r}:null}parseForStatement(e){this.parsingStatement=!0,this.parsingStatementType="for";let n=!1;this.getCurrentToken().type==="LPARENT"&&(n=!0,this.getNextToken());let r=this.getCurrentToken();if(!this.isTokenValidBasicDataType(this.getCurrentToken(),!0))return null;if(this.getNextToken(),this.getCurrentToken().type!=="EQUALS")return this.errors.push({message:"Missing = in for loop",code:re.MISSING_EQUALS_FOR_LOOP,range:{start:e.position?.start??ie.start,end:this.getCurrentPosition().end}}),this.parsingStatement=!1,this.parsingStatementType=null,null;if(this.getNextToken(),this.isValidForDataType()){if(this.getNextToken(),this.getCurrentToken().type==="COLON"){if(this.getNextToken(),!this.isValidForDataType())return this.errors.push({message:`Unexpected '${JSON.stringify(this.getCurrentToken().content)}' in for loop`,range:{start:e.position?.start??ie.start,end:this.getCurrentPosition()?.end??ie.end},code:re.WRONG_DATA_TYPE_FOR_LOOP}),this.parsingStatement=!1,this.parsingStatementType=null,null;this.getNextToken()}}else this.parseExpression(),this.getNextToken();if(n){if(this.getCurrentToken().type!=="RPARENT")return this.errors.push({message:"Was expecting closing ')' in for loop",code:re.MISSING_END_RPAREN_FOR_LOOP,range:{start:e.position?.start??ie.start,end:this.getCurrentPosition()?.end??ie.end}}),this.parsingStatement=!1,this.parsingStatementType=null,null;this.getNextToken()}let i=this.consumeStatementsInsideBasicStatement(this.getCurrentToken(),"endfor")[1];this.getNextToken();let s=this.getIntoNewContext()[1];return this.getBackOfContext(),{type:"FOR_STMNT",supressOutput:!0,context:s,LHE:{type:"IDENTIFIER",value:r.content,position:r.position??ie},RHE:i}}isValidForDataType(e){return e===void 0?this.getCurrentToken().type==="CELL_ARRAY_ACCESS"||this.getCurrentToken().type==="STRUCT_ACCESS"||this.getCurrentToken().type==="NUMBER"||this.getCurrentToken().type==="IDENTIFIER":e.type==="CELL_ARRAY_ACCESS"||e.type==="STRUCT_ACCESS"||e.type==="NUMBER"||e.type==="IDENTIFIER"}getLineContent(){let e=this.currentTokenIndex,n=this.getPrevToken(),r=[...n?[n]:[]],i=0,s=this.getNextToken();for(;s?.type!=="NL"&&s?.type!=="EOF"&&i<1e3;)s!==void 0&&r.push(s),s=this.getNextToken();let l=r.map(p=>this.getLiteralContentFromToken(p.content)).join(" ");return this.currentTokenIndex=e,l}getLiteralContentFromToken(e,n=0){if(n>Fe)throw new Error("Exceeded calls from getLiteralContentFromToken.");return typeof e=="string"?e:e.length===0?"":e.map(r=>this.getLiteralContentFromToken(r.content,n+1)).join(" ")}parseBasicIfStatements(e){let n=this.getPrevToken(),r=n.position,i=this.skipNL(!0).type==="LPARENT",s=e==="do"?"until":`end${e}`,l=this.getIntoNewContext()[1];this.parsingStatement=!0,this.parsingStatementType=e;let p=[];if(e==="do"){let[x,j]=this.consumeStatementsInsideBasicStatement(n,s);if(!x)return null;p=j}else{if(i&&this.skipNL(!0),!this.consumeStatementCondition(r,i))return null;let[j,U]=this.consumeStatementsInsideBasicStatement(n,s);if(!j)return null;p=U}this.getBackOfContext();let E={...r,end:this.getCurrentPosition().start};this.skipNL(!0);let b;switch(e){case"if":b="IF_STMNT";break;case"for":b="FOR_STMNT";break;case"while":b="WHILE_STMNT";break;case"switch":b="SWITCH_STMNT";break;case"do":b="DO_STMNT";break;default:throw new Error("Could not parse statement")}return this.parsingStatement=!1,this.parsingStatementType=null,{type:b,supressOutput:!0,context:l,LHE:{type:b,value:e,position:E},RHE:p}}consumeStatementsInsideBasicStatement(e,n){let r=[],i=0;for(;!this.isEndStatementToken(n)&&!this.isEOF()&&i<Fe;){let s=this.parseStatement();s!==null&&r.push(s),i++}return this.logErrorMaxCallsReached(this.getCurrentToken().type==="EOF"?Fe:i,`Could not find closing keyword 'end' or '${n}'`,re.MISSING_END_STMNT,e)?(this.parsingStatement=!1,this.parsingStatementType=null,[!1,r]):[!0,r]}consumeStatementCondition(e,n){let r=0;do{r++;let i=this.parseExpression();if(i?.type==="BINARY_OPERATION"&&(this.getNextToken(),this.getPrevToken()),i?.type!=="BINARY_OPERATION"&&i?.type!=="FUNCTION_CALL"&&i?.type!=="NUMBER"&&i?.type!=="IDENTIFIER"&&i?.type!=="STRING"&&i?.type!=="STRUCT"&&i?.type!=="VECTOR"&&i?.type!=="IDENTIFIER_REFERENCE"&&i?.type!=="STRUCT_ACCESS"&&i?.type!=="CELL_ARRAY_ACCESS")return this.errors.push({message:"Unexpected token while parsin condition",code:re.PARSE_ERR_STMNT,range:{start:e?.start??ie.start,end:this.getCurrentPosition().end??ie}}),this.parsingStatement=!1,this.parsingStatementType=null,!1;let s=this.checkConditionHasSymbols(),l=!1;s&&(l=this.consumeEquationSymbols(),this.skipNL(!0),l=!this.isTokenValidBasicDataType(this.getCurrentToken())),n&&s?this.skipNL(!0):!n&&s&&this.getNextToken();let[p,E]=this.consumeConditionConcatenator(n?"RPARENT":"NL");if(this.skipNL(!0),l=p,E)break;if(l)return this.parsingStatement=!1,this.parsingStatementType=null,!1}while(r<Fe&&this.getCurrentToken().type!=="EOF");return this.logErrorMaxCallsReached(r,"Error parsing conditions",re.PARSE_ERR_STMNT)?(this.parsingStatement=!1,this.parsingStatementType=null,!1):!0}checkConditionHasSymbols(){switch(this.getCurrentToken().type){case"GRATER_THAN":case"LESS_THAN":case"EQUALS":return!0;default:return!1}}consumeEquationSymbols(){switch(this.getCurrentToken().type){case"EQUALS":if(this.getNextToken()?.type!=="EQUALS")return this.errors.push({message:`Missing '='. Got '${JSON.stringify(this.getCurrentToken().content)}'`,code:re.MISSING_EQUALS_STMNT,range:this.getCurrentPosition()}),!0;break;case"GRATER_THAN":case"LESS_THAN":this.getNextToken()?.type!=="EQUALS"&&this.getPrevToken();break;default:return!0}return!1}consumeConditionConcatenator(e){switch(this.getCurrentToken().type){case"AND":if(this.getNextToken()?.type!=="AND")return[!0,!1];break;case"OR":if(this.getNextToken()?.type!=="OR")return[!0,!1];break;case e:return[!1,!0];default:return[!0,!1]}return[!1,!1]}isEndStatementToken(e,n){return n!==void 0?n.content==="end"||n.content===e:this.getCurrentToken().content==="end"||this.getCurrentToken().content===e}parseCellArray(){let e=[],n=this.getCurrentToken().position?.start??ie.start,r=0,i=this.skipNL(!0);if(i.type==="COLON"){let s=this.skipNL(!0);return s.type!=="RSQUIRLY"?(this.errors.push({message:`Missing closing '}'. Got ${JSON.stringify(s.content)}`,code:re.CELL_ARR_BAD_MISSING_END,range:{start:n,end:s?.position?.end??ie.end}}),this.getNextToken(),null):(this.getNextToken(),{type:"CELL_ARRAY",content:[i],position:{start:n,end:s?.position?.end??ie.end}})}this.getPrevTokenSkipNL();do{let s=this.skipNL(!0);if(s.type==="RSQUIRLY")break;if(s!==void 0&&this.isValidStructType(s))e.push(s);else return null;let l=this.skipNL(!0);(l===void 0||l.type!=="COMMA"&&l.type!=="SEMICOLON"&&l.type!=="RSQUIRLY")&&this.errors.push({message:`Unexpected struct value. Got "${l?.type??"UNDEFINED"}". Code ${re.CELL_ARR_BAD_COMMA.toString()}`,code:re.CELL_ARR_BAD_COMMA,range:this.getCurrentPosition()}),r++}while(this.getCurrentToken().type!=="RSQUIRLY"&&this.getCurrentToken().type!=="EOF"&&this.currentTokenIndex<this.tokens.length&&r<Fe);return this.getNextToken(),{type:"CELL_ARRAY",content:e,position:{start:n,end:this.getCurrentPosition().end}}}isValidStructType(e){return!this.isTokenValidBasicDataType(e)&&e.type!=="VECTOR"&&e.type!=="CELL_ARRAY"&&e.type!=="STRUCT"?(this.errors.push({message:`Unexpected struct value. Got "${e.type}". Code ${re.CELL_ARR_BAD_ARGS.toString()}`,code:re.CELL_ARR_BAD_ARGS,range:this.getCurrentPosition()}),!1):!0}validateFnCallArgs(e){for(let n of e)n.type==="DEFAULT_VALUE_ARGUMENT"&&this.errors.push({message:"Unexpected default value argument in function call",range:this.getCurrentPosition(n),code:23})}getVectorArgs(){let e=[];if(this.getCurrentToken().type==="LBRACKET"&&this.getNextToken(),this.getCurrentToken().type==="RBRACKET")return this.getNextToken(),[[],"COMMA"];this.getCurrentToken().type==="LBRACKET"?(e.push(this.getVector()),this.getPrevToken()):this.isTokenValidBasicDataType(this.getCurrentToken())&&e.push(this.getCurrentToken());let n=this.getNextToken()?.type==="COMMA";return n?e.push(...this.getVectorValuesCommaSeparated()):e.push(...this.getVectorValuesColonSeparated()),this.getNextToken(),[e,n?"COMMA":"COLON"]}getVectorValuesColonSeparated(){let e=[];for(;this.getCurrentToken().type==="COLON"&&e.length<2;){let n=this.getNextToken();if(n===void 0)throw new Error("Unexpected undefined token. Code 80");n.type==="LBRACKET"?(e.push(this.getVector(n)),this.getPrevToken()):this.isTokenValidBasicDataType(n)&&e.push(n),this.getNextToken()}return this.getCurrentToken().type!=="RBRACKET"&&this.errors.push({message:"Unexpected vector value",range:this.getCurrentPosition(),code:22}),e}counter=0;getVector(e){let[n]=this.getVectorArgs(),r=e??this.getCurrentToken();if(r===void 0)throw new Error("Unexpected undefined token. Code 130");let i=this.getCurrentPosition(r);return{type:"VECTOR",content:n,position:{start:i.start,end:n[n.length-1]?.position?.end??i.end}}}getVectorValuesCommaSeparated(){let e=[];for(;this.getCurrentToken().type==="COMMA";){let n=this.getNextToken();if(n===void 0)throw new Error("Unexpected undefined token. Code 120");if(n.type==="LBRACKET")e.push(this.getVector(n)),this.getPrevToken();else if(this.isTokenValidBasicDataType(n))e.push(n);else break;this.getNextToken()}return this.getCurrentToken().type!=="RBRACKET"&&this.errors.push({message:"Unexpected vector value",range:this.getCurrentPosition(),code:21}),e}getFunctionDefintionWithOutput(e){this.parsingStatement=!0;let[n,r]=this.getIntoNewContext(),i=this.getFunctionDefinitionDescription(!0),s,l=[];e?(s=this.getNextToken(),this.getNextToken()):(this.getNextToken(),this.getNextToken(),l.push(...this.getVariableVector()));let p=this.getNextToken();if(p===void 0)throw new Error("Unexpected undefined token. Code 110");if(p.type!=="IDENTIFIER")return this.errors.push({message:`Expected IDENTIFIER. Got: ${this.stringifyTokenContent(p)}`,range:this.getCurrentPosition(),code:20}),null;this.getNextToken();let E=this.getFunctionArguments();this.checkValidFunctionDefinitionArguments(E),i===""&&(i=this.getFunctionDefinitionDescription(!1)),this.getNextToken();let b=[],x=0;for(;!this.isEndFunctionToken()&&!this.isEOF()&&x<Fe;){let ee=this.parseStatement();ee!==null&&b.push(ee),x++}this.logErrorMaxCallsReached(x,"Could not find closing keyword 'end'",re.FN_DEF_MISSING_END);let j=this.getCurrentToken();if(j.type==="EOF")return this.errors.push({message:"Expected closing function 'end' or 'endfunction'",range:{start:this.getCurrentPosition(p).start,end:this.getCurrentPosition(p).end},code:19}),null;this.getNextToken(),this.getBackOfContext();let U={type:"FUNCTION_DEFINITION",value:"function",LHO:{type:"IDENTIFIER",value:p.content,position:this.getCurrentPosition(p),functionData:{args:E,description:i,closingToken:j,contextCreated:r}},RHO:b};return{type:"ASSIGNMENT",supressOutput:!0,context:n,LHE:{type:e?"IDENTIFIER":"VARIABLE_VECTOR",value:e&&s!==void 0?s.content:l,position:e&&s!==void 0?this.getCurrentPosition(s):void 0},RHE:U}}checkValidFunctionDefinitionArguments(e){let n=!0;return e.forEach(r=>{r.type==="IDENTIFIER"||r.type==="DEFAULT_VALUE_ARGUMENT"||(n=!1,this.errors.push({message:"Invalid function definition argument. ",range:this.getCurrentPosition(r),code:200}))}),n}getFunctionDefintionWithoutOutput(){this.parsingStatement=!0;let[e,n]=this.getIntoNewContext(),r=this.getFunctionDefinitionDescription(!0),i=this.getNextToken();if(i===void 0)throw new Error("Unexpected undefined token. Code 100");if(i.type!=="IDENTIFIER")return this.errors.push({message:`Expected IDENTIFIER. Got: ${this.stringifyTokenContent(i)}`,range:this.getCurrentPosition(),code:18}),null;this.getNextToken();let s=this.getFunctionArguments();this.checkValidFunctionDefinitionArguments(s),this.getNextToken(),r===""&&(this.getPrevToken(),r=this.getFunctionDefinitionDescription(!1),this.getNextToken());let l=[],p=0;for(;!this.isEndFunctionToken()&&!this.isEOF()&&p<Fe;){let b=this.parseStatement();b!==null&&l.push(b),p++}p>=Fe&&this.errors.push({message:"Max calls for statements in a function definition",range:this.getCurrentPosition(),code:16});let E=this.getCurrentToken();return E.type==="EOF"?(this.errors.push({message:"Expected closing function 'end' or 'endfunction'",range:{start:this.getCurrentPosition(i).start,end:this.getCurrentPosition(i).end},code:17}),null):(this.getNextToken(),this.getBackOfContext(),{type:"FUNCTION_DEFINITION",supressOutput:!0,context:e,LHE:{type:"IDENTIFIER",value:i.content,position:this.getCurrentPosition(i),functionData:{args:s,description:r,closingToken:E,contextCreated:n}},RHE:l})}getFunctionDefinitionDescription(e){let n=[],r=this.currentTokenIndex;if(e){let s=0;do{if(s++,this.currentTokenIndex===0)break;let l=this.getPrevTokenSkipNL();l?.type==="COMMENT"&&n.push(l)}while(this.getCurrentToken().type==="COMMENT"&&s<=Fe);this.logErrorMaxCallsReached(s,"Iterations exceeded trying to find function comments",re.MAX_ITERATION_COMMENTS_BEFORE),n.reverse()}else{let s=0;do{s++;let l=this.skipNL(!0);l.type==="COMMENT"&&n.push(l)}while(this.getCurrentToken().type==="COMMENT"&&s<=Fe);this.logErrorMaxCallsReached(s,"Iterations exceeded trying to find function comments",re.MAX_ITERATION_COMMENTS_AFTER)}return this.currentTokenIndex=r,n.map(s=>s.content).join(`
`)}getPrevTokenSkipNL(){let e,n=0;do e=this.getPrevToken(),n++;while(e?.type==="NL"&&n<Fe);return this.logErrorMaxCallsReached(n,"Max statement parsing reached while parsing comment",re.MAX_ITERATION_PARSING_COMMENT_BEFORE),e}isOutputSupressed(){let e=this.getCurrentToken().type==="SEMICOLON";return e?(this.getNextToken(),e):(this.warnings.push({message:"Will output to the console",range:this.getCurrentPosition(this.getPrevToken()),code:15}),this.getNextToken(),!1)}getVariableVector(){let e=[];do{if(this.getCurrentToken().type!=="IDENTIFIER")return[];e.push(this.getCurrentToken());let n=this.getNextToken()?.type;if(n===void 0)throw new Error("Unexpected undefined token. Code 30");if(n!=="COMMA"&&n!=="RBRACKET")return this.errors.push({message:`Expected COMMA. Got: '${this.stringifyTokenContent(this.getCurrentToken())}'`,range:this.getCurrentPosition(),code:14}),e;if(this.getNextToken(),n==="RBRACKET")break}while(e[e.length-1].type!=="RBRACKET"&&this.currentTokenIndex<this.tokens.length);return e}parseExpression(){let e=this.getCurrentToken(),n,r=!0;switch(e.type){case"STRING":case"VECTOR":r=!1,n={type:e.type,value:e.content};break;case"NUMBER":n={type:e.type,value:e.content};break;case"NATIVE_FUNCTION":case"IDENTIFIER":case"CELL_ARRAY_ACCESS":case"STRUCT_ACCESS":this.getNextToken(),this.getCurrentToken().type==="LPARENT"?n=this.parseFunctionCall(e):this.getCurrentToken().type==="LSQUIRLY"?n=this.parseCellArrayAccess(e):n={type:e.type,value:e.content,position:this.getCurrentPosition(e)},this.getPrevToken();break;case"AT":{this.getNextToken();let s=this.getFunctionArguments();this.validateFnCallArgs(s),this.getNextToken();let l=this.parseExpression();return{type:"ANONYMOUS_FUNCTION_DEFINITION",value:"@",position:this.getCurrentPosition(e),functionData:{args:s},RHO:l}}case"LPARENT":if(this.getNextToken(),n=this.parseExpression(),this.getCurrentToken().type!=="RPARENT"){this.errors.push({message:"Expected closing parenthesis ')'",range:this.getCurrentPosition(),code:13});return}break;case"LBRACKET":return{type:"VARIABLE_VECTOR",value:this.getVectorArgs()[0]};case"LSQUIRLY":{let s=this.parseCellArray();return s===null?void 0:{type:"CELL_ARRAY",value:s?.content}}case"NL":this.errors.push({message:"Unexpected new line in expression.",range:this.getCurrentPosition(),code:re.UNEXPECTED_NL});return;default:this.errors.push({message:`Unexpected token. ${this.stringifyTokenContent(e)}. Case ${e.type}`,range:this.getCurrentPosition(),code:12});return}let i=this.getNextToken();if(i===void 0)throw new Error("Unexpected undefined token. Code 40");return r&&this.isBinaryOperator(i.type)?(this.getNextToken(),{type:"BINARY_OPERATION",value:i?.content??"",RHO:this.parseExpression(),LHO:n}):n}parseCellArrayAccess(e){let n=this.skipNL(!0);if(n!==void 0)if(n.type==="COLON"){let r=this.skipNL(!0);if(r===void 0)return;if(r.type!=="RSQUIRLY"){this.errors.push({message:"Missing closing token '}'",code:re.CELL_ARR_ACCESS_MISSING_END,range:{start:this.tokens[this.currentTokenIndex-3].position?.start??ie.start,end:r.position?.end??ie.end}}),this.getPrevToken();return}return this.getNextToken(),{type:"CELL_ARRAY_ACCESS",value:[n],position:this.tokens[this.currentTokenIndex-3].position??ie}}else{let r=0,i=[n];this.getPrevTokenSkipNL();do{if(r++,this.skipNL(!0),!this.isTokenValidBasicDataType(this.getCurrentToken(),!1))break;i.push(this.getCurrentToken()),this.skipNL(!0),this.getCurrentToken().type!=="COMMA"&&this.getCurrentToken().type!=="RSQUIRLY"&&this.errors.push({message:`Unexpected token '${JSON.stringify(this.getCurrentToken().content)}'`,code:re.CELL_ARR_ACCESS_BAD_ARGS,range:{start:e.position?.start??ie.start,end:this.getCurrentPosition().end}})}while(r<Fe&&i[i.length-1].type!=="RSQUIRLY");return this.logErrorMaxCallsReached(r,"Missing '}'. Could not parse cell array access",re.CELL_ARR_ACCESS_MISSING_END)?void 0:(this.getNextToken(),{type:"CELL_ARRAY_ACCESS",value:i,position:this.tokens[this.currentTokenIndex-3].position??ie})}}isTokenValidBasicDataType(e,n){let r=e.type==="CELL_ARRAY_ACCESS"||e.type==="STRUCT_ACCESS"||e.type==="IDENTIFIER_REFERENCE"||e.type==="IDENTIFIER"||e.type==="NUMBER"||e.type==="STRING";return!r&&(n===void 0||n===!0)&&this.errors.push({message:`Expected a valid data type. Got '${this.stringifyTokenContent()}'`,range:this.getCurrentPosition(),code:11}),r}parseFunctionCall(e){let n=this.getFunctionArguments();return this.validateFnCallArgs(n),this.getNextToken(),{type:"FUNCTION_CALL",value:e.content,position:this.getCurrentPosition(e),functionData:{args:n}}}getFunctionArguments(){let e=[];if(this.getCurrentToken().type!=="LPARENT")return this.errors.push({message:`Expected '(' for function call. Got: ${this.getCurrentToken().type}`,range:this.getCurrentPosition(),code:10}),e;do{let n=this.skipNL(!0),r=this.skipNL(!0);if(this.getPrevToken(),n.type==="IDENTIFIER"&&r.type==="EQUALS"){this.getNextToken();let s=this.skipNL(!0);this.isTokenDataType(s)||this.errors.push({message:`Expected a valid default value. Got ${this.stringifyTokenContent(s)}`,range:this.getCurrentPosition(s),code:9}),e.push({type:"DEFAULT_VALUE_ARGUMENT",content:n.content,position:n.position,defaultValue:s}),this.getNextToken(),n=null}else if(n.type==="IDENTIFIER"){let s=this.skipNL(!0);if(s.type==="LPARENT"){let l=this.getFunctionArguments();this.getNextToken(),this.validateFnCallArgs(l)}else s.type==="LSQUIRLY"&&this.parseCellArrayAccess(n)}else{if(n.type==="RPARENT")return e;if(n.type==="LBRACKET")e.push(this.getVector(n)),n=null;else if(n.type==="LSQUIRLY"){let s=this.parseCellArray();if(n=null,s===null)return e;e.push(s)}else if(this.isTokenValidBasicDataType(n))this.getNextToken();else return this.errors.push({message:`Expected valid argument. Got ${this.stringifyTokenContent(n)}`,range:this.getCurrentPosition(),code:8}),e}n!==null&&e.push(n);let i=this.skipNL();if(i.type!=="COMMA"&&i.type!=="RPARENT")return this.errors.push({message:`Expected ',' or ')'. Got '${i.type}'`,range:this.getCurrentPosition(),code:re.EXPECTED_COMMA_PAREN}),e}while(this.getCurrentToken().type!=="RPARENT"&&this.getCurrentToken().type!=="EOF");return this.getCurrentToken().type==="EOF"&&this.errors.push({message:"Expected closing parenthesis ')' for function call",range:this.getCurrentPosition(),code:re.MISSING_PAREN}),e}stringifyTokenContent(e){return e===void 0&&(e=this.getCurrentToken()),Array.isArray(e.content)?`[${e.content.map(n=>n.content).join(", ")}]`:e.content}skipNL(e=!1){let n=0,r=this.getCurrentToken();for(e&&(r=this.getNextToken());this.getCurrentToken().type==="NL"&&n<=Fe;)r=this.getNextToken(),n++;return this.logErrorMaxCallsReached(n,"Found too many new lines",re.TOO_MANY_NL),r===void 0?this.getPrevToken():r}isBinaryOperator(e){return e==="SUBTRACTION"||e==="DIVISION"||e==="ADDITION"||e==="MULTIPLICATION"}isEOF(e){return e!=null?e.type==="EOF":this.getCurrentToken().type==="EOF"}isEndFunctionToken(e){return e!=null?e.type==="KEYWORD"&&(e.content==="end"||e.content==="endfunction"):this.getCurrentToken().type==="KEYWORD"&&(this.getCurrentToken().content==="end"||this.getCurrentToken().content==="endfunction")}isTokenDataType(e){return e!=null?e.type==="IDENTIFIER"||e.type==="VECTOR"||e.type==="STRING"||e.type==="NUMBER"||e.type==="IDENTIFIER_REFERENCE"||e.type==="CELL_ARRAY"||e.type==="STRUCT_ACCESS"||e.type==="STRUCT":this.getCurrentToken().type==="IDENTIFIER"||this.getCurrentToken().type==="VECTOR"||this.getCurrentToken().type==="STRING"||this.getCurrentToken().type==="CELL_ARRAY"||this.getCurrentToken().type==="STRUCT_ACCESS"||this.getCurrentToken().type==="STRUCT"||this.getCurrentToken().type==="NUMBER"}logErrorMaxCallsReached(e,n,r,i){return e>=Fe?(this.errors.push({message:n,range:this.getCurrentPosition(i),code:r}),!0):!1}getStatements(){return this.statements}makeAST(){if(this.tokens.length<4)return{type:"Program",body:this.statements};let e=0;do{let n=this.parseStatement();n!==null&&this.statements.push(n),e++}while(this.getCurrentToken().type!=="EOF"&&e<Fe);return e>=Fe&&this.errors.push({message:"Maximum amount of statements reached.",range:this.getCurrentPosition(),code:re.AST_MAX_STMNT_REACHED}),{type:"Program",body:this.statements}}getCurrentPosition(e){return e===void 0&&this.getCurrentToken()!==void 0?this.getCurrentToken().position:e===void 0&&this.getCurrentToken()===void 0?ie:e?.position!==null&&e?.position!==void 0?e.position:ie}getErrors(){return this.errors.forEach(e=>{if(e?.range===void 0)throw new Error("Unexpected undefined Range. "+JSON.stringify(e))}),this.errors}getWarnings(){return this.warnings}};var Oi=1e4,Ai=class{text;currPos=0;nextPos=0;currChar;nextChar;tokens=[];keywords=Cd();nativeFunctions=Si();errors=[];constructor(e=""){this.text=e,this.readChar()}setInitialConditions(){this.currPos=0,this.nextPos=0,this.currChar="",this.nextChar="",this.tokens.length=0}postTokenizationHook(){this.makeStructAccess(),this.makeCellArrayAccess(),this.makeIdentifierReferences()}makeCellArrayAccess(){let e=[],n=0,r=0;for(;r<this.tokens.length&&n<Oi;)if(this.isCellArrayAccessAt(r)){if(this.tokens[r+2].type!=="IDENTIFIER"&&this.tokens[r+2].type!=="CELL_ARRAY_ACCESS"&&this.tokens[r+2].type!=="STRUCT_ACCESS"&&this.tokens[r+2].type!=="NUMBER"&&this.tokens[r+2].type!=="STRING"&&this.tokens[r+2].type!=="COLON")throw e.push(this.tokens[r]),r++,this.errors.push(`Argument of cell array it's not valid. ${this.tokens[r+2].type}`),new Error(`Argument of cell array it's not valid. ${this.tokens[r+2].type}`);let i={type:"CELL_ARRAY_ACCESS",content:[this.tokens[r],this.tokens[r+2]],position:{start:this.tokens[r].position?.start??ie.start,end:this.tokens[r+3].position?.start??ie.start}};e.push(i),r=r+4;continue}else{e.push(this.tokens[r]),r++;continue}if(n>=Oi)throw this.errors.push("Max calls reached while processing cell array acess."),new Error("Max calls reached while processing cell array acess.");this.tokens.length=0,this.tokens.push(...e)}isCellArrayAccessAt(e){return e<this.tokens.length-2&&(this.tokens[e].type==="IDENTIFIER"||this.tokens[e].type==="STRUCT_ACCESS"||this.tokens[e].type==="CELL_ARRAY_ACCESS")&&this.tokens[e+1].type==="LSQUIRLY"}isBasicTokenData(e){return e.type==="NUMBER"||e.type==="STRING"||e.type==="IDENTIFIER"||e.type==="STRUCT_ACCESS"||e.type==="CELL_ARRAY_ACCESS"}makeIdentifierReferences(){let e=[],n=0;for(;n<this.tokens.length;)n<this.tokens.length-1&&this.tokens[n].type==="AT"&&this.tokens[n+1].type==="IDENTIFIER"?(e.push({type:"IDENTIFIER_REFERENCE",position:{start:this.tokens[n].position?.start??ie.start,end:this.tokens[n+1].position?.end??ie.end},content:[this.tokens[n],this.tokens[n+1]]}),n=n+2):(e.push(this.tokens[n]),n++);this.tokens.length=0,this.tokens.push(...e)}makeStructAccess(){let e=[],n=0;for(;n<this.tokens.length;)if(n<this.tokens.length-3&&this.tokens[n].type==="IDENTIFIER"&&this.tokens[n+1].type==="PERIOD"&&this.tokens[n+2].type==="IDENTIFIER"){let r=n+2,i=[this.tokens[n],this.tokens[n+1],this.tokens[n+2]];for(;r<this.tokens.length-3&&this.tokens[r+1].type==="PERIOD"&&this.tokens[r+2].type==="IDENTIFIER";)r=r+2;let s={type:"STRUCT_ACCESS",content:i,position:{start:this.tokens[n].position?.start??ie.start,end:i[i.length-1].position?.end??ie.end}};e.push(s),n=r+1}else e.push(this.tokens[n]),n++;this.tokens.length=0,this.tokens.push(...e)}updateText(e){this.text=e,this.setInitialConditions(),this.readChar()}getAllTokens(){let e=0,n=this.getNextToken();for(;n.type!=="EOF"&&e<=Oi;)n=this.getNextToken(),e++;if(e>=Oi)throw this.errors.push("Tokens calls exeeded."),new Error("Tokens calls exeeded. "+JSON.stringify(this.text)+" -> "+JSON.stringify(this.tokens.map(r=>r.type)));return this.postTokenizationHook(),this.tokens}getNextToken(){for(;this.currChar===" "||this.currChar==="\r";)this.readChar();let e=Ud(this.currChar);if(e!==void 0&&this.isValidStartingToken(e))return this.readChar(),this.addToken({...e,position:this.getPositionAfterCursor(e.type!=="EOF"?e.content:"")});if(this.currChar==="#"||this.currChar==="%"){let n=this.isCodeBreak();if(n!==void 0)return this.addToken(n);let r=this.readComment();return this.addToken({type:"COMMENT",content:r,position:this.getPositionAfterCursor(r)})}else if(bd(this.currChar)){let n=this.readLiteral();return this.addToken({...this.tokenFromLiteral(n),position:this.getPositionAfterCursor(n)})}else if(Rd(this.currChar)){let n=this.readNumber();return this.addToken({type:"NUMBER",content:n,position:this.getPositionAfterCursor(n)})}else if(this.currChar==='"'||this.currChar==="'"){let n=this.readLiteralString();return this.addToken({type:"STRING",content:n,position:this.getPositionAfterCursor(n)})}else return this.readChar(),this.addToken({type:"ILLEGAL",content:"illegal",position:this.getPositionAfterCursor(this.currChar)})}isCodeBreak(){let e=`${this.currChar}${this.nextChar}`;if(e==="##"||e==="%%"){let n=this.readComment();return{type:"CODE_BREAK",content:n,position:this.getPositionAfterCursor(n)}}}getPositionAfterCursor(e){let n=this.currPos-e.length,r=this.currPos;this.currPos=n;let[i,s]=this.getRowsColsCursor(),[l,p]=this.getRowsColsCursor(e),E={start:{line:i,character:s},end:{line:l,character:p}};return this.currPos=r,E}isValidStartingToken(e){if(e.type!=="MODULUS")return!0;let n=this.tokens[this.tokens.length-1];return n!==void 0&&(n.type==="IDENTIFIER"||n.type==="NUMBER")}readComment(){let e="";do e+=this.currChar,this.readChar();while(this.currChar!==`
`&&this.currChar!=="\r"&&this.currPos<this.text.length);return e}addToken(e){return this.tokens.push(e),e}tokenFromLiteral(e){return this.keywords.includes(e)?{type:"KEYWORD",content:e,position:this.getPosition(e)}:this.nativeFunctions.includes(e)?{type:"NATIVE_FUNCTION",content:e,position:this.getPosition(e)}:{type:"IDENTIFIER",content:e,position:this.getPosition(e)}}getPosition(e){let[n,r]=this.getRowsColsCursor(),[i,s]=this.getRowsColsCursor(e);return{start:{line:n,character:r},end:{line:i,character:s}}}getRowsColsCursor(e=null){let n=e!==null?this.currPos+e.length+1:this.currPos;return Sd({text:this.text,characterPosition:n})}readChar(){if(this.currPos>=this.text.length||this.text.length<=3){this.currChar="\0",this.nextChar="\0";return}this.nextPos===0?(this.currChar=this.text[0],this.nextChar=this.text[1],this.currPos=1,this.nextPos=2):this.nextPos>=this.text.length?(this.currChar=this.nextChar,this.nextChar="\0",this.currPos=this.nextPos):(this.currChar=this.nextChar,this.nextChar=this.text[this.nextPos],this.currPos=this.nextPos,this.nextPos++)}readLiteral(){let e="";for(;/[a-zA-Z0-9_]/.test(this.currChar)&&this.currPos<=this.text.length;)e+=this.currChar,this.readChar();return e}readNumber(){let e="";for(;/\d/.test(this.currChar)||/\.\d/.test(this.currChar+this.nextChar)||/e\d/.test(this.currChar+this.nextChar)||/e[++-]/.test(this.currChar+this.nextChar)||/-\d/.test(this.currChar+this.nextChar);)e+=this.currChar,this.readChar();return e}getErrors(){return this.errors}readLiteralString(){let e=this.currChar;do this.readChar(),e+=this.currChar;while(this.currChar!=='"'&&this.currChar!=="'"&&this.currChar!=="\r"&&this.currChar!==`
`&&this.currPos<this.text.length);return this.readChar(),e}};var Mi=class{references=[];definitions=[];errors=[];warnings=[];visitProgram(e){for(let n of e.body)this.visitStatement(n);this.finishHook()}getErrors(){return this.errors}visitStatement(e){if(e!=null)switch(e.type){case"ASSIGNMENT":if(e.LHE===void 0)return;e.LHE.type==="FUNCTION_DEFINITION"?this.visitExpression(e.LHE,"ASSIGNMENT",e.context):(this.visitExpression(e.LHE,"ASSIGNMENT",e.context),this.visitExpression(e.RHE,"ASSIGNMENT",e.context,!1));break;case"FUNCTION_DEFINITION":if(e.LHE===void 0)return;this.visitExpression(e.LHE,"FUNCTION_DEFINITION",e.context),(e?.RHE).forEach(n=>{this.visitStatement(n)});break;case"MO_ASSIGNMENT":if(e.LHE===void 0)return;this.visitExpression(e.LHE,"MO_ASSIGNMENT",e.context),this.visitExpression(e.RHE,"MO_ASSIGNMENT",e.context,!1);break;case"FUNCTION_CALL":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"FUNCTION_CALL",e.context);break;case"REFERENCE_CALL_VAR_FUNC":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"REFERENCE_CALL_VAR_FUNC",e.context);break;case"FOR_STMNT":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"FOR_STMNT",e.context);case"IF_STMNT":case"DO_STMNT":case"SWITCH_STMNT":case"WHILE_STMNT":(e?.RHE).forEach(n=>{this.visitStatement(n)});break}}visitExpression(e,n,r,i=!0){if(e!=null)switch(e.type){case"IDENTIFIER":if((n==="ASSIGNMENT"||n==="FUNCTION_DEFINITION")&&i){let s=n==="FUNCTION_DEFINITION"?this.getNodeFunctionArgs(e).map(l=>{if(l.type!=="IDENTIFIER"&&l.type!=="DEFAULT_VALUE_ARGUMENT")return null;let p=l.type==="DEFAULT_VALUE_ARGUMENT"?"DEFAULT_ARGUMENT":"ARGUMENT",E=l.type==="DEFAULT_VALUE_ARGUMENT"?this.getDefaultValueContent(l):"",b=this.getTokenPosition(l),x={name:l.content,type:p,content:E,position:b,documentation:"",context:r};return this.definitions.push(x),x}).filter(l=>l!==null):[];this.definitions.push({name:e.value,position:e.position??ie,type:n==="ASSIGNMENT"?"VARIABLE":"FUNCTION",documentation:this.getDocumentationOrLineDefinition(e),arguments:s,context:r}),this.references.push({name:e.value,position:this.getExpressionPosition(e),type:n==="ASSIGNMENT"?"VARIABLE":"FUNCTION",documentation:e?.functionData?.description??""})}else n==="FUNCTION_CALL"?this.references.push({name:e.value,position:this.getExpressionPosition(e),type:"FUNCTION",documentation:e?.functionData?.description??"",args:this.getFunctionArgsAsStrings(e?.functionData?.args)}):n==="FOR_STMNT"?this.definitions.push({name:e.value,type:"VARIABLE",position:e.position??ie,documentation:e.lineContent??"",context:r}):this.references.push({name:e.value,position:this.getExpressionPosition(e),type:"VARIABLE",documentation:e?.functionData?.description??""});if(e?.functionData?.args!==void 0){let l=this.getArgumentIdentifiersList(e).map(p=>({name:p.content,position:this.getTokenPosition(p),type:"VARIABLE",documentation:this.getDocumentationOrLineDefinition(e)}));this.references.push(...l)}e?.RHO!==null&&Array.isArray(e.RHO)&&e.RHO.forEach(s=>{this.visitStatement(s)});break;case"BINARY_OPERATION":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,null,r),this.visitExpression(e.RHO,null,r,!1);break;case"FUNCTION_DEFINITION":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,"FUNCTION_DEFINITION",e.LHO.functionData?.contextCreated??""),Array.isArray(e.RHO)&&e.RHO.forEach(s=>{this.visitStatement(s)});break;case"KEYWORD":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,null,r),this.visitExpression(e.RHO,null,r,!1);break;case"ANONYMOUS_FUNCTION_DEFINITION":e?.LHO?.value!==void 0&&e?.LHO?.position!==void 0&&this.definitions.push({name:e.LHO.value,position:e.LHO.position,type:"ANONYMOUS_FUNCTION",documentation:this.getDocumentationOrLineDefinition(e),context:r,arguments:e?.functionData?.args?.map(s=>({context:e?.functionData?.contextCreated??"",name:s.content,type:"ARGUMENT",position:this.getTokenPosition(s),documentation:""}))??[]}),this.references.push(...e?.functionData?.args?.map(s=>({name:s.content,position:this.getExpressionPosition(e),type:this.getReferenceTypeFromNode(e),documentation:e?.functionData?.description??""}))??[]),this.visitExpression(e.RHO,null,r,!1);break;case"VARIABLE_VECTOR":if(!Array.isArray(e.value)||!(e?.value?.length>1))return;e?.value!==void 0&&Array.isArray(e.value)&&e.value.forEach(s=>{if(s.type==="VECTOR"){this.getTokenIdentifiers(s).forEach(l=>{this.references.push({name:l.content,type:"VARIABLE",position:this.getTokenPosition(l),documentation:""})});return}s.type==="IDENTIFIER"&&this.definitions.push({name:s.content,type:"VARIABLE",position:this.getTokenPosition(s),documentation:this.getDocumentationOrLineDefinition(e),context:r})}),e.value.forEach(s=>{s.type==="IDENTIFIER"&&this.references.push({name:s.content,position:this.getTokenPosition(s),type:"VARIABLE",documentation:e?.functionData?.description??""})});break;case"FUNCTION_CALL":if(this.references.push({name:e.value,position:this.getExpressionPosition(e),documentation:this.getDocumentationOrLineDefinition(e),type:"FUNCTION"}),e?.functionData?.args===void 0)break;this.references.push(...this.getArgumentIdentifiersList(e).map(s=>({name:s.content,position:this.getTokenPosition(s),type:"VARIABLE",documentation:this.getDocumentationOrLineDefinition(e)})));break;case"REFERENCE_CALL_VAR_FUNC":this.references.push({name:e.value,position:this.getExpressionPosition(e),documentation:this.getDocumentationOrLineDefinition(e),type:"VARIABLE"});break}}getFunctionArgsAsStrings(e,n=0){if(n>300)throw new Error("Max calls exceeded in getFunctionArgsAsStrings. Tell a dev");return e===void 0?[]:typeof e=="string"?[e]:e.flatMap(r=>typeof r.content=="string"?[r.content]:Array.isArray(r.content)?this.getFunctionArgsAsStrings(r.content):[])}getArgumentIdentifiersList(e){return e?.functionData?.args===void 0?[]:e.functionData.args.flatMap(n=>this.getTokenIdentifiers(n))}getTokenIdentifiers(e){return e.type==="VECTOR"?e.content.flatMap(n=>this.getTokenIdentifiers(n)):e.type==="IDENTIFIER"||e.type==="DEFAULT_VALUE_ARGUMENT"?[e]:[]}getExpressionPosition(e){return e.position===void 0?ie:e.position}getTokenPosition(e){return e.position===null?ie:e.position}getDefaultValueContent(e){return e?.defaultValue?.content===void 0||Array.isArray(e?.defaultValue?.content)?"":e.defaultValue.content}getNodeFunctionArgs(e){return e?.functionData?.args===void 0?[]:e.functionData.args}getDocumentationOrLineDefinition(e){return e?.functionData?.description!==void 0?e?.functionData?.description:e?.lineContent?e.lineContent:(e?.RHO===void 0||Array.isArray(e.RHO),"")}getReferenceTypeFromNode(e){return e.type==="FUNCTION_CALL"||e.type==="FUNCTION_DEFINITION"||e.type==="ANONYMOUS_FUNCTION_DEFINITION"?"FUNCTION":"VARIABLE"}finishHook(){let e=this.definitions.map(i=>i.name),n=Si(),r=this.references.map(i=>i.name);this.references.forEach(i=>{if(i.name==="addpath"){let s=i?.args?i.args:[];s.length===0?this.errors.push({message:"Missing path argument",code:re.MISSING_PATH,range:i.position}):s.length>1&&this.errors.push({message:"Too many arguments",code:re.TOO_MANY_ARGS,range:i.position});let l=s[0].split(":");l.length>1&&this.warnings.push({message:"Not recommended to use multiple paths separated with ':'. May not work properly in all systems (personal advice and experienced, not said octave.",code:0,range:i.position}),l.forEach(p=>{wi(xd(p)).forEach(b=>{this.warnings.push({message:`Could not load '${b}'`,code:0,range:i.position})})})}}),r.forEach((i,s)=>{n.includes(i)||e.includes(i)||this.errors.push({message:`Could not find reference '${i}'`,code:re.VISITOR_COULDNT_FIND_REF,range:this.references[s].position})})}};var Wd=require("fs");var Ae=process.env.NODE_ENV==="dev"?null:(0,Ut.createConnection)(Ut.ProposedFeatures.all),Jt=new Ut.TextDocuments(jt),vt=new Map,Gn=new Map;Jt.onDidChangeContent(t=>{Ni(t.document.uri,t.document.getText())});Jt.onDidOpen(t=>{let e=t.document.getText(),n=t.document.uri;Ye.set(n,e)});Ae?.onInitialize(t=>Od({params:t,connection:Ae}));Ae?.onInitialized(async t=>{await Ad({params:t,connection:Ae})});Ae?.onDefinition(async t=>await Fd({params:t,documents:Jt}));Ae?.onReferences(t=>{let e=t.textDocument.uri,n=Jt.get(e);return n===void 0?[]:Md(n,t.position)});Ae?.onDidChangeConfiguration(t=>{if(xi?qs(t.settings.settings):qs(Fs),kt.enableInitFile){let e=(0,Wd.readFileSync)(kt.defaultInitFile).toString(),n=En.file(kt.defaultInitFile).toString();Ye.set(n,e)}});Jt.onDidClose(t=>{let e=t.document.uri;Ye.delete(e)});Ae?.onCompletion(t=>Ld({params:t}));Ae?.onCompletionResolve(t=>t);Ae&&Jt.listen(Ae);Ae?.listen();Ae?.onExit(()=>{Gn.forEach(t=>{clearTimeout(t)}),Gn.clear()});function Ni(t,e){Ae?.console.log("Updating file!"),Gn.has(t)&&clearTimeout(Gn.get(t)),Ae?.console.log("Setting timeout"),Gn.set(t,setTimeout(()=>{let n=Ye.get(t),r=e??n?.getText();if(n==null)return;let s=new Ai(r).getAllTokens(),l=new Ii(s),p=l.makeAST(),E=new Mi,b=E.getErrors();E.visitProgram(p),vt.set(t,E);let x=l.getErrors().map(ee=>Us(ee,"error")),j=l.getWarnings().map(ee=>Us(ee,"warn")),U=[...x,...j,...b];if(U.length>kt.maxNumberOfProblems){let ee={range:{start:{line:0,character:0},end:{line:0,character:1}},message:"Maximum number of problems reached",severity:Ut.DiagnosticSeverity.Error,source:"mlang"};Ae?.sendDiagnostics({uri:t,diagnostics:[ee]}).catch(Te=>{throw new Error(Te)})}else Ae?.sendDiagnostics({uri:t,diagnostics:U}).catch(ee=>{throw new Error(ee)})},kt.defaultDebounceTimeMS))}0&&(module.exports={connection,documents,updateDocumentData,visitors});
