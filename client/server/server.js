var Hc=Object.create;var Xn=Object.defineProperty;var Uc=Object.getOwnPropertyDescriptor;var Vc=Object.getOwnPropertyNames;var Bc=Object.getPrototypeOf,$c=Object.prototype.hasOwnProperty;var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zc=(t,e)=>{for(var n in e)Xn(t,n,{get:e[n],enumerable:!0})},ps=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Vc(e))!$c.call(t,i)&&i!==n&&Xn(t,i,{get:()=>e[i],enumerable:!(r=Uc(e,i))||r.enumerable});return t};var et=(t,e,n)=>(n=t!=null?Hc(Bc(t)):{},ps(e||!t||!t.__esModule?Xn(n,"default",{value:t,enumerable:!0}):n,t)),Gc=t=>ps(Xn({},"__esModule",{value:!0}),t);var Yn=O(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.thenable=me.typedArray=me.stringArray=me.array=me.func=me.error=me.number=me.string=me.boolean=void 0;function Kc(t){return t===!0||t===!1}me.boolean=Kc;function ms(t){return typeof t=="string"||t instanceof String}me.string=ms;function Xc(t){return typeof t=="number"||t instanceof Number}me.number=Xc;function Yc(t){return t instanceof Error}me.error=Yc;function ys(t){return typeof t=="function"}me.func=ys;function vs(t){return Array.isArray(t)}me.array=vs;function Jc(t){return vs(t)&&t.every(e=>ms(e))}me.stringArray=Jc;function Qc(t,e){return Array.isArray(t)&&t.every(e)}me.typedArray=Qc;function Zc(t){return t&&ys(t.then)}me.thenable=Zc});var Gt=O(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.stringArray=Ne.array=Ne.func=Ne.error=Ne.number=Ne.string=Ne.boolean=void 0;function eu(t){return t===!0||t===!1}Ne.boolean=eu;function Ts(t){return typeof t=="string"||t instanceof String}Ne.string=Ts;function tu(t){return typeof t=="number"||t instanceof Number}Ne.number=tu;function nu(t){return t instanceof Error}Ne.error=nu;function ru(t){return typeof t=="function"}Ne.func=ru;function bs(t){return Array.isArray(t)}Ne.array=bs;function iu(t){return bs(t)&&t.every(e=>Ts(e))}Ne.stringArray=iu});var Ai=O(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Message=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var Pt=Gt(),_s;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(_s=M.ErrorCodes||(M.ErrorCodes={}));var mn=class extends Error{constructor(e,n,r){super(n),this.code=Pt.number(e)?e:_s.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,mn.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};M.ResponseError=mn;var be=class{constructor(e){this.kind=e}static is(e){return e===be.auto||e===be.byName||e===be.byPosition}toString(){return this.kind}};M.ParameterStructures=be;be.auto=new be("auto");be.byPosition=new be("byPosition");be.byName=new be("byName");var ce=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return be.auto}};M.AbstractMessageSignature=ce;var pi=class extends ce{constructor(e){super(e,0)}};M.RequestType0=pi;var mi=class extends ce{constructor(e,n=be.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType=mi;var yi=class extends ce{constructor(e,n=be.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType1=yi;var vi=class extends ce{constructor(e){super(e,2)}};M.RequestType2=vi;var Ti=class extends ce{constructor(e){super(e,3)}};M.RequestType3=Ti;var bi=class extends ce{constructor(e){super(e,4)}};M.RequestType4=bi;var _i=class extends ce{constructor(e){super(e,5)}};M.RequestType5=_i;var Ri=class extends ce{constructor(e){super(e,6)}};M.RequestType6=Ri;var Ci=class extends ce{constructor(e){super(e,7)}};M.RequestType7=Ci;var Di=class extends ce{constructor(e){super(e,8)}};M.RequestType8=Di;var ki=class extends ce{constructor(e){super(e,9)}};M.RequestType9=ki;var Ei=class extends ce{constructor(e,n=be.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType=Ei;var Ni=class extends ce{constructor(e){super(e,0)}};M.NotificationType0=Ni;var Si=class extends ce{constructor(e,n=be.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=Si;var Pi=class extends ce{constructor(e){super(e,2)}};M.NotificationType2=Pi;var wi=class extends ce{constructor(e){super(e,3)}};M.NotificationType3=wi;var Oi=class extends ce{constructor(e){super(e,4)}};M.NotificationType4=Oi;var xi=class extends ce{constructor(e){super(e,5)}};M.NotificationType5=xi;var Ii=class extends ce{constructor(e){super(e,6)}};M.NotificationType6=Ii;var qi=class extends ce{constructor(e){super(e,7)}};M.NotificationType7=qi;var Mi=class extends ce{constructor(e){super(e,8)}};M.NotificationType8=Mi;var Fi=class extends ce{constructor(e){super(e,9)}};M.NotificationType9=Fi;var ou;(function(t){function e(i){let c=i;return c&&Pt.string(c.method)&&(Pt.string(c.id)||Pt.number(c.id))}t.isRequest=e;function n(i){let c=i;return c&&Pt.string(c.method)&&i.id===void 0}t.isNotification=n;function r(i){let c=i;return c&&(c.result!==void 0||!!c.error)&&(Pt.string(c.id)||Pt.number(c.id)||c.id===null)}t.isResponse=r})(ou=M.Message||(M.Message={}))});var ji=O(ct=>{"use strict";var Rs;Object.defineProperty(ct,"__esModule",{value:!0});ct.LRUCache=ct.LinkedMap=ct.Touch=void 0;var Se;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Se=ct.Touch||(ct.Touch={}));var Jn=class{constructor(){this[Rs]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Se.None){let r=this._map.get(e);if(r)return n!==Se.None&&this.touch(r,n),r.value}set(e,n,r=Se.None){let i=this._map.get(e);if(i)i.value=n,r!==Se.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Se.None:this.addItemLast(i);break;case Se.First:this.addItemFirst(i);break;case Se.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Rs=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Se.First&&n!==Se.Last)){if(n===Se.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Se.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};ct.LinkedMap=Jn;var Li=class extends Jn{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Se.AsNew){return super.get(e,n)}peek(e){return super.get(e,Se.None)}set(e,n){return super.set(e,n,Se.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};ct.LRUCache=Li});var Cs=O(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.Disposable=void 0;var su;(function(t){function e(n){return{dispose:n}}t.create=e})(su=yn.Disposable||(yn.Disposable={}))});var mt=O(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var Wi;function Hi(){if(Wi===void 0)throw new Error("No runtime abstraction layer installed");return Wi}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Wi=n}t.install=e})(Hi||(Hi={}));Ui.default=Hi});var Xt=O(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.Emitter=wt.Event=void 0;var au=mt(),cu;(function(t){let e={dispose(){}};t.None=function(){return e}})(cu=wt.Event||(wt.Event={}));var Vi=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,c=this._callbacks.length;i<c;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let c=0,h=r.length;c<h;c++)try{n.push(r[c].apply(i[c],e))}catch(v){(0,au.default)().console.error(v)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Kt=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Vi),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=Kt._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};wt.Emitter=Kt;Kt._noop=function(){}});var Zn=O(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.CancellationTokenSource=Ot.CancellationToken=void 0;var uu=mt(),lu=Gt(),Bi=Xt(),$i;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Bi.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Bi.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||lu.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})($i=Ot.CancellationToken||(Ot.CancellationToken={}));var du=Object.freeze(function(t,e){let n=(0,uu.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Qn=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?du:(this._emitter||(this._emitter=new Bi.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},zi=class{get token(){return this._token||(this._token=new Qn),this._token}cancel(){this._token?this._token.cancel():this._token=$i.Cancelled}dispose(){this._token?this._token instanceof Qn&&this._token.dispose():this._token=$i.None}};Ot.CancellationTokenSource=zi});var Ds=O(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.SharedArrayReceiverStrategy=Yt.SharedArraySenderStrategy=void 0;var fu=Zn(),vn;(function(t){t.Continue=0,t.Cancelled=1})(vn||(vn={}));var Gi=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=vn.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,vn.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Yt.SharedArraySenderStrategy=Gi;var Ki=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===vn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Xi=class{constructor(e){this.token=new Ki(e)}cancel(){}dispose(){}},Yi=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new fu.CancellationTokenSource:new Xi(n)}};Yt.SharedArrayReceiverStrategy=Yi});var Qi=O(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.Semaphore=void 0;var hu=mt(),Ji=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,hu.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};er.Semaphore=Ji});var ks=O(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ReadableStreamMessageReader=ut.AbstractMessageReader=ut.MessageReader=void 0;var eo=mt(),Jt=Gt(),Zi=Xt(),gu=Qi(),pu;(function(t){function e(n){let r=n;return r&&Jt.func(r.listen)&&Jt.func(r.dispose)&&Jt.func(r.onError)&&Jt.func(r.onClose)&&Jt.func(r.onPartialMessage)}t.is=e})(pu=ut.MessageReader||(ut.MessageReader={}));var tr=class{constructor(){this.errorEmitter=new Zi.Emitter,this.closeEmitter=new Zi.Emitter,this.partialMessageEmitter=new Zi.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Jt.string(e.message)?e.message:"unknown"}`)}};ut.AbstractMessageReader=tr;var to;(function(t){function e(n){let r,i,c,h=new Map,v,C=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(c=n.contentDecoder,h.set(c.name,c)),n.contentDecoders!==void 0)for(let b of n.contentDecoders)h.set(b.name,b);if(n.contentTypeDecoder!==void 0&&(v=n.contentTypeDecoder,C.set(v.name,v)),n.contentTypeDecoders!==void 0)for(let b of n.contentTypeDecoders)C.set(b.name,b)}return v===void 0&&(v=(0,eo.default)().applicationJson.decoder,C.set(v.name,v)),{charset:r,contentDecoder:c,contentDecoders:h,contentTypeDecoder:v,contentTypeDecoders:C}}t.fromOptions=e})(to||(to={}));var no=class extends tr{constructor(e,n){super(),this.readable=e,this.options=to.fromOptions(n),this.buffer=(0,eo.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new gu.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let c=parseInt(i);if(isNaN(c)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=c}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,eo.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ut.ReadableStreamMessageReader=no});var Ps=O(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.WriteableStreamMessageWriter=lt.AbstractMessageWriter=lt.MessageWriter=void 0;var Es=mt(),Tn=Gt(),mu=Qi(),Ns=Xt(),yu="Content-Length: ",Ss=`\r
`,vu;(function(t){function e(n){let r=n;return r&&Tn.func(r.dispose)&&Tn.func(r.onClose)&&Tn.func(r.onError)&&Tn.func(r.write)}t.is=e})(vu=lt.MessageWriter||(lt.MessageWriter={}));var nr=class{constructor(){this.errorEmitter=new Ns.Emitter,this.closeEmitter=new Ns.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Tn.string(e.message)?e.message:"unknown"}`)}};lt.AbstractMessageWriter=nr;var ro;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Es.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Es.default)().applicationJson.encoder}}t.fromOptions=e})(ro||(ro={}));var io=class extends nr{constructor(e,n){super(),this.writable=e,this.options=ro.fromOptions(n),this.errorCount=0,this.writeSemaphore=new mu.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(yu,r.byteLength.toString(),Ss),i.push(Ss),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};lt.WriteableStreamMessageWriter=io});var ws=O(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.AbstractMessageBuffer=void 0;var Tu=13,bu=10,_u=`\r
`,oo=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,c=0;e:for(;r<this._chunks.length;){let b=this._chunks[r];i=0;t:for(;i<b.length;){switch(b[i]){case Tu:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case bu:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}c+=b.byteLength,r++}if(n!==4)return;let h=this._read(c+i),v=new Map,C=this.toString(h,"ascii").split(_u);if(C.length<2)return v;for(let b=0;b<C.length-2;b++){let D=C[b],w=D.indexOf(":");if(w===-1)throw new Error("Message header must separate key and value using :");let N=D.substr(0,w),L=D.substr(w+1).trim();v.set(e?N.toLowerCase():N,L)}return v}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let c=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(c)}if(this._chunks[0].byteLength>e){let c=this._chunks[0],h=this.asNative(c,e);return this._chunks[0]=c.slice(e),this._totalLength-=e,h}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let c=this._chunks[i];if(c.byteLength>e){let h=c.slice(0,e);n.set(h,r),r+=e,this._chunks[i]=c.slice(e),this._totalLength-=e,e-=e}else n.set(c,r),r+=c.byteLength,this._chunks.shift(),this._totalLength-=c.byteLength,e-=c.byteLength}return n}};rr.AbstractMessageBuffer=oo});var As=O(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.createMessageConnection=q.ConnectionOptions=q.MessageStrategy=q.CancellationStrategy=q.CancellationSenderStrategy=q.CancellationReceiverStrategy=q.RequestCancellationReceiverStrategy=q.IdCancellationReceiverStrategy=q.ConnectionStrategy=q.ConnectionError=q.ConnectionErrors=q.LogTraceNotification=q.SetTraceNotification=q.TraceFormat=q.TraceValues=q.Trace=q.NullLogger=q.ProgressType=q.ProgressToken=void 0;var Os=mt(),de=Gt(),A=Ai(),xs=ji(),bn=Xt(),so=Zn(),Rn;(function(t){t.type=new A.NotificationType("$/cancelRequest")})(Rn||(Rn={}));var Is;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(Is=q.ProgressToken||(q.ProgressToken={}));var _n;(function(t){t.type=new A.NotificationType("$/progress")})(_n||(_n={}));var ao=class{constructor(){}};q.ProgressType=ao;var co;(function(t){function e(n){return de.func(n)}t.is=e})(co||(co={}));q.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var te;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(te=q.Trace||(q.Trace={}));var Ru;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Ru=q.TraceValues||(q.TraceValues={}));(function(t){function e(r){if(!de.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(te=q.Trace||(q.Trace={}));var Be;(function(t){t.Text="text",t.JSON="json"})(Be=q.TraceFormat||(q.TraceFormat={}));(function(t){function e(n){return de.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Be=q.TraceFormat||(q.TraceFormat={}));var qs;(function(t){t.type=new A.NotificationType("$/setTrace")})(qs=q.SetTraceNotification||(q.SetTraceNotification={}));var uo;(function(t){t.type=new A.NotificationType("$/logTrace")})(uo=q.LogTraceNotification||(q.LogTraceNotification={}));var ir;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(ir=q.ConnectionErrors||(q.ConnectionErrors={}));var yt=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,yt.prototype)}};q.ConnectionError=yt;var Ms;(function(t){function e(n){let r=n;return r&&de.func(r.cancelUndispatched)}t.is=e})(Ms=q.ConnectionStrategy||(q.ConnectionStrategy={}));var ho;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&de.func(r.createCancellationTokenSource)&&(r.dispose===void 0||de.func(r.dispose))}t.is=e})(ho=q.IdCancellationReceiverStrategy||(q.IdCancellationReceiverStrategy={}));var Fs;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&de.func(r.createCancellationTokenSource)&&(r.dispose===void 0||de.func(r.dispose))}t.is=e})(Fs=q.RequestCancellationReceiverStrategy||(q.RequestCancellationReceiverStrategy={}));var lo;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new so.CancellationTokenSource}});function e(n){return ho.is(n)||Fs.is(n)}t.is=e})(lo=q.CancellationReceiverStrategy||(q.CancellationReceiverStrategy={}));var fo;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Rn.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&de.func(r.sendCancellation)&&de.func(r.cleanup)}t.is=e})(fo=q.CancellationSenderStrategy||(q.CancellationSenderStrategy={}));var go;(function(t){t.Message=Object.freeze({receiver:lo.Message,sender:fo.Message});function e(n){let r=n;return r&&lo.is(r.receiver)&&fo.is(r.sender)}t.is=e})(go=q.CancellationStrategy||(q.CancellationStrategy={}));var po;(function(t){function e(n){let r=n;return r&&de.func(r.handleMessage)}t.is=e})(po=q.MessageStrategy||(q.MessageStrategy={}));var Cu;(function(t){function e(n){let r=n;return r&&(go.is(r.cancellationStrategy)||Ms.is(r.connectionStrategy)||po.is(r.messageStrategy))}t.is=e})(Cu=q.ConnectionOptions||(q.ConnectionOptions={}));var $e;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})($e||($e={}));function Du(t,e,n,r){let i=n!==void 0?n:q.NullLogger,c=0,h=0,v=0,C="2.0",b,D=new Map,w,N=new Map,L=new Map,$,X=new xs.LinkedMap,Z=new Map,H=new Set,y=new Map,g=te.Off,k=Be.Text,F,Y=$e.New,ne=new bn.Emitter,xe=new bn.Emitter,Ht=new bn.Emitter,Et=new bn.Emitter,Nt=new bn.Emitter,Ie=r&&r.cancellationStrategy?r.cancellationStrategy:go.Message;function dn(l){if(l===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+l.toString()}function Ut(l){return l===null?"res-unknown-"+(++v).toString():"res-"+l.toString()}function Hn(){return"not-"+(++h).toString()}function ti(l,_){A.Message.isRequest(_)?l.set(dn(_.id),_):A.Message.isResponse(_)?l.set(Ut(_.id),_):l.set(Hn(),_)}function ni(l){}function Un(){return Y===$e.Listening}function Vt(){return Y===$e.Closed}function ht(){return Y===$e.Disposed}function fn(){(Y===$e.New||Y===$e.Listening)&&(Y=$e.Closed,xe.fire(void 0))}function Bt(l){ne.fire([l,void 0,void 0])}function ri(l){ne.fire(l)}t.onClose(fn),t.onError(Bt),e.onClose(fn),e.onError(ri);function Vn(){$||X.size===0||($=(0,Os.default)().timer.setImmediate(()=>{$=void 0,ii()}))}function Bn(l){A.Message.isRequest(l)?si(l):A.Message.isNotification(l)?ci(l):A.Message.isResponse(l)?ai(l):hn(l)}function ii(){if(X.size===0)return;let l=X.shift();try{let _=r?.messageStrategy;po.is(_)?_.handleMessage(l,Bn):Bn(l)}finally{Vn()}}let oi=l=>{try{if(A.Message.isNotification(l)&&l.method===Rn.type.method){let _=l.params.id,S=dn(_),I=X.get(S);if(A.Message.isRequest(I)){let ee=r?.connectionStrategy,ue=ee&&ee.cancelUndispatched?ee.cancelUndispatched(I,ni):void 0;if(ue&&(ue.error!==void 0||ue.result!==void 0)){X.delete(S),y.delete(_),ue.id=I.id,$t(ue,l.method,Date.now()),e.write(ue).catch(()=>i.error("Sending response for canceled message failed."));return}}let re=y.get(_);if(re!==void 0){re.cancel(),gn(l);return}else H.add(_)}ti(X,l)}finally{Vn()}};function si(l){if(ht())return;function _(B,oe,Q){let pe={jsonrpc:C,id:l.id};B instanceof A.ResponseError?pe.error=B.toJson():pe.result=B===void 0?null:B,$t(pe,oe,Q),e.write(pe).catch(()=>i.error("Sending response failed."))}function S(B,oe,Q){let pe={jsonrpc:C,id:l.id,error:B.toJson()};$t(pe,oe,Q),e.write(pe).catch(()=>i.error("Sending response failed."))}function I(B,oe,Q){B===void 0&&(B=null);let pe={jsonrpc:C,id:l.id,result:B};$t(pe,oe,Q),e.write(pe).catch(()=>i.error("Sending response failed."))}di(l);let re=D.get(l.method),ee,ue;re&&(ee=re.type,ue=re.handler);let le=Date.now();if(ue||b){let B=l.id??String(Date.now()),oe=ho.is(Ie.receiver)?Ie.receiver.createCancellationTokenSource(B):Ie.receiver.createCancellationTokenSource(l);l.id!==null&&H.has(l.id)&&oe.cancel(),l.id!==null&&y.set(B,oe);try{let Q;if(ue)if(l.params===void 0){if(ee!==void 0&&ee.numberOfParams!==0){S(new A.ResponseError(A.ErrorCodes.InvalidParams,`Request ${l.method} defines ${ee.numberOfParams} params but received none.`),l.method,le);return}Q=ue(oe.token)}else if(Array.isArray(l.params)){if(ee!==void 0&&ee.parameterStructures===A.ParameterStructures.byName){S(new A.ResponseError(A.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by name but received parameters by position`),l.method,le);return}Q=ue(...l.params,oe.token)}else{if(ee!==void 0&&ee.parameterStructures===A.ParameterStructures.byPosition){S(new A.ResponseError(A.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by position but received parameters by name`),l.method,le);return}Q=ue(l.params,oe.token)}else b&&(Q=b(l.method,l.params,oe.token));let pe=Q;Q?pe.then?pe.then(_e=>{y.delete(B),_(_e,l.method,le)},_e=>{y.delete(B),_e instanceof A.ResponseError?S(_e,l.method,le):_e&&de.string(_e.message)?S(new A.ResponseError(A.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${_e.message}`),l.method,le):S(new A.ResponseError(A.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,le)}):(y.delete(B),_(Q,l.method,le)):(y.delete(B),I(Q,l.method,le))}catch(Q){y.delete(B),Q instanceof A.ResponseError?_(Q,l.method,le):Q&&de.string(Q.message)?S(new A.ResponseError(A.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${Q.message}`),l.method,le):S(new A.ResponseError(A.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,le)}}else S(new A.ResponseError(A.ErrorCodes.MethodNotFound,`Unhandled method ${l.method}`),l.method,le)}function ai(l){if(!ht())if(l.id===null)l.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(l.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let _=l.id,S=Z.get(_);if(fi(l,S),S!==void 0){Z.delete(_);try{if(l.error){let I=l.error;S.reject(new A.ResponseError(I.code,I.message,I.data))}else if(l.result!==void 0)S.resolve(l.result);else throw new Error("Should never happen.")}catch(I){I.message?i.error(`Response handler '${S.method}' failed with message: ${I.message}`):i.error(`Response handler '${S.method}' failed unexpectedly.`)}}}}function ci(l){if(ht())return;let _,S;if(l.method===Rn.type.method){let I=l.params.id;H.delete(I),gn(l);return}else{let I=N.get(l.method);I&&(S=I.handler,_=I.type)}if(S||w)try{if(gn(l),S)if(l.params===void 0)_!==void 0&&_.numberOfParams!==0&&_.parameterStructures!==A.ParameterStructures.byName&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received none.`),S();else if(Array.isArray(l.params)){let I=l.params;l.method===_n.type.method&&I.length===2&&Is.is(I[0])?S({token:I[0],value:I[1]}):(_!==void 0&&(_.parameterStructures===A.ParameterStructures.byName&&i.error(`Notification ${l.method} defines parameters by name but received parameters by position`),_.numberOfParams!==l.params.length&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received ${I.length} arguments`)),S(...I))}else _!==void 0&&_.parameterStructures===A.ParameterStructures.byPosition&&i.error(`Notification ${l.method} defines parameters by position but received parameters by name`),S(l.params);else w&&w(l.method,l.params)}catch(I){I.message?i.error(`Notification handler '${l.method}' failed with message: ${I.message}`):i.error(`Notification handler '${l.method}' failed unexpectedly.`)}else Ht.fire(l)}function hn(l){if(!l){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(l,null,4)}`);let _=l;if(de.string(_.id)||de.number(_.id)){let S=_.id,I=Z.get(S);I&&I.reject(new Error("The received response has neither a result nor an error property."))}}function Ze(l){if(l!=null)switch(g){case te.Verbose:return JSON.stringify(l,null,4);case te.Compact:return JSON.stringify(l);default:return}}function ui(l){if(!(g===te.Off||!F))if(k===Be.Text){let _;(g===te.Verbose||g===te.Compact)&&l.params&&(_=`Params: ${Ze(l.params)}

`),F.log(`Sending request '${l.method} - (${l.id})'.`,_)}else gt("send-request",l)}function li(l){if(!(g===te.Off||!F))if(k===Be.Text){let _;(g===te.Verbose||g===te.Compact)&&(l.params?_=`Params: ${Ze(l.params)}

`:_=`No parameters provided.

`),F.log(`Sending notification '${l.method}'.`,_)}else gt("send-notification",l)}function $t(l,_,S){if(!(g===te.Off||!F))if(k===Be.Text){let I;(g===te.Verbose||g===te.Compact)&&(l.error&&l.error.data?I=`Error data: ${Ze(l.error.data)}

`:l.result?I=`Result: ${Ze(l.result)}

`:l.error===void 0&&(I=`No result returned.

`)),F.log(`Sending response '${_} - (${l.id})'. Processing request took ${Date.now()-S}ms`,I)}else gt("send-response",l)}function di(l){if(!(g===te.Off||!F))if(k===Be.Text){let _;(g===te.Verbose||g===te.Compact)&&l.params&&(_=`Params: ${Ze(l.params)}

`),F.log(`Received request '${l.method} - (${l.id})'.`,_)}else gt("receive-request",l)}function gn(l){if(!(g===te.Off||!F||l.method===uo.type.method))if(k===Be.Text){let _;(g===te.Verbose||g===te.Compact)&&(l.params?_=`Params: ${Ze(l.params)}

`:_=`No parameters provided.

`),F.log(`Received notification '${l.method}'.`,_)}else gt("receive-notification",l)}function fi(l,_){if(!(g===te.Off||!F))if(k===Be.Text){let S;if((g===te.Verbose||g===te.Compact)&&(l.error&&l.error.data?S=`Error data: ${Ze(l.error.data)}

`:l.result?S=`Result: ${Ze(l.result)}

`:l.error===void 0&&(S=`No result returned.

`)),_){let I=l.error?` Request failed: ${l.error.message} (${l.error.code}).`:"";F.log(`Received response '${_.method} - (${l.id})' in ${Date.now()-_.timerStart}ms.${I}`,S)}else F.log(`Received response ${l.id} without active response promise.`,S)}else gt("receive-response",l)}function gt(l,_){if(!F||g===te.Off)return;let S={isLSPMessage:!0,type:l,message:_,timestamp:Date.now()};F.log(S)}function St(){if(Vt())throw new yt(ir.Closed,"Connection is closed.");if(ht())throw new yt(ir.Disposed,"Connection is disposed.")}function hi(){if(Un())throw new yt(ir.AlreadyListening,"Connection is already listening")}function gi(){if(!Un())throw new Error("Call listen() first.")}function st(l){return l===void 0?null:l}function $n(l){if(l!==null)return l}function zn(l){return l!=null&&!Array.isArray(l)&&typeof l=="object"}function pn(l,_){switch(l){case A.ParameterStructures.auto:return zn(_)?$n(_):[st(_)];case A.ParameterStructures.byName:if(!zn(_))throw new Error("Received parameters by name but param is not an object literal.");return $n(_);case A.ParameterStructures.byPosition:return[st(_)];default:throw new Error(`Unknown parameter structure ${l.toString()}`)}}function Gn(l,_){let S,I=l.numberOfParams;switch(I){case 0:S=void 0;break;case 1:S=pn(l.parameterStructures,_[0]);break;default:S=[];for(let re=0;re<_.length&&re<I;re++)S.push(st(_[re]));if(_.length<I)for(let re=_.length;re<I;re++)S.push(null);break}return S}let pt={sendNotification:(l,..._)=>{St();let S,I;if(de.string(l)){S=l;let ee=_[0],ue=0,le=A.ParameterStructures.auto;A.ParameterStructures.is(ee)&&(ue=1,le=ee);let B=_.length,oe=B-ue;switch(oe){case 0:I=void 0;break;case 1:I=pn(le,_[ue]);break;default:if(le===A.ParameterStructures.byName)throw new Error(`Received ${oe} parameters for 'by Name' notification parameter structure.`);I=_.slice(ue,B).map(Q=>st(Q));break}}else{let ee=_;S=l.method,I=Gn(l,ee)}let re={jsonrpc:C,method:S,params:I};return li(re),e.write(re).catch(ee=>{throw i.error("Sending notification failed."),ee})},onNotification:(l,_)=>{St();let S;return de.func(l)?w=l:_&&(de.string(l)?(S=l,N.set(l,{type:void 0,handler:_})):(S=l.method,N.set(l.method,{type:l,handler:_}))),{dispose:()=>{S!==void 0?N.delete(S):w=void 0}}},onProgress:(l,_,S)=>{if(L.has(_))throw new Error(`Progress handler for token ${_} already registered`);return L.set(_,S),{dispose:()=>{L.delete(_)}}},sendProgress:(l,_,S)=>pt.sendNotification(_n.type,{token:_,value:S}),onUnhandledProgress:Et.event,sendRequest:(l,..._)=>{St(),gi();let S,I,re;if(de.string(l)){S=l;let B=_[0],oe=_[_.length-1],Q=0,pe=A.ParameterStructures.auto;A.ParameterStructures.is(B)&&(Q=1,pe=B);let _e=_.length;so.CancellationToken.is(oe)&&(_e=_e-1,re=oe);let Ae=_e-Q;switch(Ae){case 0:I=void 0;break;case 1:I=pn(pe,_[Q]);break;default:if(pe===A.ParameterStructures.byName)throw new Error(`Received ${Ae} parameters for 'by Name' request parameter structure.`);I=_.slice(Q,_e).map(p=>st(p));break}}else{let B=_;S=l.method,I=Gn(l,B);let oe=l.numberOfParams;re=so.CancellationToken.is(B[oe])?B[oe]:void 0}let ee=c++,ue;re&&(ue=re.onCancellationRequested(()=>{let B=Ie.sender.sendCancellation(pt,ee);return B===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ee}`),Promise.resolve()):B.catch(()=>{i.log(`Sending cancellation messages for id ${ee} failed`)})}));let le={jsonrpc:C,id:ee,method:S,params:I};return ui(le),typeof Ie.sender.enableCancellation=="function"&&Ie.sender.enableCancellation(le),new Promise(async(B,oe)=>{let Q=Ae=>{B(Ae),Ie.sender.cleanup(ee),ue?.dispose()},pe=Ae=>{oe(Ae),Ie.sender.cleanup(ee),ue?.dispose()},_e={method:S,timerStart:Date.now(),resolve:Q,reject:pe};try{await e.write(le),Z.set(ee,_e)}catch(Ae){throw i.error("Sending request failed."),_e.reject(new A.ResponseError(A.ErrorCodes.MessageWriteError,Ae.message?Ae.message:"Unknown reason")),Ae}})},onRequest:(l,_)=>{St();let S=null;return co.is(l)?(S=void 0,b=l):de.string(l)?(S=null,_!==void 0&&(S=l,D.set(l,{handler:_,type:void 0}))):_!==void 0&&(S=l.method,D.set(l.method,{type:l,handler:_})),{dispose:()=>{S!==null&&(S!==void 0?D.delete(S):b=void 0)}}},hasPendingResponse:()=>Z.size>0,trace:async(l,_,S)=>{let I=!1,re=Be.Text;S!==void 0&&(de.boolean(S)?I=S:(I=S.sendNotification||!1,re=S.traceFormat||Be.Text)),g=l,k=re,g===te.Off?F=void 0:F=_,I&&!Vt()&&!ht()&&await pt.sendNotification(qs.type,{value:te.toString(l)})},onError:ne.event,onClose:xe.event,onUnhandledNotification:Ht.event,onDispose:Nt.event,end:()=>{e.end()},dispose:()=>{if(ht())return;Y=$e.Disposed,Nt.fire(void 0);let l=new A.ResponseError(A.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let _ of Z.values())_.reject(l);Z=new Map,y=new Map,H=new Set,X=new xs.LinkedMap,de.func(e.dispose)&&e.dispose(),de.func(t.dispose)&&t.dispose()},listen:()=>{St(),hi(),Y=$e.Listening,t.listen(oi)},inspect:()=>{(0,Os.default)().console.log("inspect")}};return pt.onNotification(uo.type,l=>{if(g===te.Off||!F)return;let _=g===te.Verbose||g===te.Compact;F.log(l.message,_?l.verbose:void 0)}),pt.onNotification(_n.type,l=>{let _=L.get(l.token);_?_(l.value):Et.fire(l)}),pt}q.createMessageConnection=Du});var or=O(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.ProgressType=T.ProgressToken=T.createMessageConnection=T.NullLogger=T.ConnectionOptions=T.ConnectionStrategy=T.AbstractMessageBuffer=T.WriteableStreamMessageWriter=T.AbstractMessageWriter=T.MessageWriter=T.ReadableStreamMessageReader=T.AbstractMessageReader=T.MessageReader=T.SharedArrayReceiverStrategy=T.SharedArraySenderStrategy=T.CancellationToken=T.CancellationTokenSource=T.Emitter=T.Event=T.Disposable=T.LRUCache=T.Touch=T.LinkedMap=T.ParameterStructures=T.NotificationType9=T.NotificationType8=T.NotificationType7=T.NotificationType6=T.NotificationType5=T.NotificationType4=T.NotificationType3=T.NotificationType2=T.NotificationType1=T.NotificationType0=T.NotificationType=T.ErrorCodes=T.ResponseError=T.RequestType9=T.RequestType8=T.RequestType7=T.RequestType6=T.RequestType5=T.RequestType4=T.RequestType3=T.RequestType2=T.RequestType1=T.RequestType0=T.RequestType=T.Message=T.RAL=void 0;T.MessageStrategy=T.CancellationStrategy=T.CancellationSenderStrategy=T.CancellationReceiverStrategy=T.ConnectionError=T.ConnectionErrors=T.LogTraceNotification=T.SetTraceNotification=T.TraceFormat=T.TraceValues=T.Trace=void 0;var ae=Ai();Object.defineProperty(T,"Message",{enumerable:!0,get:function(){return ae.Message}});Object.defineProperty(T,"RequestType",{enumerable:!0,get:function(){return ae.RequestType}});Object.defineProperty(T,"RequestType0",{enumerable:!0,get:function(){return ae.RequestType0}});Object.defineProperty(T,"RequestType1",{enumerable:!0,get:function(){return ae.RequestType1}});Object.defineProperty(T,"RequestType2",{enumerable:!0,get:function(){return ae.RequestType2}});Object.defineProperty(T,"RequestType3",{enumerable:!0,get:function(){return ae.RequestType3}});Object.defineProperty(T,"RequestType4",{enumerable:!0,get:function(){return ae.RequestType4}});Object.defineProperty(T,"RequestType5",{enumerable:!0,get:function(){return ae.RequestType5}});Object.defineProperty(T,"RequestType6",{enumerable:!0,get:function(){return ae.RequestType6}});Object.defineProperty(T,"RequestType7",{enumerable:!0,get:function(){return ae.RequestType7}});Object.defineProperty(T,"RequestType8",{enumerable:!0,get:function(){return ae.RequestType8}});Object.defineProperty(T,"RequestType9",{enumerable:!0,get:function(){return ae.RequestType9}});Object.defineProperty(T,"ResponseError",{enumerable:!0,get:function(){return ae.ResponseError}});Object.defineProperty(T,"ErrorCodes",{enumerable:!0,get:function(){return ae.ErrorCodes}});Object.defineProperty(T,"NotificationType",{enumerable:!0,get:function(){return ae.NotificationType}});Object.defineProperty(T,"NotificationType0",{enumerable:!0,get:function(){return ae.NotificationType0}});Object.defineProperty(T,"NotificationType1",{enumerable:!0,get:function(){return ae.NotificationType1}});Object.defineProperty(T,"NotificationType2",{enumerable:!0,get:function(){return ae.NotificationType2}});Object.defineProperty(T,"NotificationType3",{enumerable:!0,get:function(){return ae.NotificationType3}});Object.defineProperty(T,"NotificationType4",{enumerable:!0,get:function(){return ae.NotificationType4}});Object.defineProperty(T,"NotificationType5",{enumerable:!0,get:function(){return ae.NotificationType5}});Object.defineProperty(T,"NotificationType6",{enumerable:!0,get:function(){return ae.NotificationType6}});Object.defineProperty(T,"NotificationType7",{enumerable:!0,get:function(){return ae.NotificationType7}});Object.defineProperty(T,"NotificationType8",{enumerable:!0,get:function(){return ae.NotificationType8}});Object.defineProperty(T,"NotificationType9",{enumerable:!0,get:function(){return ae.NotificationType9}});Object.defineProperty(T,"ParameterStructures",{enumerable:!0,get:function(){return ae.ParameterStructures}});var mo=ji();Object.defineProperty(T,"LinkedMap",{enumerable:!0,get:function(){return mo.LinkedMap}});Object.defineProperty(T,"LRUCache",{enumerable:!0,get:function(){return mo.LRUCache}});Object.defineProperty(T,"Touch",{enumerable:!0,get:function(){return mo.Touch}});var ku=Cs();Object.defineProperty(T,"Disposable",{enumerable:!0,get:function(){return ku.Disposable}});var Ls=Xt();Object.defineProperty(T,"Event",{enumerable:!0,get:function(){return Ls.Event}});Object.defineProperty(T,"Emitter",{enumerable:!0,get:function(){return Ls.Emitter}});var js=Zn();Object.defineProperty(T,"CancellationTokenSource",{enumerable:!0,get:function(){return js.CancellationTokenSource}});Object.defineProperty(T,"CancellationToken",{enumerable:!0,get:function(){return js.CancellationToken}});var Ws=Ds();Object.defineProperty(T,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Ws.SharedArraySenderStrategy}});Object.defineProperty(T,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Ws.SharedArrayReceiverStrategy}});var yo=ks();Object.defineProperty(T,"MessageReader",{enumerable:!0,get:function(){return yo.MessageReader}});Object.defineProperty(T,"AbstractMessageReader",{enumerable:!0,get:function(){return yo.AbstractMessageReader}});Object.defineProperty(T,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return yo.ReadableStreamMessageReader}});var vo=Ps();Object.defineProperty(T,"MessageWriter",{enumerable:!0,get:function(){return vo.MessageWriter}});Object.defineProperty(T,"AbstractMessageWriter",{enumerable:!0,get:function(){return vo.AbstractMessageWriter}});Object.defineProperty(T,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return vo.WriteableStreamMessageWriter}});var Eu=ws();Object.defineProperty(T,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Eu.AbstractMessageBuffer}});var Re=As();Object.defineProperty(T,"ConnectionStrategy",{enumerable:!0,get:function(){return Re.ConnectionStrategy}});Object.defineProperty(T,"ConnectionOptions",{enumerable:!0,get:function(){return Re.ConnectionOptions}});Object.defineProperty(T,"NullLogger",{enumerable:!0,get:function(){return Re.NullLogger}});Object.defineProperty(T,"createMessageConnection",{enumerable:!0,get:function(){return Re.createMessageConnection}});Object.defineProperty(T,"ProgressToken",{enumerable:!0,get:function(){return Re.ProgressToken}});Object.defineProperty(T,"ProgressType",{enumerable:!0,get:function(){return Re.ProgressType}});Object.defineProperty(T,"Trace",{enumerable:!0,get:function(){return Re.Trace}});Object.defineProperty(T,"TraceValues",{enumerable:!0,get:function(){return Re.TraceValues}});Object.defineProperty(T,"TraceFormat",{enumerable:!0,get:function(){return Re.TraceFormat}});Object.defineProperty(T,"SetTraceNotification",{enumerable:!0,get:function(){return Re.SetTraceNotification}});Object.defineProperty(T,"LogTraceNotification",{enumerable:!0,get:function(){return Re.LogTraceNotification}});Object.defineProperty(T,"ConnectionErrors",{enumerable:!0,get:function(){return Re.ConnectionErrors}});Object.defineProperty(T,"ConnectionError",{enumerable:!0,get:function(){return Re.ConnectionError}});Object.defineProperty(T,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Re.CancellationReceiverStrategy}});Object.defineProperty(T,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Re.CancellationSenderStrategy}});Object.defineProperty(T,"CancellationStrategy",{enumerable:!0,get:function(){return Re.CancellationStrategy}});Object.defineProperty(T,"MessageStrategy",{enumerable:!0,get:function(){return Re.MessageStrategy}});var Nu=mt();T.RAL=Nu.default});var Vs=O(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var Hs=require("util"),dt=or(),Qt=class extends dt.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Qt.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Hs.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Qt.emptyBuffer=Buffer.allocUnsafe(0);var To=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),dt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),dt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),dt.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),dt.Disposable.create(()=>this.stream.off("data",e))}},bo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),dt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),dt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),dt.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let c=h=>{h==null?r():i(h)};typeof e=="string"?this.stream.write(e,n,c):this.stream.write(e,c)})}end(){this.stream.end()}},Us=Object.freeze({messageBuffer:Object.freeze({create:t=>new Qt(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Hs.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new To(t),asWritableStream:t=>new bo(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function _o(){return Us}(function(t){function e(){dt.RAL.install(Us)}t.install=e})(_o||(_o={}));Ro.default=_o});var qt=O(G=>{"use strict";var Su=G&&G.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Pu=G&&G.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Su(e,t,n)};Object.defineProperty(G,"__esModule",{value:!0});G.createMessageConnection=G.createServerSocketTransport=G.createClientSocketTransport=G.createServerPipeTransport=G.createClientPipeTransport=G.generateRandomPipeName=G.StreamMessageWriter=G.StreamMessageReader=G.SocketMessageWriter=G.SocketMessageReader=G.PortMessageWriter=G.PortMessageReader=G.IPCMessageWriter=G.IPCMessageReader=void 0;var Zt=Vs();Zt.default.install();var Bs=require("path"),wu=require("os"),Ou=require("crypto"),cr=require("net"),qe=or();Pu(or(),G);var Co=class extends qe.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),qe.Disposable.create(()=>this.process.off("message",e))}};G.IPCMessageReader=Co;var Do=class extends qe.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};G.IPCMessageWriter=Do;var ko=class extends qe.AbstractMessageReader{constructor(e){super(),this.onData=new qe.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};G.PortMessageReader=ko;var Eo=class extends qe.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};G.PortMessageWriter=Eo;var xt=class extends qe.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,Zt.default)().stream.asReadableStream(e),n)}};G.SocketMessageReader=xt;var It=class extends qe.WriteableStreamMessageWriter{constructor(e,n){super((0,Zt.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};G.SocketMessageWriter=It;var sr=class extends qe.ReadableStreamMessageReader{constructor(e,n){super((0,Zt.default)().stream.asReadableStream(e),n)}};G.StreamMessageReader=sr;var ar=class extends qe.WriteableStreamMessageWriter{constructor(e,n){super((0,Zt.default)().stream.asWritableStream(e),n)}};G.StreamMessageWriter=ar;var $s=process.env.XDG_RUNTIME_DIR,xu=new Map([["linux",107],["darwin",103]]);function Iu(){let t=(0,Ou.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;$s?e=Bs.join($s,`vscode-ipc-${t}.sock`):e=Bs.join(wu.tmpdir(),`vscode-${t}.sock`);let n=xu.get(process.platform);return n!==void 0&&e.length>n&&(0,Zt.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}G.generateRandomPipeName=Iu;function qu(t,e="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,cr.createServer)(v=>{h.close(),n([new xt(v,e),new It(v,e)])});h.on("error",c),h.listen(t,()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}G.createClientPipeTransport=qu;function Mu(t,e="utf-8"){let n=(0,cr.createConnection)(t);return[new xt(n,e),new It(n,e)]}G.createServerPipeTransport=Mu;function Fu(t,e="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,cr.createServer)(v=>{h.close(),n([new xt(v,e),new It(v,e)])});h.on("error",c),h.listen(t,"127.0.0.1",()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}G.createClientSocketTransport=Fu;function Au(t,e="utf-8"){let n=(0,cr.createConnection)(t,"127.0.0.1");return[new xt(n,e),new It(n,e)]}G.createServerSocketTransport=Au;function Lu(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function ju(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function Wu(t,e,n,r){n||(n=qe.NullLogger);let i=Lu(t)?new sr(t):t,c=ju(e)?new ar(e):e;return qe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,qe.createMessageConnection)(i,c,n,r)}G.createMessageConnection=Wu});var No=O((Kh,zs)=>{"use strict";zs.exports=qt()});var lr=O((Gs,ur)=>{(function(t){if(typeof ur=="object"&&typeof ur.exports=="object"){var e=t(require,Gs);e!==void 0&&(ur.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(s){function d(f){return typeof f=="string"}s.is=d})(n=e.DocumentUri||(e.DocumentUri={}));var r;(function(s){function d(f){return typeof f=="string"}s.is=d})(r=e.URI||(e.URI={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(i=e.integer||(e.integer={}));var c;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(c=e.uinteger||(e.uinteger={}));var h;(function(s){function d(u,o){return u===Number.MAX_VALUE&&(u=c.MAX_VALUE),o===Number.MAX_VALUE&&(o=c.MAX_VALUE),{line:u,character:o}}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&p.uinteger(o.line)&&p.uinteger(o.character)}s.is=f})(h=e.Position||(e.Position={}));var v;(function(s){function d(u,o,m,R){if(p.uinteger(u)&&p.uinteger(o)&&p.uinteger(m)&&p.uinteger(R))return{start:h.create(u,o),end:h.create(m,R)};if(h.is(u)&&h.is(o))return{start:u,end:o};throw new Error("Range#create called with invalid arguments[".concat(u,", ").concat(o,", ").concat(m,", ").concat(R,"]"))}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&h.is(o.start)&&h.is(o.end)}s.is=f})(v=e.Range||(e.Range={}));var C;(function(s){function d(u,o){return{uri:u,range:o}}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&v.is(o.range)&&(p.string(o.uri)||p.undefined(o.uri))}s.is=f})(C=e.Location||(e.Location={}));var b;(function(s){function d(u,o,m,R){return{targetUri:u,targetRange:o,targetSelectionRange:m,originSelectionRange:R}}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&v.is(o.targetRange)&&p.string(o.targetUri)&&v.is(o.targetSelectionRange)&&(v.is(o.originSelectionRange)||p.undefined(o.originSelectionRange))}s.is=f})(b=e.LocationLink||(e.LocationLink={}));var D;(function(s){function d(u,o,m,R){return{red:u,green:o,blue:m,alpha:R}}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&p.numberRange(o.red,0,1)&&p.numberRange(o.green,0,1)&&p.numberRange(o.blue,0,1)&&p.numberRange(o.alpha,0,1)}s.is=f})(D=e.Color||(e.Color={}));var w;(function(s){function d(u,o){return{range:u,color:o}}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&v.is(o.range)&&D.is(o.color)}s.is=f})(w=e.ColorInformation||(e.ColorInformation={}));var N;(function(s){function d(u,o,m){return{label:u,textEdit:o,additionalTextEdits:m}}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&p.string(o.label)&&(p.undefined(o.textEdit)||F.is(o))&&(p.undefined(o.additionalTextEdits)||p.typedArray(o.additionalTextEdits,F.is))}s.is=f})(N=e.ColorPresentation||(e.ColorPresentation={}));var L;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(L=e.FoldingRangeKind||(e.FoldingRangeKind={}));var $;(function(s){function d(u,o,m,R,W,ge){var se={startLine:u,endLine:o};return p.defined(m)&&(se.startCharacter=m),p.defined(R)&&(se.endCharacter=R),p.defined(W)&&(se.kind=W),p.defined(ge)&&(se.collapsedText=ge),se}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&p.uinteger(o.startLine)&&p.uinteger(o.startLine)&&(p.undefined(o.startCharacter)||p.uinteger(o.startCharacter))&&(p.undefined(o.endCharacter)||p.uinteger(o.endCharacter))&&(p.undefined(o.kind)||p.string(o.kind))}s.is=f})($=e.FoldingRange||(e.FoldingRange={}));var X;(function(s){function d(u,o){return{location:u,message:o}}s.create=d;function f(u){var o=u;return p.defined(o)&&C.is(o.location)&&p.string(o.message)}s.is=f})(X=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var Z;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(Z=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var H;(function(s){s.Unnecessary=1,s.Deprecated=2})(H=e.DiagnosticTag||(e.DiagnosticTag={}));var y;(function(s){function d(f){var u=f;return p.objectLiteral(u)&&p.string(u.href)}s.is=d})(y=e.CodeDescription||(e.CodeDescription={}));var g;(function(s){function d(u,o,m,R,W,ge){var se={range:u,message:o};return p.defined(m)&&(se.severity=m),p.defined(R)&&(se.code=R),p.defined(W)&&(se.source=W),p.defined(ge)&&(se.relatedInformation=ge),se}s.create=d;function f(u){var o,m=u;return p.defined(m)&&v.is(m.range)&&p.string(m.message)&&(p.number(m.severity)||p.undefined(m.severity))&&(p.integer(m.code)||p.string(m.code)||p.undefined(m.code))&&(p.undefined(m.codeDescription)||p.string((o=m.codeDescription)===null||o===void 0?void 0:o.href))&&(p.string(m.source)||p.undefined(m.source))&&(p.undefined(m.relatedInformation)||p.typedArray(m.relatedInformation,X.is))}s.is=f})(g=e.Diagnostic||(e.Diagnostic={}));var k;(function(s){function d(u,o){for(var m=[],R=2;R<arguments.length;R++)m[R-2]=arguments[R];var W={title:u,command:o};return p.defined(m)&&m.length>0&&(W.arguments=m),W}s.create=d;function f(u){var o=u;return p.defined(o)&&p.string(o.title)&&p.string(o.command)}s.is=f})(k=e.Command||(e.Command={}));var F;(function(s){function d(m,R){return{range:m,newText:R}}s.replace=d;function f(m,R){return{range:{start:m,end:m},newText:R}}s.insert=f;function u(m){return{range:m,newText:""}}s.del=u;function o(m){var R=m;return p.objectLiteral(R)&&p.string(R.newText)&&v.is(R.range)}s.is=o})(F=e.TextEdit||(e.TextEdit={}));var Y;(function(s){function d(u,o,m){var R={label:u};return o!==void 0&&(R.needsConfirmation=o),m!==void 0&&(R.description=m),R}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&p.string(o.label)&&(p.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(p.string(o.description)||o.description===void 0)}s.is=f})(Y=e.ChangeAnnotation||(e.ChangeAnnotation={}));var ne;(function(s){function d(f){var u=f;return p.string(u)}s.is=d})(ne=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var xe;(function(s){function d(m,R,W){return{range:m,newText:R,annotationId:W}}s.replace=d;function f(m,R,W){return{range:{start:m,end:m},newText:R,annotationId:W}}s.insert=f;function u(m,R){return{range:m,newText:"",annotationId:R}}s.del=u;function o(m){var R=m;return F.is(R)&&(Y.is(R.annotationId)||ne.is(R.annotationId))}s.is=o})(xe=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var Ht;(function(s){function d(u,o){return{textDocument:u,edits:o}}s.create=d;function f(u){var o=u;return p.defined(o)&&Vt.is(o.textDocument)&&Array.isArray(o.edits)}s.is=f})(Ht=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Et;(function(s){function d(u,o,m){var R={kind:"create",uri:u};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(R.options=o),m!==void 0&&(R.annotationId=m),R}s.create=d;function f(u){var o=u;return o&&o.kind==="create"&&p.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||p.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||p.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ne.is(o.annotationId))}s.is=f})(Et=e.CreateFile||(e.CreateFile={}));var Nt;(function(s){function d(u,o,m,R){var W={kind:"rename",oldUri:u,newUri:o};return m!==void 0&&(m.overwrite!==void 0||m.ignoreIfExists!==void 0)&&(W.options=m),R!==void 0&&(W.annotationId=R),W}s.create=d;function f(u){var o=u;return o&&o.kind==="rename"&&p.string(o.oldUri)&&p.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||p.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||p.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ne.is(o.annotationId))}s.is=f})(Nt=e.RenameFile||(e.RenameFile={}));var Ie;(function(s){function d(u,o,m){var R={kind:"delete",uri:u};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(R.options=o),m!==void 0&&(R.annotationId=m),R}s.create=d;function f(u){var o=u;return o&&o.kind==="delete"&&p.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||p.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||p.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||ne.is(o.annotationId))}s.is=f})(Ie=e.DeleteFile||(e.DeleteFile={}));var dn;(function(s){function d(f){var u=f;return u&&(u.changes!==void 0||u.documentChanges!==void 0)&&(u.documentChanges===void 0||u.documentChanges.every(function(o){return p.string(o.kind)?Et.is(o)||Nt.is(o)||Ie.is(o):Ht.is(o)}))}s.is=d})(dn=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Ut=function(){function s(d,f){this.edits=d,this.changeAnnotations=f}return s.prototype.insert=function(d,f,u){var o,m;if(u===void 0?o=F.insert(d,f):ne.is(u)?(m=u,o=xe.insert(d,f,u)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(u),o=xe.insert(d,f,m)),this.edits.push(o),m!==void 0)return m},s.prototype.replace=function(d,f,u){var o,m;if(u===void 0?o=F.replace(d,f):ne.is(u)?(m=u,o=xe.replace(d,f,u)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(u),o=xe.replace(d,f,m)),this.edits.push(o),m!==void 0)return m},s.prototype.delete=function(d,f){var u,o;if(f===void 0?u=F.del(d):ne.is(f)?(o=f,u=xe.del(d,f)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(f),u=xe.del(d,o)),this.edits.push(u),o!==void 0)return o},s.prototype.add=function(d){this.edits.push(d)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(d){if(d===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),Hn=function(){function s(d){this._annotations=d===void 0?Object.create(null):d,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(d,f){var u;if(ne.is(d)?u=d:(u=this.nextId(),f=d),this._annotations[u]!==void 0)throw new Error("Id ".concat(u," is already in use."));if(f===void 0)throw new Error("No annotation provided for id ".concat(u));return this._annotations[u]=f,this._size++,u},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),ti=function(){function s(d){var f=this;this._textEditChanges=Object.create(null),d!==void 0?(this._workspaceEdit=d,d.documentChanges?(this._changeAnnotations=new Hn(d.changeAnnotations),d.changeAnnotations=this._changeAnnotations.all(),d.documentChanges.forEach(function(u){if(Ht.is(u)){var o=new Ut(u.edits,f._changeAnnotations);f._textEditChanges[u.textDocument.uri]=o}})):d.changes&&Object.keys(d.changes).forEach(function(u){var o=new Ut(d.changes[u]);f._textEditChanges[u]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(d){if(Vt.is(d)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f={uri:d.uri,version:d.version},u=this._textEditChanges[f.uri];if(!u){var o=[],m={textDocument:f,edits:o};this._workspaceEdit.documentChanges.push(m),u=new Ut(o,this._changeAnnotations),this._textEditChanges[f.uri]=u}return u}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var u=this._textEditChanges[d];if(!u){var o=[];this._workspaceEdit.changes[d]=o,u=new Ut(o),this._textEditChanges[d]=u}return u}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Hn,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(d,f,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(f)||ne.is(f)?o=f:u=f;var m,R;if(o===void 0?m=Et.create(d,u):(R=ne.is(o)?o:this._changeAnnotations.manage(o),m=Et.create(d,u,R)),this._workspaceEdit.documentChanges.push(m),R!==void 0)return R},s.prototype.renameFile=function(d,f,u,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;Y.is(u)||ne.is(u)?m=u:o=u;var R,W;if(m===void 0?R=Nt.create(d,f,o):(W=ne.is(m)?m:this._changeAnnotations.manage(m),R=Nt.create(d,f,o,W)),this._workspaceEdit.documentChanges.push(R),W!==void 0)return W},s.prototype.deleteFile=function(d,f,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(f)||ne.is(f)?o=f:u=f;var m,R;if(o===void 0?m=Ie.create(d,u):(R=ne.is(o)?o:this._changeAnnotations.manage(o),m=Ie.create(d,u,R)),this._workspaceEdit.documentChanges.push(m),R!==void 0)return R},s}();e.WorkspaceChange=ti;var ni;(function(s){function d(u){return{uri:u}}s.create=d;function f(u){var o=u;return p.defined(o)&&p.string(o.uri)}s.is=f})(ni=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Un;(function(s){function d(u,o){return{uri:u,version:o}}s.create=d;function f(u){var o=u;return p.defined(o)&&p.string(o.uri)&&p.integer(o.version)}s.is=f})(Un=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Vt;(function(s){function d(u,o){return{uri:u,version:o}}s.create=d;function f(u){var o=u;return p.defined(o)&&p.string(o.uri)&&(o.version===null||p.integer(o.version))}s.is=f})(Vt=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var ht;(function(s){function d(u,o,m,R){return{uri:u,languageId:o,version:m,text:R}}s.create=d;function f(u){var o=u;return p.defined(o)&&p.string(o.uri)&&p.string(o.languageId)&&p.integer(o.version)&&p.string(o.text)}s.is=f})(ht=e.TextDocumentItem||(e.TextDocumentItem={}));var fn;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function d(f){var u=f;return u===s.PlainText||u===s.Markdown}s.is=d})(fn=e.MarkupKind||(e.MarkupKind={}));var Bt;(function(s){function d(f){var u=f;return p.objectLiteral(f)&&fn.is(u.kind)&&p.string(u.value)}s.is=d})(Bt=e.MarkupContent||(e.MarkupContent={}));var ri;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(ri=e.CompletionItemKind||(e.CompletionItemKind={}));var Vn;(function(s){s.PlainText=1,s.Snippet=2})(Vn=e.InsertTextFormat||(e.InsertTextFormat={}));var Bn;(function(s){s.Deprecated=1})(Bn=e.CompletionItemTag||(e.CompletionItemTag={}));var ii;(function(s){function d(u,o,m){return{newText:u,insert:o,replace:m}}s.create=d;function f(u){var o=u;return o&&p.string(o.newText)&&v.is(o.insert)&&v.is(o.replace)}s.is=f})(ii=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var oi;(function(s){s.asIs=1,s.adjustIndentation=2})(oi=e.InsertTextMode||(e.InsertTextMode={}));var si;(function(s){function d(f){var u=f;return u&&(p.string(u.detail)||u.detail===void 0)&&(p.string(u.description)||u.description===void 0)}s.is=d})(si=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var ai;(function(s){function d(f){return{label:f}}s.create=d})(ai=e.CompletionItem||(e.CompletionItem={}));var ci;(function(s){function d(f,u){return{items:f||[],isIncomplete:!!u}}s.create=d})(ci=e.CompletionList||(e.CompletionList={}));var hn;(function(s){function d(u){return u.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=d;function f(u){var o=u;return p.string(o)||p.objectLiteral(o)&&p.string(o.language)&&p.string(o.value)}s.is=f})(hn=e.MarkedString||(e.MarkedString={}));var Ze;(function(s){function d(f){var u=f;return!!u&&p.objectLiteral(u)&&(Bt.is(u.contents)||hn.is(u.contents)||p.typedArray(u.contents,hn.is))&&(f.range===void 0||v.is(f.range))}s.is=d})(Ze=e.Hover||(e.Hover={}));var ui;(function(s){function d(f,u){return u?{label:f,documentation:u}:{label:f}}s.create=d})(ui=e.ParameterInformation||(e.ParameterInformation={}));var li;(function(s){function d(f,u){for(var o=[],m=2;m<arguments.length;m++)o[m-2]=arguments[m];var R={label:f};return p.defined(u)&&(R.documentation=u),p.defined(o)?R.parameters=o:R.parameters=[],R}s.create=d})(li=e.SignatureInformation||(e.SignatureInformation={}));var $t;(function(s){s.Text=1,s.Read=2,s.Write=3})($t=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var di;(function(s){function d(f,u){var o={range:f};return p.number(u)&&(o.kind=u),o}s.create=d})(di=e.DocumentHighlight||(e.DocumentHighlight={}));var gn;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(gn=e.SymbolKind||(e.SymbolKind={}));var fi;(function(s){s.Deprecated=1})(fi=e.SymbolTag||(e.SymbolTag={}));var gt;(function(s){function d(f,u,o,m,R){var W={name:f,kind:u,location:{uri:m,range:o}};return R&&(W.containerName=R),W}s.create=d})(gt=e.SymbolInformation||(e.SymbolInformation={}));var St;(function(s){function d(f,u,o,m){return m!==void 0?{name:f,kind:u,location:{uri:o,range:m}}:{name:f,kind:u,location:{uri:o}}}s.create=d})(St=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var hi;(function(s){function d(u,o,m,R,W,ge){var se={name:u,detail:o,kind:m,range:R,selectionRange:W};return ge!==void 0&&(se.children=ge),se}s.create=d;function f(u){var o=u;return o&&p.string(o.name)&&p.number(o.kind)&&v.is(o.range)&&v.is(o.selectionRange)&&(o.detail===void 0||p.string(o.detail))&&(o.deprecated===void 0||p.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=f})(hi=e.DocumentSymbol||(e.DocumentSymbol={}));var gi;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(gi=e.CodeActionKind||(e.CodeActionKind={}));var st;(function(s){s.Invoked=1,s.Automatic=2})(st=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var $n;(function(s){function d(u,o,m){var R={diagnostics:u};return o!=null&&(R.only=o),m!=null&&(R.triggerKind=m),R}s.create=d;function f(u){var o=u;return p.defined(o)&&p.typedArray(o.diagnostics,g.is)&&(o.only===void 0||p.typedArray(o.only,p.string))&&(o.triggerKind===void 0||o.triggerKind===st.Invoked||o.triggerKind===st.Automatic)}s.is=f})($n=e.CodeActionContext||(e.CodeActionContext={}));var zn;(function(s){function d(u,o,m){var R={title:u},W=!0;return typeof o=="string"?(W=!1,R.kind=o):k.is(o)?R.command=o:R.edit=o,W&&m!==void 0&&(R.kind=m),R}s.create=d;function f(u){var o=u;return o&&p.string(o.title)&&(o.diagnostics===void 0||p.typedArray(o.diagnostics,g.is))&&(o.kind===void 0||p.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||k.is(o.command))&&(o.isPreferred===void 0||p.boolean(o.isPreferred))&&(o.edit===void 0||dn.is(o.edit))}s.is=f})(zn=e.CodeAction||(e.CodeAction={}));var pn;(function(s){function d(u,o){var m={range:u};return p.defined(o)&&(m.data=o),m}s.create=d;function f(u){var o=u;return p.defined(o)&&v.is(o.range)&&(p.undefined(o.command)||k.is(o.command))}s.is=f})(pn=e.CodeLens||(e.CodeLens={}));var Gn;(function(s){function d(u,o){return{tabSize:u,insertSpaces:o}}s.create=d;function f(u){var o=u;return p.defined(o)&&p.uinteger(o.tabSize)&&p.boolean(o.insertSpaces)}s.is=f})(Gn=e.FormattingOptions||(e.FormattingOptions={}));var pt;(function(s){function d(u,o,m){return{range:u,target:o,data:m}}s.create=d;function f(u){var o=u;return p.defined(o)&&v.is(o.range)&&(p.undefined(o.target)||p.string(o.target))}s.is=f})(pt=e.DocumentLink||(e.DocumentLink={}));var l;(function(s){function d(u,o){return{range:u,parent:o}}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&v.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=f})(l=e.SelectionRange||(e.SelectionRange={}));var _;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(_=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var S;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(S=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var I;(function(s){function d(f){var u=f;return p.objectLiteral(u)&&(u.resultId===void 0||typeof u.resultId=="string")&&Array.isArray(u.data)&&(u.data.length===0||typeof u.data[0]=="number")}s.is=d})(I=e.SemanticTokens||(e.SemanticTokens={}));var re;(function(s){function d(u,o){return{range:u,text:o}}s.create=d;function f(u){var o=u;return o!=null&&v.is(o.range)&&p.string(o.text)}s.is=f})(re=e.InlineValueText||(e.InlineValueText={}));var ee;(function(s){function d(u,o,m){return{range:u,variableName:o,caseSensitiveLookup:m}}s.create=d;function f(u){var o=u;return o!=null&&v.is(o.range)&&p.boolean(o.caseSensitiveLookup)&&(p.string(o.variableName)||o.variableName===void 0)}s.is=f})(ee=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var ue;(function(s){function d(u,o){return{range:u,expression:o}}s.create=d;function f(u){var o=u;return o!=null&&v.is(o.range)&&(p.string(o.expression)||o.expression===void 0)}s.is=f})(ue=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var le;(function(s){function d(u,o){return{frameId:u,stoppedLocation:o}}s.create=d;function f(u){var o=u;return p.defined(o)&&v.is(u.stoppedLocation)}s.is=f})(le=e.InlineValueContext||(e.InlineValueContext={}));var B;(function(s){s.Type=1,s.Parameter=2;function d(f){return f===1||f===2}s.is=d})(B=e.InlayHintKind||(e.InlayHintKind={}));var oe;(function(s){function d(u){return{value:u}}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&(o.tooltip===void 0||p.string(o.tooltip)||Bt.is(o.tooltip))&&(o.location===void 0||C.is(o.location))&&(o.command===void 0||k.is(o.command))}s.is=f})(oe=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var Q;(function(s){function d(u,o,m){var R={position:u,label:o};return m!==void 0&&(R.kind=m),R}s.create=d;function f(u){var o=u;return p.objectLiteral(o)&&h.is(o.position)&&(p.string(o.label)||p.typedArray(o.label,oe.is))&&(o.kind===void 0||B.is(o.kind))&&o.textEdits===void 0||p.typedArray(o.textEdits,F.is)&&(o.tooltip===void 0||p.string(o.tooltip)||Bt.is(o.tooltip))&&(o.paddingLeft===void 0||p.boolean(o.paddingLeft))&&(o.paddingRight===void 0||p.boolean(o.paddingRight))}s.is=f})(Q=e.InlayHint||(e.InlayHint={}));var pe;(function(s){function d(f){var u=f;return p.objectLiteral(u)&&r.is(u.uri)&&p.string(u.name)}s.is=d})(pe=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var _e;(function(s){function d(m,R,W,ge){return new Ae(m,R,W,ge)}s.create=d;function f(m){var R=m;return!!(p.defined(R)&&p.string(R.uri)&&(p.undefined(R.languageId)||p.string(R.languageId))&&p.uinteger(R.lineCount)&&p.func(R.getText)&&p.func(R.positionAt)&&p.func(R.offsetAt))}s.is=f;function u(m,R){for(var W=m.getText(),ge=o(R,function(zt,Kn){var gs=zt.range.start.line-Kn.range.start.line;return gs===0?zt.range.start.character-Kn.range.start.character:gs}),se=W.length,Ue=ge.length-1;Ue>=0;Ue--){var Ve=ge[Ue],at=m.offsetAt(Ve.range.start),z=m.offsetAt(Ve.range.end);if(z<=se)W=W.substring(0,at)+Ve.newText+W.substring(z,W.length);else throw new Error("Overlapping edit");se=at}return W}s.applyEdits=u;function o(m,R){if(m.length<=1)return m;var W=m.length/2|0,ge=m.slice(0,W),se=m.slice(W);o(ge,R),o(se,R);for(var Ue=0,Ve=0,at=0;Ue<ge.length&&Ve<se.length;){var z=R(ge[Ue],se[Ve]);z<=0?m[at++]=ge[Ue++]:m[at++]=se[Ve++]}for(;Ue<ge.length;)m[at++]=ge[Ue++];for(;Ve<se.length;)m[at++]=se[Ve++];return m}})(_e=e.TextDocument||(e.TextDocument={}));var Ae=function(){function s(d,f,u,o){this._uri=d,this._languageId=f,this._version=u,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(d){if(d){var f=this.offsetAt(d.start),u=this.offsetAt(d.end);return this._content.substring(f,u)}return this._content},s.prototype.update=function(d,f){this._content=d.text,this._version=f,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var d=[],f=this._content,u=!0,o=0;o<f.length;o++){u&&(d.push(o),u=!1);var m=f.charAt(o);u=m==="\r"||m===`
`,m==="\r"&&o+1<f.length&&f.charAt(o+1)===`
`&&o++}u&&f.length>0&&d.push(f.length),this._lineOffsets=d}return this._lineOffsets},s.prototype.positionAt=function(d){d=Math.max(Math.min(d,this._content.length),0);var f=this.getLineOffsets(),u=0,o=f.length;if(o===0)return h.create(0,d);for(;u<o;){var m=Math.floor((u+o)/2);f[m]>d?o=m:u=m+1}var R=u-1;return h.create(R,d-f[R])},s.prototype.offsetAt=function(d){var f=this.getLineOffsets();if(d.line>=f.length)return this._content.length;if(d.line<0)return 0;var u=f[d.line],o=d.line+1<f.length?f[d.line+1]:this._content.length;return Math.max(Math.min(u+d.character,o),u)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),p;(function(s){var d=Object.prototype.toString;function f(z){return typeof z<"u"}s.defined=f;function u(z){return typeof z>"u"}s.undefined=u;function o(z){return z===!0||z===!1}s.boolean=o;function m(z){return d.call(z)==="[object String]"}s.string=m;function R(z){return d.call(z)==="[object Number]"}s.number=R;function W(z,zt,Kn){return d.call(z)==="[object Number]"&&zt<=z&&z<=Kn}s.numberRange=W;function ge(z){return d.call(z)==="[object Number]"&&-2147483648<=z&&z<=2147483647}s.integer=ge;function se(z){return d.call(z)==="[object Number]"&&0<=z&&z<=2147483647}s.uinteger=se;function Ue(z){return d.call(z)==="[object Function]"}s.func=Ue;function Ve(z){return z!==null&&typeof z=="object"}s.objectLiteral=Ve;function at(z,zt){return Array.isArray(z)&&z.every(zt)}s.typedArray=at})(p||(p={}))})});var fe=O(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ProtocolNotificationType=Pe.ProtocolNotificationType0=Pe.ProtocolRequestType=Pe.ProtocolRequestType0=Pe.RegistrationType=Pe.MessageDirection=void 0;var en=qt(),Hu;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(Hu=Pe.MessageDirection||(Pe.MessageDirection={}));var So=class{constructor(e){this.method=e}};Pe.RegistrationType=So;var Po=class extends en.RequestType0{constructor(e){super(e)}};Pe.ProtocolRequestType0=Po;var wo=class extends en.RequestType{constructor(e){super(e,en.ParameterStructures.byName)}};Pe.ProtocolRequestType=wo;var Oo=class extends en.NotificationType0{constructor(e){super(e)}};Pe.ProtocolNotificationType0=Oo;var xo=class extends en.NotificationType{constructor(e){super(e,en.ParameterStructures.byName)}};Pe.ProtocolNotificationType=xo});var dr=O(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.objectLiteral=ye.typedArray=ye.stringArray=ye.array=ye.func=ye.error=ye.number=ye.string=ye.boolean=void 0;function Uu(t){return t===!0||t===!1}ye.boolean=Uu;function Ks(t){return typeof t=="string"||t instanceof String}ye.string=Ks;function Vu(t){return typeof t=="number"||t instanceof Number}ye.number=Vu;function Bu(t){return t instanceof Error}ye.error=Bu;function $u(t){return typeof t=="function"}ye.func=$u;function Xs(t){return Array.isArray(t)}ye.array=Xs;function zu(t){return Xs(t)&&t.every(e=>Ks(e))}ye.stringArray=zu;function Gu(t,e){return Array.isArray(t)&&t.every(e)}ye.typedArray=Gu;function Ku(t){return t!==null&&typeof t=="object"}ye.objectLiteral=Ku});var Js=O(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.ImplementationRequest=void 0;var Ys=fe(),Xu;(function(t){t.method="textDocument/implementation",t.messageDirection=Ys.MessageDirection.clientToServer,t.type=new Ys.ProtocolRequestType(t.method)})(Xu=Cn.ImplementationRequest||(Cn.ImplementationRequest={}))});var Zs=O(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.TypeDefinitionRequest=void 0;var Qs=fe(),Yu;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=Qs.MessageDirection.clientToServer,t.type=new Qs.ProtocolRequestType(t.method)})(Yu=Dn.TypeDefinitionRequest||(Dn.TypeDefinitionRequest={}))});var ea=O(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.DidChangeWorkspaceFoldersNotification=vt.WorkspaceFoldersRequest=void 0;var fr=fe(),Ju;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=fr.MessageDirection.serverToClient,t.type=new fr.ProtocolRequestType0(t.method)})(Ju=vt.WorkspaceFoldersRequest||(vt.WorkspaceFoldersRequest={}));var Qu;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=fr.MessageDirection.clientToServer,t.type=new fr.ProtocolNotificationType(t.method)})(Qu=vt.DidChangeWorkspaceFoldersNotification||(vt.DidChangeWorkspaceFoldersNotification={}))});var na=O(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.ConfigurationRequest=void 0;var ta=fe(),Zu;(function(t){t.method="workspace/configuration",t.messageDirection=ta.MessageDirection.serverToClient,t.type=new ta.ProtocolRequestType(t.method)})(Zu=kn.ConfigurationRequest||(kn.ConfigurationRequest={}))});var ra=O(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.ColorPresentationRequest=Tt.DocumentColorRequest=void 0;var hr=fe(),el;(function(t){t.method="textDocument/documentColor",t.messageDirection=hr.MessageDirection.clientToServer,t.type=new hr.ProtocolRequestType(t.method)})(el=Tt.DocumentColorRequest||(Tt.DocumentColorRequest={}));var tl;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=hr.MessageDirection.clientToServer,t.type=new hr.ProtocolRequestType(t.method)})(tl=Tt.ColorPresentationRequest||(Tt.ColorPresentationRequest={}))});var oa=O(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.FoldingRangeRequest=void 0;var ia=fe(),nl;(function(t){t.method="textDocument/foldingRange",t.messageDirection=ia.MessageDirection.clientToServer,t.type=new ia.ProtocolRequestType(t.method)})(nl=En.FoldingRangeRequest||(En.FoldingRangeRequest={}))});var aa=O(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.DeclarationRequest=void 0;var sa=fe(),rl;(function(t){t.method="textDocument/declaration",t.messageDirection=sa.MessageDirection.clientToServer,t.type=new sa.ProtocolRequestType(t.method)})(rl=Nn.DeclarationRequest||(Nn.DeclarationRequest={}))});var ua=O(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.SelectionRangeRequest=void 0;var ca=fe(),il;(function(t){t.method="textDocument/selectionRange",t.messageDirection=ca.MessageDirection.clientToServer,t.type=new ca.ProtocolRequestType(t.method)})(il=Sn.SelectionRangeRequest||(Sn.SelectionRangeRequest={}))});var la=O(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.WorkDoneProgressCancelNotification=ze.WorkDoneProgressCreateRequest=ze.WorkDoneProgress=void 0;var ol=qt(),gr=fe(),sl;(function(t){t.type=new ol.ProgressType;function e(n){return n===t.type}t.is=e})(sl=ze.WorkDoneProgress||(ze.WorkDoneProgress={}));var al;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=gr.MessageDirection.serverToClient,t.type=new gr.ProtocolRequestType(t.method)})(al=ze.WorkDoneProgressCreateRequest||(ze.WorkDoneProgressCreateRequest={}));var cl;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolNotificationType(t.method)})(cl=ze.WorkDoneProgressCancelNotification||(ze.WorkDoneProgressCancelNotification={}))});var da=O(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.CallHierarchyOutgoingCallsRequest=Ge.CallHierarchyIncomingCallsRequest=Ge.CallHierarchyPrepareRequest=void 0;var tn=fe(),ul;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=tn.MessageDirection.clientToServer,t.type=new tn.ProtocolRequestType(t.method)})(ul=Ge.CallHierarchyPrepareRequest||(Ge.CallHierarchyPrepareRequest={}));var ll;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=tn.MessageDirection.clientToServer,t.type=new tn.ProtocolRequestType(t.method)})(ll=Ge.CallHierarchyIncomingCallsRequest||(Ge.CallHierarchyIncomingCallsRequest={}));var dl;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=tn.MessageDirection.clientToServer,t.type=new tn.ProtocolRequestType(t.method)})(dl=Ge.CallHierarchyOutgoingCallsRequest||(Ge.CallHierarchyOutgoingCallsRequest={}))});var fa=O(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.SemanticTokensRefreshRequest=ve.SemanticTokensRangeRequest=ve.SemanticTokensDeltaRequest=ve.SemanticTokensRequest=ve.SemanticTokensRegistrationType=ve.TokenFormat=void 0;var ft=fe(),fl;(function(t){t.Relative="relative"})(fl=ve.TokenFormat||(ve.TokenFormat={}));var pr;(function(t){t.method="textDocument/semanticTokens",t.type=new ft.RegistrationType(t.method)})(pr=ve.SemanticTokensRegistrationType||(ve.SemanticTokensRegistrationType={}));var hl;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=ft.MessageDirection.clientToServer,t.type=new ft.ProtocolRequestType(t.method),t.registrationMethod=pr.method})(hl=ve.SemanticTokensRequest||(ve.SemanticTokensRequest={}));var gl;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=ft.MessageDirection.clientToServer,t.type=new ft.ProtocolRequestType(t.method),t.registrationMethod=pr.method})(gl=ve.SemanticTokensDeltaRequest||(ve.SemanticTokensDeltaRequest={}));var pl;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=ft.MessageDirection.clientToServer,t.type=new ft.ProtocolRequestType(t.method),t.registrationMethod=pr.method})(pl=ve.SemanticTokensRangeRequest||(ve.SemanticTokensRangeRequest={}));var ml;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=ft.MessageDirection.serverToClient,t.type=new ft.ProtocolRequestType0(t.method)})(ml=ve.SemanticTokensRefreshRequest||(ve.SemanticTokensRefreshRequest={}))});var ga=O(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.ShowDocumentRequest=void 0;var ha=fe(),yl;(function(t){t.method="window/showDocument",t.messageDirection=ha.MessageDirection.serverToClient,t.type=new ha.ProtocolRequestType(t.method)})(yl=Pn.ShowDocumentRequest||(Pn.ShowDocumentRequest={}))});var ma=O(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.LinkedEditingRangeRequest=void 0;var pa=fe(),vl;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=pa.MessageDirection.clientToServer,t.type=new pa.ProtocolRequestType(t.method)})(vl=wn.LinkedEditingRangeRequest||(wn.LinkedEditingRangeRequest={}))});var ya=O(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.WillDeleteFilesRequest=he.DidDeleteFilesNotification=he.DidRenameFilesNotification=he.WillRenameFilesRequest=he.DidCreateFilesNotification=he.WillCreateFilesRequest=he.FileOperationPatternKind=void 0;var Le=fe(),Tl;(function(t){t.file="file",t.folder="folder"})(Tl=he.FileOperationPatternKind||(he.FileOperationPatternKind={}));var bl;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Le.MessageDirection.clientToServer,t.type=new Le.ProtocolRequestType(t.method)})(bl=he.WillCreateFilesRequest||(he.WillCreateFilesRequest={}));var _l;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Le.MessageDirection.clientToServer,t.type=new Le.ProtocolNotificationType(t.method)})(_l=he.DidCreateFilesNotification||(he.DidCreateFilesNotification={}));var Rl;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Le.MessageDirection.clientToServer,t.type=new Le.ProtocolRequestType(t.method)})(Rl=he.WillRenameFilesRequest||(he.WillRenameFilesRequest={}));var Cl;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Le.MessageDirection.clientToServer,t.type=new Le.ProtocolNotificationType(t.method)})(Cl=he.DidRenameFilesNotification||(he.DidRenameFilesNotification={}));var Dl;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Le.MessageDirection.clientToServer,t.type=new Le.ProtocolNotificationType(t.method)})(Dl=he.DidDeleteFilesNotification||(he.DidDeleteFilesNotification={}));var kl;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Le.MessageDirection.clientToServer,t.type=new Le.ProtocolRequestType(t.method)})(kl=he.WillDeleteFilesRequest||(he.WillDeleteFilesRequest={}))});var Ta=O(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.MonikerRequest=Ke.MonikerKind=Ke.UniquenessLevel=void 0;var va=fe(),El;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(El=Ke.UniquenessLevel||(Ke.UniquenessLevel={}));var Nl;(function(t){t.$import="import",t.$export="export",t.local="local"})(Nl=Ke.MonikerKind||(Ke.MonikerKind={}));var Sl;(function(t){t.method="textDocument/moniker",t.messageDirection=va.MessageDirection.clientToServer,t.type=new va.ProtocolRequestType(t.method)})(Sl=Ke.MonikerRequest||(Ke.MonikerRequest={}))});var ba=O(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.TypeHierarchySubtypesRequest=Xe.TypeHierarchySupertypesRequest=Xe.TypeHierarchyPrepareRequest=void 0;var nn=fe(),Pl;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(Pl=Xe.TypeHierarchyPrepareRequest||(Xe.TypeHierarchyPrepareRequest={}));var wl;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(wl=Xe.TypeHierarchySupertypesRequest||(Xe.TypeHierarchySupertypesRequest={}));var Ol;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(Ol=Xe.TypeHierarchySubtypesRequest||(Xe.TypeHierarchySubtypesRequest={}))});var _a=O(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.InlineValueRefreshRequest=bt.InlineValueRequest=void 0;var mr=fe(),xl;(function(t){t.method="textDocument/inlineValue",t.messageDirection=mr.MessageDirection.clientToServer,t.type=new mr.ProtocolRequestType(t.method)})(xl=bt.InlineValueRequest||(bt.InlineValueRequest={}));var Il;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=mr.MessageDirection.serverToClient,t.type=new mr.ProtocolRequestType0(t.method)})(Il=bt.InlineValueRefreshRequest||(bt.InlineValueRefreshRequest={}))});var Ra=O(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.InlayHintRefreshRequest=Ye.InlayHintResolveRequest=Ye.InlayHintRequest=void 0;var rn=fe(),ql;(function(t){t.method="textDocument/inlayHint",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(ql=Ye.InlayHintRequest||(Ye.InlayHintRequest={}));var Ml;(function(t){t.method="inlayHint/resolve",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(Ml=Ye.InlayHintResolveRequest||(Ye.InlayHintResolveRequest={}));var Fl;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=rn.MessageDirection.serverToClient,t.type=new rn.ProtocolRequestType0(t.method)})(Fl=Ye.InlayHintRefreshRequest||(Ye.InlayHintRefreshRequest={}))});var Da=O(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.DiagnosticRefreshRequest=Ce.WorkspaceDiagnosticRequest=Ce.DocumentDiagnosticRequest=Ce.DocumentDiagnosticReportKind=Ce.DiagnosticServerCancellationData=void 0;var Ca=qt(),Al=dr(),on=fe(),Ll;(function(t){function e(n){let r=n;return r&&Al.boolean(r.retriggerRequest)}t.is=e})(Ll=Ce.DiagnosticServerCancellationData||(Ce.DiagnosticServerCancellationData={}));var jl;(function(t){t.Full="full",t.Unchanged="unchanged"})(jl=Ce.DocumentDiagnosticReportKind||(Ce.DocumentDiagnosticReportKind={}));var Wl;(function(t){t.method="textDocument/diagnostic",t.messageDirection=on.MessageDirection.clientToServer,t.type=new on.ProtocolRequestType(t.method),t.partialResult=new Ca.ProgressType})(Wl=Ce.DocumentDiagnosticRequest||(Ce.DocumentDiagnosticRequest={}));var Hl;(function(t){t.method="workspace/diagnostic",t.messageDirection=on.MessageDirection.clientToServer,t.type=new on.ProtocolRequestType(t.method),t.partialResult=new Ca.ProgressType})(Hl=Ce.WorkspaceDiagnosticRequest||(Ce.WorkspaceDiagnosticRequest={}));var Ul;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=on.MessageDirection.serverToClient,t.type=new on.ProtocolRequestType0(t.method)})(Ul=Ce.DiagnosticRefreshRequest||(Ce.DiagnosticRefreshRequest={}))});var Na=O(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.DidCloseNotebookDocumentNotification=J.DidSaveNotebookDocumentNotification=J.DidChangeNotebookDocumentNotification=J.NotebookCellArrayChange=J.DidOpenNotebookDocumentNotification=J.NotebookDocumentSyncRegistrationType=J.NotebookDocument=J.NotebookCell=J.ExecutionSummary=J.NotebookCellKind=void 0;var On=lr(),Je=dr(),tt=fe(),ka;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(ka=J.NotebookCellKind||(J.NotebookCellKind={}));var Ea;(function(t){function e(i,c){let h={executionOrder:i};return(c===!0||c===!1)&&(h.success=c),h}t.create=e;function n(i){let c=i;return Je.objectLiteral(c)&&On.uinteger.is(c.executionOrder)&&(c.success===void 0||Je.boolean(c.success))}t.is=n;function r(i,c){return i===c?!0:i==null||c===null||c===void 0?!1:i.executionOrder===c.executionOrder&&i.success===c.success}t.equals=r})(Ea=J.ExecutionSummary||(J.ExecutionSummary={}));var Io;(function(t){function e(c,h){return{kind:c,document:h}}t.create=e;function n(c){let h=c;return Je.objectLiteral(h)&&ka.is(h.kind)&&On.DocumentUri.is(h.document)&&(h.metadata===void 0||Je.objectLiteral(h.metadata))}t.is=n;function r(c,h){let v=new Set;return c.document!==h.document&&v.add("document"),c.kind!==h.kind&&v.add("kind"),c.executionSummary!==h.executionSummary&&v.add("executionSummary"),(c.metadata!==void 0||h.metadata!==void 0)&&!i(c.metadata,h.metadata)&&v.add("metadata"),(c.executionSummary!==void 0||h.executionSummary!==void 0)&&!Ea.equals(c.executionSummary,h.executionSummary)&&v.add("executionSummary"),v}t.diff=r;function i(c,h){if(c===h)return!0;if(c==null||h===null||h===void 0||typeof c!=typeof h||typeof c!="object")return!1;let v=Array.isArray(c),C=Array.isArray(h);if(v!==C)return!1;if(v&&C){if(c.length!==h.length)return!1;for(let b=0;b<c.length;b++)if(!i(c[b],h[b]))return!1}if(Je.objectLiteral(c)&&Je.objectLiteral(h)){let b=Object.keys(c),D=Object.keys(h);if(b.length!==D.length||(b.sort(),D.sort(),!i(b,D)))return!1;for(let w=0;w<b.length;w++){let N=b[w];if(!i(c[N],h[N]))return!1}}return!0}})(Io=J.NotebookCell||(J.NotebookCell={}));var Vl;(function(t){function e(r,i,c,h){return{uri:r,notebookType:i,version:c,cells:h}}t.create=e;function n(r){let i=r;return Je.objectLiteral(i)&&Je.string(i.uri)&&On.integer.is(i.version)&&Je.typedArray(i.cells,Io.is)}t.is=n})(Vl=J.NotebookDocument||(J.NotebookDocument={}));var xn;(function(t){t.method="notebookDocument/sync",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.RegistrationType(t.method)})(xn=J.NotebookDocumentSyncRegistrationType||(J.NotebookDocumentSyncRegistrationType={}));var Bl;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.ProtocolNotificationType(t.method),t.registrationMethod=xn.method})(Bl=J.DidOpenNotebookDocumentNotification||(J.DidOpenNotebookDocumentNotification={}));var $l;(function(t){function e(r){let i=r;return Je.objectLiteral(i)&&On.uinteger.is(i.start)&&On.uinteger.is(i.deleteCount)&&(i.cells===void 0||Je.typedArray(i.cells,Io.is))}t.is=e;function n(r,i,c){let h={start:r,deleteCount:i};return c!==void 0&&(h.cells=c),h}t.create=n})($l=J.NotebookCellArrayChange||(J.NotebookCellArrayChange={}));var zl;(function(t){t.method="notebookDocument/didChange",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.ProtocolNotificationType(t.method),t.registrationMethod=xn.method})(zl=J.DidChangeNotebookDocumentNotification||(J.DidChangeNotebookDocumentNotification={}));var Gl;(function(t){t.method="notebookDocument/didSave",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.ProtocolNotificationType(t.method),t.registrationMethod=xn.method})(Gl=J.DidSaveNotebookDocumentNotification||(J.DidSaveNotebookDocumentNotification={}));var Kl;(function(t){t.method="notebookDocument/didClose",t.messageDirection=tt.MessageDirection.clientToServer,t.type=new tt.ProtocolNotificationType(t.method),t.registrationMethod=xn.method})(Kl=J.DidCloseNotebookDocumentNotification||(J.DidCloseNotebookDocumentNotification={}))});var Fa=O(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.WorkspaceSymbolRequest=a.CodeActionResolveRequest=a.CodeActionRequest=a.DocumentSymbolRequest=a.DocumentHighlightRequest=a.ReferencesRequest=a.DefinitionRequest=a.SignatureHelpRequest=a.SignatureHelpTriggerKind=a.HoverRequest=a.CompletionResolveRequest=a.CompletionRequest=a.CompletionTriggerKind=a.PublishDiagnosticsNotification=a.WatchKind=a.RelativePattern=a.FileChangeType=a.DidChangeWatchedFilesNotification=a.WillSaveTextDocumentWaitUntilRequest=a.WillSaveTextDocumentNotification=a.TextDocumentSaveReason=a.DidSaveTextDocumentNotification=a.DidCloseTextDocumentNotification=a.DidChangeTextDocumentNotification=a.TextDocumentContentChangeEvent=a.DidOpenTextDocumentNotification=a.TextDocumentSyncKind=a.TelemetryEventNotification=a.LogMessageNotification=a.ShowMessageRequest=a.ShowMessageNotification=a.MessageType=a.DidChangeConfigurationNotification=a.ExitNotification=a.ShutdownRequest=a.InitializedNotification=a.InitializeErrorCodes=a.InitializeRequest=a.WorkDoneProgressOptions=a.TextDocumentRegistrationOptions=a.StaticRegistrationOptions=a.PositionEncodingKind=a.FailureHandlingKind=a.ResourceOperationKind=a.UnregistrationRequest=a.RegistrationRequest=a.DocumentSelector=a.NotebookCellTextDocumentFilter=a.NotebookDocumentFilter=a.TextDocumentFilter=void 0;a.TypeHierarchySubtypesRequest=a.TypeHierarchyPrepareRequest=a.MonikerRequest=a.MonikerKind=a.UniquenessLevel=a.WillDeleteFilesRequest=a.DidDeleteFilesNotification=a.WillRenameFilesRequest=a.DidRenameFilesNotification=a.WillCreateFilesRequest=a.DidCreateFilesNotification=a.FileOperationPatternKind=a.LinkedEditingRangeRequest=a.ShowDocumentRequest=a.SemanticTokensRegistrationType=a.SemanticTokensRefreshRequest=a.SemanticTokensRangeRequest=a.SemanticTokensDeltaRequest=a.SemanticTokensRequest=a.TokenFormat=a.CallHierarchyPrepareRequest=a.CallHierarchyOutgoingCallsRequest=a.CallHierarchyIncomingCallsRequest=a.WorkDoneProgressCancelNotification=a.WorkDoneProgressCreateRequest=a.WorkDoneProgress=a.SelectionRangeRequest=a.DeclarationRequest=a.FoldingRangeRequest=a.ColorPresentationRequest=a.DocumentColorRequest=a.ConfigurationRequest=a.DidChangeWorkspaceFoldersNotification=a.WorkspaceFoldersRequest=a.TypeDefinitionRequest=a.ImplementationRequest=a.ApplyWorkspaceEditRequest=a.ExecuteCommandRequest=a.PrepareRenameRequest=a.RenameRequest=a.PrepareSupportDefaultBehavior=a.DocumentOnTypeFormattingRequest=a.DocumentRangeFormattingRequest=a.DocumentFormattingRequest=a.DocumentLinkResolveRequest=a.DocumentLinkRequest=a.CodeLensRefreshRequest=a.CodeLensResolveRequest=a.CodeLensRequest=a.WorkspaceSymbolResolveRequest=void 0;a.DidCloseNotebookDocumentNotification=a.DidSaveNotebookDocumentNotification=a.DidChangeNotebookDocumentNotification=a.NotebookCellArrayChange=a.DidOpenNotebookDocumentNotification=a.NotebookDocumentSyncRegistrationType=a.NotebookDocument=a.NotebookCell=a.ExecutionSummary=a.NotebookCellKind=a.DiagnosticRefreshRequest=a.WorkspaceDiagnosticRequest=a.DocumentDiagnosticRequest=a.DocumentDiagnosticReportKind=a.DiagnosticServerCancellationData=a.InlayHintRefreshRequest=a.InlayHintResolveRequest=a.InlayHintRequest=a.InlineValueRefreshRequest=a.InlineValueRequest=a.TypeHierarchySupertypesRequest=void 0;var E=fe(),Sa=lr(),De=dr(),Xl=Js();Object.defineProperty(a,"ImplementationRequest",{enumerable:!0,get:function(){return Xl.ImplementationRequest}});var Yl=Zs();Object.defineProperty(a,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Yl.TypeDefinitionRequest}});var Pa=ea();Object.defineProperty(a,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Pa.WorkspaceFoldersRequest}});Object.defineProperty(a,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Pa.DidChangeWorkspaceFoldersNotification}});var Jl=na();Object.defineProperty(a,"ConfigurationRequest",{enumerable:!0,get:function(){return Jl.ConfigurationRequest}});var wa=ra();Object.defineProperty(a,"DocumentColorRequest",{enumerable:!0,get:function(){return wa.DocumentColorRequest}});Object.defineProperty(a,"ColorPresentationRequest",{enumerable:!0,get:function(){return wa.ColorPresentationRequest}});var Ql=oa();Object.defineProperty(a,"FoldingRangeRequest",{enumerable:!0,get:function(){return Ql.FoldingRangeRequest}});var Zl=aa();Object.defineProperty(a,"DeclarationRequest",{enumerable:!0,get:function(){return Zl.DeclarationRequest}});var ed=ua();Object.defineProperty(a,"SelectionRangeRequest",{enumerable:!0,get:function(){return ed.SelectionRangeRequest}});var qo=la();Object.defineProperty(a,"WorkDoneProgress",{enumerable:!0,get:function(){return qo.WorkDoneProgress}});Object.defineProperty(a,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return qo.WorkDoneProgressCreateRequest}});Object.defineProperty(a,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return qo.WorkDoneProgressCancelNotification}});var Mo=da();Object.defineProperty(a,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Mo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(a,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Mo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(a,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Mo.CallHierarchyPrepareRequest}});var sn=fa();Object.defineProperty(a,"TokenFormat",{enumerable:!0,get:function(){return sn.TokenFormat}});Object.defineProperty(a,"SemanticTokensRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRequest}});Object.defineProperty(a,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return sn.SemanticTokensDeltaRequest}});Object.defineProperty(a,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRangeRequest}});Object.defineProperty(a,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRefreshRequest}});Object.defineProperty(a,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return sn.SemanticTokensRegistrationType}});var td=ga();Object.defineProperty(a,"ShowDocumentRequest",{enumerable:!0,get:function(){return td.ShowDocumentRequest}});var nd=ma();Object.defineProperty(a,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return nd.LinkedEditingRangeRequest}});var Mt=ya();Object.defineProperty(a,"FileOperationPatternKind",{enumerable:!0,get:function(){return Mt.FileOperationPatternKind}});Object.defineProperty(a,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Mt.DidCreateFilesNotification}});Object.defineProperty(a,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Mt.WillCreateFilesRequest}});Object.defineProperty(a,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Mt.DidRenameFilesNotification}});Object.defineProperty(a,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Mt.WillRenameFilesRequest}});Object.defineProperty(a,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Mt.DidDeleteFilesNotification}});Object.defineProperty(a,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Mt.WillDeleteFilesRequest}});var Fo=Ta();Object.defineProperty(a,"UniquenessLevel",{enumerable:!0,get:function(){return Fo.UniquenessLevel}});Object.defineProperty(a,"MonikerKind",{enumerable:!0,get:function(){return Fo.MonikerKind}});Object.defineProperty(a,"MonikerRequest",{enumerable:!0,get:function(){return Fo.MonikerRequest}});var Ao=ba();Object.defineProperty(a,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ao.TypeHierarchyPrepareRequest}});Object.defineProperty(a,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Ao.TypeHierarchySubtypesRequest}});Object.defineProperty(a,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Ao.TypeHierarchySupertypesRequest}});var Oa=_a();Object.defineProperty(a,"InlineValueRequest",{enumerable:!0,get:function(){return Oa.InlineValueRequest}});Object.defineProperty(a,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Oa.InlineValueRefreshRequest}});var Lo=Ra();Object.defineProperty(a,"InlayHintRequest",{enumerable:!0,get:function(){return Lo.InlayHintRequest}});Object.defineProperty(a,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Lo.InlayHintResolveRequest}});Object.defineProperty(a,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Lo.InlayHintRefreshRequest}});var In=Da();Object.defineProperty(a,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return In.DiagnosticServerCancellationData}});Object.defineProperty(a,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return In.DocumentDiagnosticReportKind}});Object.defineProperty(a,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return In.DocumentDiagnosticRequest}});Object.defineProperty(a,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return In.WorkspaceDiagnosticRequest}});Object.defineProperty(a,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return In.DiagnosticRefreshRequest}});var nt=Na();Object.defineProperty(a,"NotebookCellKind",{enumerable:!0,get:function(){return nt.NotebookCellKind}});Object.defineProperty(a,"ExecutionSummary",{enumerable:!0,get:function(){return nt.ExecutionSummary}});Object.defineProperty(a,"NotebookCell",{enumerable:!0,get:function(){return nt.NotebookCell}});Object.defineProperty(a,"NotebookDocument",{enumerable:!0,get:function(){return nt.NotebookDocument}});Object.defineProperty(a,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return nt.NotebookDocumentSyncRegistrationType}});Object.defineProperty(a,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return nt.DidOpenNotebookDocumentNotification}});Object.defineProperty(a,"NotebookCellArrayChange",{enumerable:!0,get:function(){return nt.NotebookCellArrayChange}});Object.defineProperty(a,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return nt.DidChangeNotebookDocumentNotification}});Object.defineProperty(a,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return nt.DidSaveNotebookDocumentNotification}});Object.defineProperty(a,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return nt.DidCloseNotebookDocumentNotification}});var xa;(function(t){function e(n){let r=n;return De.string(r.language)||De.string(r.scheme)||De.string(r.pattern)}t.is=e})(xa=a.TextDocumentFilter||(a.TextDocumentFilter={}));var Ia;(function(t){function e(n){let r=n;return De.objectLiteral(r)&&(De.string(r.notebookType)||De.string(r.scheme)||De.string(r.pattern))}t.is=e})(Ia=a.NotebookDocumentFilter||(a.NotebookDocumentFilter={}));var qa;(function(t){function e(n){let r=n;return De.objectLiteral(r)&&(De.string(r.notebook)||Ia.is(r.notebook))&&(r.language===void 0||De.string(r.language))}t.is=e})(qa=a.NotebookCellTextDocumentFilter||(a.NotebookCellTextDocumentFilter={}));var Ma;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!De.string(r)&&!xa.is(r)&&!qa.is(r))return!1;return!0}t.is=e})(Ma=a.DocumentSelector||(a.DocumentSelector={}));var rd;(function(t){t.method="client/registerCapability",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType(t.method)})(rd=a.RegistrationRequest||(a.RegistrationRequest={}));var id;(function(t){t.method="client/unregisterCapability",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType(t.method)})(id=a.UnregistrationRequest||(a.UnregistrationRequest={}));var od;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(od=a.ResourceOperationKind||(a.ResourceOperationKind={}));var sd;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(sd=a.FailureHandlingKind||(a.FailureHandlingKind={}));var ad;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(ad=a.PositionEncodingKind||(a.PositionEncodingKind={}));var cd;(function(t){function e(n){let r=n;return r&&De.string(r.id)&&r.id.length>0}t.hasId=e})(cd=a.StaticRegistrationOptions||(a.StaticRegistrationOptions={}));var ud;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Ma.is(r.documentSelector))}t.is=e})(ud=a.TextDocumentRegistrationOptions||(a.TextDocumentRegistrationOptions={}));var ld;(function(t){function e(r){let i=r;return De.objectLiteral(i)&&(i.workDoneProgress===void 0||De.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&De.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(ld=a.WorkDoneProgressOptions||(a.WorkDoneProgressOptions={}));var dd;(function(t){t.method="initialize",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(dd=a.InitializeRequest||(a.InitializeRequest={}));var fd;(function(t){t.unknownProtocolVersion=1})(fd=a.InitializeErrorCodes||(a.InitializeErrorCodes={}));var hd;(function(t){t.method="initialized",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(hd=a.InitializedNotification||(a.InitializedNotification={}));var gd;(function(t){t.method="shutdown",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType0(t.method)})(gd=a.ShutdownRequest||(a.ShutdownRequest={}));var pd;(function(t){t.method="exit",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType0(t.method)})(pd=a.ExitNotification||(a.ExitNotification={}));var md;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(md=a.DidChangeConfigurationNotification||(a.DidChangeConfigurationNotification={}));var yd;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(yd=a.MessageType||(a.MessageType={}));var vd;(function(t){t.method="window/showMessage",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolNotificationType(t.method)})(vd=a.ShowMessageNotification||(a.ShowMessageNotification={}));var Td;(function(t){t.method="window/showMessageRequest",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType(t.method)})(Td=a.ShowMessageRequest||(a.ShowMessageRequest={}));var bd;(function(t){t.method="window/logMessage",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolNotificationType(t.method)})(bd=a.LogMessageNotification||(a.LogMessageNotification={}));var _d;(function(t){t.method="telemetry/event",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolNotificationType(t.method)})(_d=a.TelemetryEventNotification||(a.TelemetryEventNotification={}));var Rd;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Rd=a.TextDocumentSyncKind||(a.TextDocumentSyncKind={}));var Cd;(function(t){t.method="textDocument/didOpen",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Cd=a.DidOpenTextDocumentNotification||(a.DidOpenTextDocumentNotification={}));var Dd;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(Dd=a.TextDocumentContentChangeEvent||(a.TextDocumentContentChangeEvent={}));var kd;(function(t){t.method="textDocument/didChange",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(kd=a.DidChangeTextDocumentNotification||(a.DidChangeTextDocumentNotification={}));var Ed;(function(t){t.method="textDocument/didClose",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Ed=a.DidCloseTextDocumentNotification||(a.DidCloseTextDocumentNotification={}));var Nd;(function(t){t.method="textDocument/didSave",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Nd=a.DidSaveTextDocumentNotification||(a.DidSaveTextDocumentNotification={}));var Sd;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Sd=a.TextDocumentSaveReason||(a.TextDocumentSaveReason={}));var Pd;(function(t){t.method="textDocument/willSave",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Pd=a.WillSaveTextDocumentNotification||(a.WillSaveTextDocumentNotification={}));var wd;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(wd=a.WillSaveTextDocumentWaitUntilRequest||(a.WillSaveTextDocumentWaitUntilRequest={}));var Od;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolNotificationType(t.method)})(Od=a.DidChangeWatchedFilesNotification||(a.DidChangeWatchedFilesNotification={}));var xd;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(xd=a.FileChangeType||(a.FileChangeType={}));var Id;(function(t){function e(n){let r=n;return De.objectLiteral(r)&&(Sa.URI.is(r.baseUri)||Sa.WorkspaceFolder.is(r.baseUri))&&De.string(r.pattern)}t.is=e})(Id=a.RelativePattern||(a.RelativePattern={}));var qd;(function(t){t.Create=1,t.Change=2,t.Delete=4})(qd=a.WatchKind||(a.WatchKind={}));var Md;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolNotificationType(t.method)})(Md=a.PublishDiagnosticsNotification||(a.PublishDiagnosticsNotification={}));var Fd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Fd=a.CompletionTriggerKind||(a.CompletionTriggerKind={}));var Ad;(function(t){t.method="textDocument/completion",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Ad=a.CompletionRequest||(a.CompletionRequest={}));var Ld;(function(t){t.method="completionItem/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Ld=a.CompletionResolveRequest||(a.CompletionResolveRequest={}));var jd;(function(t){t.method="textDocument/hover",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(jd=a.HoverRequest||(a.HoverRequest={}));var Wd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(Wd=a.SignatureHelpTriggerKind||(a.SignatureHelpTriggerKind={}));var Hd;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Hd=a.SignatureHelpRequest||(a.SignatureHelpRequest={}));var Ud;(function(t){t.method="textDocument/definition",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Ud=a.DefinitionRequest||(a.DefinitionRequest={}));var Vd;(function(t){t.method="textDocument/references",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Vd=a.ReferencesRequest||(a.ReferencesRequest={}));var Bd;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Bd=a.DocumentHighlightRequest||(a.DocumentHighlightRequest={}));var $d;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})($d=a.DocumentSymbolRequest||(a.DocumentSymbolRequest={}));var zd;(function(t){t.method="textDocument/codeAction",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(zd=a.CodeActionRequest||(a.CodeActionRequest={}));var Gd;(function(t){t.method="codeAction/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Gd=a.CodeActionResolveRequest||(a.CodeActionResolveRequest={}));var Kd;(function(t){t.method="workspace/symbol",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Kd=a.WorkspaceSymbolRequest||(a.WorkspaceSymbolRequest={}));var Xd;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Xd=a.WorkspaceSymbolResolveRequest||(a.WorkspaceSymbolResolveRequest={}));var Yd;(function(t){t.method="textDocument/codeLens",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Yd=a.CodeLensRequest||(a.CodeLensRequest={}));var Jd;(function(t){t.method="codeLens/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Jd=a.CodeLensResolveRequest||(a.CodeLensResolveRequest={}));var Qd;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType0(t.method)})(Qd=a.CodeLensRefreshRequest||(a.CodeLensRefreshRequest={}));var Zd;(function(t){t.method="textDocument/documentLink",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(Zd=a.DocumentLinkRequest||(a.DocumentLinkRequest={}));var ef;(function(t){t.method="documentLink/resolve",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(ef=a.DocumentLinkResolveRequest||(a.DocumentLinkResolveRequest={}));var tf;(function(t){t.method="textDocument/formatting",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(tf=a.DocumentFormattingRequest||(a.DocumentFormattingRequest={}));var nf;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(nf=a.DocumentRangeFormattingRequest||(a.DocumentRangeFormattingRequest={}));var rf;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(rf=a.DocumentOnTypeFormattingRequest||(a.DocumentOnTypeFormattingRequest={}));var of;(function(t){t.Identifier=1})(of=a.PrepareSupportDefaultBehavior||(a.PrepareSupportDefaultBehavior={}));var sf;(function(t){t.method="textDocument/rename",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(sf=a.RenameRequest||(a.RenameRequest={}));var af;(function(t){t.method="textDocument/prepareRename",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(af=a.PrepareRenameRequest||(a.PrepareRenameRequest={}));var cf;(function(t){t.method="workspace/executeCommand",t.messageDirection=E.MessageDirection.clientToServer,t.type=new E.ProtocolRequestType(t.method)})(cf=a.ExecuteCommandRequest||(a.ExecuteCommandRequest={}));var uf;(function(t){t.method="workspace/applyEdit",t.messageDirection=E.MessageDirection.serverToClient,t.type=new E.ProtocolRequestType("workspace/applyEdit")})(uf=a.ApplyWorkspaceEditRequest||(a.ApplyWorkspaceEditRequest={}))});var La=O(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.createProtocolConnection=void 0;var Aa=qt();function lf(t,e,n,r){return Aa.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Aa.createMessageConnection)(t,e,n,r)}yr.createProtocolConnection=lf});var ja=O(we=>{"use strict";var df=we&&we.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),vr=we&&we.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&df(e,t,n)};Object.defineProperty(we,"__esModule",{value:!0});we.LSPErrorCodes=we.createProtocolConnection=void 0;vr(qt(),we);vr(lr(),we);vr(fe(),we);vr(Fa(),we);var ff=La();Object.defineProperty(we,"createProtocolConnection",{enumerable:!0,get:function(){return ff.createProtocolConnection}});var hf;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(hf=we.LSPErrorCodes||(we.LSPErrorCodes={}))});var Te=O(rt=>{"use strict";var gf=rt&&rt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Wa=rt&&rt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&gf(e,t,n)};Object.defineProperty(rt,"__esModule",{value:!0});rt.createProtocolConnection=void 0;var pf=No();Wa(No(),rt);Wa(ja(),rt);function mf(t,e,n,r){return(0,pf.createMessageConnection)(t,e,n,r)}rt.createProtocolConnection=mf});var jo=O(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.generateUuid=je.parse=je.isUUID=je.v4=je.empty=void 0;var qn=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},U=class extends qn{constructor(){super([U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),"-",U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),"-","4",U._randomHex(),U._randomHex(),U._randomHex(),"-",U._oneOf(U._timeHighBits),U._randomHex(),U._randomHex(),U._randomHex(),"-",U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex(),U._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return U._oneOf(U._chars)}};U._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];U._timeHighBits=["8","9","a","b"];je.empty=new qn("00000000-0000-0000-0000-000000000000");function Ha(){return new U}je.v4=Ha;var yf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ua(t){return yf.test(t)}je.isUUID=Ua;function vf(t){if(!Ua(t))throw new Error("invalid uuid");return new qn(t)}je.parse=vf;function Tf(){return Ha().asHex()}je.generateUuid=Tf});var Va=O(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.attachPartialResult=Rt.ProgressFeature=Rt.attachWorkDone=void 0;var _t=Te(),bf=jo(),it=class{constructor(e,n){this._connection=e,this._token=n,it.Instances.set(this._token,this)}begin(e,n,r,i){let c={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,c)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,r)}done(){it.Instances.delete(this._token),this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,{kind:"end"})}};it.Instances=new Map;var Tr=class extends it{constructor(e,n){super(e,n),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Mn=class{constructor(){}begin(){}report(){}done(){}},br=class extends Mn{constructor(){super(),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function _f(t,e){if(e===void 0||e.workDoneToken===void 0)return new Mn;let n=e.workDoneToken;return delete e.workDoneToken,new it(t,n)}Rt.attachWorkDone=_f;var Rf=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(_t.WorkDoneProgressCancelNotification.type,n=>{let r=it.Instances.get(n.token);(r instanceof Tr||r instanceof br)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Mn:new it(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,bf.generateUuid)();return this.connection.sendRequest(_t.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Tr(this.connection,e))}else return Promise.resolve(new br)}};Rt.ProgressFeature=Rf;var Wo;(function(t){t.type=new _t.ProgressType})(Wo||(Wo={}));var Ho=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Wo.type,this._token,e)}};function Cf(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new Ho(t,n)}Rt.attachPartialResult=Cf});var Ba=O(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.ConfigurationFeature=void 0;var Df=Te(),kf=Yn(),Ef=t=>class extends t{getConfiguration(e){return e?kf.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Df.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};_r.ConfigurationFeature=Ef});var $a=O(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.WorkspaceFoldersFeature=void 0;var Rr=Te(),Nf=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Rr.Emitter,this.connection.onNotification(Rr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Rr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Rr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Cr.WorkspaceFoldersFeature=Nf});var za=O(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.CallHierarchyFeature=void 0;var Uo=Te(),Sf=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Uo.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{let n=Uo.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=Uo.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Dr.CallHierarchyFeature=Sf});var Bo=O(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.SemanticTokensBuilder=Ct.SemanticTokensDiff=Ct.SemanticTokensFeature=void 0;var kr=Te(),Pf=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(kr.SemanticTokensRefreshRequest.type),on:e=>{let n=kr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=kr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=kr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ct.SemanticTokensFeature=Pf;var Er=class{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,c=n-1;for(;i>=r&&c>=r&&this.originalSequence[i]===this.modifiedSequence[c];)i--,c--;(i<r||c<r)&&(i++,c++);let h=i-r+1,v=this.modifiedSequence.slice(r,c+1);return v.length===1&&v[0]===this.originalSequence[i]?[{start:r,deleteCount:h-1}]:[{start:r,deleteCount:h,data:v}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};Ct.SemanticTokensDiff=Er;var Vo=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,c){let h=e,v=n;this._dataLen>0&&(h-=this._prevLine,h===0&&(v-=this._prevChar)),this._data[this._dataLen++]=h,this._data[this._dataLen++]=v,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=c,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Er(this._prevData,this._data).computeDiff()}:this.build()}};Ct.SemanticTokensBuilder=Vo});var Ga=O(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.ShowDocumentFeature=void 0;var wf=Te(),Of=t=>class extends t{showDocument(e){return this.connection.sendRequest(wf.ShowDocumentRequest.type,e)}};Nr.ShowDocumentFeature=Of});var Ka=O(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.FileOperationsFeature=void 0;var an=Te(),xf=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(an.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(an.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(an.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(an.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(an.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(an.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};Sr.FileOperationsFeature=xf});var Xa=O(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.LinkedEditingRangeFeature=void 0;var If=Te(),qf=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(If.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};Pr.LinkedEditingRangeFeature=qf});var Ya=O(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.TypeHierarchyFeature=void 0;var $o=Te(),Mf=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest($o.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{let n=$o.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:e=>{let n=$o.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};wr.TypeHierarchyFeature=Mf});var Qa=O(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.InlineValueFeature=void 0;var Ja=Te(),Ff=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(Ja.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(Ja.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};Or.InlineValueFeature=Ff});var Za=O(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.InlayHintFeature=void 0;var zo=Te(),Af=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(zo.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(zo.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(zo.InlayHintResolveRequest.type,(n,r)=>e(n,r))}}};xr.InlayHintFeature=Af});var ec=O(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.DiagnosticFeature=void 0;var Fn=Te(),Lf=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Fn.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(Fn.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Fn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(Fn.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Fn.WorkspaceDiagnosticRequest.partialResult,n)))}}};Ir.DiagnosticFeature=Lf});var Ko=O(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.TextDocuments=void 0;var Ft=Te(),Go=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Ft.Emitter,this._onDidOpen=new Ft.Emitter,this._onDidClose=new Ft.Emitter,this._onDidSave=new Ft.Emitter,this._onWillSave=new Ft.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Ft.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,c=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,c);let h=Object.freeze({document:c});this._onDidOpen.fire(h),this._onDidChangeContent.fire(h)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,c=r.contentChanges;if(c.length===0)return;let{version:h}=i;if(h==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let v=this._syncedDocuments.get(i.uri);v!==void 0&&(v=this._configuration.update(v,c,h),this._syncedDocuments.set(i.uri,v),this._onDidChangeContent.fire(Object.freeze({document:v})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let c=this._syncedDocuments.get(r.textDocument.uri);return c!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:c,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Ft.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};qr.TextDocuments=Go});var Yo=O(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.NotebookDocuments=cn.NotebookSyncFeature=void 0;var We=Te(),tc=Ko(),jf=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(We.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(We.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(We.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(We.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};cn.NotebookSyncFeature=jf;var Dt=class{onDidOpenTextDocument(e){return this.openHandler=e,We.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,We.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,We.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return Dt.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return Dt.NULL_DISPOSE}onDidSaveTextDocument(){return Dt.NULL_DISPOSE}};Dt.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var Xo=class{constructor(e){e instanceof tc.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new tc.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new We.Emitter,this._onDidChange=new We.Emitter,this._onDidSave=new We.Emitter,this._onDidClose=new We.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new Dt,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let c of i.cellTextDocuments)n.openTextDocument({textDocument:c});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c===void 0)return;c.version=i.notebookDocument.version;let h=c.metadata,v=!1,C=i.change;C.metadata!==void 0&&(v=!0,c.metadata=C.metadata);let b=[],D=[],w=[],N=[];if(C.cells!==void 0){let H=C.cells;if(H.structure!==void 0){let y=H.structure.array;if(c.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),H.structure.didOpen!==void 0)for(let g of H.structure.didOpen)n.openTextDocument({textDocument:g}),b.push(g.uri);if(H.structure.didClose)for(let g of H.structure.didClose)n.closeTextDocument({textDocument:g}),D.push(g.uri)}if(H.data!==void 0){let y=new Map(H.data.map(g=>[g.document,g]));for(let g=0;g<=c.cells.length;g++){let k=y.get(c.cells[g].document);if(k!==void 0){let F=c.cells.splice(g,1,k);if(w.push({old:F[0],new:k}),y.delete(k.document),y.size===0)break}}}if(H.textContent!==void 0)for(let y of H.textContent)n.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),N.push(y.document.uri)}this.updateCellMap(c);let L={notebookDocument:c};v&&(L.metadata={old:h,new:c.metadata});let $=[];for(let H of b)$.push(this.getNotebookCell(H));let X=[];for(let H of D)X.push(this.getNotebookCell(H));let Z=[];for(let H of N)Z.push(this.getNotebookCell(H));($.length>0||X.length>0||w.length>0||Z.length>0)&&(L.cells={added:$,removed:X,changed:{data:w,textContent:Z}}),(L.metadata!==void 0||L.cells!==void 0)&&this._onDidChange.fire(L)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);c!==void 0&&this._onDidSave.fire(c)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c!==void 0){this._onDidClose.fire(c);for(let h of i.cellTextDocuments)n.closeTextDocument({textDocument:h});this.notebookDocuments.delete(i.notebookDocument.uri);for(let h of c.cells)this.notebookCellMap.delete(h.document)}})),We.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};cn.NotebookDocuments=Xo});var nc=O(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.MonikerFeature=void 0;var Wf=Te(),Hf=t=>class extends t{get moniker(){return{on:e=>{let n=Wf.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Mr.MonikerFeature=Hf});var ns=O(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.createConnection=K.combineFeatures=K.combineNotebooksFeatures=K.combineLanguagesFeatures=K.combineWorkspaceFeatures=K.combineWindowFeatures=K.combineClientFeatures=K.combineTracerFeatures=K.combineTelemetryFeatures=K.combineConsoleFeatures=K._NotebooksImpl=K._LanguagesImpl=K.BulkUnregistration=K.BulkRegistration=K.ErrorMessageTracker=void 0;var P=Te(),He=Yn(),Qo=jo(),j=Va(),Uf=Ba(),Vf=$a(),Bf=za(),$f=Bo(),zf=Ga(),Gf=Ka(),Kf=Xa(),Xf=Ya(),Yf=Qa(),Jf=Za(),Qf=ec(),Zf=Yo(),eh=nc();function Jo(t){if(t!==null)return t}var Zo=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};K.ErrorMessageTracker=Zo;var Fr=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(P.MessageType.Error,e)}warn(e){this.send(P.MessageType.Warning,e)}info(e){this.send(P.MessageType.Info,e)}log(e){this.send(P.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(P.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,P.RAL)().console.error("Sending log message failed")})}},es=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:P.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(P.ShowMessageRequest.type,r).then(Jo)}showWarningMessage(e,...n){let r={type:P.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(P.ShowMessageRequest.type,r).then(Jo)}showInformationMessage(e,...n){let r={type:P.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(P.ShowMessageRequest.type,r).then(Jo)}},rc=(0,zf.ShowDocumentFeature)((0,j.ProgressFeature)(es)),th;(function(t){function e(){return new Ar}t.create=e})(th=K.BulkRegistration||(K.BulkRegistration={}));var Ar=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=He.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Qo.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},nh;(function(t){function e(){return new An(void 0,[])}t.create=e})(nh=K.BulkUnregistration||(K.BulkUnregistration={}));var An=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(P.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=He.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(P.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},c=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Lr=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof Ar?this.registerMany(e):e instanceof An?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=He.string(n)?n:n.method,c=Qo.generateUuid(),h={registrations:[{id:c,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(P.RegistrationRequest.type,h).then(v=>(e.add({id:c,method:i}),e),v=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(v)))}registerSingle2(e,n){let r=He.string(e)?e:e.method,i=Qo.generateUuid(),c={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(P.RegistrationRequest.type,c).then(h=>P.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),h=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(h)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(P.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(P.RegistrationRequest.type,n).then(()=>new An(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ts=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(P.ApplyWorkspaceEditRequest.type,r)}},ic=(0,Gf.FileOperationsFeature)((0,Vf.WorkspaceFoldersFeature)((0,Uf.ConfigurationFeature)(ts))),jr=class{constructor(){this._trace=P.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==P.Trace.Off&&this.connection.sendNotification(P.LogTraceNotification.type,{message:e,verbose:this._trace===P.Trace.Verbose?n:void 0}).catch(()=>{})}},Wr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(P.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Hr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,j.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,j.attachPartialResult)(this.connection,n)}};K._LanguagesImpl=Hr;var oc=(0,eh.MonikerFeature)((0,Qf.DiagnosticFeature)((0,Jf.InlayHintFeature)((0,Yf.InlineValueFeature)((0,Xf.TypeHierarchyFeature)((0,Kf.LinkedEditingRangeFeature)((0,$f.SemanticTokensFeature)((0,Bf.CallHierarchyFeature)(Hr)))))))),Ur=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,j.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,j.attachPartialResult)(this.connection,n)}};K._NotebooksImpl=Ur;var sc=(0,Zf.NotebookSyncFeature)(Ur);function ac(t,e){return function(n){return e(t(n))}}K.combineConsoleFeatures=ac;function cc(t,e){return function(n){return e(t(n))}}K.combineTelemetryFeatures=cc;function uc(t,e){return function(n){return e(t(n))}}K.combineTracerFeatures=uc;function lc(t,e){return function(n){return e(t(n))}}K.combineClientFeatures=lc;function dc(t,e){return function(n){return e(t(n))}}K.combineWindowFeatures=dc;function fc(t,e){return function(n){return e(t(n))}}K.combineWorkspaceFeatures=fc;function hc(t,e){return function(n){return e(t(n))}}K.combineLanguagesFeatures=hc;function gc(t,e){return function(n){return e(t(n))}}K.combineNotebooksFeatures=gc;function rh(t,e){function n(i,c,h){return i&&c?h(i,c):i||c}return{__brand:"features",console:n(t.console,e.console,ac),tracer:n(t.tracer,e.tracer,uc),telemetry:n(t.telemetry,e.telemetry,cc),client:n(t.client,e.client,lc),window:n(t.window,e.window,dc),workspace:n(t.workspace,e.workspace,fc),languages:n(t.languages,e.languages,hc),notebooks:n(t.notebooks,e.notebooks,gc)}}K.combineFeatures=rh;function ih(t,e,n){let r=n&&n.console?new(n.console(Fr)):new Fr,i=t(r);r.rawAttach(i);let c=n&&n.tracer?new(n.tracer(jr)):new jr,h=n&&n.telemetry?new(n.telemetry(Wr)):new Wr,v=n&&n.client?new(n.client(Lr)):new Lr,C=n&&n.window?new(n.window(rc)):new rc,b=n&&n.workspace?new(n.workspace(ic)):new ic,D=n&&n.languages?new(n.languages(oc)):new oc,w=n&&n.notebooks?new(n.notebooks(sc)):new sc,N=[r,c,h,v,C,b,D,w];function L(y){return y instanceof Promise?y:He.thenable(y)?new Promise((g,k)=>{y.then(F=>g(F),F=>k(F))}):Promise.resolve(y)}let $,X,Z,H={listen:()=>i.listen(),sendRequest:(y,...g)=>i.sendRequest(He.string(y)?y:y.method,...g),onRequest:(y,g)=>i.onRequest(y,g),sendNotification:(y,g)=>{let k=He.string(y)?y:y.method;return arguments.length===1?i.sendNotification(k):i.sendNotification(k,g)},onNotification:(y,g)=>i.onNotification(y,g),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(X=y,{dispose:()=>{X=void 0}}),onInitialized:y=>i.onNotification(P.InitializedNotification.type,y),onShutdown:y=>($=y,{dispose:()=>{$=void 0}}),onExit:y=>(Z=y,{dispose:()=>{Z=void 0}}),get console(){return r},get telemetry(){return h},get tracer(){return c},get client(){return v},get window(){return C},get workspace(){return b},get languages(){return D},get notebooks(){return w},onDidChangeConfiguration:y=>i.onNotification(P.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(P.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(P.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(P.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(P.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(P.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(P.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(P.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(P.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(P.HoverRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onCompletion:y=>i.onRequest(P.CompletionRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onCompletionResolve:y=>i.onRequest(P.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(P.SignatureHelpRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onDeclaration:y=>i.onRequest(P.DeclarationRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onDefinition:y=>i.onRequest(P.DefinitionRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onTypeDefinition:y=>i.onRequest(P.TypeDefinitionRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onImplementation:y=>i.onRequest(P.ImplementationRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onReferences:y=>i.onRequest(P.ReferencesRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onDocumentHighlight:y=>i.onRequest(P.DocumentHighlightRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onDocumentSymbol:y=>i.onRequest(P.DocumentSymbolRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onWorkspaceSymbol:y=>i.onRequest(P.WorkspaceSymbolRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onWorkspaceSymbolResolve:y=>i.onRequest(P.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(P.CodeActionRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onCodeActionResolve:y=>i.onRequest(P.CodeActionResolveRequest.type,(g,k)=>y(g,k)),onCodeLens:y=>i.onRequest(P.CodeLensRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onCodeLensResolve:y=>i.onRequest(P.CodeLensResolveRequest.type,(g,k)=>y(g,k)),onDocumentFormatting:y=>i.onRequest(P.DocumentFormattingRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onDocumentRangeFormatting:y=>i.onRequest(P.DocumentRangeFormattingRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(P.DocumentOnTypeFormattingRequest.type,(g,k)=>y(g,k)),onRenameRequest:y=>i.onRequest(P.RenameRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),onPrepareRename:y=>i.onRequest(P.PrepareRenameRequest.type,(g,k)=>y(g,k)),onDocumentLinks:y=>i.onRequest(P.DocumentLinkRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onDocumentLinkResolve:y=>i.onRequest(P.DocumentLinkResolveRequest.type,(g,k)=>y(g,k)),onDocumentColor:y=>i.onRequest(P.DocumentColorRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onColorPresentation:y=>i.onRequest(P.ColorPresentationRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onFoldingRanges:y=>i.onRequest(P.FoldingRangeRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onSelectionRanges:y=>i.onRequest(P.SelectionRangeRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),(0,j.attachPartialResult)(i,g))),onExecuteCommand:y=>i.onRequest(P.ExecuteCommandRequest.type,(g,k)=>y(g,k,(0,j.attachWorkDone)(i,g),void 0)),dispose:()=>i.dispose()};for(let y of N)y.attach(H);return i.onRequest(P.InitializeRequest.type,y=>{e.initialize(y),He.string(y.trace)&&(c.trace=P.Trace.fromString(y.trace));for(let g of N)g.initialize(y.capabilities);if(X){let g=X(y,new P.CancellationTokenSource().token,(0,j.attachWorkDone)(i,y),void 0);return L(g).then(k=>{if(k instanceof P.ResponseError)return k;let F=k;F||(F={capabilities:{}});let Y=F.capabilities;Y||(Y={},F.capabilities=Y),Y.textDocumentSync===void 0||Y.textDocumentSync===null?Y.textDocumentSync=He.number(H.__textDocumentSync)?H.__textDocumentSync:P.TextDocumentSyncKind.None:!He.number(Y.textDocumentSync)&&!He.number(Y.textDocumentSync.change)&&(Y.textDocumentSync.change=He.number(H.__textDocumentSync)?H.__textDocumentSync:P.TextDocumentSyncKind.None);for(let ne of N)ne.fillServerCapabilities(Y);return F})}else{let g={capabilities:{textDocumentSync:P.TextDocumentSyncKind.None}};for(let k of N)k.fillServerCapabilities(g.capabilities);return g}}),i.onRequest(P.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,$)return $(new P.CancellationTokenSource().token)}),i.onNotification(P.ExitNotification.type,()=>{try{Z&&Z()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(P.SetTraceNotification.type,y=>{c.trace=P.Trace.fromString(y.value)}),H}K.createConnection=ih});var mc=O(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.resolveModulePath=Oe.FileSystem=Oe.resolveGlobalYarnPath=Oe.resolveGlobalNodePath=Oe.resolve=Oe.uriToFilePath=void 0;var oh=require("url"),Qe=require("path"),rs=require("fs"),ss=require("child_process");function sh(t){let e=oh.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let c=n[0],h=n[1];c.length===0&&h.length>1&&h[1]===":"&&n.shift()}return Qe.normalize(n.join("/"))}Oe.uriToFilePath=sh;function is(){return process.platform==="win32"}function Vr(t,e,n,r){let i="NODE_PATH",c=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((h,v)=>{let C=process.env,b=Object.create(null);Object.keys(C).forEach(D=>b[D]=C[D]),e&&rs.existsSync(e)&&(b[i]?b[i]=e+Qe.delimiter+b[i]:b[i]=e,r&&r(`NODE_PATH value is: ${b[i]}`)),b.ELECTRON_RUN_AS_NODE="1";try{let D=(0,ss.fork)("",[],{cwd:n,env:b,execArgv:["-e",c]});if(D.pid===void 0){v(new Error(`Starting process to resolve node module  ${t} failed`));return}D.on("error",N=>{v(N)}),D.on("message",N=>{N.c==="r"&&(D.send({c:"e"}),N.s?h(N.r):v(new Error(`Failed to resolve module: ${t}`)))});let w={c:"rs",a:t};D.send(w)}catch(D){v(D)}})}Oe.resolve=Vr;function os(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(c=>n[c]=process.env[c]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};is()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let c=(0,ss.spawnSync)(e,["config","get","prefix"],r).stdout;if(!c){t&&t("'npm config get prefix' didn't return a value.");return}let h=c.trim();return t&&t(`'npm config get prefix' value is: ${h}`),h.length>0?is()?Qe.join(h,"node_modules"):Qe.join(h,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Oe.resolveGlobalNodePath=os;function ah(t){let e="yarn",n={encoding:"utf8"};is()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,ss.spawnSync)(e,["global","dir","--json"],n),c=i.stdout;if(!c){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let h=c.trim().split(/\r?\n/);for(let v of h)try{let C=JSON.parse(v);if(C.type==="log")return Qe.join(C.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Oe.resolveGlobalYarnPath=ah;var pc;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!rs.existsSync(__filename.toUpperCase())||!rs.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,c){return n()?Qe.normalize(c).indexOf(Qe.normalize(i))===0:Qe.normalize(c).toLowerCase().indexOf(Qe.normalize(i).toLowerCase())===0}t.isParent=r})(pc=Oe.FileSystem||(Oe.FileSystem={}));function ch(t,e,n,r){return n?(Qe.isAbsolute(n)||(n=Qe.join(t,n)),Vr(e,n,n,r).then(i=>pc.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Vr(e,os(r),t,r))):Vr(e,os(r),t,r)}Oe.resolveModulePath=ch});var as=O((Zg,yc)=>{"use strict";yc.exports=Te()});var Tc=O(ke=>{"use strict";var uh=ke&&ke.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),vc=ke&&ke.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&uh(e,t,n)};Object.defineProperty(ke,"__esModule",{value:!0});ke.ProposedFeatures=ke.NotebookDocuments=ke.TextDocuments=ke.SemanticTokensBuilder=void 0;var lh=Bo();Object.defineProperty(ke,"SemanticTokensBuilder",{enumerable:!0,get:function(){return lh.SemanticTokensBuilder}});vc(Te(),ke);var dh=Ko();Object.defineProperty(ke,"TextDocuments",{enumerable:!0,get:function(){return dh.TextDocuments}});var fh=Yo();Object.defineProperty(ke,"NotebookDocuments",{enumerable:!0,get:function(){return fh.NotebookDocuments}});vc(ns(),ke);var hh;(function(t){t.all={__brand:"features"}})(hh=ke.ProposedFeatures||(ke.ProposedFeatures={}))});var Lt=O(Me=>{"use strict";var gh=Me&&Me.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),_c=Me&&Me.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&gh(e,t,n)};Object.defineProperty(Me,"__esModule",{value:!0});Me.createConnection=Me.Files=void 0;var cs=Yn(),ph=ns(),Ln=mc(),At=as();_c(as(),Me);_c(Tc(),Me);var mh;(function(t){t.uriToFilePath=Ln.uriToFilePath,t.resolveGlobalNodePath=Ln.resolveGlobalNodePath,t.resolveGlobalYarnPath=Ln.resolveGlobalYarnPath,t.resolve=Ln.resolve,t.resolveModulePath=Ln.resolveModulePath})(mh=Me.Files||(Me.Files={}));var bc;function Br(){if(bc!==void 0)try{bc.end()}catch{}}var un=!1,Rc;function yh(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(Rc=setInterval(()=>{try{process.kill(r,0)}catch{Br(),process.exit(un?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}yh();var vh={initialize:t=>{let e=t.processId;cs.number(e)&&Rc===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(un?0:1)}},3e3)},get shutdownReceived(){return un},set shutdownReceived(t){un=t},exit:t=>{Br(),process.exit(t)}};function Th(t,e,n,r){let i,c,h,v;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),At.ConnectionStrategy.is(t)||At.ConnectionOptions.is(t)?v=t:(c=t,h=e,v=n),bh(c,h,v,i)}Me.createConnection=Th;function bh(t,e,n,r){if(!t&&!e&&process.argv.length>2){let v,C,b=process.argv.slice(2);for(let D=0;D<b.length;D++){let w=b[D];if(w==="--node-ipc"){t=new At.IPCMessageReader(process),e=new At.IPCMessageWriter(process);break}else if(w==="--stdio"){t=process.stdin,e=process.stdout;break}else if(w==="--socket"){v=parseInt(b[D+1]);break}else if(w==="--pipe"){C=b[D+1];break}else{var i=w.split("=");if(i[0]==="--socket"){v=parseInt(i[1]);break}else if(i[0]==="--pipe"){C=i[1];break}}}if(v){let D=(0,At.createServerSocketTransport)(v);t=D[0],e=D[1]}else if(C){let D=(0,At.createServerPipeTransport)(C);t=D[0],e=D[1]}}var c="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+c);if(!e)throw new Error("Connection output stream is not set. "+c);if(cs.func(t.read)&&cs.func(t.on)){let v=t;v.on("end",()=>{Br(),process.exit(un?0:1)}),v.on("close",()=>{Br(),process.exit(un?0:1)})}let h=v=>(0,At.createProtocolConnection)(t,e,v,n);return(0,ph.createConnection)(h,vh,r)}});var us=O((np,Cc)=>{"use strict";Cc.exports=Lt()});var ls=O((zr,$r)=>{var _h=zr&&zr.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,c;r<i;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))};(function(t){if(typeof $r=="object"&&typeof $r.exports=="object"){var e=t(require,zr);e!==void 0&&($r.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;var n=function(){function C(b,D,w,N){this._uri=b,this._languageId=D,this._version=w,this._content=N,this._lineOffsets=void 0}return Object.defineProperty(C.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),C.prototype.getText=function(b){if(b){var D=this.offsetAt(b.start),w=this.offsetAt(b.end);return this._content.substring(D,w)}return this._content},C.prototype.update=function(b,D){for(var w=0,N=b;w<N.length;w++){var L=N[w];if(C.isIncremental(L)){var $=h(L.range),X=this.offsetAt($.start),Z=this.offsetAt($.end);this._content=this._content.substring(0,X)+L.text+this._content.substring(Z,this._content.length);var H=Math.max($.start.line,0),y=Math.max($.end.line,0),g=this._lineOffsets,k=c(L.text,!1,X);if(y-H===k.length)for(var F=0,Y=k.length;F<Y;F++)g[F+H+1]=k[F];else k.length<1e4?g.splice.apply(g,_h([H+1,y-H],k,!1)):this._lineOffsets=g=g.slice(0,H+1).concat(k,g.slice(y+1));var ne=L.text.length-(Z-X);if(ne!==0)for(var F=H+1+k.length,Y=g.length;F<Y;F++)g[F]=g[F]+ne}else if(C.isFull(L))this._content=L.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=D},C.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=c(this._content,!0)),this._lineOffsets},C.prototype.positionAt=function(b){b=Math.max(Math.min(b,this._content.length),0);var D=this.getLineOffsets(),w=0,N=D.length;if(N===0)return{line:0,character:b};for(;w<N;){var L=Math.floor((w+N)/2);D[L]>b?N=L:w=L+1}var $=w-1;return{line:$,character:b-D[$]}},C.prototype.offsetAt=function(b){var D=this.getLineOffsets();if(b.line>=D.length)return this._content.length;if(b.line<0)return 0;var w=D[b.line],N=b.line+1<D.length?D[b.line+1]:this._content.length;return Math.max(Math.min(w+b.character,N),w)},Object.defineProperty(C.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),C.isIncremental=function(b){var D=b;return D!=null&&typeof D.text=="string"&&D.range!==void 0&&(D.rangeLength===void 0||typeof D.rangeLength=="number")},C.isFull=function(b){var D=b;return D!=null&&typeof D.text=="string"&&D.range===void 0&&D.rangeLength===void 0},C}(),r;(function(C){function b(N,L,$,X){return new n(N,L,$,X)}C.create=b;function D(N,L,$){if(N instanceof n)return N.update(L,$),N;throw new Error("TextDocument.update: document must be created by TextDocument.create")}C.update=D;function w(N,L){for(var $=N.getText(),X=i(L.map(v),function(Y,ne){var xe=Y.range.start.line-ne.range.start.line;return xe===0?Y.range.start.character-ne.range.start.character:xe}),Z=0,H=[],y=0,g=X;y<g.length;y++){var k=g[y],F=N.offsetAt(k.range.start);if(F<Z)throw new Error("Overlapping edit");F>Z&&H.push($.substring(Z,F)),k.newText.length&&H.push(k.newText),Z=N.offsetAt(k.range.end)}return H.push($.substr(Z)),H.join("")}C.applyEdits=w})(r=e.TextDocument||(e.TextDocument={}));function i(C,b){if(C.length<=1)return C;var D=C.length/2|0,w=C.slice(0,D),N=C.slice(D);i(w,b),i(N,b);for(var L=0,$=0,X=0;L<w.length&&$<N.length;){var Z=b(w[L],N[$]);Z<=0?C[X++]=w[L++]:C[X++]=N[$++]}for(;L<w.length;)C[X++]=w[L++];for(;$<N.length;)C[X++]=N[$++];return C}function c(C,b,D){D===void 0&&(D=0);for(var w=b?[D]:[],N=0;N<C.length;N++){var L=C.charCodeAt(N);(L===13||L===10)&&(L===13&&N+1<C.length&&C.charCodeAt(N+1)===10&&N++,w.push(D+N+1))}return w}function h(C){var b=C.start,D=C.end;return b.line>D.line||b.line===D.line&&b.character>D.character?{start:D,end:b}:C}function v(C){var b=h(C.range);return b!==C.range?{newText:C.newText,range:b}:C}})});var Ph={};zc(Ph,{connection:()=>Fe,documents:()=>Wt,visitors:()=>kt});module.exports=Gc(Ph);var ln=et(us()),Wc=et(ls());var Gr=et(Lt()),Dc=!1,ds=!1,Rh=!1;function kc({params:t,connection:e}){let n=t.capabilities;Dc=!!(n.workspace!=null&&n.workspace.configuration),ds=!!(n.workspace!=null&&n.workspace.workspaceFolders),Rh=!!(n.textDocument?.publishDiagnostics&&n.textDocument.publishDiagnostics.relatedInformation);let r={capabilities:{textDocumentSync:Gr.TextDocumentSyncKind.Incremental,completionProvider:{workDoneProgress:!0,resolveProvider:!0,completionItem:{labelDetailsSupport:!0},triggerCharacters:["qwertyuiopasdfghjkl\xF1zxcvbnm"]},definitionProvider:{workDoneProgress:!0},referencesProvider:{workDoneProgress:!0}}};return ds&&(r.capabilities.workspace={workspaceFolders:{supported:!0}}),r}function Ec({params:t,connection:e}){e.console.log("Mlang Initialized correctly!"),Dc&&e.client.register(Gr.DidChangeConfigurationNotification.type,void 0),ds&&e.workspace.onDidChangeWorkspaceFolders(n=>{e.console.log("Workspace folder change event received.")})}var V=et(Lt());function Kr(){return[{label:"struct",insertText:"struct(${1:var});",insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[creating structures](https://docs.octave.org/v4.2.1/Creating-Structures.html#Creating-Structures)"}},{label:"for",insertText:"for (${1:var} = ${2})\n	${3}\n\nend",insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[for loop](https://docs.octave.org/v4.2.0/The-for-Statement.html)"}},{label:"while",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[while loop](https://docs.octave.org/v4.2.0/The-while-Statement.html)"}},{label:"if",insertText:`if (\${1:condition})
	\${2}

end`,insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[if statement](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"else",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[if statement else clause](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"elseif",insertText:"elseif (${1:condition})\n	${2}",insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[if statement elseif clause](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"switch",insertText:`switch (\${1:variable})
	case \${2}
otherwise

end`,insertTextFormat:V.InsertTextFormat.Snippet,kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[switch statement](https://docs.octave.org/v4.2.0/The-switch-Statement.html)"}},{label:"case",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[switch statement case clause](https://docs.octave.org/v4.2.0/The-switch-Statement.html#index-case-statement)"}},{label:"otherwise",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[switch statement otherwise clause](https://docs.octave.org/v4.2.0/The-switch-Statement.html#index-otherwise-statement)"}},{label:"break",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[break statement](https://docs.octave.org/v4.2.0/The-break-Statement.html#index-break-statement)"}},{label:"continue",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"[continue statement](https://docs.octave.org/v4.2.0/The-continue-Statement.html#index-continue-statement)"}},{label:"return",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"return statement"}},{label:"end",kind:V.CompletionItemKind.Keyword,documentation:{kind:V.MarkupKind.Markdown,value:"block end marker"}},{label:"function",kind:V.CompletionItemKind.Keyword,insertText:"function ${1:funcName}(${2:funcArgs})\n	${3:funcBody}\nend",insertTextFormat:V.InsertTextFormat.Snippet,documentation:{kind:V.MarkupKind.Markdown,value:"[block end marker](https://docs.octave.org/v4.2.0/A-Sample-Function-Description.html#A-Sample-Function-Description)"}},{label:"do",kind:V.CompletionItemKind.Keyword,insertText:"do\n	${2:funcBody}\nuntil (${1:condition})",insertTextFormat:V.InsertTextFormat.Snippet,documentation:{kind:V.MarkupKind.Markdown,value:"[block end marker](https://docs.octave.org/v5.2.0/The-do_002duntil-Statement.html)"}}]}var x=et(Lt());function Xr(){return[{label:"quad",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:`: q = quad (f, a, b)
: q = quad (f, a, b, tol)
: q = quad (f, a, b, tol, sing)
: [q, ier, nfun, err] = quad (\u2026)
    Numerically evaluate the integral of f from a to b using Fortran routines from QUADPACK.
    f is a function handle, inline function, or a string containing the name of the function to evaluate. The function must have the form y = f (x) where y and x are scalars.
    a and b are the lower and upper limits of integration. Either or both may be infinite.
    The optional argument tol is a vector that specifies the desired accuracy of the result. The first element of the vector is the desired absolute tolerance, and the second element is the desired relative tolerance. To choose a relative test only, set the absolute tolerance to zero. To choose an absolute test only, set the relative tolerance to zero. Both tolerances default to sqrt (eps) or approximately 1.5e^{-8}.
    The optional argument sing is a vector of values at which the integrand is known to be singular.
    The result of the integration is returned in q.
    ier contains an integer error code (0 indicates a successful integration).
    nfun indicates the number of function evaluations that were made.
    err contains an estimate of the error in the solution.
    The function quad_options can set other optional parameters for quad.
    Note: because quad is written in Fortran it cannot be called recursively. This prevents its use in integrating over more than one variable by routines dblquad and triplequad.
    See also: quad_options, quadv, quadl, quadgk, quadcc, trapz, dblquad, triplequad. 

[quad function](https://octave.sourceforge.io/octave/function/quad.html)`}},{label:"inputParser",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:`Not documented 

[inputParser function](https://octave.sourceforge.io/octave/function/inputParser.html)`}},{label:"pol2cart",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:` __[x, y] = pol2cart (theta, r)__
 __[x, y, z] = pol2cart (theta, r, z)__
 __[x, y] = pol2cart (P)__
 __[x, y, z] = pol2cart (P)__
 __C = pol2cart (\u2026)__
    Transform polar or cylindrical coordinates to Cartesian coordinates.
    The inputs theta, r, (and z) must be the same shape, or scalar. If called with a single matrix argument then each row of P represents the polar/(cylindrical) coordinate (theta, r (, z)).
    theta describes the angle relative to the positive x-axis.
    r is the distance to the z-axis (0, 0, z).
    If only a single return argument is requested then return a matrix C where each row represents one Cartesian coordinate (x, y (, z)).
    See also: cart2pol, sph2cart, cart2sph. 

[pol2cart function](https://octave.sourceforge.io/octave/function/pol2cart.html)`}},{label:"deg2rad",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:` __rad = deg2rad (deg)__
    Convert degrees to radians.
    The input deg must be a scalar, vector, or N-dimensional array of double or single floating point values. deg may be complex in which case the real and imaginary components are converted separately.
    The output rad is the same size and shape as deg with degrees converted to radians using the conversion constant pi/180.
    Example:
    deg2rad ([0, 90, 180, 270, 360])
      \u21D2  0.00000   1.57080   3.14159   4.71239   6.28319
    See also: rad2deg. 

[deg2rad function](https://octave.sourceforge.io/octave/function/deg2rad.html)`}},{label:"length",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:` __length (a)__
    Return the length of the object a.
    The length is 0 for empty objects, 1 for scalars, and the number of elements for vectors. For matrix or N-dimensional objects, the length is the number of elements along the largest dimension (equivalent to max (size (a))).
    See also: numel, size. 

[length function](https://octave.sourceforge.io/octave/function/length.html)`}},{label:"struct",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:`  __s = struct ()__
 __s = struct (field1, value1, field2, value2, \u2026)__
 __s = struct (obj)__
    Create a scalar or array structure and initialize its values.
    The field1, field2, \u2026 variables are strings specifying the names of the fields and the value1, value2, \u2026 variables can be of any type.
    If the values are cell arrays, create a structure array and initialize its values. The dimensions of each cell array of values must match. Singleton cells and non-cell values are repeated so that they fill the entire array. If the cells are empty, create an empty structure array with the specified field names.
    If the argument is an object, return the underlying struct.
    Observe that the syntax is optimized for struct arrays. Consider the following examples:
    struct ("foo", 1)
     \u21D2 scalar structure containing the fields:
       foo =  1
    struct ("foo", {})
     \u21D2 0x0 struct array containing the fields:
       foo
    struct ("foo", { {} })
     \u21D2 scalar structure containing the fields:
       foo = {}(0x0)
    struct ("foo", {1, 2, 3})
     \u21D2 1x3 struct array containing the fields:
       foo
    The first case is an ordinary scalar struct\u2014one field, one value. The second produces an empty struct array with one field and no values, since being passed an empty cell array of struct array values. When the value is a cell array containing a single entry, this becomes a scalar struct with that single entry as the value of the field. That single entry happens to be an empty cell array.
    Finally, if the value is a non-scalar cell array, then struct produces a struct array.
    See also: cell2struct, fieldnames, getfield, setfield, rmfield, isfield, orderfields, isstruct, structfun. 

[struct function](https://octave.sourceforge.io/octave/function/struct.html)`}},{label:"addpath",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:` __addpath (dir1, \u2026)__
 __addpath (dir1, \u2026, option)__
    Add named directories to the function search path.
    If option is "-begin" or 0 (the default), prepend the directory name to the current path. If option is "-end" or 1, append the directory name to the current path. Directories added to the path must exist.
    In addition to accepting individual directory arguments, lists of directory names separated by pathsep are also accepted. For example:
    addpath ("dir1:/dir2:~/dir3")
    For each directory that is added, and that was not already in the path, addpath checks for the existence of a file named PKG_ADD (note lack of .m extension) and runs it if it exists.
    See also: path, rmpath, genpath, pathdef, savepath, pathsep. 

[addpath function](https://octave.sourceforge.io/octave/function/addpath.html)`}},{label:"argv",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:`Return the command line arguments passed to Octave.

For example, if you invoked Octave using the command

octave --no-line-editing --silent

argv would return a cell array of strings with the elements --no-line-editing and --silent.

If you write an executable Octave script, argv will return the list of arguments passed to the script. See \u2018Executable Octave Programs\u2019, for an example of how to create an executable Octave script.

[argv function](https://octave.sourceforge.io/octave/function/argv.html)`}},{label:"hold",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[hold function](https://octave.sourceforge.io/octave/function/hold.html)"}},{label:"axis",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[axis function](https://octave.sourceforge.io/octave/function/axis.html)"}},{label:"printf",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[printf function](https://octave.sourceforge.io/octave/function/printf.html)"}},{label:"figure",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[figure function](https://octave.sourceforge.io/octave/function/figure.html)"}},{label:"set",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[set function](https://octave.sourceforge.io/octave/function/set.html)"}},{label:"grid",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[grid function](https://octave.sourceforge.io/octave/function/grid.html)"}},{label:"clc",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[clc function](https://octave.sourceforge.io/octave/function/clc.html)"}},{label:"quit",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[quit function](https://docs.octave.org/interpreter/Quitting-Octave.html)"}},{label:"help",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[help function](https://octave.sourceforge.io/octave/function/help.html)"}},{label:"stem",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[stem function](https://octave.sourceforge.io/octave/function/stem.html)"}},{label:"plot",kind:x.CompletionItemKind.Function,documentation:{kind:x.MarkupKind.Markdown,value:"[plot function](https://octave.sourceforge.io/octave/function/plot.html)"}},{label:"abs",kind:x.CompletionItemKind.Function,documentation:"Return the absolute value of a number"},{label:"acos",kind:x.CompletionItemKind.Function,documentation:"Return the arccosine of a number"},{label:"acosh",kind:x.CompletionItemKind.Function,documentation:"Return the hyperbolic arccosine of a number"},{label:"angle",kind:x.CompletionItemKind.Function,documentation:"Return the angle (in radians) of a complex number"},{label:"arg",kind:x.CompletionItemKind.Function,documentation:"Return the argument (in radians) of a complex number"},{label:"asin",kind:x.CompletionItemKind.Function,documentation:"Return the arcsine of a number"},{label:"asinh",kind:x.CompletionItemKind.Function,documentation:"Return the hyperbolic arcsine of a number"},{label:"atan",kind:x.CompletionItemKind.Function,documentation:"Return the arctangent of a number"},{label:"atanh",kind:x.CompletionItemKind.Function,documentation:"Return the hyperbolic arctangent of a number"},{label:"ceil",kind:x.CompletionItemKind.Function,documentation:"Round up to the nearest integer"},{label:"conj",kind:x.CompletionItemKind.Function,documentation:"Return the complex conjugate of a number"},{label:"cos",kind:x.CompletionItemKind.Function,documentation:"Return the cosine of a number"},{label:"cosh",kind:x.CompletionItemKind.Function,documentation:"Return the hyperbolic cosine of a number"},{label:"cot",kind:x.CompletionItemKind.Function,documentation:"Return the cotangent of a number"},{label:"csc",kind:x.CompletionItemKind.Function,documentation:"Return the cosecant of a number"},{label:"det",kind:x.CompletionItemKind.Function,documentation:"Compute the determinant of a matrix"},{label:"diag",kind:x.CompletionItemKind.Function,documentation:"Extract or construct a diagonal matrix"},{label:"diff",kind:x.CompletionItemKind.Function,documentation:"Compute the difference between adjacent elements of a matrix"},{label:"disp",kind:x.CompletionItemKind.Function,documentation:"Display the value of an expression"},{label:"eig",kind:x.CompletionItemKind.Function,documentation:"Compute the eigenvalues and eigenvectors of a matrix"},{label:"eps",kind:x.CompletionItemKind.Constant,documentation:"Return the machine epsilon (smallest number representable in floating point arithmetic)"},{label:"erf",kind:x.CompletionItemKind.Function,documentation:"Return the error function of a number"},{label:"erfc",kind:x.CompletionItemKind.Function,documentation:"Return the complementary error function of a number"}]}var jt=et(require("os"));function Ch(){switch(jt.platform()){case"linux":return`${jt.homedir()}/.octaverc`;case"darwin":return`${jt.homedir()}/.octaverc`;case"win32":return`${jt.homedir()}\\Documents\\Octave\\octaverc`;default:throw new Error(`Unsupported platform: ${jt.platform()}`)}}var sp={maxNumberOfProblems:200,maxFilesSearchDepth:3,defaultInitFile:Ch(),enableInitFile:!1};function Nc(){return Kr().map(t=>t.label)}function Sc(t){return/^[a-zA-Z]+$/.test(t)}function Pc(t){return!isNaN(parseFloat(t))}var Dh=et(ls());function wc({text:t,characterPosition:e}){let n=0,r=0,i=!1,c=!1;if(e>t.length)return[0,t.length-1];for(let h=0;h<e;h++){let v=t[h];v===`
`&&!i&&!c?(n++,r=0):v==="'"?i=!i:v==='"'?c=!c:r++}return[n,r]}var Oc=et(Lt());function Yr(t,e){let n=t.getText(),r=/[\w]+/g,i;for(;i=r.exec(n);){let c=i.index,h=i.index+i[0].length,v=Oc.Range.create(t.positionAt(c),t.positionAt(h));if(e.line===v.start.line&&e.character>=v.start.character&&e.character<=v.end.character)return v}}var fs=et(us());var ie={OUTPUT_VECTOR:1,EXPECTED_FN_IDENT:2,AST_MAX_STMNT_REACHED:3,FN_CALL_EXCEEDED_CALLS:4,FN_DEF_MISSING_END:5,MISSING_PAREN:6,EXPECTED_COMMA_PAREN:7,UNEXPECTED_NL:50,TOO_MANY_NL:60,STRUCT_BAD_ARGS:140,STRUCT_BAD_COMMA:141,MAX_ITERATION_COMMENTS_BEFORE:2e3,MAX_ITERATION_COMMENTS_AFTER:2001,MAX_ITERATION_PARSING_COMMENT_BEFORE:3001,PARSE_ERR_STMNT:4e3,COULD_NOT_FIND_RPAREN_STMNT:4001,MISSING_CONDITION_ELSEIF:4002,MISSING_END_STMNT:4002,UNEXPECTED_END_OF_STMNT:4003,VISITOR_COULDNT_FIND_REF:1e4,UNEXPECTED_UNDEFINED_TOKEN:2e4};var ot={start:{line:1,character:1},end:{line:1,character:2}};function hs(t,e){return{range:t?.range??ot,message:t.message,severity:e==="error"?fs.DiagnosticSeverity.Error:fs.DiagnosticSeverity.Warning,source:"mlang"}}function xc(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<16;r++){let i=Math.floor(Math.random()*e.length);n+=e.charAt(i)}return n}function Jr(){return Xr().map(t=>t.label)}function Ic(t,e){let n=[],r=t.uri,i=Yr(t,e);if(i===void 0)return[];let c=kt.get(r);if(c?.definitions===void 0)return[];let{references:h}=c,v=t.getText(i);return n.push(...h.filter(C=>C.name===v).map(C=>({range:C.position,uri:r}))),n}var jn=et(Lt());function qc({params:t}){let e=Kr(),n=kt.get(t.textDocument.uri);if(n?.definitions===void 0)return e;let{definitions:r}=n,i=Xr();return e.push(...i),e.push(...r.map(c=>{let h=c?.arguments?.length!==void 0&&c?.arguments?.length>0?c.arguments.map((b,D)=>`${D!==0?" ":""}\${${D+1}:${b.name}${b.type!=="DEFAULT_ARGUMENT"?"":` = ${b.content}`}}`):"",v=c.type!=="FUNCTION"?c.name:`${c.name}(${Array.isArray(h)?h.map(b=>b):h});`;return{label:c.name,kind:c.type==="FUNCTION"?jn.CompletionItemKind.Function:jn.CompletionItemKind.Variable,documentation:c.documentation,data:c.arguments,insertText:v,insertTextFormat:jn.InsertTextFormat.Snippet}}).filter((c,h,v)=>h===v.findIndex(C=>C.label===c.label))),e}async function Mc({params:t,documents:e}){let n=t.textDocument.uri,r=t.position,i=e.get(n);if(!i)return null;let c=Yr(i,r);if(!c)return null;let h=i.getText(c),v=[],C=kt.get(n),{definitions:b}=C;return v.push(...b.filter(D=>D.name===h).map(D=>({range:D.position,uri:n}))),v.length>0?v:null}var Fc=["function","if","for","while","switch","do"],Ac=["until","endfunction","endif","endfor","endwhile","endswitch","end"];var kh={NL:`
`,EOF:"\0",AT:"@",COLON:":",COMMA:",",EQUALS:"=",GRATER_THAN:">",LESS_THAN:"<",AND:"&",OR:"|",EXCLAMATION:"!",SUBTRACTION:"-",ADDITION:"+",MULTIPLICATION:"*",DIVISION:"/",MODULUS:"%",EXPONENTIATION:"^",PERIOD:".",SEMICOLON:";",LBRACKET:"[",RBRACKET:"]",LSQUIRLY:"{",RSQUIRLY:"}",LPARENT:"(",RPARENT:")"};function Lc(t){for(let[e,n]of Object.entries(kh))if(n===t)return{content:e==="EOF"?"eof":t,type:e,position:null}}var Ee=5e3,Qr=class{constructor(e){this.tokens=e;this.currentTokenIndex=0;this.statements=[];this.errors=[];this.warnings=[];this.contextDepth=["0"];this.parsingStatement=!1;this.parsingStatementType=null;this.counter=0}clearLintingMessages(){this.errors=[],this.warnings=[]}getCurrentContext(){return this.contextDepth[this.contextDepth.length-1]}getIntoNewContext(){let e=this.getCurrentContext(),n=xc();return this.contextDepth.push(n),[e,n]}getBackOfContext(){let e=this.getCurrentContext(),n=this.contextDepth.pop();if(n===void 0)throw new Error("Expected newContext to be defined");return[e,n]}getCurrentToken(){return this.tokens[this.currentTokenIndex]}getNextToken(){if(!(this.currentTokenIndex>=this.tokens.length-1))return this.currentTokenIndex++,this.getCurrentToken()}getPrevToken(){if(!(this.currentTokenIndex<=0))return this.currentTokenIndex--,this.getCurrentToken()}parseStatement(){for(;this.getCurrentToken().type==="COMMENT"||this.getCurrentToken().type==="NL";)this.getNextToken();let e=this.getCurrentToken(),n=this.getNextToken();if(n===void 0)return null;if(this.parsingStatement&&this.parsingStatementType==="if"&&(e.content==="elseif"||e.content==="else")){if(e.content==="elseif"){if(n.type==="NL")return this.errors.push({message:"Missing condition",code:ie.MISSING_CONDITION_ELSEIF,range:this.getCurrentPosition(e)}),null;let r=0;do this.skipNL(!0);while(r<Ee&&this.getCurrentToken().type!=="RPARENT");this.logErrorMaxCallsReached(r,"Missing ')' in 'elseif'",ie.COULD_NOT_FIND_RPAREN_STMNT,e),this.getNextToken()}return null}if(typeof e.content=="string"&&Ac.includes(e.content)||e.type==="EOF")return this.parsingStatement?(this.getPrevToken(),null):(this.errors.push({message:`Unexpected ending of statement '${e.content}'`,code:ie.UNEXPECTED_END_OF_STMNT,range:{start:this.getCurrentPosition(e).start,end:this.getCurrentPosition(n).start}}),null);if((e.type==="IDENTIFIER"||e.type==="NATIVE_FUNCTION")&&n.type==="LPARENT"){this.getPrevToken();let r=this.getCurrentPosition();this.getNextToken();let i=this.getFunctionArguments();return this.getNextToken(),{type:"FUNCTION_CALL",supressOutput:this.isOutputSupressed(),context:this.getCurrentContext(),LHE:{type:"IDENTIFIER",value:e.content,position:r,functionData:{args:i}}}}else if(e.type==="IDENTIFIER"&&n.type==="EQUALS"){this.getNextToken();let r=this.parseExpression(),i=this.isOutputSupressed();return{type:"ASSIGNMENT",operator:n.content,supressOutput:i,context:this.getCurrentContext(),LHE:{type:"IDENTIFIER",value:e.content,position:this.getCurrentPosition(e)},RHE:r}}else if(e.type==="LBRACKET"){let[r,i]=this.getVectorArgs();if(i==="COMMA"&&r.every(c=>c.type==="IDENTIFIER")&&this.getCurrentToken().type==="EQUALS"){if(this.getCurrentToken().type!=="EQUALS")return this.errors.push({message:`Unexpected token ${this.stringifyTokenContent()}`,range:this.getCurrentPosition(),code:ie.OUTPUT_VECTOR}),null;let c=this.getNextToken();if(c===void 0)throw new Error("Unexpected undefined token. Code 50");if(c.type!=="IDENTIFIER"&&c.type!=="KEYWORD")return this.errors.push({message:`Expected a function call. Got ${this.stringifyTokenContent()}`,range:this.getCurrentPosition(),code:ie.EXPECTED_FN_IDENT}),null;this.getNextToken();let h=this.getFunctionArguments();return this.validateFnCallArgs(h),this.getNextToken(),{type:"MO_ASSIGNMENT",operator:"=",supressOutput:this.isOutputSupressed(),context:this.getCurrentContext(),LHE:{type:"VARIABLE_VECTOR",value:r},RHE:{type:"FUNCTION_CALL",position:this.getCurrentPosition(c),value:c.content,functionData:{args:h}}}}return null}else if(e.type==="KEYWORD"&&e.content==="function"){let r=this.getCurrentToken(),i=this.getNextToken();if(this.getPrevToken(),this.getPrevToken(),i===void 0)throw new Error("Unexpected undefined token. Code 60");return r.type==="IDENTIFIER"&&i.type==="EQUALS"?this.getFunctionDefintionWithOutput(!0):r.type==="LBRACKET"?this.getFunctionDefintionWithOutput(!1):this.getFunctionDefintionWithoutOutput()}else{if(e.type==="IDENTIFIER"&&n.type==="NL")return{type:"REFERENCE_CALL_VAR_FUNC",LHE:{type:"REFERENCE_CALL_VAR_FUNC",position:this.getCurrentPosition(e),value:e.content},supressOutput:!1,context:this.getCurrentContext()};if(e.type==="IDENTIFIER"&&(n.type==="EOF"||this.isTokenValidBasicDataType(n))){let r=0,i=[];for(;this.getCurrentToken().type!=="NL"&&this.getCurrentToken().type!=="EOF"&&this.isTokenValidBasicDataType(this.getCurrentToken(),!1)&&r<Ee;){let h=this.getNextToken();if(r++,h===void 0)throw new Error(`Unexpected undefined token. Error code ${ie.UNEXPECTED_UNDEFINED_TOKEN}`);if(this.isTokenValidBasicDataType(h,!1))i.push(h);else if(h.type==="LBRACKET"){let v=this.getVector();i.push(v)}}this.logErrorMaxCallsReached(r,"Could not parse function call",ie.FN_CALL_EXCEEDED_CALLS);let c=this.isOutputSupressed();return{type:"FUNCTION_CALL",context:this.getCurrentContext(),supressOutput:c,LHE:{type:"FUNCTION_CALL",position:this.getCurrentPosition(e),value:e.content,functionData:{args:i}}}}else{if(e.type==="KEYWORD"&&typeof e.content=="string"&&Fc.includes(e.content))return this.parseBasicStatements(e.content);if(e===void 0)throw new Error("Unexpected undefined token. Code 70");return this.errors.push({message:`Unexpected token. Got: "${this.stringifyTokenContent(e)}"`,range:e?.position??{start:{line:0,character:0},end:{line:0,character:0}},code:24}),null}}return null}parseBasicStatements(e){let n=this.getPrevToken(),r=n.position,i=this.getNextToken(),c=e==="do"?"until":`end${e}`;this.parsingStatement=!0,this.parsingStatementType=e,i?.type==="NL"&&this.errors.push({message:"Missing condition",code:ie.MISSING_CONDITION_ELSEIF,range:this.getCurrentPosition(n)});let h;if(i?.type==="LPARENT"){h=this.skipNL(!0);let N=0;for(;h!==void 0&&h.type!=="RPARENT"&&N<Ee;)N++,h=this.skipNL(!0);if(this.logErrorMaxCallsReached(N,'Missing ")"',ie.COULD_NOT_FIND_RPAREN_STMNT,n))return this.parsingStatement=!1,this.parsingStatementType=null,null;this.getNextToken()}else{h=i;let N=0;for(;h!==void 0&&h.type!=="NL"&&N<Ee;)h=this.getNextToken(),N++;if(this.logErrorMaxCallsReached(N,"Uncompleted statement",9999,n))return this.parsingStatement=!1,this.parsingStatementType=null,null;this.getNextToken()}if(h===void 0)return this.errors.push({message:"Could not parse statement, undefined Token",range:this.getCurrentPosition(this.getPrevToken()),code:ie.PARSE_ERR_STMNT}),this.parsingStatement=!1,this.parsingStatementType=null,null;let v=[],C=0;for(;!this.isEndStatementToken(c)&&!this.isEOF()&&C<Ee;){let N=this.parseStatement();N!==null&&v.push(N),C++}if(this.logErrorMaxCallsReached(this.getCurrentToken().type==="EOF"?Ee:C,`Could not find closing keyword 'end' or '${c}'`,ie.MISSING_END_STMNT,n))return this.parsingStatement=!1,this.parsingStatementType=null,null;let b=this.getIntoNewContext()[1],D={...r,end:this.getCurrentPosition().start};this.skipNL(!0);let w;switch(e){case"if":w="IF_STMNT";break;case"for":w="FOR_STMNT";break;case"while":w="WHILE_STMNT";break;case"switch":w="SWITCH_STMNT";break;case"do":w="DO_STMNT";break;default:throw new Error("Could not parse statement")}return this.parsingStatement=!1,this.parsingStatementType=null,{type:w,supressOutput:!0,context:b,LHE:{type:w,value:e,position:D},RHE:v}}getCurrentContent(){return JSON.stringify(this.getCurrentToken().content)}isEndStatementToken(e,n){return n!==void 0?n.content==="end"||n.content===e:this.getCurrentToken().content==="end"||this.getCurrentToken().content===e}parseStruct(){let e=[],n=this.getCurrentToken().position?.start??ot.start,r=0;do{let i=this.skipNL(!0);if(i!==void 0&&this.isValidStructType(i))e.push(i);else return null;let c=this.skipNL(!0);(c===void 0||c.type!=="COMMA"&&c.type!=="RSQUIRLY")&&this.errors.push({message:`Unexpected struct value. Got "${c?.type??"UNDEFINED"}". Code ${ie.STRUCT_BAD_COMMA.toString()}`,code:ie.STRUCT_BAD_ARGS,range:this.getCurrentPosition()}),r++}while(this.getCurrentToken().type!=="RSQUIRLY"&&this.getCurrentToken().type!=="EOF"&&this.currentTokenIndex<this.tokens.length&&r<Ee);return this.getNextToken(),{type:"STRUCT",content:e,position:{start:n,end:this.getCurrentPosition().end}}}isValidStructType(e){return!this.isTokenValidBasicDataType(e)&&e.type!=="VECTOR"&&e.type!=="STRUCT"?(this.errors.push({message:`Unexpected struct value. Got "${e.type}". Code ${ie.STRUCT_BAD_ARGS.toString()}`,code:ie.STRUCT_BAD_ARGS,range:this.getCurrentPosition()}),!1):!0}validateFnCallArgs(e){for(let n of e)n.type==="DEFAULT_VALUE_ARGUMENT"&&this.errors.push({message:"Unexpected default value argument in function call",range:this.getCurrentPosition(n),code:23})}getVectorArgs(){let e=[];if(this.getCurrentToken().type==="LBRACKET"&&this.getNextToken(),this.getCurrentToken().type==="RBRACKET")return this.getNextToken(),[[],"COMMA"];this.getCurrentToken().type==="LBRACKET"?(e.push(this.getVector()),this.getPrevToken()):this.isTokenValidBasicDataType(this.getCurrentToken())&&e.push(this.getCurrentToken());let n=this.getNextToken()?.type==="COMMA";return n?e.push(...this.getVectorValuesCommaSeparated()):e.push(...this.getVectorValuesColonSeparated()),this.getNextToken(),[e,n?"COMMA":"COLON"]}getVectorValuesColonSeparated(){let e=[];for(;this.getCurrentToken().type==="COLON"&&e.length<2;){let n=this.getNextToken();if(n===void 0)throw new Error("Unexpected undefined token. Code 80");n.type==="LBRACKET"?(e.push(this.getVector(n)),this.getPrevToken()):this.isTokenValidBasicDataType(n)&&e.push(n),this.getNextToken()}return this.getCurrentToken().type!=="RBRACKET"&&this.errors.push({message:"Unexpected vector value",range:this.getCurrentPosition(),code:22}),e}getVector(e){let[n]=this.getVectorArgs(),r=e??this.getCurrentToken();if(r===void 0)throw new Error("Unexpected undefined token. Code 130");let i=this.getCurrentPosition(r);return{type:"VECTOR",content:n,position:{start:i.start,end:n[n.length-1]?.position?.end??i.end}}}getVectorValuesCommaSeparated(){let e=[];for(;this.getCurrentToken().type==="COMMA";){let n=this.getNextToken();if(n===void 0)throw new Error("Unexpected undefined token. Code 120");if(n.type==="LBRACKET")e.push(this.getVector(n)),this.getPrevToken();else if(this.isTokenValidBasicDataType(n))e.push(n);else break;this.getNextToken()}return this.getCurrentToken().type!=="RBRACKET"&&this.errors.push({message:"Unexpected vector value",range:this.getCurrentPosition(),code:21}),e}getFunctionDefintionWithOutput(e){this.parsingStatement=!0;let[n,r]=this.getIntoNewContext(),i=this.getFunctionDefinitionDescription(!0),c,h=[];e?(c=this.getNextToken(),this.getNextToken()):(this.getNextToken(),this.getNextToken(),h.push(...this.getVariableVector()));let v=this.getNextToken();if(v===void 0)throw new Error("Unexpected undefined token. Code 110");if(v.type!=="IDENTIFIER")return this.errors.push({message:`Expected IDENTIFIER. Got: ${this.stringifyTokenContent(v)}`,range:this.getCurrentPosition(),code:20}),null;this.getNextToken();let C=this.getFunctionArguments();this.checkValidFunctionDefinitionArguments(C),i===""&&(i=this.getFunctionDefinitionDescription(!1)),this.getNextToken();let b=[],D=0;for(;!this.isEndFunctionToken()&&!this.isEOF()&&D<Ee;){let L=this.parseStatement();L!==null&&b.push(L),D++}this.logErrorMaxCallsReached(D,"Could not find closing keyword 'end'",ie.FN_DEF_MISSING_END);let w=this.getCurrentToken();if(w.type==="EOF")return this.errors.push({message:"Expected closing function 'end' or 'endfunction'",range:{start:this.getCurrentPosition(v).start,end:this.getCurrentPosition(v).end},code:19}),null;this.getNextToken(),this.getBackOfContext();let N={type:"FUNCTION_DEFINITION",value:"function",LHO:{type:"IDENTIFIER",value:v.content,position:this.getCurrentPosition(v),functionData:{args:C,description:i,closingToken:w,contextCreated:r}},RHO:b};return{type:"ASSIGNMENT",supressOutput:!0,context:n,LHE:{type:e?"IDENTIFIER":"VARIABLE_VECTOR",value:e&&c!==void 0?c.content:h,position:e&&c!==void 0?this.getCurrentPosition(c):void 0},RHE:N}}checkValidFunctionDefinitionArguments(e){let n=!0;return e.forEach(r=>{r.type==="IDENTIFIER"||r.type==="DEFAULT_VALUE_ARGUMENT"||(n=!1,this.errors.push({message:"Invalid function definition argument. ",range:this.getCurrentPosition(r),code:200}))}),n}getFunctionDefintionWithoutOutput(){this.parsingStatement=!0;let[e,n]=this.getIntoNewContext(),r=this.getFunctionDefinitionDescription(!0),i=this.getNextToken();if(i===void 0)throw new Error("Unexpected undefined token. Code 100");if(i.type!=="IDENTIFIER")return this.errors.push({message:`Expected IDENTIFIER. Got: ${this.stringifyTokenContent(i)}`,range:this.getCurrentPosition(),code:18}),null;this.getNextToken();let c=this.getFunctionArguments();this.checkValidFunctionDefinitionArguments(c),this.getNextToken(),r===""&&(this.getPrevToken(),r=this.getFunctionDefinitionDescription(!1),this.getNextToken());let h=[],v=0;for(;!this.isEndFunctionToken()&&!this.isEOF()&&v<Ee;){let b=this.parseStatement();b!==null&&h.push(b),v++}v>=Ee&&this.errors.push({message:"Max calls for statements in a function definition",range:this.getCurrentPosition(),code:16});let C=this.getCurrentToken();return C.type==="EOF"?(this.errors.push({message:"Expected closing function 'end' or 'endfunction'",range:{start:this.getCurrentPosition(i).start,end:this.getCurrentPosition(i).end},code:17}),null):(this.getNextToken(),this.getBackOfContext(),{type:"FUNCTION_DEFINITION",supressOutput:!0,context:e,LHE:{type:"IDENTIFIER",value:i.content,position:this.getCurrentPosition(i),functionData:{args:c,description:r,closingToken:C,contextCreated:n}},RHE:h})}getFunctionDefinitionDescription(e){let n=[],r=this.currentTokenIndex;if(e){let c=0;do{if(c++,this.currentTokenIndex===0)break;let h=this.getPrevTokenSkipNL();h?.type==="COMMENT"&&n.push(h)}while(this.getCurrentToken().type==="COMMENT"&&c<=Ee);this.logErrorMaxCallsReached(c,"Iterations exceeded trying to find function comments",ie.MAX_ITERATION_COMMENTS_BEFORE),n.reverse()}else{let c=0;do{c++;let h=this.skipNL(!0);h.type==="COMMENT"&&n.push(h)}while(this.getCurrentToken().type==="COMMENT"&&c<=Ee);this.logErrorMaxCallsReached(c,"Iterations exceeded trying to find function comments",ie.MAX_ITERATION_COMMENTS_AFTER)}return this.currentTokenIndex=r,n.map(c=>c.content).join(`
`)}getPrevTokenSkipNL(){let e,n=0;do e=this.getPrevToken(),n++;while(e?.type==="NL"&&n<Ee);return this.logErrorMaxCallsReached(n,"Max statement parsing reached while parsing comment",ie.MAX_ITERATION_PARSING_COMMENT_BEFORE),e}isOutputSupressed(){let e=this.getCurrentToken().type==="SEMICOLON";return e?(this.getNextToken(),e):(this.warnings.push({message:"Will output to the console",range:this.getCurrentPosition(this.getPrevToken()),code:15}),this.getNextToken(),!1)}getVariableVector(){let e=[];do{if(this.getCurrentToken().type!=="IDENTIFIER")return[];e.push(this.getCurrentToken());let n=this.getNextToken()?.type;if(n===void 0)throw new Error("Unexpected undefined token. Code 30");if(n!=="COMMA"&&n!=="RBRACKET")return this.errors.push({message:`Expected COMMA. Got: '${this.stringifyTokenContent(this.getCurrentToken())}'`,range:this.getCurrentPosition(),code:14}),e;if(this.getNextToken(),n==="RBRACKET")break}while(e[e.length-1].type!=="RBRACKET"&&this.currentTokenIndex<this.tokens.length);return e}parseExpression(){let e=this.getCurrentToken(),n,r=!0;switch(e.type){case"STRING":case"VECTOR":r=!1,n={type:e.type,value:e.content};break;case"NUMBER":n={type:e.type,value:e.content};break;case"IDENTIFIER":n=this.parseFunctionCall(),this.getPrevToken();break;case"AT":{this.getNextToken();let c=this.getFunctionArguments();this.validateFnCallArgs(c),this.getNextToken();let h=this.parseExpression();return{type:"ANONYMOUS_FUNCTION_DEFINITION",value:"@",position:this.getCurrentPosition(e),functionData:{args:c},RHO:h}}case"LPARENT":if(this.getNextToken(),n=this.parseExpression(),this.getCurrentToken().type!=="RPARENT"){this.errors.push({message:"Expected closing parenthesis ')'",range:this.getCurrentPosition(),code:13});return}break;case"LBRACKET":return{type:"VARIABLE_VECTOR",value:this.getVectorArgs()[0]};case"LSQUIRLY":{let c=this.parseStruct();return c===null?void 0:{type:"STRUCT",value:c?.content}}case"NL":this.errors.push({message:"Unexpected new line in expression.",range:this.getCurrentPosition(),code:ie.UNEXPECTED_NL});return;default:this.errors.push({message:`Unexpected token. ${this.stringifyTokenContent(e)}`,range:this.getCurrentPosition(),code:12});return}let i=this.getNextToken();if(i===void 0)throw new Error("Unexpected undefined token. Code 40");return r&&this.isBinaryOperator(i.type)?(this.getNextToken(),{type:"BINARY_OPERATION",value:i?.content??"",RHO:this.parseExpression(),LHO:n}):n}isTokenValidBasicDataType(e,n){let r=e.type==="IDENTIFIER"||e.type==="NUMBER"||e.type==="STRING";return!r&&(n===void 0||n===!0)&&this.errors.push({message:`Expected a valid data type. Got '${this.stringifyTokenContent()}'`,range:this.getCurrentPosition(),code:11}),r}parseFunctionCall(){let e=this.getCurrentToken();if(this.getNextToken()?.type==="LPARENT"){let n=this.getFunctionArguments();return this.validateFnCallArgs(n),this.getNextToken(),{type:"FUNCTION_CALL",value:e.content,position:this.getCurrentPosition(e),functionData:{args:n}}}else return{type:e.type,value:e.content,position:this.getCurrentPosition(e)}}getFunctionArguments(){let e=[];if(this.getCurrentToken().type!=="LPARENT")return this.errors.push({message:`Expected '(' for function call. Got: ${this.getCurrentToken().type}`,range:this.getCurrentPosition(),code:10}),e;do{let n=this.skipNL(!0),r=this.skipNL(!0);if(this.getPrevToken(),n.type==="IDENTIFIER"&&r.type==="EQUALS"){this.getNextToken();let c=this.skipNL(!0);this.isTokenDataType(c)||this.errors.push({message:`Expected a valid default value. Got ${this.stringifyTokenContent(c)}`,range:this.getCurrentPosition(c),code:9}),e.push({type:"DEFAULT_VALUE_ARGUMENT",content:n.content,position:n.position,defaultValue:c}),this.getNextToken(),n=null}else if(n.type==="IDENTIFIER"){if(this.skipNL(!0).type==="LPARENT"){let c=this.getFunctionArguments();this.validateFnCallArgs(c)}}else{if(n.type==="RPARENT")return e;if(n.type==="LBRACKET")e.push(this.getVector(n)),n=null;else if(n.type==="LSQUIRLY"){let c=this.parseStruct();if(n=null,c===null)return e;e.push(c)}else if(this.isTokenValidBasicDataType(n))this.getNextToken();else return this.errors.push({message:`Expected valid argument. Got ${this.stringifyTokenContent(n)}`,range:this.getCurrentPosition(),code:8}),e}n!==null&&e.push(n);let i=this.skipNL();if(i.type!=="COMMA"&&i.type!=="RPARENT")return this.errors.push({message:`Expected ',' or ')'. Got '${i.type}'`,range:this.getCurrentPosition(),code:ie.EXPECTED_COMMA_PAREN}),e}while(this.getCurrentToken().type!=="RPARENT"&&this.getCurrentToken().type!=="EOF");return this.getCurrentToken().type==="EOF"&&this.errors.push({message:"Expected closing parenthesis ')' for function call",range:this.getCurrentPosition(),code:ie.MISSING_PAREN}),e}stringifyTokenContent(e){return e===void 0&&(e=this.getCurrentToken()),Array.isArray(e.content)?`[${e.content.map(n=>n.content).join(", ")}]`:e.content}skipNL(e=!1){let n=0,r=this.getCurrentToken();for(e&&(r=this.getNextToken());this.getCurrentToken().type==="NL"&&n<=Ee;)r=this.getNextToken(),n++;if(this.logErrorMaxCallsReached(n,"Found too many new lines",ie.TOO_MANY_NL),r===void 0)throw new Error("EOF was never found");return r}isBinaryOperator(e){return e==="SUBTRACTION"||e==="DIVISION"||e==="ADDITION"||e==="MULTIPLICATION"}isEOF(e){return e!=null?e.type==="EOF":this.getCurrentToken().type==="EOF"}isEndFunctionToken(e){return e!=null?e.type==="KEYWORD"&&(e.content==="end"||e.content==="endfunction"):this.getCurrentToken().type==="KEYWORD"&&(this.getCurrentToken().content==="end"||this.getCurrentToken().content==="endfunction")}isTokenDataType(e){return e!=null?e.type==="IDENTIFIER"||e.type==="VECTOR"||e.type==="STRING"||e.type==="NUMBER"||e.type==="STRUCT":this.getCurrentToken().type==="IDENTIFIER"||this.getCurrentToken().type==="VECTOR"||this.getCurrentToken().type==="STRING"||this.getCurrentToken().type==="STRUCT"||this.getCurrentToken().type==="NUMBER"}logErrorMaxCallsReached(e,n,r,i){return e>=Ee?(this.errors.push({message:n,range:this.getCurrentPosition(i),code:r}),!0):!1}getStatements(){return this.statements}makeAST(){if(this.tokens.length<4)return{type:"Program",body:this.statements};let e=0;do{let n=this.parseStatement();n!==null&&this.statements.push(n),e++}while(this.getCurrentToken().type!=="EOF"&&e<Ee);return e>=Ee&&this.errors.push({message:"Maximum amount of statements reached.",range:this.getCurrentPosition(),code:ie.AST_MAX_STMNT_REACHED}),{type:"Program",body:this.statements}}getCurrentPosition(e){return e===void 0&&this.getCurrentToken()!==void 0?this.getCurrentToken().position:e===void 0&&this.getCurrentToken()===void 0?ot:e?.position!==null&&e?.position!==void 0?e.position:ot}getErrors(){return this.errors.forEach(e=>{if(e?.range===void 0)throw new Error("Unexpected undefined Range. "+JSON.stringify(e))}),this.errors}getWarnings(){return this.warnings}};var jc=1e4,Zr=class{constructor(e=""){this.currPos=0;this.nextPos=0;this.tokens=[];this.keywords=Nc();this.nativeFunctions=Jr();this.text=e,this.readChar()}setInitialConditions(){this.currPos=0,this.nextPos=0,this.currChar="",this.nextChar="",this.tokens.length=0}updateText(e){this.text=e,this.setInitialConditions(),this.readChar()}getAllTokens(){let e=[],n=0;do e.push(this.getNextToken()),n++;while(e[e.length-1].type!=="EOF"&&n<=jc);if(n>=jc)throw new Error("Tokens calls exeeded. "+JSON.stringify(this.text)+" -> "+JSON.stringify(this.tokens.map(r=>r.type)));return e}getNextToken(){for(;this.currChar===" ";)this.readChar();let e=Lc(this.currChar);if(e!==void 0&&this.isValidStartingToken(e))return this.readChar(),this.addToken({...e,position:this.getPositionAfterCursor(e.type!=="EOF"?e.content:"")});if(this.currChar==="#"||this.currChar==="%"){let n=this.readComment();return this.addToken({type:"COMMENT",content:n,position:this.getPositionAfterCursor(n)})}else if(Sc(this.currChar)){let n=this.readLiteral();return this.addToken({...this.tokenFromLiteral(n),position:this.getPositionAfterCursor(n)})}else if(Pc(this.currChar)){let n=this.readNumber();return this.addToken({type:"NUMBER",content:n,position:this.getPositionAfterCursor(n)})}else if(this.currChar==='"'||this.currChar==="'"){let n=this.readLiteralString();return this.addToken({type:"STRING",content:n,position:this.getPositionAfterCursor(n)})}else return this.readChar(),this.addToken({type:"ILLEGAL",content:"illegal",position:this.getPositionAfterCursor(this.currChar)})}getPositionAfterCursor(e){let n=this.currPos-e.length,r=this.currPos;this.currPos=n;let[i,c]=this.getRowsColsCursor(),[h,v]=this.getRowsColsCursor(e),C={start:{line:i,character:c},end:{line:h,character:v}};return this.currPos=r,C}isValidStartingToken(e){if(e.type!=="MODULUS")return!0;let n=this.tokens[this.tokens.length-1];return n!==void 0&&(n.type==="IDENTIFIER"||n.type==="NUMBER")}readComment(){let e="";do e+=this.currChar,this.readChar();while(this.currChar!==`
`&&this.currPos<this.text.length);return e}addToken(e){return this.tokens.push(e),e}tokenFromLiteral(e){return this.keywords.includes(e)?{type:"KEYWORD",content:e,position:this.getPosition(e)}:this.nativeFunctions.includes(e)?{type:"NATIVE_FUNCTION",content:e,position:this.getPosition(e)}:{type:"IDENTIFIER",content:e,position:this.getPosition(e)}}getPosition(e){let[n,r]=this.getRowsColsCursor(),[i,c]=this.getRowsColsCursor(e);return{start:{line:n,character:r},end:{line:i,character:c}}}getRowsColsCursor(e=null){let n=e!==null?this.currPos+e.length+1:this.currPos;return wc({text:this.text,characterPosition:n})}readChar(){if(this.currPos>=this.text.length||this.text.length<=3){this.currChar="\0",this.nextChar="\0";return}this.nextPos===0?(this.currChar=this.text[0],this.nextChar=this.text[1],this.currPos=1,this.nextPos=2):this.nextPos>=this.text.length?(this.currChar=this.nextChar,this.nextChar="\0",this.currPos=this.nextPos):(this.currChar=this.nextChar,this.nextChar=this.text[this.nextPos],this.currPos=this.nextPos,this.nextPos++)}readLiteral(){let e="";for(;/[a-zA-Z0-9_]/.test(this.currChar)&&this.currPos<=this.text.length;)e+=this.currChar,this.readChar();return e}readNumber(){let e="";for(;/\d/.test(this.currChar)||/\.\d/.test(this.currChar+this.nextChar)||/e\d/.test(this.currChar+this.nextChar)||/e[++-]/.test(this.currChar+this.nextChar)||/-\d/.test(this.currChar+this.nextChar);)e+=this.currChar,this.readChar();return e}readLiteralString(){let e=this.currChar;do this.readChar(),e+=this.currChar;while(this.currChar!=='"'&&this.currChar!=="'"&&this.currChar!==`
`&&this.currPos<this.text.length);return this.readChar(),e}};var ei=class{constructor(){this.references=[];this.definitions=[];this.errors=[]}visitProgram(e){for(let n of e.body)this.visitStatement(n);this.finisHook()}getErrors(){return this.errors}visitStatement(e){if(e!=null)switch(e.type){case"ASSIGNMENT":if(e.LHE===void 0)return;e.LHE.type==="FUNCTION_DEFINITION"?this.visitExpression(e.LHE,"ASSIGNMENT"):(this.visitExpression(e.LHE,"ASSIGNMENT"),this.visitExpression(e.RHE,"ASSIGNMENT",!1));break;case"FUNCTION_DEFINITION":if(e.LHE===void 0)return;this.visitExpression(e.LHE,"FUNCTION_DEFINITION"),(e?.RHE).forEach(n=>{this.visitStatement(n)});break;case"MO_ASSIGNMENT":if(e.LHE===void 0)return;this.visitExpression(e.LHE,"MO_ASSIGNMENT"),this.visitExpression(e.RHE,"MO_ASSIGNMENT",!1);break;case"FUNCTION_CALL":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"FUNCTION_CALL");break;case"REFERENCE_CALL_VAR_FUNC":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"REFERENCE_CALL_VAR_FUNC");break;case"IF_STMNT":case"DO_STMNT":case"SWITCH_STMNT":case"FOR_STMNT":case"WHILE_STMNT":(e?.RHE).forEach(n=>{this.visitStatement(n)});break}}visitExpression(e,n,r=!0){if(e!=null)switch(e.type){case"IDENTIFIER":if((n==="ASSIGNMENT"||n==="FUNCTION_DEFINITION")&&r){let i=n==="FUNCTION_DEFINITION"?this.getNodeFunctionArgs(e).map(c=>{if(c.type!=="IDENTIFIER"&&c.type!=="DEFAULT_VALUE_ARGUMENT")return null;let h=c.type==="DEFAULT_VALUE_ARGUMENT"?"DEFAULT_ARGUMENT":"ARGUMENT",v=c.type==="DEFAULT_VALUE_ARGUMENT"?this.getDefaultValueContent(c):"",C=this.getTokenPosition(c),b={name:c.content,type:h,content:v,position:C,documentation:""};return this.definitions.push(b),b}).filter(c=>c!==null):[];this.definitions.push({name:e.value,position:e.position??ot,type:n==="ASSIGNMENT"?"VARIABLE":"FUNCTION",documentation:this.getDocumentationOrLineDefinition(e),arguments:i}),this.references.push({name:e.value,position:this.getExpressionPosition(e),type:n==="ASSIGNMENT"?"VARIABLE":"FUNCTION",documentation:e?.functionData?.description??""})}else n==="FUNCTION_CALL"?this.references.push({name:e.value,position:this.getExpressionPosition(e),type:"FUNCTION",documentation:e?.functionData?.description??""}):this.references.push({name:e.value,position:this.getExpressionPosition(e),type:"VARIABLE",documentation:e?.functionData?.description??""});if(e?.functionData?.args!==void 0){let c=this.getArgumentIdentifiersList(e).map(h=>({name:h.content,position:this.getTokenPosition(h),type:"VARIABLE",documentation:this.getDocumentationOrLineDefinition(e)}));this.references.push(...c)}e?.RHO!==null&&Array.isArray(e.RHO)&&e.RHO.forEach(i=>{this.visitStatement(i)});break;case"BINARY_OPERATION":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,null),this.visitExpression(e.RHO,null,!1);break;case"FUNCTION_DEFINITION":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,"FUNCTION_DEFINITION"),Array.isArray(e.RHO)&&e.RHO.forEach(i=>{this.visitStatement(i)});break;case"KEYWORD":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,null),this.visitExpression(e.RHO,null,!1);break;case"ANONYMOUS_FUNCTION_DEFINITION":e?.LHO?.value!==void 0&&e?.LHO?.position!==void 0&&this.definitions.push({name:e.LHO.value,position:e.LHO.position,type:"ANONYMOUS_FUNCTION",documentation:this.getDocumentationOrLineDefinition(e),arguments:e?.functionData?.args?.map(i=>({name:i.content,type:"ARGUMENT",position:this.getTokenPosition(i),documentation:""}))??[]}),this.references.push(...e?.functionData?.args?.map(i=>({name:i.content,position:this.getExpressionPosition(e),type:this.getReferenceTypeFromNode(e),documentation:e?.functionData?.description??""}))??[]),this.visitExpression(e.RHO,null,!1);break;case"VARIABLE_VECTOR":if(!Array.isArray(e.value)||!(e?.value?.length>1))return;e?.value!==void 0&&Array.isArray(e.value)&&e.value.forEach(i=>{if(i.type==="VECTOR"){this.getTokenIdentifiers(i).forEach(c=>{this.references.push({name:c.content,type:"VARIABLE",position:this.getTokenPosition(c),documentation:""})});return}i.type==="IDENTIFIER"&&this.definitions.push({name:i.content,type:"VARIABLE",position:this.getTokenPosition(i),documentation:this.getDocumentationOrLineDefinition(e)})}),e.value.forEach(i=>{i.type==="IDENTIFIER"&&this.references.push({name:i.content,position:this.getTokenPosition(i),type:"VARIABLE",documentation:e?.functionData?.description??""})});break;case"FUNCTION_CALL":if(this.references.push({name:e.value,position:this.getExpressionPosition(e),documentation:this.getDocumentationOrLineDefinition(e),type:"FUNCTION"}),e?.functionData?.args===void 0)break;this.references.push(...this.getArgumentIdentifiersList(e).map(i=>({name:i.content,position:this.getTokenPosition(i),type:"VARIABLE",documentation:this.getDocumentationOrLineDefinition(e)})));break;case"REFERENCE_CALL_VAR_FUNC":this.references.push({name:e.value,position:this.getExpressionPosition(e),documentation:this.getDocumentationOrLineDefinition(e),type:"VARIABLE"});break}}getArgumentIdentifiersList(e){return e?.functionData?.args===void 0?[]:e.functionData.args.flatMap(n=>this.getTokenIdentifiers(n))}getTokenIdentifiers(e){return e.type==="VECTOR"?e.content.flatMap(n=>this.getTokenIdentifiers(n)):e.type==="IDENTIFIER"||e.type==="DEFAULT_VALUE_ARGUMENT"?[e]:[]}getExpressionPosition(e){return e.position===void 0?ot:e.position}getTokenPosition(e){return e.position===null?ot:e.position}getDefaultValueContent(e){return e?.defaultValue?.content===void 0||Array.isArray(e?.defaultValue?.content)?"":e.defaultValue.content}getNodeFunctionArgs(e){return e?.functionData?.args===void 0?[]:e.functionData.args}getDocumentationOrLineDefinition(e){return e?.functionData?.description!==void 0?e?.functionData?.description:(e?.RHO===void 0||Array.isArray(e.RHO),"")}getReferenceTypeFromNode(e){return e.type==="FUNCTION_CALL"||e.type==="FUNCTION_DEFINITION"||e.type==="ANONYMOUS_FUNCTION_DEFINITION"?"FUNCTION":"VARIABLE"}finisHook(){let e=this.definitions.map(i=>i.name),n=Jr();this.references.map(i=>i.name).forEach((i,c)=>{n.includes(i)||e.includes(i)||this.errors.push({message:`Could not find reference '${i}'`,code:ie.VISITOR_COULDNT_FIND_REF,range:this.references[c].position})})}};var Eh=1e3,Fe=(0,ln.createConnection)(ln.ProposedFeatures.all),Nh=new Map,Wt=new ln.TextDocuments(Wc.TextDocument),kt=new Map,Wn=new Map;Wt.onDidChangeContent(t=>{Sh(t.document.uri,t.document.getText())});Fe.onInitialize(t=>kc({params:t,connection:Fe}));Fe.onInitialized(t=>{Ec({params:t,connection:Fe})});Fe.onDefinition(async t=>await Mc({params:t,documents:Wt}));Fe.onReferences(t=>{let e=t.textDocument.uri,n=Wt.get(e);return n===void 0?[]:Ic(n,t.position)});Wt.onDidClose(t=>{Nh.delete(t.document.uri)});Fe.onCompletion(t=>qc({params:t}));Fe.onCompletionResolve(t=>t);Wt.listen(Fe);Fe.listen();Fe.onExit(()=>{Wn.forEach(t=>{clearTimeout(t)}),Wn.clear()});function Sh(t,e){Wn.has(t)&&clearTimeout(Wn.get(t)),Wn.set(t,setTimeout(()=>{let n=Wt.get(t);if(n==null)return;let i=new Zr(e).getAllTokens(),c=new Qr(i),h=c.makeAST(),v=new ei,C=v.getErrors();v.visitProgram(h),kt.set(t,v);let b=c.getErrors().map(N=>hs(N,"error")),D=c.getWarnings().map(N=>hs(N,"warn")),w=[...b,...D,...C];Fe.sendDiagnostics({uri:t,diagnostics:w}).catch(N=>{throw new Error(N)})},Eh))}0&&(module.exports={connection,documents,visitors});
