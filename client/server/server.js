var pu=Object.create;var ir=Object.defineProperty;var gu=Object.getOwnPropertyDescriptor;var mu=Object.getOwnPropertyNames;var yu=Object.getPrototypeOf,vu=Object.prototype.hasOwnProperty;var F=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Tu=(t,e)=>{for(var n in e)ir(t,n,{get:e[n],enumerable:!0})},ws=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mu(e))!vu.call(t,i)&&i!==n&&ir(t,i,{get:()=>e[i],enumerable:!(r=gu(e,i))||r.enumerable});return t};var Ae=(t,e,n)=>(n=t!=null?pu(yu(t)):{},ws(e||!t||!t.__esModule?ir(n,"default",{value:t,enumerable:!0}):n,t)),Cu=t=>ws(ir({},"__esModule",{value:!0}),t);var or=F(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.thenable=ke.typedArray=ke.stringArray=ke.array=ke.func=ke.error=ke.number=ke.string=ke.boolean=void 0;function Ru(t){return t===!0||t===!1}ke.boolean=Ru;function Is(t){return typeof t=="string"||t instanceof String}ke.string=Is;function _u(t){return typeof t=="number"||t instanceof Number}ke.number=_u;function bu(t){return t instanceof Error}ke.error=bu;function xs(t){return typeof t=="function"}ke.func=xs;function Os(t){return Array.isArray(t)}ke.array=Os;function ku(t){return Os(t)&&t.every(e=>Is(e))}ke.stringArray=ku;function Du(t,e){return Array.isArray(t)&&t.every(e)}ke.typedArray=Du;function Eu(t){return t&&xs(t.then)}ke.thenable=Eu});var sn=F(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.stringArray=Ue.array=Ue.func=Ue.error=Ue.number=Ue.string=Ue.boolean=void 0;function Su(t){return t===!0||t===!1}Ue.boolean=Su;function As(t){return typeof t=="string"||t instanceof String}Ue.string=As;function Nu(t){return typeof t=="number"||t instanceof Number}Ue.number=Nu;function Pu(t){return t instanceof Error}Ue.error=Pu;function wu(t){return typeof t=="function"}Ue.func=wu;function Ms(t){return Array.isArray(t)}Ue.array=Ms;function Iu(t){return Ms(t)&&t.every(e=>As(e))}Ue.stringArray=Iu});var Gi=F(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.Message=V.NotificationType9=V.NotificationType8=V.NotificationType7=V.NotificationType6=V.NotificationType5=V.NotificationType4=V.NotificationType3=V.NotificationType2=V.NotificationType1=V.NotificationType0=V.NotificationType=V.RequestType9=V.RequestType8=V.RequestType7=V.RequestType6=V.RequestType5=V.RequestType4=V.RequestType3=V.RequestType2=V.RequestType1=V.RequestType=V.RequestType0=V.AbstractMessageSignature=V.ParameterStructures=V.ResponseError=V.ErrorCodes=void 0;var $t=sn(),Ls;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Ls=V.ErrorCodes||(V.ErrorCodes={}));var En=class extends Error{constructor(e,n,r){super(n),this.code=$t.number(e)?e:Ls.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,En.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};V.ResponseError=En;var Ie=class{constructor(e){this.kind=e}static is(e){return e===Ie.auto||e===Ie.byName||e===Ie.byPosition}toString(){return this.kind}};V.ParameterStructures=Ie;Ie.auto=new Ie("auto");Ie.byPosition=new Ie("byPosition");Ie.byName=new Ie("byName");var me=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ie.auto}};V.AbstractMessageSignature=me;var Di=class extends me{constructor(e){super(e,0)}};V.RequestType0=Di;var Ei=class extends me{constructor(e,n=Ie.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};V.RequestType=Ei;var Si=class extends me{constructor(e,n=Ie.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};V.RequestType1=Si;var Ni=class extends me{constructor(e){super(e,2)}};V.RequestType2=Ni;var Pi=class extends me{constructor(e){super(e,3)}};V.RequestType3=Pi;var wi=class extends me{constructor(e){super(e,4)}};V.RequestType4=wi;var Ii=class extends me{constructor(e){super(e,5)}};V.RequestType5=Ii;var xi=class extends me{constructor(e){super(e,6)}};V.RequestType6=xi;var Oi=class extends me{constructor(e){super(e,7)}};V.RequestType7=Oi;var Ai=class extends me{constructor(e){super(e,8)}};V.RequestType8=Ai;var Mi=class extends me{constructor(e){super(e,9)}};V.RequestType9=Mi;var Li=class extends me{constructor(e,n=Ie.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};V.NotificationType=Li;var qi=class extends me{constructor(e){super(e,0)}};V.NotificationType0=qi;var Fi=class extends me{constructor(e,n=Ie.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};V.NotificationType1=Fi;var ji=class extends me{constructor(e){super(e,2)}};V.NotificationType2=ji;var Wi=class extends me{constructor(e){super(e,3)}};V.NotificationType3=Wi;var Ui=class extends me{constructor(e){super(e,4)}};V.NotificationType4=Ui;var Hi=class extends me{constructor(e){super(e,5)}};V.NotificationType5=Hi;var Bi=class extends me{constructor(e){super(e,6)}};V.NotificationType6=Bi;var Vi=class extends me{constructor(e){super(e,7)}};V.NotificationType7=Vi;var $i=class extends me{constructor(e){super(e,8)}};V.NotificationType8=$i;var zi=class extends me{constructor(e){super(e,9)}};V.NotificationType9=zi;var xu;(function(t){function e(i){let s=i;return s&&$t.string(s.method)&&($t.string(s.id)||$t.number(s.id))}t.isRequest=e;function n(i){let s=i;return s&&$t.string(s.method)&&i.id===void 0}t.isNotification=n;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&($t.string(s.id)||$t.number(s.id)||s.id===null)}t.isResponse=r})(xu=V.Message||(V.Message={}))});var Yi=F(Dt=>{"use strict";var qs;Object.defineProperty(Dt,"__esModule",{value:!0});Dt.LRUCache=Dt.LinkedMap=Dt.Touch=void 0;var Be;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Be=Dt.Touch||(Dt.Touch={}));var sr=class{constructor(){this[qs]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Be.None){let r=this._map.get(e);if(r)return n!==Be.None&&this.touch(r,n),r.value}set(e,n,r=Be.None){let i=this._map.get(e);if(i)i.value=n,r!==Be.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Be.None:this.addItemLast(i);break;case Be.First:this.addItemFirst(i);break;case Be.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(qs=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Be.First&&n!==Be.Last)){if(n===Be.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Be.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Dt.LinkedMap=sr;var Ki=class extends sr{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Be.AsNew){return super.get(e,n)}peek(e){return super.get(e,Be.None)}set(e,n){return super.set(e,n,Be.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Dt.LRUCache=Ki});var Fs=F(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.Disposable=void 0;var Ou;(function(t){function e(n){return{dispose:n}}t.create=e})(Ou=Sn.Disposable||(Sn.Disposable={}))});var At=F(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});var Qi;function Xi(){if(Qi===void 0)throw new Error("No runtime abstraction layer installed");return Qi}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Qi=n}t.install=e})(Xi||(Xi={}));Ji.default=Xi});var cn=F(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.Emitter=zt.Event=void 0;var Au=At(),Mu;(function(t){let e={dispose(){}};t.None=function(){return e}})(Mu=zt.Event||(zt.Event={}));var Zi=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,d=r.length;s<d;s++)try{n.push(r[s].apply(i[s],e))}catch(v){(0,Au.default)().console.error(v)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},an=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Zi),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=an._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};zt.Emitter=an;an._noop=function(){}});var cr=F(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.CancellationTokenSource=Gt.CancellationToken=void 0;var Lu=At(),qu=sn(),eo=cn(),to;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:eo.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:eo.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||qu.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(to=Gt.CancellationToken||(Gt.CancellationToken={}));var Fu=Object.freeze(function(t,e){let n=(0,Lu.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),ar=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Fu:(this._emitter||(this._emitter=new eo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},no=class{get token(){return this._token||(this._token=new ar),this._token}cancel(){this._token?this._token.cancel():this._token=to.Cancelled}dispose(){this._token?this._token instanceof ar&&this._token.dispose():this._token=to.None}};Gt.CancellationTokenSource=no});var js=F(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.SharedArrayReceiverStrategy=un.SharedArraySenderStrategy=void 0;var ju=cr(),Nn;(function(t){t.Continue=0,t.Cancelled=1})(Nn||(Nn={}));var ro=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=Nn.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,Nn.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};un.SharedArraySenderStrategy=ro;var io=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Nn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},oo=class{constructor(e){this.token=new io(e)}cancel(){}dispose(){}},so=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new ju.CancellationTokenSource:new oo(n)}};un.SharedArrayReceiverStrategy=so});var co=F(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.Semaphore=void 0;var Wu=At(),ao=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Wu.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};ur.Semaphore=ao});var Ws=F(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.ReadableStreamMessageReader=Et.AbstractMessageReader=Et.MessageReader=void 0;var lo=At(),ln=sn(),uo=cn(),Uu=co(),Hu;(function(t){function e(n){let r=n;return r&&ln.func(r.listen)&&ln.func(r.dispose)&&ln.func(r.onError)&&ln.func(r.onClose)&&ln.func(r.onPartialMessage)}t.is=e})(Hu=Et.MessageReader||(Et.MessageReader={}));var lr=class{constructor(){this.errorEmitter=new uo.Emitter,this.closeEmitter=new uo.Emitter,this.partialMessageEmitter=new uo.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${ln.string(e.message)?e.message:"unknown"}`)}};Et.AbstractMessageReader=lr;var fo;(function(t){function e(n){let r,i,s,d=new Map,v,l=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,d.set(s.name,s)),n.contentDecoders!==void 0)for(let g of n.contentDecoders)d.set(g.name,g);if(n.contentTypeDecoder!==void 0&&(v=n.contentTypeDecoder,l.set(v.name,v)),n.contentTypeDecoders!==void 0)for(let g of n.contentTypeDecoders)l.set(g.name,g)}return v===void 0&&(v=(0,lo.default)().applicationJson.decoder,l.set(v.name,v)),{charset:r,contentDecoder:s,contentDecoders:d,contentTypeDecoder:v,contentTypeDecoders:l}}t.fromOptions=e})(fo||(fo={}));var ho=class extends lr{constructor(e,n){super(),this.readable=e,this.options=fo.fromOptions(n),this.buffer=(0,lo.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Uu.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=s}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,lo.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Et.ReadableStreamMessageReader=ho});var Vs=F(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.WriteableStreamMessageWriter=St.AbstractMessageWriter=St.MessageWriter=void 0;var Us=At(),Pn=sn(),Bu=co(),Hs=cn(),Vu="Content-Length: ",Bs=`\r
`,$u;(function(t){function e(n){let r=n;return r&&Pn.func(r.dispose)&&Pn.func(r.onClose)&&Pn.func(r.onError)&&Pn.func(r.write)}t.is=e})($u=St.MessageWriter||(St.MessageWriter={}));var dr=class{constructor(){this.errorEmitter=new Hs.Emitter,this.closeEmitter=new Hs.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Pn.string(e.message)?e.message:"unknown"}`)}};St.AbstractMessageWriter=dr;var po;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Us.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Us.default)().applicationJson.encoder}}t.fromOptions=e})(po||(po={}));var go=class extends dr{constructor(e,n){super(),this.writable=e,this.options=po.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Bu.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Vu,r.byteLength.toString(),Bs),i.push(Bs),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};St.WriteableStreamMessageWriter=go});var $s=F(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.AbstractMessageBuffer=void 0;var zu=13,Gu=10,Ku=`\r
`,mo=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,s=0;e:for(;r<this._chunks.length;){let g=this._chunks[r];i=0;t:for(;i<g.length;){switch(g[i]){case zu:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Gu:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}s+=g.byteLength,r++}if(n!==4)return;let d=this._read(s+i),v=new Map,l=this.toString(d,"ascii").split(Ku);if(l.length<2)return v;for(let g=0;g<l.length-2;g++){let y=l[g],_=y.indexOf(":");if(_===-1)throw new Error("Message header must separate key and value using :");let b=y.substr(0,_),D=y.substr(_+1).trim();v.set(e?b.toLowerCase():b,D)}return v}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],d=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,d}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let d=s.slice(0,e);n.set(d,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};fr.AbstractMessageBuffer=mo});var Js=F(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.createMessageConnection=B.ConnectionOptions=B.MessageStrategy=B.CancellationStrategy=B.CancellationSenderStrategy=B.CancellationReceiverStrategy=B.RequestCancellationReceiverStrategy=B.IdCancellationReceiverStrategy=B.ConnectionStrategy=B.ConnectionError=B.ConnectionErrors=B.LogTraceNotification=B.SetTraceNotification=B.TraceFormat=B.TraceValues=B.Trace=B.NullLogger=B.ProgressType=B.ProgressToken=void 0;var zs=At(),Te=sn(),z=Gi(),Gs=Yi(),wn=cn(),yo=cr(),xn;(function(t){t.type=new z.NotificationType("$/cancelRequest")})(xn||(xn={}));var Ks;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(Ks=B.ProgressToken||(B.ProgressToken={}));var In;(function(t){t.type=new z.NotificationType("$/progress")})(In||(In={}));var vo=class{constructor(){}};B.ProgressType=vo;var To;(function(t){function e(n){return Te.func(n)}t.is=e})(To||(To={}));B.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var de;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(de=B.Trace||(B.Trace={}));var Yu;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Yu=B.TraceValues||(B.TraceValues={}));(function(t){function e(r){if(!Te.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(de=B.Trace||(B.Trace={}));var it;(function(t){t.Text="text",t.JSON="json"})(it=B.TraceFormat||(B.TraceFormat={}));(function(t){function e(n){return Te.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(it=B.TraceFormat||(B.TraceFormat={}));var Ys;(function(t){t.type=new z.NotificationType("$/setTrace")})(Ys=B.SetTraceNotification||(B.SetTraceNotification={}));var Co;(function(t){t.type=new z.NotificationType("$/logTrace")})(Co=B.LogTraceNotification||(B.LogTraceNotification={}));var hr;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(hr=B.ConnectionErrors||(B.ConnectionErrors={}));var Mt=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,Mt.prototype)}};B.ConnectionError=Mt;var Qs;(function(t){function e(n){let r=n;return r&&Te.func(r.cancelUndispatched)}t.is=e})(Qs=B.ConnectionStrategy||(B.ConnectionStrategy={}));var bo;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Te.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Te.func(r.dispose))}t.is=e})(bo=B.IdCancellationReceiverStrategy||(B.IdCancellationReceiverStrategy={}));var Xs;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Te.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Te.func(r.dispose))}t.is=e})(Xs=B.RequestCancellationReceiverStrategy||(B.RequestCancellationReceiverStrategy={}));var Ro;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new yo.CancellationTokenSource}});function e(n){return bo.is(n)||Xs.is(n)}t.is=e})(Ro=B.CancellationReceiverStrategy||(B.CancellationReceiverStrategy={}));var _o;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(xn.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Te.func(r.sendCancellation)&&Te.func(r.cleanup)}t.is=e})(_o=B.CancellationSenderStrategy||(B.CancellationSenderStrategy={}));var ko;(function(t){t.Message=Object.freeze({receiver:Ro.Message,sender:_o.Message});function e(n){let r=n;return r&&Ro.is(r.receiver)&&_o.is(r.sender)}t.is=e})(ko=B.CancellationStrategy||(B.CancellationStrategy={}));var Do;(function(t){function e(n){let r=n;return r&&Te.func(r.handleMessage)}t.is=e})(Do=B.MessageStrategy||(B.MessageStrategy={}));var Qu;(function(t){function e(n){let r=n;return r&&(ko.is(r.cancellationStrategy)||Qs.is(r.connectionStrategy)||Do.is(r.messageStrategy))}t.is=e})(Qu=B.ConnectionOptions||(B.ConnectionOptions={}));var ot;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(ot||(ot={}));function Xu(t,e,n,r){let i=n!==void 0?n:B.NullLogger,s=0,d=0,v=0,l="2.0",g,y=new Map,_,b=new Map,D=new Map,I,N=new Gs.LinkedMap,j=new Map,M=new Set,C=new Map,m=de.Off,P=it.Text,$,ee=ot.New,ue=new wn.Emitter,xe=new wn.Emitter,pt=new wn.Emitter,gt=new wn.Emitter,mt=new wn.Emitter,Pe=r&&r.cancellationStrategy?r.cancellationStrategy:ko.Message;function x(f){if(f===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+f.toString()}function w(f){return f===null?"res-unknown-"+(++v).toString():"res-"+f.toString()}function L(){return"not-"+(++d).toString()}function U(f,E){z.Message.isRequest(E)?f.set(x(E.id),E):z.Message.isResponse(E)?f.set(w(E.id),E):f.set(L(),E)}function ae(f){}function re(){return ee===ot.Listening}function G(){return ee===ot.Closed}function Se(){return ee===ot.Disposed}function we(){(ee===ot.New||ee===ot.Listening)&&(ee=ot.Closed,xe.fire(void 0))}function We(f){ue.fire([f,void 0,void 0])}function It(f){ue.fire(f)}t.onClose(we),t.onError(We),e.onClose(we),e.onError(It);function tt(){I||N.size===0||(I=(0,zs.default)().timer.setImmediate(()=>{I=void 0,pi()}))}function Zn(f){z.Message.isRequest(f)?mi(f):z.Message.isNotification(f)?vi(f):z.Message.isResponse(f)?yi(f):bn(f)}function pi(){if(N.size===0)return;let f=N.shift();try{let E=r?.messageStrategy;Do.is(E)?E.handleMessage(f,Zn):Zn(f)}finally{tt()}}let gi=f=>{try{if(z.Message.isNotification(f)&&f.method===xn.type.method){let E=f.params.id,A=x(E),H=N.get(A);if(z.Message.isRequest(H)){let le=r?.connectionStrategy,ye=le&&le.cancelUndispatched?le.cancelUndispatched(H,ae):void 0;if(ye&&(ye.error!==void 0||ye.result!==void 0)){N.delete(A),C.delete(E),ye.id=H.id,rn(ye,f.method,Date.now()),e.write(ye).catch(()=>i.error("Sending response for canceled message failed."));return}}let fe=C.get(E);if(fe!==void 0){fe.cancel(),kn(f);return}else M.add(E)}U(N,f)}finally{tt()}};function mi(f){if(Se())return;function E(Z,he,ce){let be={jsonrpc:l,id:f.id};Z instanceof z.ResponseError?be.error=Z.toJson():be.result=Z===void 0?null:Z,rn(be,he,ce),e.write(be).catch(()=>i.error("Sending response failed."))}function A(Z,he,ce){let be={jsonrpc:l,id:f.id,error:Z.toJson()};rn(be,he,ce),e.write(be).catch(()=>i.error("Sending response failed."))}function H(Z,he,ce){Z===void 0&&(Z=null);let be={jsonrpc:l,id:f.id,result:Z};rn(be,he,ce),e.write(be).catch(()=>i.error("Sending response failed."))}Ri(f);let fe=y.get(f.method),le,ye;fe&&(le=fe.type,ye=fe.handler);let ve=Date.now();if(ye||g){let Z=f.id??String(Date.now()),he=bo.is(Pe.receiver)?Pe.receiver.createCancellationTokenSource(Z):Pe.receiver.createCancellationTokenSource(f);f.id!==null&&M.has(f.id)&&he.cancel(),f.id!==null&&C.set(Z,he);try{let ce;if(ye)if(f.params===void 0){if(le!==void 0&&le.numberOfParams!==0){A(new z.ResponseError(z.ErrorCodes.InvalidParams,`Request ${f.method} defines ${le.numberOfParams} params but received none.`),f.method,ve);return}ce=ye(he.token)}else if(Array.isArray(f.params)){if(le!==void 0&&le.parameterStructures===z.ParameterStructures.byName){A(new z.ResponseError(z.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by name but received parameters by position`),f.method,ve);return}ce=ye(...f.params,he.token)}else{if(le!==void 0&&le.parameterStructures===z.ParameterStructures.byPosition){A(new z.ResponseError(z.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by position but received parameters by name`),f.method,ve);return}ce=ye(f.params,he.token)}else g&&(ce=g(f.method,f.params,he.token));let be=ce;ce?be.then?be.then(Oe=>{C.delete(Z),E(Oe,f.method,ve)},Oe=>{C.delete(Z),Oe instanceof z.ResponseError?A(Oe,f.method,ve):Oe&&Te.string(Oe.message)?A(new z.ResponseError(z.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${Oe.message}`),f.method,ve):A(new z.ResponseError(z.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,ve)}):(C.delete(Z),E(ce,f.method,ve)):(C.delete(Z),H(ce,f.method,ve))}catch(ce){C.delete(Z),ce instanceof z.ResponseError?E(ce,f.method,ve):ce&&Te.string(ce.message)?A(new z.ResponseError(z.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${ce.message}`),f.method,ve):A(new z.ResponseError(z.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,ve)}}else A(new z.ResponseError(z.ErrorCodes.MethodNotFound,`Unhandled method ${f.method}`),f.method,ve)}function yi(f){if(!Se())if(f.id===null)f.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(f.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let E=f.id,A=j.get(E);if(_i(f,A),A!==void 0){j.delete(E);try{if(f.error){let H=f.error;A.reject(new z.ResponseError(H.code,H.message,H.data))}else if(f.result!==void 0)A.resolve(f.result);else throw new Error("Should never happen.")}catch(H){H.message?i.error(`Response handler '${A.method}' failed with message: ${H.message}`):i.error(`Response handler '${A.method}' failed unexpectedly.`)}}}}function vi(f){if(Se())return;let E,A;if(f.method===xn.type.method){let H=f.params.id;M.delete(H),kn(f);return}else{let H=b.get(f.method);H&&(A=H.handler,E=H.type)}if(A||_)try{if(kn(f),A)if(f.params===void 0)E!==void 0&&E.numberOfParams!==0&&E.parameterStructures!==z.ParameterStructures.byName&&i.error(`Notification ${f.method} defines ${E.numberOfParams} params but received none.`),A();else if(Array.isArray(f.params)){let H=f.params;f.method===In.type.method&&H.length===2&&Ks.is(H[0])?A({token:H[0],value:H[1]}):(E!==void 0&&(E.parameterStructures===z.ParameterStructures.byName&&i.error(`Notification ${f.method} defines parameters by name but received parameters by position`),E.numberOfParams!==f.params.length&&i.error(`Notification ${f.method} defines ${E.numberOfParams} params but received ${H.length} arguments`)),A(...H))}else E!==void 0&&E.parameterStructures===z.ParameterStructures.byPosition&&i.error(`Notification ${f.method} defines parameters by position but received parameters by name`),A(f.params);else _&&_(f.method,f.params)}catch(H){H.message?i.error(`Notification handler '${f.method}' failed with message: ${H.message}`):i.error(`Notification handler '${f.method}' failed unexpectedly.`)}else pt.fire(f)}function bn(f){if(!f){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(f,null,4)}`);let E=f;if(Te.string(E.id)||Te.number(E.id)){let A=E.id,H=j.get(A);H&&H.reject(new Error("The received response has neither a result nor an error property."))}}function yt(f){if(f!=null)switch(m){case de.Verbose:return JSON.stringify(f,null,4);case de.Compact:return JSON.stringify(f);default:return}}function Ti(f){if(!(m===de.Off||!$))if(P===it.Text){let E;(m===de.Verbose||m===de.Compact)&&f.params&&(E=`Params: ${yt(f.params)}

`),$.log(`Sending request '${f.method} - (${f.id})'.`,E)}else xt("send-request",f)}function Ci(f){if(!(m===de.Off||!$))if(P===it.Text){let E;(m===de.Verbose||m===de.Compact)&&(f.params?E=`Params: ${yt(f.params)}

`:E=`No parameters provided.

`),$.log(`Sending notification '${f.method}'.`,E)}else xt("send-notification",f)}function rn(f,E,A){if(!(m===de.Off||!$))if(P===it.Text){let H;(m===de.Verbose||m===de.Compact)&&(f.error&&f.error.data?H=`Error data: ${yt(f.error.data)}

`:f.result?H=`Result: ${yt(f.result)}

`:f.error===void 0&&(H=`No result returned.

`)),$.log(`Sending response '${E} - (${f.id})'. Processing request took ${Date.now()-A}ms`,H)}else xt("send-response",f)}function Ri(f){if(!(m===de.Off||!$))if(P===it.Text){let E;(m===de.Verbose||m===de.Compact)&&f.params&&(E=`Params: ${yt(f.params)}

`),$.log(`Received request '${f.method} - (${f.id})'.`,E)}else xt("receive-request",f)}function kn(f){if(!(m===de.Off||!$||f.method===Co.type.method))if(P===it.Text){let E;(m===de.Verbose||m===de.Compact)&&(f.params?E=`Params: ${yt(f.params)}

`:E=`No parameters provided.

`),$.log(`Received notification '${f.method}'.`,E)}else xt("receive-notification",f)}function _i(f,E){if(!(m===de.Off||!$))if(P===it.Text){let A;if((m===de.Verbose||m===de.Compact)&&(f.error&&f.error.data?A=`Error data: ${yt(f.error.data)}

`:f.result?A=`Result: ${yt(f.result)}

`:f.error===void 0&&(A=`No result returned.

`)),E){let H=f.error?` Request failed: ${f.error.message} (${f.error.code}).`:"";$.log(`Received response '${E.method} - (${f.id})' in ${Date.now()-E.timerStart}ms.${H}`,A)}else $.log(`Received response ${f.id} without active response promise.`,A)}else xt("receive-response",f)}function xt(f,E){if(!$||m===de.Off)return;let A={isLSPMessage:!0,type:f,message:E,timestamp:Date.now()};$.log(A)}function Vt(){if(G())throw new Mt(hr.Closed,"Connection is closed.");if(Se())throw new Mt(hr.Disposed,"Connection is disposed.")}function bi(){if(re())throw new Mt(hr.AlreadyListening,"Connection is already listening")}function ki(){if(!re())throw new Error("Call listen() first.")}function bt(f){return f===void 0?null:f}function er(f){if(f!==null)return f}function tr(f){return f!=null&&!Array.isArray(f)&&typeof f=="object"}function Dn(f,E){switch(f){case z.ParameterStructures.auto:return tr(E)?er(E):[bt(E)];case z.ParameterStructures.byName:if(!tr(E))throw new Error("Received parameters by name but param is not an object literal.");return er(E);case z.ParameterStructures.byPosition:return[bt(E)];default:throw new Error(`Unknown parameter structure ${f.toString()}`)}}function nr(f,E){let A,H=f.numberOfParams;switch(H){case 0:A=void 0;break;case 1:A=Dn(f.parameterStructures,E[0]);break;default:A=[];for(let fe=0;fe<E.length&&fe<H;fe++)A.push(bt(E[fe]));if(E.length<H)for(let fe=E.length;fe<H;fe++)A.push(null);break}return A}let Ot={sendNotification:(f,...E)=>{Vt();let A,H;if(Te.string(f)){A=f;let le=E[0],ye=0,ve=z.ParameterStructures.auto;z.ParameterStructures.is(le)&&(ye=1,ve=le);let Z=E.length,he=Z-ye;switch(he){case 0:H=void 0;break;case 1:H=Dn(ve,E[ye]);break;default:if(ve===z.ParameterStructures.byName)throw new Error(`Received ${he} parameters for 'by Name' notification parameter structure.`);H=E.slice(ye,Z).map(ce=>bt(ce));break}}else{let le=E;A=f.method,H=nr(f,le)}let fe={jsonrpc:l,method:A,params:H};return Ci(fe),e.write(fe).catch(le=>{throw i.error("Sending notification failed."),le})},onNotification:(f,E)=>{Vt();let A;return Te.func(f)?_=f:E&&(Te.string(f)?(A=f,b.set(f,{type:void 0,handler:E})):(A=f.method,b.set(f.method,{type:f,handler:E}))),{dispose:()=>{A!==void 0?b.delete(A):_=void 0}}},onProgress:(f,E,A)=>{if(D.has(E))throw new Error(`Progress handler for token ${E} already registered`);return D.set(E,A),{dispose:()=>{D.delete(E)}}},sendProgress:(f,E,A)=>Ot.sendNotification(In.type,{token:E,value:A}),onUnhandledProgress:gt.event,sendRequest:(f,...E)=>{Vt(),ki();let A,H,fe;if(Te.string(f)){A=f;let Z=E[0],he=E[E.length-1],ce=0,be=z.ParameterStructures.auto;z.ParameterStructures.is(Z)&&(ce=1,be=Z);let Oe=E.length;yo.CancellationToken.is(he)&&(Oe=Oe-1,fe=he);let Qe=Oe-ce;switch(Qe){case 0:H=void 0;break;case 1:H=Dn(be,E[ce]);break;default:if(be===z.ParameterStructures.byName)throw new Error(`Received ${Qe} parameters for 'by Name' request parameter structure.`);H=E.slice(ce,Oe).map(T=>bt(T));break}}else{let Z=E;A=f.method,H=nr(f,Z);let he=f.numberOfParams;fe=yo.CancellationToken.is(Z[he])?Z[he]:void 0}let le=s++,ye;fe&&(ye=fe.onCancellationRequested(()=>{let Z=Pe.sender.sendCancellation(Ot,le);return Z===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${le}`),Promise.resolve()):Z.catch(()=>{i.log(`Sending cancellation messages for id ${le} failed`)})}));let ve={jsonrpc:l,id:le,method:A,params:H};return Ti(ve),typeof Pe.sender.enableCancellation=="function"&&Pe.sender.enableCancellation(ve),new Promise(async(Z,he)=>{let ce=Qe=>{Z(Qe),Pe.sender.cleanup(le),ye?.dispose()},be=Qe=>{he(Qe),Pe.sender.cleanup(le),ye?.dispose()},Oe={method:A,timerStart:Date.now(),resolve:ce,reject:be};try{await e.write(ve),j.set(le,Oe)}catch(Qe){throw i.error("Sending request failed."),Oe.reject(new z.ResponseError(z.ErrorCodes.MessageWriteError,Qe.message?Qe.message:"Unknown reason")),Qe}})},onRequest:(f,E)=>{Vt();let A=null;return To.is(f)?(A=void 0,g=f):Te.string(f)?(A=null,E!==void 0&&(A=f,y.set(f,{handler:E,type:void 0}))):E!==void 0&&(A=f.method,y.set(f.method,{type:f,handler:E})),{dispose:()=>{A!==null&&(A!==void 0?y.delete(A):g=void 0)}}},hasPendingResponse:()=>j.size>0,trace:async(f,E,A)=>{let H=!1,fe=it.Text;A!==void 0&&(Te.boolean(A)?H=A:(H=A.sendNotification||!1,fe=A.traceFormat||it.Text)),m=f,P=fe,m===de.Off?$=void 0:$=E,H&&!G()&&!Se()&&await Ot.sendNotification(Ys.type,{value:de.toString(f)})},onError:ue.event,onClose:xe.event,onUnhandledNotification:pt.event,onDispose:mt.event,end:()=>{e.end()},dispose:()=>{if(Se())return;ee=ot.Disposed,mt.fire(void 0);let f=new z.ResponseError(z.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let E of j.values())E.reject(f);j=new Map,C=new Map,M=new Set,N=new Gs.LinkedMap,Te.func(e.dispose)&&e.dispose(),Te.func(t.dispose)&&t.dispose()},listen:()=>{Vt(),bi(),ee=ot.Listening,t.listen(gi)},inspect:()=>{(0,zs.default)().console.log("inspect")}};return Ot.onNotification(Co.type,f=>{if(m===de.Off||!$)return;let E=m===de.Verbose||m===de.Compact;$.log(f.message,E?f.verbose:void 0)}),Ot.onNotification(In.type,f=>{let E=D.get(f.token);E?E(f.value):gt.fire(f)}),Ot}B.createMessageConnection=Xu});var pr=F(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.ProgressType=k.ProgressToken=k.createMessageConnection=k.NullLogger=k.ConnectionOptions=k.ConnectionStrategy=k.AbstractMessageBuffer=k.WriteableStreamMessageWriter=k.AbstractMessageWriter=k.MessageWriter=k.ReadableStreamMessageReader=k.AbstractMessageReader=k.MessageReader=k.SharedArrayReceiverStrategy=k.SharedArraySenderStrategy=k.CancellationToken=k.CancellationTokenSource=k.Emitter=k.Event=k.Disposable=k.LRUCache=k.Touch=k.LinkedMap=k.ParameterStructures=k.NotificationType9=k.NotificationType8=k.NotificationType7=k.NotificationType6=k.NotificationType5=k.NotificationType4=k.NotificationType3=k.NotificationType2=k.NotificationType1=k.NotificationType0=k.NotificationType=k.ErrorCodes=k.ResponseError=k.RequestType9=k.RequestType8=k.RequestType7=k.RequestType6=k.RequestType5=k.RequestType4=k.RequestType3=k.RequestType2=k.RequestType1=k.RequestType0=k.RequestType=k.Message=k.RAL=void 0;k.MessageStrategy=k.CancellationStrategy=k.CancellationSenderStrategy=k.CancellationReceiverStrategy=k.ConnectionError=k.ConnectionErrors=k.LogTraceNotification=k.SetTraceNotification=k.TraceFormat=k.TraceValues=k.Trace=void 0;var ge=Gi();Object.defineProperty(k,"Message",{enumerable:!0,get:function(){return ge.Message}});Object.defineProperty(k,"RequestType",{enumerable:!0,get:function(){return ge.RequestType}});Object.defineProperty(k,"RequestType0",{enumerable:!0,get:function(){return ge.RequestType0}});Object.defineProperty(k,"RequestType1",{enumerable:!0,get:function(){return ge.RequestType1}});Object.defineProperty(k,"RequestType2",{enumerable:!0,get:function(){return ge.RequestType2}});Object.defineProperty(k,"RequestType3",{enumerable:!0,get:function(){return ge.RequestType3}});Object.defineProperty(k,"RequestType4",{enumerable:!0,get:function(){return ge.RequestType4}});Object.defineProperty(k,"RequestType5",{enumerable:!0,get:function(){return ge.RequestType5}});Object.defineProperty(k,"RequestType6",{enumerable:!0,get:function(){return ge.RequestType6}});Object.defineProperty(k,"RequestType7",{enumerable:!0,get:function(){return ge.RequestType7}});Object.defineProperty(k,"RequestType8",{enumerable:!0,get:function(){return ge.RequestType8}});Object.defineProperty(k,"RequestType9",{enumerable:!0,get:function(){return ge.RequestType9}});Object.defineProperty(k,"ResponseError",{enumerable:!0,get:function(){return ge.ResponseError}});Object.defineProperty(k,"ErrorCodes",{enumerable:!0,get:function(){return ge.ErrorCodes}});Object.defineProperty(k,"NotificationType",{enumerable:!0,get:function(){return ge.NotificationType}});Object.defineProperty(k,"NotificationType0",{enumerable:!0,get:function(){return ge.NotificationType0}});Object.defineProperty(k,"NotificationType1",{enumerable:!0,get:function(){return ge.NotificationType1}});Object.defineProperty(k,"NotificationType2",{enumerable:!0,get:function(){return ge.NotificationType2}});Object.defineProperty(k,"NotificationType3",{enumerable:!0,get:function(){return ge.NotificationType3}});Object.defineProperty(k,"NotificationType4",{enumerable:!0,get:function(){return ge.NotificationType4}});Object.defineProperty(k,"NotificationType5",{enumerable:!0,get:function(){return ge.NotificationType5}});Object.defineProperty(k,"NotificationType6",{enumerable:!0,get:function(){return ge.NotificationType6}});Object.defineProperty(k,"NotificationType7",{enumerable:!0,get:function(){return ge.NotificationType7}});Object.defineProperty(k,"NotificationType8",{enumerable:!0,get:function(){return ge.NotificationType8}});Object.defineProperty(k,"NotificationType9",{enumerable:!0,get:function(){return ge.NotificationType9}});Object.defineProperty(k,"ParameterStructures",{enumerable:!0,get:function(){return ge.ParameterStructures}});var Eo=Yi();Object.defineProperty(k,"LinkedMap",{enumerable:!0,get:function(){return Eo.LinkedMap}});Object.defineProperty(k,"LRUCache",{enumerable:!0,get:function(){return Eo.LRUCache}});Object.defineProperty(k,"Touch",{enumerable:!0,get:function(){return Eo.Touch}});var Ju=Fs();Object.defineProperty(k,"Disposable",{enumerable:!0,get:function(){return Ju.Disposable}});var Zs=cn();Object.defineProperty(k,"Event",{enumerable:!0,get:function(){return Zs.Event}});Object.defineProperty(k,"Emitter",{enumerable:!0,get:function(){return Zs.Emitter}});var ea=cr();Object.defineProperty(k,"CancellationTokenSource",{enumerable:!0,get:function(){return ea.CancellationTokenSource}});Object.defineProperty(k,"CancellationToken",{enumerable:!0,get:function(){return ea.CancellationToken}});var ta=js();Object.defineProperty(k,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return ta.SharedArraySenderStrategy}});Object.defineProperty(k,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return ta.SharedArrayReceiverStrategy}});var So=Ws();Object.defineProperty(k,"MessageReader",{enumerable:!0,get:function(){return So.MessageReader}});Object.defineProperty(k,"AbstractMessageReader",{enumerable:!0,get:function(){return So.AbstractMessageReader}});Object.defineProperty(k,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return So.ReadableStreamMessageReader}});var No=Vs();Object.defineProperty(k,"MessageWriter",{enumerable:!0,get:function(){return No.MessageWriter}});Object.defineProperty(k,"AbstractMessageWriter",{enumerable:!0,get:function(){return No.AbstractMessageWriter}});Object.defineProperty(k,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return No.WriteableStreamMessageWriter}});var Zu=$s();Object.defineProperty(k,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Zu.AbstractMessageBuffer}});var Me=Js();Object.defineProperty(k,"ConnectionStrategy",{enumerable:!0,get:function(){return Me.ConnectionStrategy}});Object.defineProperty(k,"ConnectionOptions",{enumerable:!0,get:function(){return Me.ConnectionOptions}});Object.defineProperty(k,"NullLogger",{enumerable:!0,get:function(){return Me.NullLogger}});Object.defineProperty(k,"createMessageConnection",{enumerable:!0,get:function(){return Me.createMessageConnection}});Object.defineProperty(k,"ProgressToken",{enumerable:!0,get:function(){return Me.ProgressToken}});Object.defineProperty(k,"ProgressType",{enumerable:!0,get:function(){return Me.ProgressType}});Object.defineProperty(k,"Trace",{enumerable:!0,get:function(){return Me.Trace}});Object.defineProperty(k,"TraceValues",{enumerable:!0,get:function(){return Me.TraceValues}});Object.defineProperty(k,"TraceFormat",{enumerable:!0,get:function(){return Me.TraceFormat}});Object.defineProperty(k,"SetTraceNotification",{enumerable:!0,get:function(){return Me.SetTraceNotification}});Object.defineProperty(k,"LogTraceNotification",{enumerable:!0,get:function(){return Me.LogTraceNotification}});Object.defineProperty(k,"ConnectionErrors",{enumerable:!0,get:function(){return Me.ConnectionErrors}});Object.defineProperty(k,"ConnectionError",{enumerable:!0,get:function(){return Me.ConnectionError}});Object.defineProperty(k,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Me.CancellationReceiverStrategy}});Object.defineProperty(k,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Me.CancellationSenderStrategy}});Object.defineProperty(k,"CancellationStrategy",{enumerable:!0,get:function(){return Me.CancellationStrategy}});Object.defineProperty(k,"MessageStrategy",{enumerable:!0,get:function(){return Me.MessageStrategy}});var el=At();k.RAL=el.default});var ia=F(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});var na=require("util"),Nt=pr(),dn=class extends Nt.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return dn.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new na.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};dn.emptyBuffer=Buffer.allocUnsafe(0);var Po=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Nt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Nt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Nt.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Nt.Disposable.create(()=>this.stream.off("data",e))}},wo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Nt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Nt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Nt.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=d=>{d==null?r():i(d)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},ra=Object.freeze({messageBuffer:Object.freeze({create:t=>new dn(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new na.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new Po(t),asWritableStream:t=>new wo(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Io(){return ra}(function(t){function e(){Nt.RAL.install(ra)}t.install=e})(Io||(Io={}));xo.default=Io});var Qt=F(ne=>{"use strict";var tl=ne&&ne.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),nl=ne&&ne.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&tl(e,t,n)};Object.defineProperty(ne,"__esModule",{value:!0});ne.createMessageConnection=ne.createServerSocketTransport=ne.createClientSocketTransport=ne.createServerPipeTransport=ne.createClientPipeTransport=ne.generateRandomPipeName=ne.StreamMessageWriter=ne.StreamMessageReader=ne.SocketMessageWriter=ne.SocketMessageReader=ne.PortMessageWriter=ne.PortMessageReader=ne.IPCMessageWriter=ne.IPCMessageReader=void 0;var fn=ia();fn.default.install();var oa=require("path"),rl=require("os"),il=require("crypto"),yr=require("net"),Ke=pr();nl(pr(),ne);var Oo=class extends Ke.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Ke.Disposable.create(()=>this.process.off("message",e))}};ne.IPCMessageReader=Oo;var Ao=class extends Ke.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ne.IPCMessageWriter=Ao;var Mo=class extends Ke.AbstractMessageReader{constructor(e){super(),this.onData=new Ke.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};ne.PortMessageReader=Mo;var Lo=class extends Ke.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ne.PortMessageWriter=Lo;var Kt=class extends Ke.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,fn.default)().stream.asReadableStream(e),n)}};ne.SocketMessageReader=Kt;var Yt=class extends Ke.WriteableStreamMessageWriter{constructor(e,n){super((0,fn.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ne.SocketMessageWriter=Yt;var gr=class extends Ke.ReadableStreamMessageReader{constructor(e,n){super((0,fn.default)().stream.asReadableStream(e),n)}};ne.StreamMessageReader=gr;var mr=class extends Ke.WriteableStreamMessageWriter{constructor(e,n){super((0,fn.default)().stream.asWritableStream(e),n)}};ne.StreamMessageWriter=mr;var sa=process.env.XDG_RUNTIME_DIR,ol=new Map([["linux",107],["darwin",103]]);function sl(){let t=(0,il.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;sa?e=oa.join(sa,`vscode-ipc-${t}.sock`):e=oa.join(rl.tmpdir(),`vscode-${t}.sock`);let n=ol.get(process.platform);return n!==void 0&&e.length>n&&(0,fn.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}ne.generateRandomPipeName=sl;function al(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let d=(0,yr.createServer)(v=>{d.close(),n([new Kt(v,e),new Yt(v,e)])});d.on("error",s),d.listen(t,()=>{d.removeListener("error",s),i({onConnected:()=>r})})})}ne.createClientPipeTransport=al;function cl(t,e="utf-8"){let n=(0,yr.createConnection)(t);return[new Kt(n,e),new Yt(n,e)]}ne.createServerPipeTransport=cl;function ul(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let d=(0,yr.createServer)(v=>{d.close(),n([new Kt(v,e),new Yt(v,e)])});d.on("error",s),d.listen(t,"127.0.0.1",()=>{d.removeListener("error",s),i({onConnected:()=>r})})})}ne.createClientSocketTransport=ul;function ll(t,e="utf-8"){let n=(0,yr.createConnection)(t,"127.0.0.1");return[new Kt(n,e),new Yt(n,e)]}ne.createServerSocketTransport=ll;function dl(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function fl(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function hl(t,e,n,r){n||(n=Ke.NullLogger);let i=dl(t)?new gr(t):t,s=fl(e)?new mr(e):e;return Ke.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ke.createMessageConnection)(i,s,n,r)}ne.createMessageConnection=hl});var qo=F((Tp,aa)=>{"use strict";aa.exports=Qt()});var Tr=F((ca,vr)=>{(function(t){if(typeof vr=="object"&&typeof vr.exports=="object"){var e=t(require,ca);e!==void 0&&(vr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(a){function h(p){return typeof p=="string"}a.is=h})(n=e.DocumentUri||(e.DocumentUri={}));var r;(function(a){function h(p){return typeof p=="string"}a.is=h})(r=e.URI||(e.URI={}));var i;(function(a){a.MIN_VALUE=-2147483648,a.MAX_VALUE=2147483647;function h(p){return typeof p=="number"&&a.MIN_VALUE<=p&&p<=a.MAX_VALUE}a.is=h})(i=e.integer||(e.integer={}));var s;(function(a){a.MIN_VALUE=0,a.MAX_VALUE=2147483647;function h(p){return typeof p=="number"&&a.MIN_VALUE<=p&&p<=a.MAX_VALUE}a.is=h})(s=e.uinteger||(e.uinteger={}));var d;(function(a){function h(u,o){return u===Number.MAX_VALUE&&(u=s.MAX_VALUE),o===Number.MAX_VALUE&&(o=s.MAX_VALUE),{line:u,character:o}}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&T.uinteger(o.line)&&T.uinteger(o.character)}a.is=p})(d=e.Position||(e.Position={}));var v;(function(a){function h(u,o,R,S){if(T.uinteger(u)&&T.uinteger(o)&&T.uinteger(R)&&T.uinteger(S))return{start:d.create(u,o),end:d.create(R,S)};if(d.is(u)&&d.is(o))return{start:u,end:o};throw new Error("Range#create called with invalid arguments[".concat(u,", ").concat(o,", ").concat(R,", ").concat(S,"]"))}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&d.is(o.start)&&d.is(o.end)}a.is=p})(v=e.Range||(e.Range={}));var l;(function(a){function h(u,o){return{uri:u,range:o}}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&v.is(o.range)&&(T.string(o.uri)||T.undefined(o.uri))}a.is=p})(l=e.Location||(e.Location={}));var g;(function(a){function h(u,o,R,S){return{targetUri:u,targetRange:o,targetSelectionRange:R,originSelectionRange:S}}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&v.is(o.targetRange)&&T.string(o.targetUri)&&v.is(o.targetSelectionRange)&&(v.is(o.originSelectionRange)||T.undefined(o.originSelectionRange))}a.is=p})(g=e.LocationLink||(e.LocationLink={}));var y;(function(a){function h(u,o,R,S){return{red:u,green:o,blue:R,alpha:S}}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&T.numberRange(o.red,0,1)&&T.numberRange(o.green,0,1)&&T.numberRange(o.blue,0,1)&&T.numberRange(o.alpha,0,1)}a.is=p})(y=e.Color||(e.Color={}));var _;(function(a){function h(u,o){return{range:u,color:o}}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&v.is(o.range)&&y.is(o.color)}a.is=p})(_=e.ColorInformation||(e.ColorInformation={}));var b;(function(a){function h(u,o,R){return{label:u,textEdit:o,additionalTextEdits:R}}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&T.string(o.label)&&(T.undefined(o.textEdit)||$.is(o))&&(T.undefined(o.additionalTextEdits)||T.typedArray(o.additionalTextEdits,$.is))}a.is=p})(b=e.ColorPresentation||(e.ColorPresentation={}));var D;(function(a){a.Comment="comment",a.Imports="imports",a.Region="region"})(D=e.FoldingRangeKind||(e.FoldingRangeKind={}));var I;(function(a){function h(u,o,R,S,Y,_e){var pe={startLine:u,endLine:o};return T.defined(R)&&(pe.startCharacter=R),T.defined(S)&&(pe.endCharacter=S),T.defined(Y)&&(pe.kind=Y),T.defined(_e)&&(pe.collapsedText=_e),pe}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&T.uinteger(o.startLine)&&T.uinteger(o.startLine)&&(T.undefined(o.startCharacter)||T.uinteger(o.startCharacter))&&(T.undefined(o.endCharacter)||T.uinteger(o.endCharacter))&&(T.undefined(o.kind)||T.string(o.kind))}a.is=p})(I=e.FoldingRange||(e.FoldingRange={}));var N;(function(a){function h(u,o){return{location:u,message:o}}a.create=h;function p(u){var o=u;return T.defined(o)&&l.is(o.location)&&T.string(o.message)}a.is=p})(N=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var j;(function(a){a.Error=1,a.Warning=2,a.Information=3,a.Hint=4})(j=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var M;(function(a){a.Unnecessary=1,a.Deprecated=2})(M=e.DiagnosticTag||(e.DiagnosticTag={}));var C;(function(a){function h(p){var u=p;return T.objectLiteral(u)&&T.string(u.href)}a.is=h})(C=e.CodeDescription||(e.CodeDescription={}));var m;(function(a){function h(u,o,R,S,Y,_e){var pe={range:u,message:o};return T.defined(R)&&(pe.severity=R),T.defined(S)&&(pe.code=S),T.defined(Y)&&(pe.source=Y),T.defined(_e)&&(pe.relatedInformation=_e),pe}a.create=h;function p(u){var o,R=u;return T.defined(R)&&v.is(R.range)&&T.string(R.message)&&(T.number(R.severity)||T.undefined(R.severity))&&(T.integer(R.code)||T.string(R.code)||T.undefined(R.code))&&(T.undefined(R.codeDescription)||T.string((o=R.codeDescription)===null||o===void 0?void 0:o.href))&&(T.string(R.source)||T.undefined(R.source))&&(T.undefined(R.relatedInformation)||T.typedArray(R.relatedInformation,N.is))}a.is=p})(m=e.Diagnostic||(e.Diagnostic={}));var P;(function(a){function h(u,o){for(var R=[],S=2;S<arguments.length;S++)R[S-2]=arguments[S];var Y={title:u,command:o};return T.defined(R)&&R.length>0&&(Y.arguments=R),Y}a.create=h;function p(u){var o=u;return T.defined(o)&&T.string(o.title)&&T.string(o.command)}a.is=p})(P=e.Command||(e.Command={}));var $;(function(a){function h(R,S){return{range:R,newText:S}}a.replace=h;function p(R,S){return{range:{start:R,end:R},newText:S}}a.insert=p;function u(R){return{range:R,newText:""}}a.del=u;function o(R){var S=R;return T.objectLiteral(S)&&T.string(S.newText)&&v.is(S.range)}a.is=o})($=e.TextEdit||(e.TextEdit={}));var ee;(function(a){function h(u,o,R){var S={label:u};return o!==void 0&&(S.needsConfirmation=o),R!==void 0&&(S.description=R),S}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&T.string(o.label)&&(T.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(T.string(o.description)||o.description===void 0)}a.is=p})(ee=e.ChangeAnnotation||(e.ChangeAnnotation={}));var ue;(function(a){function h(p){var u=p;return T.string(u)}a.is=h})(ue=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var xe;(function(a){function h(R,S,Y){return{range:R,newText:S,annotationId:Y}}a.replace=h;function p(R,S,Y){return{range:{start:R,end:R},newText:S,annotationId:Y}}a.insert=p;function u(R,S){return{range:R,newText:"",annotationId:S}}a.del=u;function o(R){var S=R;return $.is(S)&&(ee.is(S.annotationId)||ue.is(S.annotationId))}a.is=o})(xe=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var pt;(function(a){function h(u,o){return{textDocument:u,edits:o}}a.create=h;function p(u){var o=u;return T.defined(o)&&G.is(o.textDocument)&&Array.isArray(o.edits)}a.is=p})(pt=e.TextDocumentEdit||(e.TextDocumentEdit={}));var gt;(function(a){function h(u,o,R){var S={kind:"create",uri:u};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(S.options=o),R!==void 0&&(S.annotationId=R),S}a.create=h;function p(u){var o=u;return o&&o.kind==="create"&&T.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||T.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||T.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ue.is(o.annotationId))}a.is=p})(gt=e.CreateFile||(e.CreateFile={}));var mt;(function(a){function h(u,o,R,S){var Y={kind:"rename",oldUri:u,newUri:o};return R!==void 0&&(R.overwrite!==void 0||R.ignoreIfExists!==void 0)&&(Y.options=R),S!==void 0&&(Y.annotationId=S),Y}a.create=h;function p(u){var o=u;return o&&o.kind==="rename"&&T.string(o.oldUri)&&T.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||T.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||T.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ue.is(o.annotationId))}a.is=p})(mt=e.RenameFile||(e.RenameFile={}));var Pe;(function(a){function h(u,o,R){var S={kind:"delete",uri:u};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(S.options=o),R!==void 0&&(S.annotationId=R),S}a.create=h;function p(u){var o=u;return o&&o.kind==="delete"&&T.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||T.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||T.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||ue.is(o.annotationId))}a.is=p})(Pe=e.DeleteFile||(e.DeleteFile={}));var x;(function(a){function h(p){var u=p;return u&&(u.changes!==void 0||u.documentChanges!==void 0)&&(u.documentChanges===void 0||u.documentChanges.every(function(o){return T.string(o.kind)?gt.is(o)||mt.is(o)||Pe.is(o):pt.is(o)}))}a.is=h})(x=e.WorkspaceEdit||(e.WorkspaceEdit={}));var w=function(){function a(h,p){this.edits=h,this.changeAnnotations=p}return a.prototype.insert=function(h,p,u){var o,R;if(u===void 0?o=$.insert(h,p):ue.is(u)?(R=u,o=xe.insert(h,p,u)):(this.assertChangeAnnotations(this.changeAnnotations),R=this.changeAnnotations.manage(u),o=xe.insert(h,p,R)),this.edits.push(o),R!==void 0)return R},a.prototype.replace=function(h,p,u){var o,R;if(u===void 0?o=$.replace(h,p):ue.is(u)?(R=u,o=xe.replace(h,p,u)):(this.assertChangeAnnotations(this.changeAnnotations),R=this.changeAnnotations.manage(u),o=xe.replace(h,p,R)),this.edits.push(o),R!==void 0)return R},a.prototype.delete=function(h,p){var u,o;if(p===void 0?u=$.del(h):ue.is(p)?(o=p,u=xe.del(h,p)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(p),u=xe.del(h,o)),this.edits.push(u),o!==void 0)return o},a.prototype.add=function(h){this.edits.push(h)},a.prototype.all=function(){return this.edits},a.prototype.clear=function(){this.edits.splice(0,this.edits.length)},a.prototype.assertChangeAnnotations=function(h){if(h===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},a}(),L=function(){function a(h){this._annotations=h===void 0?Object.create(null):h,this._counter=0,this._size=0}return a.prototype.all=function(){return this._annotations},Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),a.prototype.manage=function(h,p){var u;if(ue.is(h)?u=h:(u=this.nextId(),p=h),this._annotations[u]!==void 0)throw new Error("Id ".concat(u," is already in use."));if(p===void 0)throw new Error("No annotation provided for id ".concat(u));return this._annotations[u]=p,this._size++,u},a.prototype.nextId=function(){return this._counter++,this._counter.toString()},a}(),U=function(){function a(h){var p=this;this._textEditChanges=Object.create(null),h!==void 0?(this._workspaceEdit=h,h.documentChanges?(this._changeAnnotations=new L(h.changeAnnotations),h.changeAnnotations=this._changeAnnotations.all(),h.documentChanges.forEach(function(u){if(pt.is(u)){var o=new w(u.edits,p._changeAnnotations);p._textEditChanges[u.textDocument.uri]=o}})):h.changes&&Object.keys(h.changes).forEach(function(u){var o=new w(h.changes[u]);p._textEditChanges[u]=o})):this._workspaceEdit={}}return Object.defineProperty(a.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),a.prototype.getTextEditChange=function(h){if(G.is(h)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var p={uri:h.uri,version:h.version},u=this._textEditChanges[p.uri];if(!u){var o=[],R={textDocument:p,edits:o};this._workspaceEdit.documentChanges.push(R),u=new w(o,this._changeAnnotations),this._textEditChanges[p.uri]=u}return u}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var u=this._textEditChanges[h];if(!u){var o=[];this._workspaceEdit.changes[h]=o,u=new w(o),this._textEditChanges[h]=u}return u}},a.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new L,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},a.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},a.prototype.createFile=function(h,p,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ee.is(p)||ue.is(p)?o=p:u=p;var R,S;if(o===void 0?R=gt.create(h,u):(S=ue.is(o)?o:this._changeAnnotations.manage(o),R=gt.create(h,u,S)),this._workspaceEdit.documentChanges.push(R),S!==void 0)return S},a.prototype.renameFile=function(h,p,u,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var R;ee.is(u)||ue.is(u)?R=u:o=u;var S,Y;if(R===void 0?S=mt.create(h,p,o):(Y=ue.is(R)?R:this._changeAnnotations.manage(R),S=mt.create(h,p,o,Y)),this._workspaceEdit.documentChanges.push(S),Y!==void 0)return Y},a.prototype.deleteFile=function(h,p,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ee.is(p)||ue.is(p)?o=p:u=p;var R,S;if(o===void 0?R=Pe.create(h,u):(S=ue.is(o)?o:this._changeAnnotations.manage(o),R=Pe.create(h,u,S)),this._workspaceEdit.documentChanges.push(R),S!==void 0)return S},a}();e.WorkspaceChange=U;var ae;(function(a){function h(u){return{uri:u}}a.create=h;function p(u){var o=u;return T.defined(o)&&T.string(o.uri)}a.is=p})(ae=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var re;(function(a){function h(u,o){return{uri:u,version:o}}a.create=h;function p(u){var o=u;return T.defined(o)&&T.string(o.uri)&&T.integer(o.version)}a.is=p})(re=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var G;(function(a){function h(u,o){return{uri:u,version:o}}a.create=h;function p(u){var o=u;return T.defined(o)&&T.string(o.uri)&&(o.version===null||T.integer(o.version))}a.is=p})(G=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Se;(function(a){function h(u,o,R,S){return{uri:u,languageId:o,version:R,text:S}}a.create=h;function p(u){var o=u;return T.defined(o)&&T.string(o.uri)&&T.string(o.languageId)&&T.integer(o.version)&&T.string(o.text)}a.is=p})(Se=e.TextDocumentItem||(e.TextDocumentItem={}));var we;(function(a){a.PlainText="plaintext",a.Markdown="markdown";function h(p){var u=p;return u===a.PlainText||u===a.Markdown}a.is=h})(we=e.MarkupKind||(e.MarkupKind={}));var We;(function(a){function h(p){var u=p;return T.objectLiteral(p)&&we.is(u.kind)&&T.string(u.value)}a.is=h})(We=e.MarkupContent||(e.MarkupContent={}));var It;(function(a){a.Text=1,a.Method=2,a.Function=3,a.Constructor=4,a.Field=5,a.Variable=6,a.Class=7,a.Interface=8,a.Module=9,a.Property=10,a.Unit=11,a.Value=12,a.Enum=13,a.Keyword=14,a.Snippet=15,a.Color=16,a.File=17,a.Reference=18,a.Folder=19,a.EnumMember=20,a.Constant=21,a.Struct=22,a.Event=23,a.Operator=24,a.TypeParameter=25})(It=e.CompletionItemKind||(e.CompletionItemKind={}));var tt;(function(a){a.PlainText=1,a.Snippet=2})(tt=e.InsertTextFormat||(e.InsertTextFormat={}));var Zn;(function(a){a.Deprecated=1})(Zn=e.CompletionItemTag||(e.CompletionItemTag={}));var pi;(function(a){function h(u,o,R){return{newText:u,insert:o,replace:R}}a.create=h;function p(u){var o=u;return o&&T.string(o.newText)&&v.is(o.insert)&&v.is(o.replace)}a.is=p})(pi=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var gi;(function(a){a.asIs=1,a.adjustIndentation=2})(gi=e.InsertTextMode||(e.InsertTextMode={}));var mi;(function(a){function h(p){var u=p;return u&&(T.string(u.detail)||u.detail===void 0)&&(T.string(u.description)||u.description===void 0)}a.is=h})(mi=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var yi;(function(a){function h(p){return{label:p}}a.create=h})(yi=e.CompletionItem||(e.CompletionItem={}));var vi;(function(a){function h(p,u){return{items:p||[],isIncomplete:!!u}}a.create=h})(vi=e.CompletionList||(e.CompletionList={}));var bn;(function(a){function h(u){return u.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a.fromPlainText=h;function p(u){var o=u;return T.string(o)||T.objectLiteral(o)&&T.string(o.language)&&T.string(o.value)}a.is=p})(bn=e.MarkedString||(e.MarkedString={}));var yt;(function(a){function h(p){var u=p;return!!u&&T.objectLiteral(u)&&(We.is(u.contents)||bn.is(u.contents)||T.typedArray(u.contents,bn.is))&&(p.range===void 0||v.is(p.range))}a.is=h})(yt=e.Hover||(e.Hover={}));var Ti;(function(a){function h(p,u){return u?{label:p,documentation:u}:{label:p}}a.create=h})(Ti=e.ParameterInformation||(e.ParameterInformation={}));var Ci;(function(a){function h(p,u){for(var o=[],R=2;R<arguments.length;R++)o[R-2]=arguments[R];var S={label:p};return T.defined(u)&&(S.documentation=u),T.defined(o)?S.parameters=o:S.parameters=[],S}a.create=h})(Ci=e.SignatureInformation||(e.SignatureInformation={}));var rn;(function(a){a.Text=1,a.Read=2,a.Write=3})(rn=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var Ri;(function(a){function h(p,u){var o={range:p};return T.number(u)&&(o.kind=u),o}a.create=h})(Ri=e.DocumentHighlight||(e.DocumentHighlight={}));var kn;(function(a){a.File=1,a.Module=2,a.Namespace=3,a.Package=4,a.Class=5,a.Method=6,a.Property=7,a.Field=8,a.Constructor=9,a.Enum=10,a.Interface=11,a.Function=12,a.Variable=13,a.Constant=14,a.String=15,a.Number=16,a.Boolean=17,a.Array=18,a.Object=19,a.Key=20,a.Null=21,a.EnumMember=22,a.Struct=23,a.Event=24,a.Operator=25,a.TypeParameter=26})(kn=e.SymbolKind||(e.SymbolKind={}));var _i;(function(a){a.Deprecated=1})(_i=e.SymbolTag||(e.SymbolTag={}));var xt;(function(a){function h(p,u,o,R,S){var Y={name:p,kind:u,location:{uri:R,range:o}};return S&&(Y.containerName=S),Y}a.create=h})(xt=e.SymbolInformation||(e.SymbolInformation={}));var Vt;(function(a){function h(p,u,o,R){return R!==void 0?{name:p,kind:u,location:{uri:o,range:R}}:{name:p,kind:u,location:{uri:o}}}a.create=h})(Vt=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var bi;(function(a){function h(u,o,R,S,Y,_e){var pe={name:u,detail:o,kind:R,range:S,selectionRange:Y};return _e!==void 0&&(pe.children=_e),pe}a.create=h;function p(u){var o=u;return o&&T.string(o.name)&&T.number(o.kind)&&v.is(o.range)&&v.is(o.selectionRange)&&(o.detail===void 0||T.string(o.detail))&&(o.deprecated===void 0||T.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}a.is=p})(bi=e.DocumentSymbol||(e.DocumentSymbol={}));var ki;(function(a){a.Empty="",a.QuickFix="quickfix",a.Refactor="refactor",a.RefactorExtract="refactor.extract",a.RefactorInline="refactor.inline",a.RefactorRewrite="refactor.rewrite",a.Source="source",a.SourceOrganizeImports="source.organizeImports",a.SourceFixAll="source.fixAll"})(ki=e.CodeActionKind||(e.CodeActionKind={}));var bt;(function(a){a.Invoked=1,a.Automatic=2})(bt=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var er;(function(a){function h(u,o,R){var S={diagnostics:u};return o!=null&&(S.only=o),R!=null&&(S.triggerKind=R),S}a.create=h;function p(u){var o=u;return T.defined(o)&&T.typedArray(o.diagnostics,m.is)&&(o.only===void 0||T.typedArray(o.only,T.string))&&(o.triggerKind===void 0||o.triggerKind===bt.Invoked||o.triggerKind===bt.Automatic)}a.is=p})(er=e.CodeActionContext||(e.CodeActionContext={}));var tr;(function(a){function h(u,o,R){var S={title:u},Y=!0;return typeof o=="string"?(Y=!1,S.kind=o):P.is(o)?S.command=o:S.edit=o,Y&&R!==void 0&&(S.kind=R),S}a.create=h;function p(u){var o=u;return o&&T.string(o.title)&&(o.diagnostics===void 0||T.typedArray(o.diagnostics,m.is))&&(o.kind===void 0||T.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||P.is(o.command))&&(o.isPreferred===void 0||T.boolean(o.isPreferred))&&(o.edit===void 0||x.is(o.edit))}a.is=p})(tr=e.CodeAction||(e.CodeAction={}));var Dn;(function(a){function h(u,o){var R={range:u};return T.defined(o)&&(R.data=o),R}a.create=h;function p(u){var o=u;return T.defined(o)&&v.is(o.range)&&(T.undefined(o.command)||P.is(o.command))}a.is=p})(Dn=e.CodeLens||(e.CodeLens={}));var nr;(function(a){function h(u,o){return{tabSize:u,insertSpaces:o}}a.create=h;function p(u){var o=u;return T.defined(o)&&T.uinteger(o.tabSize)&&T.boolean(o.insertSpaces)}a.is=p})(nr=e.FormattingOptions||(e.FormattingOptions={}));var Ot;(function(a){function h(u,o,R){return{range:u,target:o,data:R}}a.create=h;function p(u){var o=u;return T.defined(o)&&v.is(o.range)&&(T.undefined(o.target)||T.string(o.target))}a.is=p})(Ot=e.DocumentLink||(e.DocumentLink={}));var f;(function(a){function h(u,o){return{range:u,parent:o}}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&v.is(o.range)&&(o.parent===void 0||a.is(o.parent))}a.is=p})(f=e.SelectionRange||(e.SelectionRange={}));var E;(function(a){a.namespace="namespace",a.type="type",a.class="class",a.enum="enum",a.interface="interface",a.struct="struct",a.typeParameter="typeParameter",a.parameter="parameter",a.variable="variable",a.property="property",a.enumMember="enumMember",a.event="event",a.function="function",a.method="method",a.macro="macro",a.keyword="keyword",a.modifier="modifier",a.comment="comment",a.string="string",a.number="number",a.regexp="regexp",a.operator="operator",a.decorator="decorator"})(E=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var A;(function(a){a.declaration="declaration",a.definition="definition",a.readonly="readonly",a.static="static",a.deprecated="deprecated",a.abstract="abstract",a.async="async",a.modification="modification",a.documentation="documentation",a.defaultLibrary="defaultLibrary"})(A=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var H;(function(a){function h(p){var u=p;return T.objectLiteral(u)&&(u.resultId===void 0||typeof u.resultId=="string")&&Array.isArray(u.data)&&(u.data.length===0||typeof u.data[0]=="number")}a.is=h})(H=e.SemanticTokens||(e.SemanticTokens={}));var fe;(function(a){function h(u,o){return{range:u,text:o}}a.create=h;function p(u){var o=u;return o!=null&&v.is(o.range)&&T.string(o.text)}a.is=p})(fe=e.InlineValueText||(e.InlineValueText={}));var le;(function(a){function h(u,o,R){return{range:u,variableName:o,caseSensitiveLookup:R}}a.create=h;function p(u){var o=u;return o!=null&&v.is(o.range)&&T.boolean(o.caseSensitiveLookup)&&(T.string(o.variableName)||o.variableName===void 0)}a.is=p})(le=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var ye;(function(a){function h(u,o){return{range:u,expression:o}}a.create=h;function p(u){var o=u;return o!=null&&v.is(o.range)&&(T.string(o.expression)||o.expression===void 0)}a.is=p})(ye=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var ve;(function(a){function h(u,o){return{frameId:u,stoppedLocation:o}}a.create=h;function p(u){var o=u;return T.defined(o)&&v.is(u.stoppedLocation)}a.is=p})(ve=e.InlineValueContext||(e.InlineValueContext={}));var Z;(function(a){a.Type=1,a.Parameter=2;function h(p){return p===1||p===2}a.is=h})(Z=e.InlayHintKind||(e.InlayHintKind={}));var he;(function(a){function h(u){return{value:u}}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&(o.tooltip===void 0||T.string(o.tooltip)||We.is(o.tooltip))&&(o.location===void 0||l.is(o.location))&&(o.command===void 0||P.is(o.command))}a.is=p})(he=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var ce;(function(a){function h(u,o,R){var S={position:u,label:o};return R!==void 0&&(S.kind=R),S}a.create=h;function p(u){var o=u;return T.objectLiteral(o)&&d.is(o.position)&&(T.string(o.label)||T.typedArray(o.label,he.is))&&(o.kind===void 0||Z.is(o.kind))&&o.textEdits===void 0||T.typedArray(o.textEdits,$.is)&&(o.tooltip===void 0||T.string(o.tooltip)||We.is(o.tooltip))&&(o.paddingLeft===void 0||T.boolean(o.paddingLeft))&&(o.paddingRight===void 0||T.boolean(o.paddingRight))}a.is=p})(ce=e.InlayHint||(e.InlayHint={}));var be;(function(a){function h(p){var u=p;return T.objectLiteral(u)&&r.is(u.uri)&&T.string(u.name)}a.is=h})(be=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var Oe;(function(a){function h(R,S,Y,_e){return new Qe(R,S,Y,_e)}a.create=h;function p(R){var S=R;return!!(T.defined(S)&&T.string(S.uri)&&(T.undefined(S.languageId)||T.string(S.languageId))&&T.uinteger(S.lineCount)&&T.func(S.getText)&&T.func(S.positionAt)&&T.func(S.offsetAt))}a.is=p;function u(R,S){for(var Y=R.getText(),_e=o(S,function(on,rr){var Ps=on.range.start.line-rr.range.start.line;return Ps===0?on.range.start.character-rr.range.start.character:Ps}),pe=Y.length,nt=_e.length-1;nt>=0;nt--){var rt=_e[nt],kt=R.offsetAt(rt.range.start),te=R.offsetAt(rt.range.end);if(te<=pe)Y=Y.substring(0,kt)+rt.newText+Y.substring(te,Y.length);else throw new Error("Overlapping edit");pe=kt}return Y}a.applyEdits=u;function o(R,S){if(R.length<=1)return R;var Y=R.length/2|0,_e=R.slice(0,Y),pe=R.slice(Y);o(_e,S),o(pe,S);for(var nt=0,rt=0,kt=0;nt<_e.length&&rt<pe.length;){var te=S(_e[nt],pe[rt]);te<=0?R[kt++]=_e[nt++]:R[kt++]=pe[rt++]}for(;nt<_e.length;)R[kt++]=_e[nt++];for(;rt<pe.length;)R[kt++]=pe[rt++];return R}})(Oe=e.TextDocument||(e.TextDocument={}));var Qe=function(){function a(h,p,u,o){this._uri=h,this._languageId=p,this._version=u,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(a.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),a.prototype.getText=function(h){if(h){var p=this.offsetAt(h.start),u=this.offsetAt(h.end);return this._content.substring(p,u)}return this._content},a.prototype.update=function(h,p){this._content=h.text,this._version=p,this._lineOffsets=void 0},a.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var h=[],p=this._content,u=!0,o=0;o<p.length;o++){u&&(h.push(o),u=!1);var R=p.charAt(o);u=R==="\r"||R===`
`,R==="\r"&&o+1<p.length&&p.charAt(o+1)===`
`&&o++}u&&p.length>0&&h.push(p.length),this._lineOffsets=h}return this._lineOffsets},a.prototype.positionAt=function(h){h=Math.max(Math.min(h,this._content.length),0);var p=this.getLineOffsets(),u=0,o=p.length;if(o===0)return d.create(0,h);for(;u<o;){var R=Math.floor((u+o)/2);p[R]>h?o=R:u=R+1}var S=u-1;return d.create(S,h-p[S])},a.prototype.offsetAt=function(h){var p=this.getLineOffsets();if(h.line>=p.length)return this._content.length;if(h.line<0)return 0;var u=p[h.line],o=h.line+1<p.length?p[h.line+1]:this._content.length;return Math.max(Math.min(u+h.character,o),u)},Object.defineProperty(a.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),a}(),T;(function(a){var h=Object.prototype.toString;function p(te){return typeof te<"u"}a.defined=p;function u(te){return typeof te>"u"}a.undefined=u;function o(te){return te===!0||te===!1}a.boolean=o;function R(te){return h.call(te)==="[object String]"}a.string=R;function S(te){return h.call(te)==="[object Number]"}a.number=S;function Y(te,on,rr){return h.call(te)==="[object Number]"&&on<=te&&te<=rr}a.numberRange=Y;function _e(te){return h.call(te)==="[object Number]"&&-2147483648<=te&&te<=2147483647}a.integer=_e;function pe(te){return h.call(te)==="[object Number]"&&0<=te&&te<=2147483647}a.uinteger=pe;function nt(te){return h.call(te)==="[object Function]"}a.func=nt;function rt(te){return te!==null&&typeof te=="object"}a.objectLiteral=rt;function kt(te,on){return Array.isArray(te)&&te.every(on)}a.typedArray=kt})(T||(T={}))})});var Ce=F(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.ProtocolNotificationType=Ve.ProtocolNotificationType0=Ve.ProtocolRequestType=Ve.ProtocolRequestType0=Ve.RegistrationType=Ve.MessageDirection=void 0;var hn=Qt(),pl;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(pl=Ve.MessageDirection||(Ve.MessageDirection={}));var Fo=class{constructor(e){this.method=e}};Ve.RegistrationType=Fo;var jo=class extends hn.RequestType0{constructor(e){super(e)}};Ve.ProtocolRequestType0=jo;var Wo=class extends hn.RequestType{constructor(e){super(e,hn.ParameterStructures.byName)}};Ve.ProtocolRequestType=Wo;var Uo=class extends hn.NotificationType0{constructor(e){super(e)}};Ve.ProtocolNotificationType0=Uo;var Ho=class extends hn.NotificationType{constructor(e){super(e,hn.ParameterStructures.byName)}};Ve.ProtocolNotificationType=Ho});var Cr=F(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.objectLiteral=De.typedArray=De.stringArray=De.array=De.func=De.error=De.number=De.string=De.boolean=void 0;function gl(t){return t===!0||t===!1}De.boolean=gl;function ua(t){return typeof t=="string"||t instanceof String}De.string=ua;function ml(t){return typeof t=="number"||t instanceof Number}De.number=ml;function yl(t){return t instanceof Error}De.error=yl;function vl(t){return typeof t=="function"}De.func=vl;function la(t){return Array.isArray(t)}De.array=la;function Tl(t){return la(t)&&t.every(e=>ua(e))}De.stringArray=Tl;function Cl(t,e){return Array.isArray(t)&&t.every(e)}De.typedArray=Cl;function Rl(t){return t!==null&&typeof t=="object"}De.objectLiteral=Rl});var fa=F(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.ImplementationRequest=void 0;var da=Ce(),_l;(function(t){t.method="textDocument/implementation",t.messageDirection=da.MessageDirection.clientToServer,t.type=new da.ProtocolRequestType(t.method)})(_l=On.ImplementationRequest||(On.ImplementationRequest={}))});var pa=F(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.TypeDefinitionRequest=void 0;var ha=Ce(),bl;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=ha.MessageDirection.clientToServer,t.type=new ha.ProtocolRequestType(t.method)})(bl=An.TypeDefinitionRequest||(An.TypeDefinitionRequest={}))});var ga=F(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.DidChangeWorkspaceFoldersNotification=Lt.WorkspaceFoldersRequest=void 0;var Rr=Ce(),kl;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Rr.MessageDirection.serverToClient,t.type=new Rr.ProtocolRequestType0(t.method)})(kl=Lt.WorkspaceFoldersRequest||(Lt.WorkspaceFoldersRequest={}));var Dl;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Rr.MessageDirection.clientToServer,t.type=new Rr.ProtocolNotificationType(t.method)})(Dl=Lt.DidChangeWorkspaceFoldersNotification||(Lt.DidChangeWorkspaceFoldersNotification={}))});var ya=F(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.ConfigurationRequest=void 0;var ma=Ce(),El;(function(t){t.method="workspace/configuration",t.messageDirection=ma.MessageDirection.serverToClient,t.type=new ma.ProtocolRequestType(t.method)})(El=Mn.ConfigurationRequest||(Mn.ConfigurationRequest={}))});var va=F(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.ColorPresentationRequest=qt.DocumentColorRequest=void 0;var _r=Ce(),Sl;(function(t){t.method="textDocument/documentColor",t.messageDirection=_r.MessageDirection.clientToServer,t.type=new _r.ProtocolRequestType(t.method)})(Sl=qt.DocumentColorRequest||(qt.DocumentColorRequest={}));var Nl;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=_r.MessageDirection.clientToServer,t.type=new _r.ProtocolRequestType(t.method)})(Nl=qt.ColorPresentationRequest||(qt.ColorPresentationRequest={}))});var Ca=F(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.FoldingRangeRequest=void 0;var Ta=Ce(),Pl;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Ta.MessageDirection.clientToServer,t.type=new Ta.ProtocolRequestType(t.method)})(Pl=Ln.FoldingRangeRequest||(Ln.FoldingRangeRequest={}))});var _a=F(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.DeclarationRequest=void 0;var Ra=Ce(),wl;(function(t){t.method="textDocument/declaration",t.messageDirection=Ra.MessageDirection.clientToServer,t.type=new Ra.ProtocolRequestType(t.method)})(wl=qn.DeclarationRequest||(qn.DeclarationRequest={}))});var ka=F(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.SelectionRangeRequest=void 0;var ba=Ce(),Il;(function(t){t.method="textDocument/selectionRange",t.messageDirection=ba.MessageDirection.clientToServer,t.type=new ba.ProtocolRequestType(t.method)})(Il=Fn.SelectionRangeRequest||(Fn.SelectionRangeRequest={}))});var Da=F(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.WorkDoneProgressCancelNotification=st.WorkDoneProgressCreateRequest=st.WorkDoneProgress=void 0;var xl=Qt(),br=Ce(),Ol;(function(t){t.type=new xl.ProgressType;function e(n){return n===t.type}t.is=e})(Ol=st.WorkDoneProgress||(st.WorkDoneProgress={}));var Al;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=br.MessageDirection.serverToClient,t.type=new br.ProtocolRequestType(t.method)})(Al=st.WorkDoneProgressCreateRequest||(st.WorkDoneProgressCreateRequest={}));var Ml;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=br.MessageDirection.clientToServer,t.type=new br.ProtocolNotificationType(t.method)})(Ml=st.WorkDoneProgressCancelNotification||(st.WorkDoneProgressCancelNotification={}))});var Ea=F(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.CallHierarchyOutgoingCallsRequest=at.CallHierarchyIncomingCallsRequest=at.CallHierarchyPrepareRequest=void 0;var pn=Ce(),Ll;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolRequestType(t.method)})(Ll=at.CallHierarchyPrepareRequest||(at.CallHierarchyPrepareRequest={}));var ql;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolRequestType(t.method)})(ql=at.CallHierarchyIncomingCallsRequest||(at.CallHierarchyIncomingCallsRequest={}));var Fl;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolRequestType(t.method)})(Fl=at.CallHierarchyOutgoingCallsRequest||(at.CallHierarchyOutgoingCallsRequest={}))});var Sa=F(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.SemanticTokensRefreshRequest=Ee.SemanticTokensRangeRequest=Ee.SemanticTokensDeltaRequest=Ee.SemanticTokensRequest=Ee.SemanticTokensRegistrationType=Ee.TokenFormat=void 0;var Pt=Ce(),jl;(function(t){t.Relative="relative"})(jl=Ee.TokenFormat||(Ee.TokenFormat={}));var kr;(function(t){t.method="textDocument/semanticTokens",t.type=new Pt.RegistrationType(t.method)})(kr=Ee.SemanticTokensRegistrationType||(Ee.SemanticTokensRegistrationType={}));var Wl;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Pt.MessageDirection.clientToServer,t.type=new Pt.ProtocolRequestType(t.method),t.registrationMethod=kr.method})(Wl=Ee.SemanticTokensRequest||(Ee.SemanticTokensRequest={}));var Ul;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Pt.MessageDirection.clientToServer,t.type=new Pt.ProtocolRequestType(t.method),t.registrationMethod=kr.method})(Ul=Ee.SemanticTokensDeltaRequest||(Ee.SemanticTokensDeltaRequest={}));var Hl;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Pt.MessageDirection.clientToServer,t.type=new Pt.ProtocolRequestType(t.method),t.registrationMethod=kr.method})(Hl=Ee.SemanticTokensRangeRequest||(Ee.SemanticTokensRangeRequest={}));var Bl;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Pt.MessageDirection.serverToClient,t.type=new Pt.ProtocolRequestType0(t.method)})(Bl=Ee.SemanticTokensRefreshRequest||(Ee.SemanticTokensRefreshRequest={}))});var Pa=F(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.ShowDocumentRequest=void 0;var Na=Ce(),Vl;(function(t){t.method="window/showDocument",t.messageDirection=Na.MessageDirection.serverToClient,t.type=new Na.ProtocolRequestType(t.method)})(Vl=jn.ShowDocumentRequest||(jn.ShowDocumentRequest={}))});var Ia=F(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.LinkedEditingRangeRequest=void 0;var wa=Ce(),$l;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=wa.MessageDirection.clientToServer,t.type=new wa.ProtocolRequestType(t.method)})($l=Wn.LinkedEditingRangeRequest||(Wn.LinkedEditingRangeRequest={}))});var xa=F(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.WillDeleteFilesRequest=Re.DidDeleteFilesNotification=Re.DidRenameFilesNotification=Re.WillRenameFilesRequest=Re.DidCreateFilesNotification=Re.WillCreateFilesRequest=Re.FileOperationPatternKind=void 0;var Xe=Ce(),zl;(function(t){t.file="file",t.folder="folder"})(zl=Re.FileOperationPatternKind||(Re.FileOperationPatternKind={}));var Gl;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolRequestType(t.method)})(Gl=Re.WillCreateFilesRequest||(Re.WillCreateFilesRequest={}));var Kl;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolNotificationType(t.method)})(Kl=Re.DidCreateFilesNotification||(Re.DidCreateFilesNotification={}));var Yl;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolRequestType(t.method)})(Yl=Re.WillRenameFilesRequest||(Re.WillRenameFilesRequest={}));var Ql;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolNotificationType(t.method)})(Ql=Re.DidRenameFilesNotification||(Re.DidRenameFilesNotification={}));var Xl;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolNotificationType(t.method)})(Xl=Re.DidDeleteFilesNotification||(Re.DidDeleteFilesNotification={}));var Jl;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolRequestType(t.method)})(Jl=Re.WillDeleteFilesRequest||(Re.WillDeleteFilesRequest={}))});var Aa=F(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.MonikerRequest=ct.MonikerKind=ct.UniquenessLevel=void 0;var Oa=Ce(),Zl;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Zl=ct.UniquenessLevel||(ct.UniquenessLevel={}));var ed;(function(t){t.$import="import",t.$export="export",t.local="local"})(ed=ct.MonikerKind||(ct.MonikerKind={}));var td;(function(t){t.method="textDocument/moniker",t.messageDirection=Oa.MessageDirection.clientToServer,t.type=new Oa.ProtocolRequestType(t.method)})(td=ct.MonikerRequest||(ct.MonikerRequest={}))});var Ma=F(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.TypeHierarchySubtypesRequest=ut.TypeHierarchySupertypesRequest=ut.TypeHierarchyPrepareRequest=void 0;var gn=Ce(),nd;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=gn.MessageDirection.clientToServer,t.type=new gn.ProtocolRequestType(t.method)})(nd=ut.TypeHierarchyPrepareRequest||(ut.TypeHierarchyPrepareRequest={}));var rd;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=gn.MessageDirection.clientToServer,t.type=new gn.ProtocolRequestType(t.method)})(rd=ut.TypeHierarchySupertypesRequest||(ut.TypeHierarchySupertypesRequest={}));var id;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=gn.MessageDirection.clientToServer,t.type=new gn.ProtocolRequestType(t.method)})(id=ut.TypeHierarchySubtypesRequest||(ut.TypeHierarchySubtypesRequest={}))});var La=F(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.InlineValueRefreshRequest=Ft.InlineValueRequest=void 0;var Dr=Ce(),od;(function(t){t.method="textDocument/inlineValue",t.messageDirection=Dr.MessageDirection.clientToServer,t.type=new Dr.ProtocolRequestType(t.method)})(od=Ft.InlineValueRequest||(Ft.InlineValueRequest={}));var sd;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=Dr.MessageDirection.serverToClient,t.type=new Dr.ProtocolRequestType0(t.method)})(sd=Ft.InlineValueRefreshRequest||(Ft.InlineValueRefreshRequest={}))});var qa=F(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.InlayHintRefreshRequest=lt.InlayHintResolveRequest=lt.InlayHintRequest=void 0;var mn=Ce(),ad;(function(t){t.method="textDocument/inlayHint",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolRequestType(t.method)})(ad=lt.InlayHintRequest||(lt.InlayHintRequest={}));var cd;(function(t){t.method="inlayHint/resolve",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolRequestType(t.method)})(cd=lt.InlayHintResolveRequest||(lt.InlayHintResolveRequest={}));var ud;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=mn.MessageDirection.serverToClient,t.type=new mn.ProtocolRequestType0(t.method)})(ud=lt.InlayHintRefreshRequest||(lt.InlayHintRefreshRequest={}))});var ja=F(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.DiagnosticRefreshRequest=Le.WorkspaceDiagnosticRequest=Le.DocumentDiagnosticRequest=Le.DocumentDiagnosticReportKind=Le.DiagnosticServerCancellationData=void 0;var Fa=Qt(),ld=Cr(),yn=Ce(),dd;(function(t){function e(n){let r=n;return r&&ld.boolean(r.retriggerRequest)}t.is=e})(dd=Le.DiagnosticServerCancellationData||(Le.DiagnosticServerCancellationData={}));var fd;(function(t){t.Full="full",t.Unchanged="unchanged"})(fd=Le.DocumentDiagnosticReportKind||(Le.DocumentDiagnosticReportKind={}));var hd;(function(t){t.method="textDocument/diagnostic",t.messageDirection=yn.MessageDirection.clientToServer,t.type=new yn.ProtocolRequestType(t.method),t.partialResult=new Fa.ProgressType})(hd=Le.DocumentDiagnosticRequest||(Le.DocumentDiagnosticRequest={}));var pd;(function(t){t.method="workspace/diagnostic",t.messageDirection=yn.MessageDirection.clientToServer,t.type=new yn.ProtocolRequestType(t.method),t.partialResult=new Fa.ProgressType})(pd=Le.WorkspaceDiagnosticRequest||(Le.WorkspaceDiagnosticRequest={}));var gd;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=yn.MessageDirection.serverToClient,t.type=new yn.ProtocolRequestType0(t.method)})(gd=Le.DiagnosticRefreshRequest||(Le.DiagnosticRefreshRequest={}))});var Ha=F(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.DidCloseNotebookDocumentNotification=se.DidSaveNotebookDocumentNotification=se.DidChangeNotebookDocumentNotification=se.NotebookCellArrayChange=se.DidOpenNotebookDocumentNotification=se.NotebookDocumentSyncRegistrationType=se.NotebookDocument=se.NotebookCell=se.ExecutionSummary=se.NotebookCellKind=void 0;var Un=Tr(),dt=Cr(),vt=Ce(),Wa;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(Wa=se.NotebookCellKind||(se.NotebookCellKind={}));var Ua;(function(t){function e(i,s){let d={executionOrder:i};return(s===!0||s===!1)&&(d.success=s),d}t.create=e;function n(i){let s=i;return dt.objectLiteral(s)&&Un.uinteger.is(s.executionOrder)&&(s.success===void 0||dt.boolean(s.success))}t.is=n;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=r})(Ua=se.ExecutionSummary||(se.ExecutionSummary={}));var Bo;(function(t){function e(s,d){return{kind:s,document:d}}t.create=e;function n(s){let d=s;return dt.objectLiteral(d)&&Wa.is(d.kind)&&Un.DocumentUri.is(d.document)&&(d.metadata===void 0||dt.objectLiteral(d.metadata))}t.is=n;function r(s,d){let v=new Set;return s.document!==d.document&&v.add("document"),s.kind!==d.kind&&v.add("kind"),s.executionSummary!==d.executionSummary&&v.add("executionSummary"),(s.metadata!==void 0||d.metadata!==void 0)&&!i(s.metadata,d.metadata)&&v.add("metadata"),(s.executionSummary!==void 0||d.executionSummary!==void 0)&&!Ua.equals(s.executionSummary,d.executionSummary)&&v.add("executionSummary"),v}t.diff=r;function i(s,d){if(s===d)return!0;if(s==null||d===null||d===void 0||typeof s!=typeof d||typeof s!="object")return!1;let v=Array.isArray(s),l=Array.isArray(d);if(v!==l)return!1;if(v&&l){if(s.length!==d.length)return!1;for(let g=0;g<s.length;g++)if(!i(s[g],d[g]))return!1}if(dt.objectLiteral(s)&&dt.objectLiteral(d)){let g=Object.keys(s),y=Object.keys(d);if(g.length!==y.length||(g.sort(),y.sort(),!i(g,y)))return!1;for(let _=0;_<g.length;_++){let b=g[_];if(!i(s[b],d[b]))return!1}}return!0}})(Bo=se.NotebookCell||(se.NotebookCell={}));var md;(function(t){function e(r,i,s,d){return{uri:r,notebookType:i,version:s,cells:d}}t.create=e;function n(r){let i=r;return dt.objectLiteral(i)&&dt.string(i.uri)&&Un.integer.is(i.version)&&dt.typedArray(i.cells,Bo.is)}t.is=n})(md=se.NotebookDocument||(se.NotebookDocument={}));var Hn;(function(t){t.method="notebookDocument/sync",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.RegistrationType(t.method)})(Hn=se.NotebookDocumentSyncRegistrationType||(se.NotebookDocumentSyncRegistrationType={}));var yd;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method),t.registrationMethod=Hn.method})(yd=se.DidOpenNotebookDocumentNotification||(se.DidOpenNotebookDocumentNotification={}));var vd;(function(t){function e(r){let i=r;return dt.objectLiteral(i)&&Un.uinteger.is(i.start)&&Un.uinteger.is(i.deleteCount)&&(i.cells===void 0||dt.typedArray(i.cells,Bo.is))}t.is=e;function n(r,i,s){let d={start:r,deleteCount:i};return s!==void 0&&(d.cells=s),d}t.create=n})(vd=se.NotebookCellArrayChange||(se.NotebookCellArrayChange={}));var Td;(function(t){t.method="notebookDocument/didChange",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method),t.registrationMethod=Hn.method})(Td=se.DidChangeNotebookDocumentNotification||(se.DidChangeNotebookDocumentNotification={}));var Cd;(function(t){t.method="notebookDocument/didSave",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method),t.registrationMethod=Hn.method})(Cd=se.DidSaveNotebookDocumentNotification||(se.DidSaveNotebookDocumentNotification={}));var Rd;(function(t){t.method="notebookDocument/didClose",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method),t.registrationMethod=Hn.method})(Rd=se.DidCloseNotebookDocumentNotification||(se.DidCloseNotebookDocumentNotification={}))});var Xa=F(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.WorkspaceSymbolRequest=c.CodeActionResolveRequest=c.CodeActionRequest=c.DocumentSymbolRequest=c.DocumentHighlightRequest=c.ReferencesRequest=c.DefinitionRequest=c.SignatureHelpRequest=c.SignatureHelpTriggerKind=c.HoverRequest=c.CompletionResolveRequest=c.CompletionRequest=c.CompletionTriggerKind=c.PublishDiagnosticsNotification=c.WatchKind=c.RelativePattern=c.FileChangeType=c.DidChangeWatchedFilesNotification=c.WillSaveTextDocumentWaitUntilRequest=c.WillSaveTextDocumentNotification=c.TextDocumentSaveReason=c.DidSaveTextDocumentNotification=c.DidCloseTextDocumentNotification=c.DidChangeTextDocumentNotification=c.TextDocumentContentChangeEvent=c.DidOpenTextDocumentNotification=c.TextDocumentSyncKind=c.TelemetryEventNotification=c.LogMessageNotification=c.ShowMessageRequest=c.ShowMessageNotification=c.MessageType=c.DidChangeConfigurationNotification=c.ExitNotification=c.ShutdownRequest=c.InitializedNotification=c.InitializeErrorCodes=c.InitializeRequest=c.WorkDoneProgressOptions=c.TextDocumentRegistrationOptions=c.StaticRegistrationOptions=c.PositionEncodingKind=c.FailureHandlingKind=c.ResourceOperationKind=c.UnregistrationRequest=c.RegistrationRequest=c.DocumentSelector=c.NotebookCellTextDocumentFilter=c.NotebookDocumentFilter=c.TextDocumentFilter=void 0;c.TypeHierarchySubtypesRequest=c.TypeHierarchyPrepareRequest=c.MonikerRequest=c.MonikerKind=c.UniquenessLevel=c.WillDeleteFilesRequest=c.DidDeleteFilesNotification=c.WillRenameFilesRequest=c.DidRenameFilesNotification=c.WillCreateFilesRequest=c.DidCreateFilesNotification=c.FileOperationPatternKind=c.LinkedEditingRangeRequest=c.ShowDocumentRequest=c.SemanticTokensRegistrationType=c.SemanticTokensRefreshRequest=c.SemanticTokensRangeRequest=c.SemanticTokensDeltaRequest=c.SemanticTokensRequest=c.TokenFormat=c.CallHierarchyPrepareRequest=c.CallHierarchyOutgoingCallsRequest=c.CallHierarchyIncomingCallsRequest=c.WorkDoneProgressCancelNotification=c.WorkDoneProgressCreateRequest=c.WorkDoneProgress=c.SelectionRangeRequest=c.DeclarationRequest=c.FoldingRangeRequest=c.ColorPresentationRequest=c.DocumentColorRequest=c.ConfigurationRequest=c.DidChangeWorkspaceFoldersNotification=c.WorkspaceFoldersRequest=c.TypeDefinitionRequest=c.ImplementationRequest=c.ApplyWorkspaceEditRequest=c.ExecuteCommandRequest=c.PrepareRenameRequest=c.RenameRequest=c.PrepareSupportDefaultBehavior=c.DocumentOnTypeFormattingRequest=c.DocumentRangeFormattingRequest=c.DocumentFormattingRequest=c.DocumentLinkResolveRequest=c.DocumentLinkRequest=c.CodeLensRefreshRequest=c.CodeLensResolveRequest=c.CodeLensRequest=c.WorkspaceSymbolResolveRequest=void 0;c.DidCloseNotebookDocumentNotification=c.DidSaveNotebookDocumentNotification=c.DidChangeNotebookDocumentNotification=c.NotebookCellArrayChange=c.DidOpenNotebookDocumentNotification=c.NotebookDocumentSyncRegistrationType=c.NotebookDocument=c.NotebookCell=c.ExecutionSummary=c.NotebookCellKind=c.DiagnosticRefreshRequest=c.WorkspaceDiagnosticRequest=c.DocumentDiagnosticRequest=c.DocumentDiagnosticReportKind=c.DiagnosticServerCancellationData=c.InlayHintRefreshRequest=c.InlayHintResolveRequest=c.InlayHintRequest=c.InlineValueRefreshRequest=c.InlineValueRequest=c.TypeHierarchySupertypesRequest=void 0;var O=Ce(),Ba=Tr(),qe=Cr(),_d=fa();Object.defineProperty(c,"ImplementationRequest",{enumerable:!0,get:function(){return _d.ImplementationRequest}});var bd=pa();Object.defineProperty(c,"TypeDefinitionRequest",{enumerable:!0,get:function(){return bd.TypeDefinitionRequest}});var Va=ga();Object.defineProperty(c,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Va.WorkspaceFoldersRequest}});Object.defineProperty(c,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Va.DidChangeWorkspaceFoldersNotification}});var kd=ya();Object.defineProperty(c,"ConfigurationRequest",{enumerable:!0,get:function(){return kd.ConfigurationRequest}});var $a=va();Object.defineProperty(c,"DocumentColorRequest",{enumerable:!0,get:function(){return $a.DocumentColorRequest}});Object.defineProperty(c,"ColorPresentationRequest",{enumerable:!0,get:function(){return $a.ColorPresentationRequest}});var Dd=Ca();Object.defineProperty(c,"FoldingRangeRequest",{enumerable:!0,get:function(){return Dd.FoldingRangeRequest}});var Ed=_a();Object.defineProperty(c,"DeclarationRequest",{enumerable:!0,get:function(){return Ed.DeclarationRequest}});var Sd=ka();Object.defineProperty(c,"SelectionRangeRequest",{enumerable:!0,get:function(){return Sd.SelectionRangeRequest}});var Vo=Da();Object.defineProperty(c,"WorkDoneProgress",{enumerable:!0,get:function(){return Vo.WorkDoneProgress}});Object.defineProperty(c,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Vo.WorkDoneProgressCreateRequest}});Object.defineProperty(c,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Vo.WorkDoneProgressCancelNotification}});var $o=Ea();Object.defineProperty(c,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return $o.CallHierarchyIncomingCallsRequest}});Object.defineProperty(c,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return $o.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(c,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return $o.CallHierarchyPrepareRequest}});var vn=Sa();Object.defineProperty(c,"TokenFormat",{enumerable:!0,get:function(){return vn.TokenFormat}});Object.defineProperty(c,"SemanticTokensRequest",{enumerable:!0,get:function(){return vn.SemanticTokensRequest}});Object.defineProperty(c,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return vn.SemanticTokensDeltaRequest}});Object.defineProperty(c,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return vn.SemanticTokensRangeRequest}});Object.defineProperty(c,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return vn.SemanticTokensRefreshRequest}});Object.defineProperty(c,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return vn.SemanticTokensRegistrationType}});var Nd=Pa();Object.defineProperty(c,"ShowDocumentRequest",{enumerable:!0,get:function(){return Nd.ShowDocumentRequest}});var Pd=Ia();Object.defineProperty(c,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Pd.LinkedEditingRangeRequest}});var Xt=xa();Object.defineProperty(c,"FileOperationPatternKind",{enumerable:!0,get:function(){return Xt.FileOperationPatternKind}});Object.defineProperty(c,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Xt.DidCreateFilesNotification}});Object.defineProperty(c,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Xt.WillCreateFilesRequest}});Object.defineProperty(c,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Xt.DidRenameFilesNotification}});Object.defineProperty(c,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Xt.WillRenameFilesRequest}});Object.defineProperty(c,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Xt.DidDeleteFilesNotification}});Object.defineProperty(c,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Xt.WillDeleteFilesRequest}});var zo=Aa();Object.defineProperty(c,"UniquenessLevel",{enumerable:!0,get:function(){return zo.UniquenessLevel}});Object.defineProperty(c,"MonikerKind",{enumerable:!0,get:function(){return zo.MonikerKind}});Object.defineProperty(c,"MonikerRequest",{enumerable:!0,get:function(){return zo.MonikerRequest}});var Go=Ma();Object.defineProperty(c,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Go.TypeHierarchyPrepareRequest}});Object.defineProperty(c,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Go.TypeHierarchySubtypesRequest}});Object.defineProperty(c,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Go.TypeHierarchySupertypesRequest}});var za=La();Object.defineProperty(c,"InlineValueRequest",{enumerable:!0,get:function(){return za.InlineValueRequest}});Object.defineProperty(c,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return za.InlineValueRefreshRequest}});var Ko=qa();Object.defineProperty(c,"InlayHintRequest",{enumerable:!0,get:function(){return Ko.InlayHintRequest}});Object.defineProperty(c,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Ko.InlayHintResolveRequest}});Object.defineProperty(c,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Ko.InlayHintRefreshRequest}});var Bn=ja();Object.defineProperty(c,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Bn.DiagnosticServerCancellationData}});Object.defineProperty(c,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Bn.DocumentDiagnosticReportKind}});Object.defineProperty(c,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Bn.DocumentDiagnosticRequest}});Object.defineProperty(c,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Bn.WorkspaceDiagnosticRequest}});Object.defineProperty(c,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Bn.DiagnosticRefreshRequest}});var Tt=Ha();Object.defineProperty(c,"NotebookCellKind",{enumerable:!0,get:function(){return Tt.NotebookCellKind}});Object.defineProperty(c,"ExecutionSummary",{enumerable:!0,get:function(){return Tt.ExecutionSummary}});Object.defineProperty(c,"NotebookCell",{enumerable:!0,get:function(){return Tt.NotebookCell}});Object.defineProperty(c,"NotebookDocument",{enumerable:!0,get:function(){return Tt.NotebookDocument}});Object.defineProperty(c,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Tt.NotebookDocumentSyncRegistrationType}});Object.defineProperty(c,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Tt.DidOpenNotebookDocumentNotification}});Object.defineProperty(c,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Tt.NotebookCellArrayChange}});Object.defineProperty(c,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Tt.DidChangeNotebookDocumentNotification}});Object.defineProperty(c,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Tt.DidSaveNotebookDocumentNotification}});Object.defineProperty(c,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Tt.DidCloseNotebookDocumentNotification}});var Ga;(function(t){function e(n){let r=n;return qe.string(r.language)||qe.string(r.scheme)||qe.string(r.pattern)}t.is=e})(Ga=c.TextDocumentFilter||(c.TextDocumentFilter={}));var Ka;(function(t){function e(n){let r=n;return qe.objectLiteral(r)&&(qe.string(r.notebookType)||qe.string(r.scheme)||qe.string(r.pattern))}t.is=e})(Ka=c.NotebookDocumentFilter||(c.NotebookDocumentFilter={}));var Ya;(function(t){function e(n){let r=n;return qe.objectLiteral(r)&&(qe.string(r.notebook)||Ka.is(r.notebook))&&(r.language===void 0||qe.string(r.language))}t.is=e})(Ya=c.NotebookCellTextDocumentFilter||(c.NotebookCellTextDocumentFilter={}));var Qa;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!qe.string(r)&&!Ga.is(r)&&!Ya.is(r))return!1;return!0}t.is=e})(Qa=c.DocumentSelector||(c.DocumentSelector={}));var wd;(function(t){t.method="client/registerCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(wd=c.RegistrationRequest||(c.RegistrationRequest={}));var Id;(function(t){t.method="client/unregisterCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(Id=c.UnregistrationRequest||(c.UnregistrationRequest={}));var xd;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(xd=c.ResourceOperationKind||(c.ResourceOperationKind={}));var Od;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Od=c.FailureHandlingKind||(c.FailureHandlingKind={}));var Ad;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Ad=c.PositionEncodingKind||(c.PositionEncodingKind={}));var Md;(function(t){function e(n){let r=n;return r&&qe.string(r.id)&&r.id.length>0}t.hasId=e})(Md=c.StaticRegistrationOptions||(c.StaticRegistrationOptions={}));var Ld;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Qa.is(r.documentSelector))}t.is=e})(Ld=c.TextDocumentRegistrationOptions||(c.TextDocumentRegistrationOptions={}));var qd;(function(t){function e(r){let i=r;return qe.objectLiteral(i)&&(i.workDoneProgress===void 0||qe.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&qe.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(qd=c.WorkDoneProgressOptions||(c.WorkDoneProgressOptions={}));var Fd;(function(t){t.method="initialize",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Fd=c.InitializeRequest||(c.InitializeRequest={}));var jd;(function(t){t.unknownProtocolVersion=1})(jd=c.InitializeErrorCodes||(c.InitializeErrorCodes={}));var Wd;(function(t){t.method="initialized",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Wd=c.InitializedNotification||(c.InitializedNotification={}));var Ud;(function(t){t.method="shutdown",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType0(t.method)})(Ud=c.ShutdownRequest||(c.ShutdownRequest={}));var Hd;(function(t){t.method="exit",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType0(t.method)})(Hd=c.ExitNotification||(c.ExitNotification={}));var Bd;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Bd=c.DidChangeConfigurationNotification||(c.DidChangeConfigurationNotification={}));var Vd;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Vd=c.MessageType||(c.MessageType={}));var $d;(function(t){t.method="window/showMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})($d=c.ShowMessageNotification||(c.ShowMessageNotification={}));var zd;(function(t){t.method="window/showMessageRequest",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(zd=c.ShowMessageRequest||(c.ShowMessageRequest={}));var Gd;(function(t){t.method="window/logMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Gd=c.LogMessageNotification||(c.LogMessageNotification={}));var Kd;(function(t){t.method="telemetry/event",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Kd=c.TelemetryEventNotification||(c.TelemetryEventNotification={}));var Yd;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Yd=c.TextDocumentSyncKind||(c.TextDocumentSyncKind={}));var Qd;(function(t){t.method="textDocument/didOpen",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Qd=c.DidOpenTextDocumentNotification||(c.DidOpenTextDocumentNotification={}));var Xd;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(Xd=c.TextDocumentContentChangeEvent||(c.TextDocumentContentChangeEvent={}));var Jd;(function(t){t.method="textDocument/didChange",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Jd=c.DidChangeTextDocumentNotification||(c.DidChangeTextDocumentNotification={}));var Zd;(function(t){t.method="textDocument/didClose",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Zd=c.DidCloseTextDocumentNotification||(c.DidCloseTextDocumentNotification={}));var ef;(function(t){t.method="textDocument/didSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(ef=c.DidSaveTextDocumentNotification||(c.DidSaveTextDocumentNotification={}));var tf;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(tf=c.TextDocumentSaveReason||(c.TextDocumentSaveReason={}));var nf;(function(t){t.method="textDocument/willSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(nf=c.WillSaveTextDocumentNotification||(c.WillSaveTextDocumentNotification={}));var rf;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(rf=c.WillSaveTextDocumentWaitUntilRequest||(c.WillSaveTextDocumentWaitUntilRequest={}));var of;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(of=c.DidChangeWatchedFilesNotification||(c.DidChangeWatchedFilesNotification={}));var sf;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(sf=c.FileChangeType||(c.FileChangeType={}));var af;(function(t){function e(n){let r=n;return qe.objectLiteral(r)&&(Ba.URI.is(r.baseUri)||Ba.WorkspaceFolder.is(r.baseUri))&&qe.string(r.pattern)}t.is=e})(af=c.RelativePattern||(c.RelativePattern={}));var cf;(function(t){t.Create=1,t.Change=2,t.Delete=4})(cf=c.WatchKind||(c.WatchKind={}));var uf;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(uf=c.PublishDiagnosticsNotification||(c.PublishDiagnosticsNotification={}));var lf;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(lf=c.CompletionTriggerKind||(c.CompletionTriggerKind={}));var df;(function(t){t.method="textDocument/completion",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(df=c.CompletionRequest||(c.CompletionRequest={}));var ff;(function(t){t.method="completionItem/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(ff=c.CompletionResolveRequest||(c.CompletionResolveRequest={}));var hf;(function(t){t.method="textDocument/hover",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(hf=c.HoverRequest||(c.HoverRequest={}));var pf;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(pf=c.SignatureHelpTriggerKind||(c.SignatureHelpTriggerKind={}));var gf;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(gf=c.SignatureHelpRequest||(c.SignatureHelpRequest={}));var mf;(function(t){t.method="textDocument/definition",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(mf=c.DefinitionRequest||(c.DefinitionRequest={}));var yf;(function(t){t.method="textDocument/references",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(yf=c.ReferencesRequest||(c.ReferencesRequest={}));var vf;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(vf=c.DocumentHighlightRequest||(c.DocumentHighlightRequest={}));var Tf;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Tf=c.DocumentSymbolRequest||(c.DocumentSymbolRequest={}));var Cf;(function(t){t.method="textDocument/codeAction",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Cf=c.CodeActionRequest||(c.CodeActionRequest={}));var Rf;(function(t){t.method="codeAction/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Rf=c.CodeActionResolveRequest||(c.CodeActionResolveRequest={}));var _f;(function(t){t.method="workspace/symbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(_f=c.WorkspaceSymbolRequest||(c.WorkspaceSymbolRequest={}));var bf;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(bf=c.WorkspaceSymbolResolveRequest||(c.WorkspaceSymbolResolveRequest={}));var kf;(function(t){t.method="textDocument/codeLens",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(kf=c.CodeLensRequest||(c.CodeLensRequest={}));var Df;(function(t){t.method="codeLens/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Df=c.CodeLensResolveRequest||(c.CodeLensResolveRequest={}));var Ef;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType0(t.method)})(Ef=c.CodeLensRefreshRequest||(c.CodeLensRefreshRequest={}));var Sf;(function(t){t.method="textDocument/documentLink",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Sf=c.DocumentLinkRequest||(c.DocumentLinkRequest={}));var Nf;(function(t){t.method="documentLink/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Nf=c.DocumentLinkResolveRequest||(c.DocumentLinkResolveRequest={}));var Pf;(function(t){t.method="textDocument/formatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Pf=c.DocumentFormattingRequest||(c.DocumentFormattingRequest={}));var wf;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(wf=c.DocumentRangeFormattingRequest||(c.DocumentRangeFormattingRequest={}));var If;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(If=c.DocumentOnTypeFormattingRequest||(c.DocumentOnTypeFormattingRequest={}));var xf;(function(t){t.Identifier=1})(xf=c.PrepareSupportDefaultBehavior||(c.PrepareSupportDefaultBehavior={}));var Of;(function(t){t.method="textDocument/rename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Of=c.RenameRequest||(c.RenameRequest={}));var Af;(function(t){t.method="textDocument/prepareRename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Af=c.PrepareRenameRequest||(c.PrepareRenameRequest={}));var Mf;(function(t){t.method="workspace/executeCommand",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Mf=c.ExecuteCommandRequest||(c.ExecuteCommandRequest={}));var Lf;(function(t){t.method="workspace/applyEdit",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType("workspace/applyEdit")})(Lf=c.ApplyWorkspaceEditRequest||(c.ApplyWorkspaceEditRequest={}))});var Za=F(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.createProtocolConnection=void 0;var Ja=Qt();function qf(t,e,n,r){return Ja.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ja.createMessageConnection)(t,e,n,r)}Er.createProtocolConnection=qf});var ec=F($e=>{"use strict";var Ff=$e&&$e.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Sr=$e&&$e.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ff(e,t,n)};Object.defineProperty($e,"__esModule",{value:!0});$e.LSPErrorCodes=$e.createProtocolConnection=void 0;Sr(Qt(),$e);Sr(Tr(),$e);Sr(Ce(),$e);Sr(Xa(),$e);var jf=Za();Object.defineProperty($e,"createProtocolConnection",{enumerable:!0,get:function(){return jf.createProtocolConnection}});var Wf;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(Wf=$e.LSPErrorCodes||($e.LSPErrorCodes={}))});var Ne=F(Ct=>{"use strict";var Uf=Ct&&Ct.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),tc=Ct&&Ct.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Uf(e,t,n)};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.createProtocolConnection=void 0;var Hf=qo();tc(qo(),Ct);tc(ec(),Ct);function Bf(t,e,n,r){return(0,Hf.createMessageConnection)(t,e,n,r)}Ct.createProtocolConnection=Bf});var Yo=F(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.generateUuid=Je.parse=Je.isUUID=Je.v4=Je.empty=void 0;var Vn=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Q=class extends Vn{constructor(){super([Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),"-",Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),"-","4",Q._randomHex(),Q._randomHex(),Q._randomHex(),"-",Q._oneOf(Q._timeHighBits),Q._randomHex(),Q._randomHex(),Q._randomHex(),"-",Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex(),Q._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Q._oneOf(Q._chars)}};Q._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Q._timeHighBits=["8","9","a","b"];Je.empty=new Vn("00000000-0000-0000-0000-000000000000");function nc(){return new Q}Je.v4=nc;var Vf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function rc(t){return Vf.test(t)}Je.isUUID=rc;function $f(t){if(!rc(t))throw new Error("invalid uuid");return new Vn(t)}Je.parse=$f;function zf(){return nc().asHex()}Je.generateUuid=zf});var ic=F(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.attachPartialResult=Wt.ProgressFeature=Wt.attachWorkDone=void 0;var jt=Ne(),Gf=Yo(),Rt=class{constructor(e,n){this._connection=e,this._token=n,Rt.Instances.set(this._token,this)}begin(e,n,r,i){let s={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(jt.WorkDoneProgress.type,this._token,s)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(jt.WorkDoneProgress.type,this._token,r)}done(){Rt.Instances.delete(this._token),this._connection.sendProgress(jt.WorkDoneProgress.type,this._token,{kind:"end"})}};Rt.Instances=new Map;var Nr=class extends Rt{constructor(e,n){super(e,n),this._source=new jt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},$n=class{constructor(){}begin(){}report(){}done(){}},Pr=class extends $n{constructor(){super(),this._source=new jt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Kf(t,e){if(e===void 0||e.workDoneToken===void 0)return new $n;let n=e.workDoneToken;return delete e.workDoneToken,new Rt(t,n)}Wt.attachWorkDone=Kf;var Yf=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(jt.WorkDoneProgressCancelNotification.type,n=>{let r=Rt.Instances.get(n.token);(r instanceof Nr||r instanceof Pr)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new $n:new Rt(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Gf.generateUuid)();return this.connection.sendRequest(jt.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Nr(this.connection,e))}else return Promise.resolve(new Pr)}};Wt.ProgressFeature=Yf;var Qo;(function(t){t.type=new jt.ProgressType})(Qo||(Qo={}));var Xo=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Qo.type,this._token,e)}};function Qf(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new Xo(t,n)}Wt.attachPartialResult=Qf});var oc=F(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.ConfigurationFeature=void 0;var Xf=Ne(),Jf=or(),Zf=t=>class extends t{getConfiguration(e){return e?Jf.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Xf.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};wr.ConfigurationFeature=Zf});var sc=F(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.WorkspaceFoldersFeature=void 0;var Ir=Ne(),eh=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Ir.Emitter,this.connection.onNotification(Ir.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Ir.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Ir.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};xr.WorkspaceFoldersFeature=eh});var ac=F(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.CallHierarchyFeature=void 0;var Jo=Ne(),th=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Jo.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{let n=Jo.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=Jo.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Or.CallHierarchyFeature=th});var es=F(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SemanticTokensBuilder=Ut.SemanticTokensDiff=Ut.SemanticTokensFeature=void 0;var Ar=Ne(),nh=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Ar.SemanticTokensRefreshRequest.type),on:e=>{let n=Ar.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=Ar.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=Ar.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ut.SemanticTokensFeature=nh;var Mr=class{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,s=n-1;for(;i>=r&&s>=r&&this.originalSequence[i]===this.modifiedSequence[s];)i--,s--;(i<r||s<r)&&(i++,s++);let d=i-r+1,v=this.modifiedSequence.slice(r,s+1);return v.length===1&&v[0]===this.originalSequence[i]?[{start:r,deleteCount:d-1}]:[{start:r,deleteCount:d,data:v}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};Ut.SemanticTokensDiff=Mr;var Zo=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,s){let d=e,v=n;this._dataLen>0&&(d-=this._prevLine,d===0&&(v-=this._prevChar)),this._data[this._dataLen++]=d,this._data[this._dataLen++]=v,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Mr(this._prevData,this._data).computeDiff()}:this.build()}};Ut.SemanticTokensBuilder=Zo});var cc=F(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.ShowDocumentFeature=void 0;var rh=Ne(),ih=t=>class extends t{showDocument(e){return this.connection.sendRequest(rh.ShowDocumentRequest.type,e)}};Lr.ShowDocumentFeature=ih});var uc=F(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.FileOperationsFeature=void 0;var Tn=Ne(),oh=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(Tn.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(Tn.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(Tn.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(Tn.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(Tn.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(Tn.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};qr.FileOperationsFeature=oh});var lc=F(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.LinkedEditingRangeFeature=void 0;var sh=Ne(),ah=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(sh.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};Fr.LinkedEditingRangeFeature=ah});var dc=F(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.TypeHierarchyFeature=void 0;var ts=Ne(),ch=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(ts.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{let n=ts.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:e=>{let n=ts.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};jr.TypeHierarchyFeature=ch});var hc=F(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.InlineValueFeature=void 0;var fc=Ne(),uh=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(fc.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(fc.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};Wr.InlineValueFeature=uh});var pc=F(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.InlayHintFeature=void 0;var ns=Ne(),lh=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(ns.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(ns.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(ns.InlayHintResolveRequest.type,(n,r)=>e(n,r))}}};Ur.InlayHintFeature=lh});var gc=F(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.DiagnosticFeature=void 0;var zn=Ne(),dh=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(zn.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(zn.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(zn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(zn.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(zn.WorkspaceDiagnosticRequest.partialResult,n)))}}};Hr.DiagnosticFeature=dh});var is=F(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.TextDocuments=void 0;var Jt=Ne(),rs=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Jt.Emitter,this._onDidOpen=new Jt.Emitter,this._onDidClose=new Jt.Emitter,this._onDidSave=new Jt.Emitter,this._onWillSave=new Jt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Jt.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,s=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,s);let d=Object.freeze({document:s});this._onDidOpen.fire(d),this._onDidChangeContent.fire(d)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,s=r.contentChanges;if(s.length===0)return;let{version:d}=i;if(d==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let v=this._syncedDocuments.get(i.uri);v!==void 0&&(v=this._configuration.update(v,s,d),this._syncedDocuments.set(i.uri,v),this._onDidChangeContent.fire(Object.freeze({document:v})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let s=this._syncedDocuments.get(r.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Jt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Br.TextDocuments=rs});var ss=F(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.NotebookDocuments=Cn.NotebookSyncFeature=void 0;var Ze=Ne(),mc=is(),fh=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(Ze.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(Ze.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(Ze.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(Ze.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};Cn.NotebookSyncFeature=fh;var Ht=class{onDidOpenTextDocument(e){return this.openHandler=e,Ze.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Ze.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Ze.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return Ht.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return Ht.NULL_DISPOSE}onDidSaveTextDocument(){return Ht.NULL_DISPOSE}};Ht.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var os=class{constructor(e){e instanceof mc.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new mc.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Ze.Emitter,this._onDidChange=new Ze.Emitter,this._onDidSave=new Ze.Emitter,this._onDidClose=new Ze.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new Ht,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let s of i.cellTextDocuments)n.openTextDocument({textDocument:s});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s===void 0)return;s.version=i.notebookDocument.version;let d=s.metadata,v=!1,l=i.change;l.metadata!==void 0&&(v=!0,s.metadata=l.metadata);let g=[],y=[],_=[],b=[];if(l.cells!==void 0){let M=l.cells;if(M.structure!==void 0){let C=M.structure.array;if(s.cells.splice(C.start,C.deleteCount,...C.cells!==void 0?C.cells:[]),M.structure.didOpen!==void 0)for(let m of M.structure.didOpen)n.openTextDocument({textDocument:m}),g.push(m.uri);if(M.structure.didClose)for(let m of M.structure.didClose)n.closeTextDocument({textDocument:m}),y.push(m.uri)}if(M.data!==void 0){let C=new Map(M.data.map(m=>[m.document,m]));for(let m=0;m<=s.cells.length;m++){let P=C.get(s.cells[m].document);if(P!==void 0){let $=s.cells.splice(m,1,P);if(_.push({old:$[0],new:P}),C.delete(P.document),C.size===0)break}}}if(M.textContent!==void 0)for(let C of M.textContent)n.changeTextDocument({textDocument:C.document,contentChanges:C.changes}),b.push(C.document.uri)}this.updateCellMap(s);let D={notebookDocument:s};v&&(D.metadata={old:d,new:s.metadata});let I=[];for(let M of g)I.push(this.getNotebookCell(M));let N=[];for(let M of y)N.push(this.getNotebookCell(M));let j=[];for(let M of b)j.push(this.getNotebookCell(M));(I.length>0||N.length>0||_.length>0||j.length>0)&&(D.cells={added:I,removed:N,changed:{data:_,textContent:j}}),(D.metadata!==void 0||D.cells!==void 0)&&this._onDidChange.fire(D)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let d of i.cellTextDocuments)n.closeTextDocument({textDocument:d});this.notebookDocuments.delete(i.notebookDocument.uri);for(let d of s.cells)this.notebookCellMap.delete(d.document)}})),Ze.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};Cn.NotebookDocuments=os});var yc=F(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.MonikerFeature=void 0;var hh=Ne(),ph=t=>class extends t{get moniker(){return{on:e=>{let n=hh.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Vr.MonikerFeature=ph});var fs=F(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.createConnection=ie.combineFeatures=ie.combineNotebooksFeatures=ie.combineLanguagesFeatures=ie.combineWorkspaceFeatures=ie.combineWindowFeatures=ie.combineClientFeatures=ie.combineTracerFeatures=ie.combineTelemetryFeatures=ie.combineConsoleFeatures=ie._NotebooksImpl=ie._LanguagesImpl=ie.BulkUnregistration=ie.BulkRegistration=ie.ErrorMessageTracker=void 0;var q=Ne(),et=or(),cs=Yo(),K=ic(),gh=oc(),mh=sc(),yh=ac(),vh=es(),Th=cc(),Ch=uc(),Rh=lc(),_h=dc(),bh=hc(),kh=pc(),Dh=gc(),Eh=ss(),Sh=yc();function as(t){if(t!==null)return t}var us=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};ie.ErrorMessageTracker=us;var $r=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(q.MessageType.Error,e)}warn(e){this.send(q.MessageType.Warning,e)}info(e){this.send(q.MessageType.Info,e)}log(e){this.send(q.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(q.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,q.RAL)().console.error("Sending log message failed")})}},ls=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:q.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(q.ShowMessageRequest.type,r).then(as)}showWarningMessage(e,...n){let r={type:q.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(q.ShowMessageRequest.type,r).then(as)}showInformationMessage(e,...n){let r={type:q.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(q.ShowMessageRequest.type,r).then(as)}},vc=(0,Th.ShowDocumentFeature)((0,K.ProgressFeature)(ls)),Nh;(function(t){function e(){return new zr}t.create=e})(Nh=ie.BulkRegistration||(ie.BulkRegistration={}));var zr=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=et.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=cs.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Ph;(function(t){function e(){return new Gn(void 0,[])}t.create=e})(Ph=ie.BulkUnregistration||(ie.BulkUnregistration={}));var Gn=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(q.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=et.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(q.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},s=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Gr=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof zr?this.registerMany(e):e instanceof Gn?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=et.string(n)?n:n.method,s=cs.generateUuid(),d={registrations:[{id:s,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(q.RegistrationRequest.type,d).then(v=>(e.add({id:s,method:i}),e),v=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(v)))}registerSingle2(e,n){let r=et.string(e)?e:e.method,i=cs.generateUuid(),s={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(q.RegistrationRequest.type,s).then(d=>q.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),d=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(d)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(q.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(q.RegistrationRequest.type,n).then(()=>new Gn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ds=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(q.ApplyWorkspaceEditRequest.type,r)}},Tc=(0,Ch.FileOperationsFeature)((0,mh.WorkspaceFoldersFeature)((0,gh.ConfigurationFeature)(ds))),Kr=class{constructor(){this._trace=q.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==q.Trace.Off&&this.connection.sendNotification(q.LogTraceNotification.type,{message:e,verbose:this._trace===q.Trace.Verbose?n:void 0}).catch(()=>{})}},Yr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(q.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Qr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,K.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,K.attachPartialResult)(this.connection,n)}};ie._LanguagesImpl=Qr;var Cc=(0,Sh.MonikerFeature)((0,Dh.DiagnosticFeature)((0,kh.InlayHintFeature)((0,bh.InlineValueFeature)((0,_h.TypeHierarchyFeature)((0,Rh.LinkedEditingRangeFeature)((0,vh.SemanticTokensFeature)((0,yh.CallHierarchyFeature)(Qr)))))))),Xr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,K.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,K.attachPartialResult)(this.connection,n)}};ie._NotebooksImpl=Xr;var Rc=(0,Eh.NotebookSyncFeature)(Xr);function _c(t,e){return function(n){return e(t(n))}}ie.combineConsoleFeatures=_c;function bc(t,e){return function(n){return e(t(n))}}ie.combineTelemetryFeatures=bc;function kc(t,e){return function(n){return e(t(n))}}ie.combineTracerFeatures=kc;function Dc(t,e){return function(n){return e(t(n))}}ie.combineClientFeatures=Dc;function Ec(t,e){return function(n){return e(t(n))}}ie.combineWindowFeatures=Ec;function Sc(t,e){return function(n){return e(t(n))}}ie.combineWorkspaceFeatures=Sc;function Nc(t,e){return function(n){return e(t(n))}}ie.combineLanguagesFeatures=Nc;function Pc(t,e){return function(n){return e(t(n))}}ie.combineNotebooksFeatures=Pc;function wh(t,e){function n(i,s,d){return i&&s?d(i,s):i||s}return{__brand:"features",console:n(t.console,e.console,_c),tracer:n(t.tracer,e.tracer,kc),telemetry:n(t.telemetry,e.telemetry,bc),client:n(t.client,e.client,Dc),window:n(t.window,e.window,Ec),workspace:n(t.workspace,e.workspace,Sc),languages:n(t.languages,e.languages,Nc),notebooks:n(t.notebooks,e.notebooks,Pc)}}ie.combineFeatures=wh;function Ih(t,e,n){let r=n&&n.console?new(n.console($r)):new $r,i=t(r);r.rawAttach(i);let s=n&&n.tracer?new(n.tracer(Kr)):new Kr,d=n&&n.telemetry?new(n.telemetry(Yr)):new Yr,v=n&&n.client?new(n.client(Gr)):new Gr,l=n&&n.window?new(n.window(vc)):new vc,g=n&&n.workspace?new(n.workspace(Tc)):new Tc,y=n&&n.languages?new(n.languages(Cc)):new Cc,_=n&&n.notebooks?new(n.notebooks(Rc)):new Rc,b=[r,s,d,v,l,g,y,_];function D(C){return C instanceof Promise?C:et.thenable(C)?new Promise((m,P)=>{C.then($=>m($),$=>P($))}):Promise.resolve(C)}let I,N,j,M={listen:()=>i.listen(),sendRequest:(C,...m)=>i.sendRequest(et.string(C)?C:C.method,...m),onRequest:(C,m)=>i.onRequest(C,m),sendNotification:(C,m)=>{let P=et.string(C)?C:C.method;return arguments.length===1?i.sendNotification(P):i.sendNotification(P,m)},onNotification:(C,m)=>i.onNotification(C,m),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:C=>(N=C,{dispose:()=>{N=void 0}}),onInitialized:C=>i.onNotification(q.InitializedNotification.type,C),onShutdown:C=>(I=C,{dispose:()=>{I=void 0}}),onExit:C=>(j=C,{dispose:()=>{j=void 0}}),get console(){return r},get telemetry(){return d},get tracer(){return s},get client(){return v},get window(){return l},get workspace(){return g},get languages(){return y},get notebooks(){return _},onDidChangeConfiguration:C=>i.onNotification(q.DidChangeConfigurationNotification.type,C),onDidChangeWatchedFiles:C=>i.onNotification(q.DidChangeWatchedFilesNotification.type,C),__textDocumentSync:void 0,onDidOpenTextDocument:C=>i.onNotification(q.DidOpenTextDocumentNotification.type,C),onDidChangeTextDocument:C=>i.onNotification(q.DidChangeTextDocumentNotification.type,C),onDidCloseTextDocument:C=>i.onNotification(q.DidCloseTextDocumentNotification.type,C),onWillSaveTextDocument:C=>i.onNotification(q.WillSaveTextDocumentNotification.type,C),onWillSaveTextDocumentWaitUntil:C=>i.onRequest(q.WillSaveTextDocumentWaitUntilRequest.type,C),onDidSaveTextDocument:C=>i.onNotification(q.DidSaveTextDocumentNotification.type,C),sendDiagnostics:C=>i.sendNotification(q.PublishDiagnosticsNotification.type,C),onHover:C=>i.onRequest(q.HoverRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),void 0)),onCompletion:C=>i.onRequest(q.CompletionRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onCompletionResolve:C=>i.onRequest(q.CompletionResolveRequest.type,C),onSignatureHelp:C=>i.onRequest(q.SignatureHelpRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),void 0)),onDeclaration:C=>i.onRequest(q.DeclarationRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onDefinition:C=>i.onRequest(q.DefinitionRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onTypeDefinition:C=>i.onRequest(q.TypeDefinitionRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onImplementation:C=>i.onRequest(q.ImplementationRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onReferences:C=>i.onRequest(q.ReferencesRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onDocumentHighlight:C=>i.onRequest(q.DocumentHighlightRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onDocumentSymbol:C=>i.onRequest(q.DocumentSymbolRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onWorkspaceSymbol:C=>i.onRequest(q.WorkspaceSymbolRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onWorkspaceSymbolResolve:C=>i.onRequest(q.WorkspaceSymbolResolveRequest.type,C),onCodeAction:C=>i.onRequest(q.CodeActionRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onCodeActionResolve:C=>i.onRequest(q.CodeActionResolveRequest.type,(m,P)=>C(m,P)),onCodeLens:C=>i.onRequest(q.CodeLensRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onCodeLensResolve:C=>i.onRequest(q.CodeLensResolveRequest.type,(m,P)=>C(m,P)),onDocumentFormatting:C=>i.onRequest(q.DocumentFormattingRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),void 0)),onDocumentRangeFormatting:C=>i.onRequest(q.DocumentRangeFormattingRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),void 0)),onDocumentOnTypeFormatting:C=>i.onRequest(q.DocumentOnTypeFormattingRequest.type,(m,P)=>C(m,P)),onRenameRequest:C=>i.onRequest(q.RenameRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),void 0)),onPrepareRename:C=>i.onRequest(q.PrepareRenameRequest.type,(m,P)=>C(m,P)),onDocumentLinks:C=>i.onRequest(q.DocumentLinkRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onDocumentLinkResolve:C=>i.onRequest(q.DocumentLinkResolveRequest.type,(m,P)=>C(m,P)),onDocumentColor:C=>i.onRequest(q.DocumentColorRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onColorPresentation:C=>i.onRequest(q.ColorPresentationRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onFoldingRanges:C=>i.onRequest(q.FoldingRangeRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onSelectionRanges:C=>i.onRequest(q.SelectionRangeRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),(0,K.attachPartialResult)(i,m))),onExecuteCommand:C=>i.onRequest(q.ExecuteCommandRequest.type,(m,P)=>C(m,P,(0,K.attachWorkDone)(i,m),void 0)),dispose:()=>i.dispose()};for(let C of b)C.attach(M);return i.onRequest(q.InitializeRequest.type,C=>{e.initialize(C),et.string(C.trace)&&(s.trace=q.Trace.fromString(C.trace));for(let m of b)m.initialize(C.capabilities);if(N){let m=N(C,new q.CancellationTokenSource().token,(0,K.attachWorkDone)(i,C),void 0);return D(m).then(P=>{if(P instanceof q.ResponseError)return P;let $=P;$||($={capabilities:{}});let ee=$.capabilities;ee||(ee={},$.capabilities=ee),ee.textDocumentSync===void 0||ee.textDocumentSync===null?ee.textDocumentSync=et.number(M.__textDocumentSync)?M.__textDocumentSync:q.TextDocumentSyncKind.None:!et.number(ee.textDocumentSync)&&!et.number(ee.textDocumentSync.change)&&(ee.textDocumentSync.change=et.number(M.__textDocumentSync)?M.__textDocumentSync:q.TextDocumentSyncKind.None);for(let ue of b)ue.fillServerCapabilities(ee);return $})}else{let m={capabilities:{textDocumentSync:q.TextDocumentSyncKind.None}};for(let P of b)P.fillServerCapabilities(m.capabilities);return m}}),i.onRequest(q.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,I)return I(new q.CancellationTokenSource().token)}),i.onNotification(q.ExitNotification.type,()=>{try{j&&j()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(q.SetTraceNotification.type,C=>{s.trace=q.Trace.fromString(C.value)}),M}ie.createConnection=Ih});var Ic=F(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.resolveModulePath=ze.FileSystem=ze.resolveGlobalYarnPath=ze.resolveGlobalNodePath=ze.resolve=ze.uriToFilePath=void 0;var xh=require("url"),ft=require("path"),hs=require("fs"),ms=require("child_process");function Oh(t){let e=xh.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let s=n[0],d=n[1];s.length===0&&d.length>1&&d[1]===":"&&n.shift()}return ft.normalize(n.join("/"))}ze.uriToFilePath=Oh;function ps(){return process.platform==="win32"}function Jr(t,e,n,r){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((d,v)=>{let l=process.env,g=Object.create(null);Object.keys(l).forEach(y=>g[y]=l[y]),e&&hs.existsSync(e)&&(g[i]?g[i]=e+ft.delimiter+g[i]:g[i]=e,r&&r(`NODE_PATH value is: ${g[i]}`)),g.ELECTRON_RUN_AS_NODE="1";try{let y=(0,ms.fork)("",[],{cwd:n,env:g,execArgv:["-e",s]});if(y.pid===void 0){v(new Error(`Starting process to resolve node module  ${t} failed`));return}y.on("error",b=>{v(b)}),y.on("message",b=>{b.c==="r"&&(y.send({c:"e"}),b.s?d(b.r):v(new Error(`Failed to resolve module: ${t}`)))});let _={c:"rs",a:t};y.send(_)}catch(y){v(y)}})}ze.resolve=Jr;function gs(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(s=>n[s]=process.env[s]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};ps()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=(0,ms.spawnSync)(e,["config","get","prefix"],r).stdout;if(!s){t&&t("'npm config get prefix' didn't return a value.");return}let d=s.trim();return t&&t(`'npm config get prefix' value is: ${d}`),d.length>0?ps()?ft.join(d,"node_modules"):ft.join(d,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}ze.resolveGlobalNodePath=gs;function Ah(t){let e="yarn",n={encoding:"utf8"};ps()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,ms.spawnSync)(e,["global","dir","--json"],n),s=i.stdout;if(!s){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let d=s.trim().split(/\r?\n/);for(let v of d)try{let l=JSON.parse(v);if(l.type==="log")return ft.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}ze.resolveGlobalYarnPath=Ah;var wc;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!hs.existsSync(__filename.toUpperCase())||!hs.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,s){return n()?ft.normalize(s).indexOf(ft.normalize(i))===0:ft.normalize(s).toLowerCase().indexOf(ft.normalize(i).toLowerCase())===0}t.isParent=r})(wc=ze.FileSystem||(ze.FileSystem={}));function Mh(t,e,n,r){return n?(ft.isAbsolute(n)||(n=ft.join(t,n)),Jr(e,n,n,r).then(i=>wc.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Jr(e,gs(r),t,r))):Jr(e,gs(r),t,r)}ze.resolveModulePath=Mh});var ys=F((kg,xc)=>{"use strict";xc.exports=Ne()});var Ac=F(Fe=>{"use strict";var Lh=Fe&&Fe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Oc=Fe&&Fe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Lh(e,t,n)};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ProposedFeatures=Fe.NotebookDocuments=Fe.TextDocuments=Fe.SemanticTokensBuilder=void 0;var qh=es();Object.defineProperty(Fe,"SemanticTokensBuilder",{enumerable:!0,get:function(){return qh.SemanticTokensBuilder}});Oc(Ne(),Fe);var Fh=is();Object.defineProperty(Fe,"TextDocuments",{enumerable:!0,get:function(){return Fh.TextDocuments}});var jh=ss();Object.defineProperty(Fe,"NotebookDocuments",{enumerable:!0,get:function(){return jh.NotebookDocuments}});Oc(fs(),Fe);var Wh;(function(t){t.all={__brand:"features"}})(Wh=Fe.ProposedFeatures||(Fe.ProposedFeatures={}))});var en=F(Ye=>{"use strict";var Uh=Ye&&Ye.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Lc=Ye&&Ye.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Uh(e,t,n)};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createConnection=Ye.Files=void 0;var vs=or(),Hh=fs(),Kn=Ic(),Zt=ys();Lc(ys(),Ye);Lc(Ac(),Ye);var Bh;(function(t){t.uriToFilePath=Kn.uriToFilePath,t.resolveGlobalNodePath=Kn.resolveGlobalNodePath,t.resolveGlobalYarnPath=Kn.resolveGlobalYarnPath,t.resolve=Kn.resolve,t.resolveModulePath=Kn.resolveModulePath})(Bh=Ye.Files||(Ye.Files={}));var Mc;function Zr(){if(Mc!==void 0)try{Mc.end()}catch{}}var Rn=!1,qc;function Vh(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(qc=setInterval(()=>{try{process.kill(r,0)}catch{Zr(),process.exit(Rn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}Vh();var $h={initialize:t=>{let e=t.processId;vs.number(e)&&qc===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(Rn?0:1)}},3e3)},get shutdownReceived(){return Rn},set shutdownReceived(t){Rn=t},exit:t=>{Zr(),process.exit(t)}};function zh(t,e,n,r){let i,s,d,v;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),Zt.ConnectionStrategy.is(t)||Zt.ConnectionOptions.is(t)?v=t:(s=t,d=e,v=n),Gh(s,d,v,i)}Ye.createConnection=zh;function Gh(t,e,n,r){if(!t&&!e&&process.argv.length>2){let v,l,g=process.argv.slice(2);for(let y=0;y<g.length;y++){let _=g[y];if(_==="--node-ipc"){t=new Zt.IPCMessageReader(process),e=new Zt.IPCMessageWriter(process);break}else if(_==="--stdio"){t=process.stdin,e=process.stdout;break}else if(_==="--socket"){v=parseInt(g[y+1]);break}else if(_==="--pipe"){l=g[y+1];break}else{var i=_.split("=");if(i[0]==="--socket"){v=parseInt(i[1]);break}else if(i[0]==="--pipe"){l=i[1];break}}}if(v){let y=(0,Zt.createServerSocketTransport)(v);t=y[0],e=y[1]}else if(l){let y=(0,Zt.createServerPipeTransport)(l);t=y[0],e=y[1]}}var s="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+s);if(!e)throw new Error("Connection output stream is not set. "+s);if(vs.func(t.read)&&vs.func(t.on)){let v=t;v.on("end",()=>{Zr(),process.exit(Rn?0:1)}),v.on("close",()=>{Zr(),process.exit(Rn?0:1)})}let d=v=>(0,Zt.createProtocolConnection)(t,e,v,n);return(0,Hh.createConnection)(d,$h,r)}});var Ts=F((Sg,Fc)=>{"use strict";Fc.exports=en()});var ni=F((ti,ei)=>{var Kh=ti&&ti.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};(function(t){if(typeof ei=="object"&&typeof ei.exports=="object"){var e=t(require,ti);e!==void 0&&(ei.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;var n=function(){function l(g,y,_,b){this._uri=g,this._languageId=y,this._version=_,this._content=b,this._lineOffsets=void 0}return Object.defineProperty(l.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),l.prototype.getText=function(g){if(g){var y=this.offsetAt(g.start),_=this.offsetAt(g.end);return this._content.substring(y,_)}return this._content},l.prototype.update=function(g,y){for(var _=0,b=g;_<b.length;_++){var D=b[_];if(l.isIncremental(D)){var I=d(D.range),N=this.offsetAt(I.start),j=this.offsetAt(I.end);this._content=this._content.substring(0,N)+D.text+this._content.substring(j,this._content.length);var M=Math.max(I.start.line,0),C=Math.max(I.end.line,0),m=this._lineOffsets,P=s(D.text,!1,N);if(C-M===P.length)for(var $=0,ee=P.length;$<ee;$++)m[$+M+1]=P[$];else P.length<1e4?m.splice.apply(m,Kh([M+1,C-M],P,!1)):this._lineOffsets=m=m.slice(0,M+1).concat(P,m.slice(C+1));var ue=D.text.length-(j-N);if(ue!==0)for(var $=M+1+P.length,ee=m.length;$<ee;$++)m[$]=m[$]+ue}else if(l.isFull(D))this._content=D.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=y},l.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=s(this._content,!0)),this._lineOffsets},l.prototype.positionAt=function(g){g=Math.max(Math.min(g,this._content.length),0);var y=this.getLineOffsets(),_=0,b=y.length;if(b===0)return{line:0,character:g};for(;_<b;){var D=Math.floor((_+b)/2);y[D]>g?b=D:_=D+1}var I=_-1;return{line:I,character:g-y[I]}},l.prototype.offsetAt=function(g){var y=this.getLineOffsets();if(g.line>=y.length)return this._content.length;if(g.line<0)return 0;var _=y[g.line],b=g.line+1<y.length?y[g.line+1]:this._content.length;return Math.max(Math.min(_+g.character,b),_)},Object.defineProperty(l.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),l.isIncremental=function(g){var y=g;return y!=null&&typeof y.text=="string"&&y.range!==void 0&&(y.rangeLength===void 0||typeof y.rangeLength=="number")},l.isFull=function(g){var y=g;return y!=null&&typeof y.text=="string"&&y.range===void 0&&y.rangeLength===void 0},l}(),r;(function(l){function g(b,D,I,N){return new n(b,D,I,N)}l.create=g;function y(b,D,I){if(b instanceof n)return b.update(D,I),b;throw new Error("TextDocument.update: document must be created by TextDocument.create")}l.update=y;function _(b,D){for(var I=b.getText(),N=i(D.map(v),function(ee,ue){var xe=ee.range.start.line-ue.range.start.line;return xe===0?ee.range.start.character-ue.range.start.character:xe}),j=0,M=[],C=0,m=N;C<m.length;C++){var P=m[C],$=b.offsetAt(P.range.start);if($<j)throw new Error("Overlapping edit");$>j&&M.push(I.substring(j,$)),P.newText.length&&M.push(P.newText),j=b.offsetAt(P.range.end)}return M.push(I.substr(j)),M.join("")}l.applyEdits=_})(r=e.TextDocument||(e.TextDocument={}));function i(l,g){if(l.length<=1)return l;var y=l.length/2|0,_=l.slice(0,y),b=l.slice(y);i(_,g),i(b,g);for(var D=0,I=0,N=0;D<_.length&&I<b.length;){var j=g(_[D],b[I]);j<=0?l[N++]=_[D++]:l[N++]=b[I++]}for(;D<_.length;)l[N++]=_[D++];for(;I<b.length;)l[N++]=b[I++];return l}function s(l,g,y){y===void 0&&(y=0);for(var _=g?[y]:[],b=0;b<l.length;b++){var D=l.charCodeAt(b);(D===13||D===10)&&(D===13&&b+1<l.length&&l.charCodeAt(b+1)===10&&b++,_.push(y+b+1))}return _}function d(l){var g=l.start,y=l.end;return g.line>y.line||g.line===y.line&&g.character>y.character?{start:y,end:g}:l}function v(l){var g=d(l.range);return g!==l.range?{newText:l.newText,range:g}:l}})});var Es=F((Qn,Ds)=>{(function(t,e){if(typeof Qn=="object"&&typeof Ds=="object")Ds.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n=e();for(var r in n)(typeof Qn=="object"?Qn:t)[r]=n[r]}})(Qn,()=>(()=>{"use strict";var t={470:i=>{function s(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}function d(l,g){for(var y,_="",b=0,D=-1,I=0,N=0;N<=l.length;++N){if(N<l.length)y=l.charCodeAt(N);else{if(y===47)break;y=47}if(y===47){if(!(D===N-1||I===1))if(D!==N-1&&I===2){if(_.length<2||b!==2||_.charCodeAt(_.length-1)!==46||_.charCodeAt(_.length-2)!==46){if(_.length>2){var j=_.lastIndexOf("/");if(j!==_.length-1){j===-1?(_="",b=0):b=(_=_.slice(0,j)).length-1-_.lastIndexOf("/"),D=N,I=0;continue}}else if(_.length===2||_.length===1){_="",b=0,D=N,I=0;continue}}g&&(_.length>0?_+="/..":_="..",b=2)}else _.length>0?_+="/"+l.slice(D+1,N):_=l.slice(D+1,N),b=N-D-1;D=N,I=0}else y===46&&I!==-1?++I:I=-1}return _}var v={resolve:function(){for(var l,g="",y=!1,_=arguments.length-1;_>=-1&&!y;_--){var b;_>=0?b=arguments[_]:(l===void 0&&(l=process.cwd()),b=l),s(b),b.length!==0&&(g=b+"/"+g,y=b.charCodeAt(0)===47)}return g=d(g,!y),y?g.length>0?"/"+g:"/":g.length>0?g:"."},normalize:function(l){if(s(l),l.length===0)return".";var g=l.charCodeAt(0)===47,y=l.charCodeAt(l.length-1)===47;return(l=d(l,!g)).length!==0||g||(l="."),l.length>0&&y&&(l+="/"),g?"/"+l:l},isAbsolute:function(l){return s(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,g=0;g<arguments.length;++g){var y=arguments[g];s(y),y.length>0&&(l===void 0?l=y:l+="/"+y)}return l===void 0?".":v.normalize(l)},relative:function(l,g){if(s(l),s(g),l===g||(l=v.resolve(l))===(g=v.resolve(g)))return"";for(var y=1;y<l.length&&l.charCodeAt(y)===47;++y);for(var _=l.length,b=_-y,D=1;D<g.length&&g.charCodeAt(D)===47;++D);for(var I=g.length-D,N=b<I?b:I,j=-1,M=0;M<=N;++M){if(M===N){if(I>N){if(g.charCodeAt(D+M)===47)return g.slice(D+M+1);if(M===0)return g.slice(D+M)}else b>N&&(l.charCodeAt(y+M)===47?j=M:M===0&&(j=0));break}var C=l.charCodeAt(y+M);if(C!==g.charCodeAt(D+M))break;C===47&&(j=M)}var m="";for(M=y+j+1;M<=_;++M)M!==_&&l.charCodeAt(M)!==47||(m.length===0?m+="..":m+="/..");return m.length>0?m+g.slice(D+j):(D+=j,g.charCodeAt(D)===47&&++D,g.slice(D))},_makeLong:function(l){return l},dirname:function(l){if(s(l),l.length===0)return".";for(var g=l.charCodeAt(0),y=g===47,_=-1,b=!0,D=l.length-1;D>=1;--D)if((g=l.charCodeAt(D))===47){if(!b){_=D;break}}else b=!1;return _===-1?y?"/":".":y&&_===1?"//":l.slice(0,_)},basename:function(l,g){if(g!==void 0&&typeof g!="string")throw new TypeError('"ext" argument must be a string');s(l);var y,_=0,b=-1,D=!0;if(g!==void 0&&g.length>0&&g.length<=l.length){if(g.length===l.length&&g===l)return"";var I=g.length-1,N=-1;for(y=l.length-1;y>=0;--y){var j=l.charCodeAt(y);if(j===47){if(!D){_=y+1;break}}else N===-1&&(D=!1,N=y+1),I>=0&&(j===g.charCodeAt(I)?--I==-1&&(b=y):(I=-1,b=N))}return _===b?b=N:b===-1&&(b=l.length),l.slice(_,b)}for(y=l.length-1;y>=0;--y)if(l.charCodeAt(y)===47){if(!D){_=y+1;break}}else b===-1&&(D=!1,b=y+1);return b===-1?"":l.slice(_,b)},extname:function(l){s(l);for(var g=-1,y=0,_=-1,b=!0,D=0,I=l.length-1;I>=0;--I){var N=l.charCodeAt(I);if(N!==47)_===-1&&(b=!1,_=I+1),N===46?g===-1?g=I:D!==1&&(D=1):g!==-1&&(D=-1);else if(!b){y=I+1;break}}return g===-1||_===-1||D===0||D===1&&g===_-1&&g===y+1?"":l.slice(g,_)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(g,y){var _=y.dir||y.root,b=y.base||(y.name||"")+(y.ext||"");return _?_===y.root?_+b:_+"/"+b:b}(0,l)},parse:function(l){s(l);var g={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return g;var y,_=l.charCodeAt(0),b=_===47;b?(g.root="/",y=1):y=0;for(var D=-1,I=0,N=-1,j=!0,M=l.length-1,C=0;M>=y;--M)if((_=l.charCodeAt(M))!==47)N===-1&&(j=!1,N=M+1),_===46?D===-1?D=M:C!==1&&(C=1):D!==-1&&(C=-1);else if(!j){I=M+1;break}return D===-1||N===-1||C===0||C===1&&D===N-1&&D===I+1?N!==-1&&(g.base=g.name=I===0&&b?l.slice(1,N):l.slice(I,N)):(I===0&&b?(g.name=l.slice(1,D),g.base=l.slice(1,N)):(g.name=l.slice(I,D),g.base=l.slice(I,N)),g.ext=l.slice(D,N)),I>0?g.dir=l.slice(0,I-1):b&&(g.dir="/"),g},sep:"/",delimiter:":",win32:null,posix:null};v.posix=v,i.exports=v},674:(i,s)=>{if(Object.defineProperty(s,"__esModule",{value:!0}),s.isWindows=void 0,typeof process=="object")s.isWindows=process.platform==="win32";else if(typeof navigator=="object"){var d=navigator.userAgent;s.isWindows=d.indexOf("Windows")>=0}},796:function(i,s,d){var v,l,g=this&&this.__extends||(v=function(x,w){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ae in U)Object.prototype.hasOwnProperty.call(U,ae)&&(L[ae]=U[ae])},v(x,w)},function(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function L(){this.constructor=x}v(x,w),x.prototype=w===null?Object.create(w):(L.prototype=w.prototype,new L)});Object.defineProperty(s,"__esModule",{value:!0}),s.uriToFsPath=s.URI=void 0;var y=d(674),_=/^\w[\w\d+.-]*$/,b=/^\//,D=/^\/\//;function I(x,w){if(!x.scheme&&w)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(x.authority,'", path: "').concat(x.path,'", query: "').concat(x.query,'", fragment: "').concat(x.fragment,'"}'));if(x.scheme&&!_.test(x.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(x.path){if(x.authority){if(!b.test(x.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(D.test(x.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var N="",j="/",M=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,C=function(){function x(w,L,U,ae,re,G){G===void 0&&(G=!1),typeof w=="object"?(this.scheme=w.scheme||N,this.authority=w.authority||N,this.path=w.path||N,this.query=w.query||N,this.fragment=w.fragment||N):(this.scheme=function(Se,we){return Se||we?Se:"file"}(w,G),this.authority=L||N,this.path=function(Se,we){switch(Se){case"https":case"http":case"file":we?we[0]!==j&&(we=j+we):we=j}return we}(this.scheme,U||N),this.query=ae||N,this.fragment=re||N,I(this,G))}return x.isUri=function(w){return w instanceof x||!!w&&typeof w.authority=="string"&&typeof w.fragment=="string"&&typeof w.path=="string"&&typeof w.query=="string"&&typeof w.scheme=="string"&&typeof w.fsPath=="string"&&typeof w.with=="function"&&typeof w.toString=="function"},Object.defineProperty(x.prototype,"fsPath",{get:function(){return xe(this,!1)},enumerable:!1,configurable:!0}),x.prototype.with=function(w){if(!w)return this;var L=w.scheme,U=w.authority,ae=w.path,re=w.query,G=w.fragment;return L===void 0?L=this.scheme:L===null&&(L=N),U===void 0?U=this.authority:U===null&&(U=N),ae===void 0?ae=this.path:ae===null&&(ae=N),re===void 0?re=this.query:re===null&&(re=N),G===void 0?G=this.fragment:G===null&&(G=N),L===this.scheme&&U===this.authority&&ae===this.path&&re===this.query&&G===this.fragment?this:new P(L,U,ae,re,G)},x.parse=function(w,L){L===void 0&&(L=!1);var U=M.exec(w);return U?new P(U[2]||N,Pe(U[4]||N),Pe(U[5]||N),Pe(U[7]||N),Pe(U[9]||N),L):new P(N,N,N,N,N)},x.file=function(w){var L=N;if(y.isWindows&&(w=w.replace(/\\/g,j)),w[0]===j&&w[1]===j){var U=w.indexOf(j,2);U===-1?(L=w.substring(2),w=j):(L=w.substring(2,U),w=w.substring(U)||j)}return new P("file",L,w,N,N)},x.from=function(w){var L=new P(w.scheme,w.authority,w.path,w.query,w.fragment);return I(L,!0),L},x.prototype.toString=function(w){return w===void 0&&(w=!1),pt(this,w)},x.prototype.toJSON=function(){return this},x.revive=function(w){if(w){if(w instanceof x)return w;var L=new P(w);return L._formatted=w.external,L._fsPath=w._sep===m?w.fsPath:null,L}return w},x}();s.URI=C;var m=y.isWindows?1:void 0,P=function(x){function w(){var L=x!==null&&x.apply(this,arguments)||this;return L._formatted=null,L._fsPath=null,L}return g(w,x),Object.defineProperty(w.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=xe(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),w.prototype.toString=function(L){return L===void 0&&(L=!1),L?pt(this,!0):(this._formatted||(this._formatted=pt(this,!1)),this._formatted)},w.prototype.toJSON=function(){var L={$mid:1};return this._fsPath&&(L.fsPath=this._fsPath,L._sep=m),this._formatted&&(L.external=this._formatted),this.path&&(L.path=this.path),this.scheme&&(L.scheme=this.scheme),this.authority&&(L.authority=this.authority),this.query&&(L.query=this.query),this.fragment&&(L.fragment=this.fragment),L},w}(C),$=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function ee(x,w,L){for(var U=void 0,ae=-1,re=0;re<x.length;re++){var G=x.charCodeAt(re);if(G>=97&&G<=122||G>=65&&G<=90||G>=48&&G<=57||G===45||G===46||G===95||G===126||w&&G===47||L&&G===91||L&&G===93||L&&G===58)ae!==-1&&(U+=encodeURIComponent(x.substring(ae,re)),ae=-1),U!==void 0&&(U+=x.charAt(re));else{U===void 0&&(U=x.substr(0,re));var Se=$[G];Se!==void 0?(ae!==-1&&(U+=encodeURIComponent(x.substring(ae,re)),ae=-1),U+=Se):ae===-1&&(ae=re)}}return ae!==-1&&(U+=encodeURIComponent(x.substring(ae))),U!==void 0?U:x}function ue(x){for(var w=void 0,L=0;L<x.length;L++){var U=x.charCodeAt(L);U===35||U===63?(w===void 0&&(w=x.substr(0,L)),w+=$[U]):w!==void 0&&(w+=x[L])}return w!==void 0?w:x}function xe(x,w){var L;return L=x.authority&&x.path.length>1&&x.scheme==="file"?"//".concat(x.authority).concat(x.path):x.path.charCodeAt(0)===47&&(x.path.charCodeAt(1)>=65&&x.path.charCodeAt(1)<=90||x.path.charCodeAt(1)>=97&&x.path.charCodeAt(1)<=122)&&x.path.charCodeAt(2)===58?w?x.path.substr(1):x.path[1].toLowerCase()+x.path.substr(2):x.path,y.isWindows&&(L=L.replace(/\//g,"\\")),L}function pt(x,w){var L=w?ue:ee,U="",ae=x.scheme,re=x.authority,G=x.path,Se=x.query,we=x.fragment;if(ae&&(U+=ae,U+=":"),(re||ae==="file")&&(U+=j,U+=j),re){var We=re.indexOf("@");if(We!==-1){var It=re.substr(0,We);re=re.substr(We+1),(We=It.lastIndexOf(":"))===-1?U+=L(It,!1,!1):(U+=L(It.substr(0,We),!1,!1),U+=":",U+=L(It.substr(We+1),!1,!0)),U+="@"}(We=(re=re.toLowerCase()).lastIndexOf(":"))===-1?U+=L(re,!1,!0):(U+=L(re.substr(0,We),!1,!0),U+=re.substr(We))}if(G){if(G.length>=3&&G.charCodeAt(0)===47&&G.charCodeAt(2)===58)(tt=G.charCodeAt(1))>=65&&tt<=90&&(G="/".concat(String.fromCharCode(tt+32),":").concat(G.substr(3)));else if(G.length>=2&&G.charCodeAt(1)===58){var tt;(tt=G.charCodeAt(0))>=65&&tt<=90&&(G="".concat(String.fromCharCode(tt+32),":").concat(G.substr(2)))}U+=L(G,!0,!1)}return Se&&(U+="?",U+=L(Se,!1,!1)),we&&(U+="#",U+=w?we:ee(we,!1,!1)),U}function gt(x){try{return decodeURIComponent(x)}catch{return x.length>3?x.substr(0,3)+gt(x.substr(3)):x}}s.uriToFsPath=xe;var mt=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Pe(x){return x.match(mt)?x.replace(mt,function(w){return gt(w)}):x}},679:function(i,s,d){var v=this&&this.__spreadArray||function(b,D,I){if(I||arguments.length===2)for(var N,j=0,M=D.length;j<M;j++)!N&&j in D||(N||(N=Array.prototype.slice.call(D,0,j)),N[j]=D[j]);return b.concat(N||Array.prototype.slice.call(D))};Object.defineProperty(s,"__esModule",{value:!0}),s.Utils=void 0;var l,g=d(470),y=g.posix||g,_="/";(l=s.Utils||(s.Utils={})).joinPath=function(b){for(var D=[],I=1;I<arguments.length;I++)D[I-1]=arguments[I];return b.with({path:y.join.apply(y,v([b.path],D,!1))})},l.resolvePath=function(b){for(var D=[],I=1;I<arguments.length;I++)D[I-1]=arguments[I];var N=b.path,j=!1;N[0]!==_&&(N=_+N,j=!0);var M=y.resolve.apply(y,v([N],D,!1));return j&&M[0]===_&&!b.authority&&(M=M.substring(1)),b.with({path:M})},l.dirname=function(b){if(b.path.length===0||b.path===_)return b;var D=y.dirname(b.path);return D.length===1&&D.charCodeAt(0)===46&&(D=""),b.with({path:D})},l.basename=function(b){return y.basename(b.path)},l.extname=function(b){return y.extname(b.path)}}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var d=e[i]={exports:{}};return t[i].call(d.exports,d,d.exports,n),d.exports}var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.Utils=i.URI=void 0;var s=n(796);Object.defineProperty(i,"URI",{enumerable:!0,get:function(){return s.URI}});var d=n(679);Object.defineProperty(i,"Utils",{enumerable:!0,get:function(){return d.Utils}})})(),r})())});var ep={};Tu(ep,{connection:()=>He,documents:()=>nn,updateDocumentData:()=>ai,visitors:()=>_t});module.exports=Cu(ep);var Bt=Ae(Ts()),du=Ae(ni());var ui=Ae(en());var X=Ae(en());function ri(){return[{label:"for",insertText:"for (${1:var} = ${2})\n	${3}\n\nend",insertTextFormat:X.InsertTextFormat.Snippet,kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[for loop](https://docs.octave.org/v4.2.0/The-for-Statement.html)"}},{label:"while",kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[while loop](https://docs.octave.org/v4.2.0/The-while-Statement.html)"}},{label:"if",insertText:`if (\${1:condition})
	\${2}

end`,insertTextFormat:X.InsertTextFormat.Snippet,kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[if statement](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"else",kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[if statement else clause](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"elseif",insertText:"elseif (${1:condition})\n	${2}",insertTextFormat:X.InsertTextFormat.Snippet,kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[if statement elseif clause](https://docs.octave.org/v4.2.0/The-if-Statement.html)"}},{label:"switch",insertText:`switch (\${1:variable})
	case \${2}
otherwise

end`,insertTextFormat:X.InsertTextFormat.Snippet,kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[switch statement](https://docs.octave.org/v4.2.0/The-switch-Statement.html)"}},{label:"case",kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[switch statement case clause](https://docs.octave.org/v4.2.0/The-switch-Statement.html#index-case-statement)"}},{label:"otherwise",kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[switch statement otherwise clause](https://docs.octave.org/v4.2.0/The-switch-Statement.html#index-otherwise-statement)"}},{label:"break",kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[break statement](https://docs.octave.org/v4.2.0/The-break-Statement.html#index-break-statement)"}},{label:"continue",kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"[continue statement](https://docs.octave.org/v4.2.0/The-continue-Statement.html#index-continue-statement)"}},{label:"return",kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"return statement"}},{label:"end",kind:X.CompletionItemKind.Keyword,documentation:{kind:X.MarkupKind.Markdown,value:"block end marker"}},{label:"function",kind:X.CompletionItemKind.Keyword,insertText:"function ${1:funcName}(${2:funcArgs})\n	${3:funcBody}\nend",insertTextFormat:X.InsertTextFormat.Snippet,documentation:{kind:X.MarkupKind.Markdown,value:"[block end marker](https://docs.octave.org/v4.2.0/A-Sample-Function-Description.html#A-Sample-Function-Description)"}},{label:"do",kind:X.CompletionItemKind.Keyword,insertText:"do\n	${2:funcBody}\nuntil (${1:condition})",insertTextFormat:X.InsertTextFormat.Snippet,documentation:{kind:X.MarkupKind.Markdown,value:"[block end marker](https://docs.octave.org/v5.2.0/The-do_002duntil-Statement.html)"}}]}var W=Ae(en());function ii(){return[{label:"quad",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:`: q = quad (f, a, b)
: q = quad (f, a, b, tol)
: q = quad (f, a, b, tol, sing)
: [q, ier, nfun, err] = quad (\u2026)
    Numerically evaluate the integral of f from a to b using Fortran routines from QUADPACK.
    f is a function handle, inline function, or a string containing the name of the function to evaluate. The function must have the form y = f (x) where y and x are scalars.
    a and b are the lower and upper limits of integration. Either or both may be infinite.
    The optional argument tol is a vector that specifies the desired accuracy of the result. The first element of the vector is the desired absolute tolerance, and the second element is the desired relative tolerance. To choose a relative test only, set the absolute tolerance to zero. To choose an absolute test only, set the relative tolerance to zero. Both tolerances default to sqrt (eps) or approximately 1.5e^{-8}.
    The optional argument sing is a vector of values at which the integrand is known to be singular.
    The result of the integration is returned in q.
    ier contains an integer error code (0 indicates a successful integration).
    nfun indicates the number of function evaluations that were made.
    err contains an estimate of the error in the solution.
    The function quad_options can set other optional parameters for quad.
    Note: because quad is written in Fortran it cannot be called recursively. This prevents its use in integrating over more than one variable by routines dblquad and triplequad.
    See also: quad_options, quadv, quadl, quadgk, quadcc, trapz, dblquad, triplequad. 

[quad function](https://octave.sourceforge.io/octave/function/quad.html)`}},{label:"inputParser",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:`Not documented 

[inputParser function](https://octave.sourceforge.io/octave/function/inputParser.html)`}},{label:"pol2cart",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:` __[x, y] = pol2cart (theta, r)__
 __[x, y, z] = pol2cart (theta, r, z)__
 __[x, y] = pol2cart (P)__
 __[x, y, z] = pol2cart (P)__
 __C = pol2cart (\u2026)__
    Transform polar or cylindrical coordinates to Cartesian coordinates.
    The inputs theta, r, (and z) must be the same shape, or scalar. If called with a single matrix argument then each row of P represents the polar/(cylindrical) coordinate (theta, r (, z)).
    theta describes the angle relative to the positive x-axis.
    r is the distance to the z-axis (0, 0, z).
    If only a single return argument is requested then return a matrix C where each row represents one Cartesian coordinate (x, y (, z)).
    See also: cart2pol, sph2cart, cart2sph. 

[pol2cart function](https://octave.sourceforge.io/octave/function/pol2cart.html)`}},{label:"deg2rad",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:` __rad = deg2rad (deg)__
    Convert degrees to radians.
    The input deg must be a scalar, vector, or N-dimensional array of double or single floating point values. deg may be complex in which case the real and imaginary components are converted separately.
    The output rad is the same size and shape as deg with degrees converted to radians using the conversion constant pi/180.
    Example:
    deg2rad ([0, 90, 180, 270, 360])
      \u21D2  0.00000   1.57080   3.14159   4.71239   6.28319
    See also: rad2deg. 

[deg2rad function](https://octave.sourceforge.io/octave/function/deg2rad.html)`}},{label:"length",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:` __length (a)__
    Return the length of the object a.
    The length is 0 for empty objects, 1 for scalars, and the number of elements for vectors. For matrix or N-dimensional objects, the length is the number of elements along the largest dimension (equivalent to max (size (a))).
    See also: numel, size. 

[length function](https://octave.sourceforge.io/octave/function/length.html)`}},{label:"struct",insertText:"struct(${1:var});",insertTextFormat:W.InsertTextFormat.Snippet,kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:`  __s = struct ()__
 __s = struct (field1, value1, field2, value2, \u2026)__
 __s = struct (obj)__
    Create a scalar or array structure and initialize its values.
    The field1, field2, \u2026 variables are strings specifying the names of the fields and the value1, value2, \u2026 variables can be of any type.
    If the values are cell arrays, create a structure array and initialize its values. The dimensions of each cell array of values must match. Singleton cells and non-cell values are repeated so that they fill the entire array. If the cells are empty, create an empty structure array with the specified field names.
    If the argument is an object, return the underlying struct.
    Observe that the syntax is optimized for struct arrays. Consider the following examples:
    struct ("foo", 1)
     \u21D2 scalar structure containing the fields:
       foo =  1
    struct ("foo", {})
     \u21D2 0x0 struct array containing the fields:
       foo
    struct ("foo", { {} })
     \u21D2 scalar structure containing the fields:
       foo = {}(0x0)
    struct ("foo", {1, 2, 3})
     \u21D2 1x3 struct array containing the fields:
       foo
    The first case is an ordinary scalar struct\u2014one field, one value. The second produces an empty struct array with one field and no values, since being passed an empty cell array of struct array values. When the value is a cell array containing a single entry, this becomes a scalar struct with that single entry as the value of the field. That single entry happens to be an empty cell array.
    Finally, if the value is a non-scalar cell array, then struct produces a struct array.
    See also: cell2struct, fieldnames, getfield, setfield, rmfield, isfield, orderfields, isstruct, structfun. 

[struct function](https://octave.sourceforge.io/octave/function/struct.html)`}},{label:"addpath",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:` __addpath (dir1, \u2026)__
 __addpath (dir1, \u2026, option)__
    Add named directories to the function search path.
    If option is "-begin" or 0 (the default), prepend the directory name to the current path. If option is "-end" or 1, append the directory name to the current path. Directories added to the path must exist.
    In addition to accepting individual directory arguments, lists of directory names separated by pathsep are also accepted. For example:
    addpath ("dir1:/dir2:~/dir3")
    For each directory that is added, and that was not already in the path, addpath checks for the existence of a file named PKG_ADD (note lack of .m extension) and runs it if it exists.
    See also: path, rmpath, genpath, pathdef, savepath, pathsep. 

[addpath function](https://octave.sourceforge.io/octave/function/addpath.html)`}},{label:"argv",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:`Return the command line arguments passed to Octave.

For example, if you invoked Octave using the command

octave --no-line-editing --silent

argv would return a cell array of strings with the elements --no-line-editing and --silent.

If you write an executable Octave script, argv will return the list of arguments passed to the script. See \u2018Executable Octave Programs\u2019, for an example of how to create an executable Octave script.

[argv function](https://octave.sourceforge.io/octave/function/argv.html)`}},{label:"hold",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[hold function](https://octave.sourceforge.io/octave/function/hold.html)"}},{label:"axis",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[axis function](https://octave.sourceforge.io/octave/function/axis.html)"}},{label:"printf",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[printf function](https://octave.sourceforge.io/octave/function/printf.html)"}},{label:"figure",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[figure function](https://octave.sourceforge.io/octave/function/figure.html)"}},{label:"set",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[set function](https://octave.sourceforge.io/octave/function/set.html)"}},{label:"grid",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[grid function](https://octave.sourceforge.io/octave/function/grid.html)"}},{label:"clc",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[clc function](https://octave.sourceforge.io/octave/function/clc.html)"}},{label:"quit",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[quit function](https://docs.octave.org/interpreter/Quitting-Octave.html)"}},{label:"help",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[help function](https://octave.sourceforge.io/octave/function/help.html)"}},{label:"stem",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[stem function](https://octave.sourceforge.io/octave/function/stem.html)"}},{label:"plot",kind:W.CompletionItemKind.Function,documentation:{kind:W.MarkupKind.Markdown,value:"[plot function](https://octave.sourceforge.io/octave/function/plot.html)"}},{label:"abs",kind:W.CompletionItemKind.Function,documentation:"Return the absolute value of a number"},{label:"acos",kind:W.CompletionItemKind.Function,documentation:"Return the arccosine of a number"},{label:"acosh",kind:W.CompletionItemKind.Function,documentation:"Return the hyperbolic arccosine of a number"},{label:"angle",kind:W.CompletionItemKind.Function,documentation:"Return the angle (in radians) of a complex number"},{label:"arg",kind:W.CompletionItemKind.Function,documentation:"Return the argument (in radians) of a complex number"},{label:"asin",kind:W.CompletionItemKind.Function,documentation:"Return the arcsine of a number"},{label:"asinh",kind:W.CompletionItemKind.Function,documentation:"Return the hyperbolic arcsine of a number"},{label:"atan",kind:W.CompletionItemKind.Function,documentation:"Return the arctangent of a number"},{label:"atanh",kind:W.CompletionItemKind.Function,documentation:"Return the hyperbolic arctangent of a number"},{label:"ceil",kind:W.CompletionItemKind.Function,documentation:"Round up to the nearest integer"},{label:"conj",kind:W.CompletionItemKind.Function,documentation:"Return the complex conjugate of a number"},{label:"cos",kind:W.CompletionItemKind.Function,documentation:"Return the cosine of a number"},{label:"cosh",kind:W.CompletionItemKind.Function,documentation:"Return the hyperbolic cosine of a number"},{label:"cot",kind:W.CompletionItemKind.Function,documentation:"Return the cotangent of a number"},{label:"csc",kind:W.CompletionItemKind.Function,documentation:"Return the cosecant of a number"},{label:"det",kind:W.CompletionItemKind.Function,documentation:"Compute the determinant of a matrix"},{label:"diag",kind:W.CompletionItemKind.Function,documentation:"Extract or construct a diagonal matrix"},{label:"diff",kind:W.CompletionItemKind.Function,documentation:"Compute the difference between adjacent elements of a matrix"},{label:"disp",kind:W.CompletionItemKind.Function,documentation:"Display the value of an expression"},{label:"eig",kind:W.CompletionItemKind.Function,documentation:"Compute the eigenvalues and eigenvectors of a matrix"},{label:"eps",kind:W.CompletionItemKind.Constant,documentation:"Return the machine epsilon (smallest number representable in floating point arithmetic)"},{label:"erf",kind:W.CompletionItemKind.Function,documentation:"Return the error function of a number"},{label:"erfc",kind:W.CompletionItemKind.Function,documentation:"Return the complementary error function of a number"}]}var tn=Ae(require("os"));function Yh(){switch(tn.platform()){case"linux":return`${tn.homedir()}/.octaverc`;case"darwin":return`${tn.homedir()}/.octaverc`;case"win32":return`${tn.homedir()}\\Documents\\Octave\\octaverc`;default:throw new Error(`Unsupported platform: ${tn.platform()}`)}}var Cs={maxNumberOfProblems:1e3,maxFilesSearchDepth:3,defaultInitFile:Yh(),enableInitFile:!1,defaultExecPath:"/usr/bin/octave",defaultDebounceTimeMS:1e3},wt=Cs;function Rs(t){wt=t}function jc(){return ri().map(t=>t.label)}function Wc(t){return/^[a-zA-Z]+$/.test(t)}function Uc(t){return!isNaN(parseFloat(t))}var Hc=Ae(require("fs")),Bc=Ae(require("path"));function Vc(t){let e=[];function n(r){let i=Hc.default.readdirSync(r,{withFileTypes:!0});for(let s of i){let d=Bc.default.join(r,s.name);s.isDirectory()?n(d):s.isFile()&&s.name.endsWith(".m")&&e.push(d)}}return n(t),e}var $c=Ae(require("fs")),zc=Ae(require("path")),Gc=require("url"),Kc=Ae(ni());function Yc({workspace:t}){return Vc(t).map(r=>{let i=(0,Gc.pathToFileURL)(zc.default.resolve(r)).toString(),s=$c.default.readFileSync(r,"utf-8");return Kc.TextDocument.create(i,"octave",1,s)})}function Qc({text:t,characterPosition:e}){let n=0,r=0,i=!1,s=!1;if(e>t.length)return[0,t.length-1];for(let d=0;d<e;d++){let v=t[d];v===`
`&&!i&&!s?(n++,r=0):v==="'"?i=!i:v==='"'?s=!s:r++}return[n,r]}var Xc=Ae(en());function oi(t,e){let n=t.getText(),r=/[\w]+/g,i;for(;i=r.exec(n);){let s=i.index,d=i.index+i[0].length,v=Xc.Range.create(t.positionAt(s),t.positionAt(d));if(e.line===v.start.line&&e.character>=v.start.character&&e.character<=v.end.character)return v}}var _s=Ae(Ts());var oe={OUTPUT_VECTOR:1,EXPECTED_FN_IDENT:2,AST_MAX_STMNT_REACHED:3,FN_CALL_EXCEEDED_CALLS:4,FN_DEF_MISSING_END:5,MISSING_PAREN:6,EXPECTED_COMMA_PAREN:7,UNEXPECTED_NL:50,TOO_MANY_NL:60,CELL_ARR_BAD_ARGS:140,CELL_ARR_BAD_COMMA:141,CELL_ARR_BAD_MISSING_END:142,CELL_ARR_ACCESS_MISSING_END:160,CELL_ARR_ACCESS_BAD_ARGS:161,MISSING_PATH:200,TOO_MANY_ARGS:201,MAX_ITERATION_COMMENTS_BEFORE:2e3,MAX_ITERATION_COMMENTS_AFTER:2001,MAX_ITERATION_PARSING_COMMENT_BEFORE:3001,PARSE_ERR_STMNT:4e3,COULD_NOT_FIND_RPAREN_STMNT:4001,MISSING_CONDITION_ELSEIF:4002,MISSING_END_STMNT:4002,UNEXPECTED_END_OF_STMNT:4003,MISSING_EQUALS_STMNT:4004,MISSING_EQUALS_FOR_LOOP:4005,MISSING_END_KEYWORD_FOR_LOOP:4006,MISSING_END_RPAREN_FOR_LOOP:4007,WRONG_DATA_TYPE_FOR_LOOP:5001,VISITOR_COULDNT_FIND_REF:1e4,UNEXPECTED_UNDEFINED_TOKEN:2e4};var J={start:{line:1,character:1},end:{line:1,character:2}};function bs(t,e){return{range:t?.range??J,message:t.message,severity:e==="error"?_s.DiagnosticSeverity.Error:_s.DiagnosticSeverity.Warning,source:"mlang"}}function Jc(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<16;r++){let i=Math.floor(Math.random()*e.length);n+=e.charAt(i)}return n}function si(){return ii().map(t=>t.label)}var Yn=Ae(en());function ks(t){let e=t?.arguments?.length!==void 0&&t?.arguments?.length>0?t.arguments.map((i,s)=>`${s!==0?" ":""}\${${s+1}:${i.name}${i.type!=="DEFAULT_ARGUMENT"?"":` = ${i.content}`}}`):"",n=t.type!=="FUNCTION"?t.name:`${t.name}(${Array.isArray(e)?e.map(i=>i):e})`;return{label:t.name,kind:t.type==="FUNCTION"?Yn.CompletionItemKind.Function:Yn.CompletionItemKind.Variable,documentation:t.documentation,data:t.arguments,insertText:n,insertTextFormat:Yn.InsertTextFormat.Snippet}}var Qh=require("node:path"),Xh=require("node:os");function Zc(t){return t[0]==="~"?Qh.join(Xh.homedir(),t.slice(1)):t}function eu(t){return t.replace(/^["'](.*)["']$/,"$1")}var ht=require("fs"),nu=Ae(Es());var Xn=require("path");var tu=Ae(ni());var Ss=class{constructor(){this._documents=new Map}set(e,n){if(this._documents.has(e))return;let r=tu.TextDocument.create(e,"octave",0,n);this._documents.set(e,r),ai(e,n)}has(e){return this._documents.has(e)}get(e){return this._documents.get(e)}getAllDocuments(){return Array.from(this._documents,([e,n])=>n)}getAllUris(){return Array.from(this._documents,([e,n])=>e)}delete(e){this._documents.delete(e)}},Ge=new Ss;function ci(t,e=0){let n=Zc(t);if(e>wt.maxNumberOfProblems)return[];try{if((0,ht.existsSync)(n)){let r=(0,ht.lstatSync)(n);if(r.isFile()){let i=nu.URI.file(n).toString();if(Ge.has(i))return[];let s=(0,ht.readFileSync)(n,"utf8").toString();return Ge.set(i,s),[]}else{if(r.isDirectory())return(0,ht.readdirSync)(n).flatMap(s=>{let d=(0,Xn.join)(n,s);return ci(d,e+1)});if(r.isSymbolicLink()){let i=(0,ht.readlinkSync)(n);if(i){let s=(0,Xn.join)((0,Xn.dirname)(n),i);if((0,ht.existsSync)(s))return ci(s,e+1)}return[n]}}return[n]}}catch{return[n]}return[]}var li=!0,Ns=!0,Jh=!1;function ru({params:t,connection:e}){let n=t.capabilities;li=!!(n.workspace!=null&&n.workspace.configuration),Ns=!!(n.workspace!=null&&n.workspace.workspaceFolders),Jh=!!(n.textDocument?.publishDiagnostics&&n.textDocument.publishDiagnostics.relatedInformation);let r={capabilities:{textDocumentSync:ui.TextDocumentSyncKind.Incremental,completionProvider:{workDoneProgress:!0,resolveProvider:!0,completionItem:{labelDetailsSupport:!0},triggerCharacters:["qwertyuiopasdfghjkl\xF1zxcvbnm"]},definitionProvider:{workDoneProgress:!0},referencesProvider:{workDoneProgress:!0}}};Ns&&(r.capabilities.workspace={workspaceFolders:{supported:!0}});let{workspaceFolders:i}=t;return i&&i.length>0&&i[0]?.name&&Yc({workspace:i[0].name}).forEach(d=>Ge.set(d.uri,d.getText())),r}async function iu({params:t,connection:e}){e.console.log("Mlang Initialized correctly!"),li&&await e.client.register(ui.DidChangeConfigurationNotification.type,void 0),Ns&&e.workspace.onDidChangeWorkspaceFolders(n=>{e.console.log("Workspace folder change event received.")})}function ou(t,e){let n=[],r=t.uri,i=oi(t,e);if(i===void 0)return[];let s=_t.get(r);if(s?.definitions===void 0)return[];let{references:d}=s,v=t.getText(i);return n.push(...d.filter(l=>l.name===v).map(l=>({range:l.position,uri:r}))),n}function su({params:t}){let e=ri(),n=_t.get(t.textDocument.uri);if(n?.definitions===void 0)return e;let{definitions:r}=n,i=ii();e.push(...i),e.push(...r.map(l=>ks(l)).filter((l,g,y)=>g===y.findIndex(_=>_.label===l.label)));let v=Ge.getAllUris().filter(l=>l!==t.textDocument.uri).map(l=>_t.get(l)).filter(l=>l!==void 0).flatMap(l=>l.definitions).filter(l=>l.context==="0").map(l=>ks(l));return e.push(...v),e}async function au({params:t,documents:e}){let n=t.textDocument.uri,r=t.position,i=e.get(n);if(!i)return null;let s=oi(i,r);if(!s)return null;let d=i.getText(s),v=[],g=_t.get(n)?.definitions;return g&&v.push(...g.filter(_=>_.name===d).map(_=>({range:_.position,uri:n}))),Ge.getAllUris().filter(_=>_!==t.textDocument.uri).forEach(_=>{_t.get(_)?.definitions.filter(b=>b.context==="0").filter(b=>b.name===d).forEach(b=>{v.push({uri:_,range:b.position})})}),v.length>0?v:null}var cu=["function","if","for","while","switch","do"],uu=["until","endfunction","endif","endfor","endwhile","endswitch","end"];var Zh={NL:`
`,EOF:"\0",AT:"@",COLON:":",COMMA:",",EQUALS:"=",GRATER_THAN:">",LESS_THAN:"<",AND:"&",OR:"|",EXCLAMATION:"!",SUBTRACTION:"-",ADDITION:"+",MULTIPLICATION:"*",DIVISION:"/",MODULUS:"%",EXPONENTIATION:"^",PERIOD:".",SEMICOLON:";",LBRACKET:"[",RBRACKET:"]",LSQUIRLY:"{",RSQUIRLY:"}",LPARENT:"(",RPARENT:")"};function lu(t){for(let[e,n]of Object.entries(Zh))if(n===t)return{content:e==="EOF"?"eof":t,type:e,position:null}}var je=5e3,di=class{constructor(e){this.tokens=e;this.currentTokenIndex=0;this.statements=[];this.errors=[];this.warnings=[];this.contextDepth=["0"];this.parsingStatement=!1;this.parsingStatementType=null;this.counter=0}clearLintingMessages(){this.errors=[],this.warnings=[]}getCurrentContext(){return this.contextDepth[this.contextDepth.length-1]}getIntoNewContext(){let e=this.getCurrentContext(),n=Jc();return this.contextDepth.push(n),[e,n]}getBackOfContext(){let e=this.getCurrentContext(),n=this.contextDepth.pop();if(n===void 0)throw new Error("Expected newContext to be defined");return[e,n]}getCurrentToken(){return this.tokens[this.currentTokenIndex]}getNextToken(){if(!(this.currentTokenIndex>=this.tokens.length-1))return this.currentTokenIndex++,this.getCurrentToken()}getPrevToken(){if(!(this.currentTokenIndex<=0))return this.currentTokenIndex--,this.getCurrentToken()}parseStatement(){for(;this.getCurrentToken().type==="COMMENT"||this.getCurrentToken().type==="NL";)this.getNextToken();let e=this.getCurrentToken(),n=this.getNextToken();if(n===void 0)return null;if(this.parsingStatement&&this.parsingStatementType==="if"&&(e.content==="elseif"||e.content==="else"))return e.content==="elseif"&&(this.consumeStatementCondition(e.position,n.type==="LPARENT"),this.consumeStatementsInsideBasicStatement(e,"endif")),null;if(this.parsingStatement&&this.parsingStatementType==="do"&&e.content==="until")return this.getPrevToken(),null;if(typeof e.content=="string"&&uu.includes(e.content)||e.type==="EOF")return this.parsingStatement?(this.getPrevToken(),null):(this.errors.push({message:`Unexpected ending of statement '${e.content}'`,code:oe.UNEXPECTED_END_OF_STMNT,range:{start:this.getCurrentPosition(e).start,end:this.getCurrentPosition(n).start}}),null);if((e.type==="IDENTIFIER"||e.type==="STRUCT_ACCESS"||e.type==="CELL_ARRAY_ACCESS"||e.type==="NATIVE_FUNCTION")&&n.type==="LPARENT"){this.getPrevToken();let r=this.getCurrentPosition();this.getNextToken();let i=this.getFunctionArguments();return this.getNextToken(),{type:"FUNCTION_CALL",supressOutput:this.isOutputSupressed(),context:this.getCurrentContext(),LHE:{type:"IDENTIFIER",value:e.content,position:r,functionData:{args:i}}}}else if((e.type==="IDENTIFIER"||e.type==="STRUCT_ACCESS"||e.type==="CELL_ARRAY_ACCESS")&&n.type==="EQUALS"){let r=this.getLineContent();this.getNextToken();let i=this.parseExpression(),s=this.isOutputSupressed();return{type:"ASSIGNMENT",operator:n.content,supressOutput:s,context:this.getCurrentContext(),LHE:{type:e.type,value:e.content,position:this.getCurrentPosition(e),lineContent:r},RHE:i}}else if(e.type==="LBRACKET"){let[r,i]=this.getVectorArgs();if(i==="COMMA"&&r.every(s=>s.type==="IDENTIFIER")&&this.getCurrentToken().type==="EQUALS"){if(this.getCurrentToken().type!=="EQUALS")return this.errors.push({message:`Unexpected token ${this.stringifyTokenContent()}`,range:this.getCurrentPosition(),code:oe.OUTPUT_VECTOR}),null;let s=this.getNextToken();if(s===void 0)throw new Error("Unexpected undefined token. Code 50");if(s.type!=="IDENTIFIER"&&s.type!=="KEYWORD")return this.errors.push({message:`Expected a function call. Got ${this.stringifyTokenContent()}`,range:this.getCurrentPosition(),code:oe.EXPECTED_FN_IDENT}),null;this.getNextToken();let d=this.getFunctionArguments();return this.validateFnCallArgs(d),this.getNextToken(),{type:"MO_ASSIGNMENT",operator:"=",supressOutput:this.isOutputSupressed(),context:this.getCurrentContext(),LHE:{type:"VARIABLE_VECTOR",value:r},RHE:{type:"FUNCTION_CALL",position:this.getCurrentPosition(s),value:s.content,functionData:{args:d}}}}return null}else if(e.type==="KEYWORD"&&e.content==="function"){let r=this.getCurrentToken(),i=this.getNextToken();if(this.getPrevToken(),this.getPrevToken(),i===void 0)throw new Error("Unexpected undefined token. Code 60");return r.type==="IDENTIFIER"&&i.type==="EQUALS"?this.getFunctionDefintionWithOutput(!0):r.type==="LBRACKET"?this.getFunctionDefintionWithOutput(!1):this.getFunctionDefintionWithoutOutput()}else if(e.type==="KEYWORD"&&typeof e.content=="string"&&cu.includes(e.content))switch(e.content){case"if":case"while":return this.parseBasicIfStatements(e.content);case"for":return this.parseForStatement(e);case"do":return this.parseDoUntilStatement(e);default:return this.parseBasicIfStatements(e.content)}else if((e.type==="IDENTIFIER"||e.type==="NATIVE_FUNCTION"||e.type==="CELL_ARRAY_ACCESS"||e.type==="STRUCT_ACCESS")&&(n.type==="SEMICOLON"||n.type==="NL"||n.type==="EOF")){let r=this.isOutputSupressed();return{type:"REFERENCE_CALL_VAR_FUNC",LHE:{type:"REFERENCE_CALL_VAR_FUNC",position:this.getCurrentPosition(e),value:e.content},supressOutput:r,context:this.getCurrentContext()}}else if(e.type==="IDENTIFIER"&&(n.type==="EOF"||this.isTokenValidBasicDataType(n))){let r=0,i=[];for(;this.getCurrentToken().type!=="NL"&&this.getCurrentToken().type!=="EOF"&&this.isTokenValidBasicDataType(this.getCurrentToken(),!1)&&r<je;){let d=this.getNextToken();if(r++,d===void 0)throw new Error(`Unexpected undefined token. Error code ${oe.UNEXPECTED_UNDEFINED_TOKEN}`);if(this.isTokenValidBasicDataType(d,!1))i.push(d);else if(d.type==="LBRACKET"){let v=this.getVector();i.push(v)}}this.logErrorMaxCallsReached(r,"Could not parse function call",oe.FN_CALL_EXCEEDED_CALLS);let s=this.isOutputSupressed();return{type:"FUNCTION_CALL",context:this.getCurrentContext(),supressOutput:s,LHE:{type:"FUNCTION_CALL",position:this.getCurrentPosition(e),value:e.content,functionData:{args:i}}}}else{if(e===void 0)throw new Error("Unexpected undefined token. Code 70");return this.errors.push({message:`Unexpected token. Got: "${this.stringifyTokenContent(e)}"`,range:e?.position??{start:{line:0,character:0},end:{line:0,character:0}},code:24}),null}}parseDoUntilStatement(e){this.parsingStatement=!0,this.parsingStatementType="do";let[n,r]=this.consumeStatementsInsideBasicStatement(this.getCurrentToken(),"until"),i=this.getCurrentPosition(),s=this.getNextToken()?.type==="LPARENT";return s&&this.skipNL(!0),this.consumeStatementCondition(i,s)?{type:"DO_STMNT",context:this.getCurrentContext(),supressOutput:!0,LHE:{type:"DO_STMNT",value:e.content,position:this.getCurrentPosition(e)},RHE:r}:null}parseForStatement(e){this.parsingStatement=!0,this.parsingStatementType="for";let n=!1;this.getCurrentToken().type==="LPARENT"&&(n=!0,this.getNextToken());let r=this.getCurrentToken();if(!this.isTokenValidBasicDataType(this.getCurrentToken(),!0))return null;if(this.getNextToken(),this.getCurrentToken().type!=="EQUALS")return this.errors.push({message:"Missing = in for loop",code:oe.MISSING_EQUALS_FOR_LOOP,range:{start:e.position?.start??J.start,end:this.getCurrentPosition().end}}),this.parsingStatement=!1,this.parsingStatementType=null,null;if(this.getNextToken(),this.isValidForDataType()){if(this.getNextToken(),this.getCurrentToken().type==="COLON"){if(this.getNextToken(),!this.isValidForDataType())return this.errors.push({message:`Unexpected '${JSON.stringify(this.getCurrentToken().content)}' in for loop`,range:{start:e.position?.start??J.start,end:this.getCurrentPosition()?.end??J.end},code:oe.WRONG_DATA_TYPE_FOR_LOOP}),this.parsingStatement=!1,this.parsingStatementType=null,null;this.getNextToken()}}else this.parseExpression(),this.getNextToken();if(n){if(this.getCurrentToken().type!=="RPARENT")return this.errors.push({message:"Was expecting closing ')' in for loop",code:oe.MISSING_END_RPAREN_FOR_LOOP,range:{start:e.position?.start??J.start,end:this.getCurrentPosition()?.end??J.end}}),this.parsingStatement=!1,this.parsingStatementType=null,null;this.getNextToken()}let i=this.consumeStatementsInsideBasicStatement(this.getCurrentToken(),"endfor")[1];this.getNextToken();let s=this.getIntoNewContext()[1];return this.getBackOfContext(),{type:"FOR_STMNT",supressOutput:!0,context:s,LHE:{type:"IDENTIFIER",value:r.content,position:r.position??J},RHE:i}}isValidForDataType(e){return e===void 0?this.getCurrentToken().type==="CELL_ARRAY_ACCESS"||this.getCurrentToken().type==="STRUCT_ACCESS"||this.getCurrentToken().type==="NUMBER"||this.getCurrentToken().type==="IDENTIFIER":e.type==="CELL_ARRAY_ACCESS"||e.type==="STRUCT_ACCESS"||e.type==="NUMBER"||e.type==="IDENTIFIER"}getLineContent(){let e=this.currentTokenIndex,n=this.getPrevToken(),r=[...n?[n]:[]],i=0,s=this.getNextToken();for(;s?.type!=="NL"&&s?.type!=="EOF"&&i<1e3;)s!==void 0&&r.push(s),s=this.getNextToken();let d=r.map(v=>this.getLiteralContentFromToken(v.content)).join(" ");return this.currentTokenIndex=e,d}getLiteralContentFromToken(e,n=0){if(n>je)throw new Error("Exceeded calls from getLiteralContentFromToken.");return typeof e=="string"?e:e.length===0?"":e.map(r=>this.getLiteralContentFromToken(r.content,n+1)).join(" ")}parseBasicIfStatements(e){let n=this.getPrevToken(),r=n.position,i=this.skipNL(!0).type==="LPARENT",s=e==="do"?"until":`end${e}`,d=this.getIntoNewContext()[1];this.parsingStatement=!0,this.parsingStatementType=e;let v=[];if(e==="do"){let[y,_]=this.consumeStatementsInsideBasicStatement(n,s);if(!y)return null;v=_}else{if(i&&this.skipNL(!0),!this.consumeStatementCondition(r,i))return null;let[_,b]=this.consumeStatementsInsideBasicStatement(n,s);if(!_)return null;v=b}this.getBackOfContext();let l={...r,end:this.getCurrentPosition().start};this.skipNL(!0);let g;switch(e){case"if":g="IF_STMNT";break;case"for":g="FOR_STMNT";break;case"while":g="WHILE_STMNT";break;case"switch":g="SWITCH_STMNT";break;case"do":g="DO_STMNT";break;default:throw new Error("Could not parse statement")}return this.parsingStatement=!1,this.parsingStatementType=null,{type:g,supressOutput:!0,context:d,LHE:{type:g,value:e,position:l},RHE:v}}consumeStatementsInsideBasicStatement(e,n){let r=[],i=0;for(;!this.isEndStatementToken(n)&&!this.isEOF()&&i<je;){let s=this.parseStatement();s!==null&&r.push(s),i++}return this.logErrorMaxCallsReached(this.getCurrentToken().type==="EOF"?je:i,`Could not find closing keyword 'end' or '${n}'`,oe.MISSING_END_STMNT,e)?(this.parsingStatement=!1,this.parsingStatementType=null,[!1,r]):[!0,r]}consumeStatementCondition(e,n){let r=0;do{r++;let i=this.parseExpression();if(i?.type==="BINARY_OPERATION"&&(this.getNextToken(),this.getPrevToken()),i?.type!=="BINARY_OPERATION"&&i?.type!=="FUNCTION_CALL"&&i?.type!=="NUMBER"&&i?.type!=="IDENTIFIER"&&i?.type!=="STRING"&&i?.type!=="STRUCT"&&i?.type!=="VECTOR"&&i?.type!=="IDENTIFIER_REFERENCE"&&i?.type!=="STRUCT_ACCESS"&&i?.type!=="CELL_ARRAY_ACCESS")return this.errors.push({message:"Unexpected token while parsin condition",code:oe.PARSE_ERR_STMNT,range:{start:e?.start??J.start,end:this.getCurrentPosition().end??J}}),this.parsingStatement=!1,this.parsingStatementType=null,!1;let s=this.checkConditionHasSymbols(),d=!1;s&&(d=this.consumeEquationSymbols(),this.skipNL(!0),d=!this.isTokenValidBasicDataType(this.getCurrentToken())),n&&s?this.skipNL(!0):!n&&s&&this.getNextToken();let[v,l]=this.consumeConditionConcatenator(n?"RPARENT":"NL");if(this.skipNL(!0),d=v,l)break;if(d)return this.parsingStatement=!1,this.parsingStatementType=null,!1}while(r<je&&this.getCurrentToken().type!=="EOF");return this.logErrorMaxCallsReached(r,"Error parsing conditions",oe.PARSE_ERR_STMNT)?(this.parsingStatement=!1,this.parsingStatementType=null,!1):!0}checkConditionHasSymbols(){switch(this.getCurrentToken().type){case"GRATER_THAN":case"LESS_THAN":case"EQUALS":return!0;default:return!1}}consumeEquationSymbols(){switch(this.getCurrentToken().type){case"EQUALS":if(this.getNextToken()?.type!=="EQUALS")return this.errors.push({message:`Missing '='. Got '${JSON.stringify(this.getCurrentToken().content)}'`,code:oe.MISSING_EQUALS_STMNT,range:this.getCurrentPosition()}),!0;break;case"GRATER_THAN":case"LESS_THAN":this.getNextToken()?.type!=="EQUALS"&&this.getPrevToken();break;default:return!0}return!1}consumeConditionConcatenator(e){switch(this.getCurrentToken().type){case"AND":if(this.getNextToken()?.type!=="AND")return[!0,!1];break;case"OR":if(this.getNextToken()?.type!=="OR")return[!0,!1];break;case e:return[!1,!0];default:return[!0,!1]}return[!1,!1]}isEndStatementToken(e,n){return n!==void 0?n.content==="end"||n.content===e:this.getCurrentToken().content==="end"||this.getCurrentToken().content===e}parseCellArray(){let e=[],n=this.getCurrentToken().position?.start??J.start,r=0,i=this.skipNL(!0);if(i.type==="COLON"){let s=this.skipNL(!0);return s.type!=="RSQUIRLY"?(this.errors.push({message:`Missing closing '}'. Got ${JSON.stringify(s.content)}`,code:oe.CELL_ARR_BAD_MISSING_END,range:{start:n,end:s?.position?.end??J.end}}),this.getNextToken(),null):(this.getNextToken(),{type:"CELL_ARRAY",content:[i],position:{start:n,end:s?.position?.end??J.end}})}this.getPrevTokenSkipNL();do{let s=this.skipNL(!0);if(s.type==="RSQUIRLY")break;if(s!==void 0&&this.isValidStructType(s))e.push(s);else return null;let d=this.skipNL(!0);(d===void 0||d.type!=="COMMA"&&d.type!=="SEMICOLON"&&d.type!=="RSQUIRLY")&&this.errors.push({message:`Unexpected struct value. Got "${d?.type??"UNDEFINED"}". Code ${oe.CELL_ARR_BAD_COMMA.toString()}`,code:oe.CELL_ARR_BAD_COMMA,range:this.getCurrentPosition()}),r++}while(this.getCurrentToken().type!=="RSQUIRLY"&&this.getCurrentToken().type!=="EOF"&&this.currentTokenIndex<this.tokens.length&&r<je);return this.getNextToken(),{type:"CELL_ARRAY",content:e,position:{start:n,end:this.getCurrentPosition().end}}}isValidStructType(e){return!this.isTokenValidBasicDataType(e)&&e.type!=="VECTOR"&&e.type!=="CELL_ARRAY"&&e.type!=="STRUCT"?(this.errors.push({message:`Unexpected struct value. Got "${e.type}". Code ${oe.CELL_ARR_BAD_ARGS.toString()}`,code:oe.CELL_ARR_BAD_ARGS,range:this.getCurrentPosition()}),!1):!0}validateFnCallArgs(e){for(let n of e)n.type==="DEFAULT_VALUE_ARGUMENT"&&this.errors.push({message:"Unexpected default value argument in function call",range:this.getCurrentPosition(n),code:23})}getVectorArgs(){let e=[];if(this.getCurrentToken().type==="LBRACKET"&&this.getNextToken(),this.getCurrentToken().type==="RBRACKET")return this.getNextToken(),[[],"COMMA"];this.getCurrentToken().type==="LBRACKET"?(e.push(this.getVector()),this.getPrevToken()):this.isTokenValidBasicDataType(this.getCurrentToken())&&e.push(this.getCurrentToken());let n=this.getNextToken()?.type==="COMMA";return n?e.push(...this.getVectorValuesCommaSeparated()):e.push(...this.getVectorValuesColonSeparated()),this.getNextToken(),[e,n?"COMMA":"COLON"]}getVectorValuesColonSeparated(){let e=[];for(;this.getCurrentToken().type==="COLON"&&e.length<2;){let n=this.getNextToken();if(n===void 0)throw new Error("Unexpected undefined token. Code 80");n.type==="LBRACKET"?(e.push(this.getVector(n)),this.getPrevToken()):this.isTokenValidBasicDataType(n)&&e.push(n),this.getNextToken()}return this.getCurrentToken().type!=="RBRACKET"&&this.errors.push({message:"Unexpected vector value",range:this.getCurrentPosition(),code:22}),e}getVector(e){let[n]=this.getVectorArgs(),r=e??this.getCurrentToken();if(r===void 0)throw new Error("Unexpected undefined token. Code 130");let i=this.getCurrentPosition(r);return{type:"VECTOR",content:n,position:{start:i.start,end:n[n.length-1]?.position?.end??i.end}}}getVectorValuesCommaSeparated(){let e=[];for(;this.getCurrentToken().type==="COMMA";){let n=this.getNextToken();if(n===void 0)throw new Error("Unexpected undefined token. Code 120");if(n.type==="LBRACKET")e.push(this.getVector(n)),this.getPrevToken();else if(this.isTokenValidBasicDataType(n))e.push(n);else break;this.getNextToken()}return this.getCurrentToken().type!=="RBRACKET"&&this.errors.push({message:"Unexpected vector value",range:this.getCurrentPosition(),code:21}),e}getFunctionDefintionWithOutput(e){this.parsingStatement=!0;let[n,r]=this.getIntoNewContext(),i=this.getFunctionDefinitionDescription(!0),s,d=[];e?(s=this.getNextToken(),this.getNextToken()):(this.getNextToken(),this.getNextToken(),d.push(...this.getVariableVector()));let v=this.getNextToken();if(v===void 0)throw new Error("Unexpected undefined token. Code 110");if(v.type!=="IDENTIFIER")return this.errors.push({message:`Expected IDENTIFIER. Got: ${this.stringifyTokenContent(v)}`,range:this.getCurrentPosition(),code:20}),null;this.getNextToken();let l=this.getFunctionArguments();this.checkValidFunctionDefinitionArguments(l),i===""&&(i=this.getFunctionDefinitionDescription(!1)),this.getNextToken();let g=[],y=0;for(;!this.isEndFunctionToken()&&!this.isEOF()&&y<je;){let D=this.parseStatement();D!==null&&g.push(D),y++}this.logErrorMaxCallsReached(y,"Could not find closing keyword 'end'",oe.FN_DEF_MISSING_END);let _=this.getCurrentToken();if(_.type==="EOF")return this.errors.push({message:"Expected closing function 'end' or 'endfunction'",range:{start:this.getCurrentPosition(v).start,end:this.getCurrentPosition(v).end},code:19}),null;this.getNextToken(),this.getBackOfContext();let b={type:"FUNCTION_DEFINITION",value:"function",LHO:{type:"IDENTIFIER",value:v.content,position:this.getCurrentPosition(v),functionData:{args:l,description:i,closingToken:_,contextCreated:r}},RHO:g};return{type:"ASSIGNMENT",supressOutput:!0,context:n,LHE:{type:e?"IDENTIFIER":"VARIABLE_VECTOR",value:e&&s!==void 0?s.content:d,position:e&&s!==void 0?this.getCurrentPosition(s):void 0},RHE:b}}checkValidFunctionDefinitionArguments(e){let n=!0;return e.forEach(r=>{r.type==="IDENTIFIER"||r.type==="DEFAULT_VALUE_ARGUMENT"||(n=!1,this.errors.push({message:"Invalid function definition argument. ",range:this.getCurrentPosition(r),code:200}))}),n}getFunctionDefintionWithoutOutput(){this.parsingStatement=!0;let[e,n]=this.getIntoNewContext(),r=this.getFunctionDefinitionDescription(!0),i=this.getNextToken();if(i===void 0)throw new Error("Unexpected undefined token. Code 100");if(i.type!=="IDENTIFIER")return this.errors.push({message:`Expected IDENTIFIER. Got: ${this.stringifyTokenContent(i)}`,range:this.getCurrentPosition(),code:18}),null;this.getNextToken();let s=this.getFunctionArguments();this.checkValidFunctionDefinitionArguments(s),this.getNextToken(),r===""&&(this.getPrevToken(),r=this.getFunctionDefinitionDescription(!1),this.getNextToken());let d=[],v=0;for(;!this.isEndFunctionToken()&&!this.isEOF()&&v<je;){let g=this.parseStatement();g!==null&&d.push(g),v++}v>=je&&this.errors.push({message:"Max calls for statements in a function definition",range:this.getCurrentPosition(),code:16});let l=this.getCurrentToken();return l.type==="EOF"?(this.errors.push({message:"Expected closing function 'end' or 'endfunction'",range:{start:this.getCurrentPosition(i).start,end:this.getCurrentPosition(i).end},code:17}),null):(this.getNextToken(),this.getBackOfContext(),{type:"FUNCTION_DEFINITION",supressOutput:!0,context:e,LHE:{type:"IDENTIFIER",value:i.content,position:this.getCurrentPosition(i),functionData:{args:s,description:r,closingToken:l,contextCreated:n}},RHE:d})}getFunctionDefinitionDescription(e){let n=[],r=this.currentTokenIndex;if(e){let s=0;do{if(s++,this.currentTokenIndex===0)break;let d=this.getPrevTokenSkipNL();d?.type==="COMMENT"&&n.push(d)}while(this.getCurrentToken().type==="COMMENT"&&s<=je);this.logErrorMaxCallsReached(s,"Iterations exceeded trying to find function comments",oe.MAX_ITERATION_COMMENTS_BEFORE),n.reverse()}else{let s=0;do{s++;let d=this.skipNL(!0);d.type==="COMMENT"&&n.push(d)}while(this.getCurrentToken().type==="COMMENT"&&s<=je);this.logErrorMaxCallsReached(s,"Iterations exceeded trying to find function comments",oe.MAX_ITERATION_COMMENTS_AFTER)}return this.currentTokenIndex=r,n.map(s=>s.content).join(`
`)}getPrevTokenSkipNL(){let e,n=0;do e=this.getPrevToken(),n++;while(e?.type==="NL"&&n<je);return this.logErrorMaxCallsReached(n,"Max statement parsing reached while parsing comment",oe.MAX_ITERATION_PARSING_COMMENT_BEFORE),e}isOutputSupressed(){let e=this.getCurrentToken().type==="SEMICOLON";return e?(this.getNextToken(),e):(this.warnings.push({message:"Will output to the console",range:this.getCurrentPosition(this.getPrevToken()),code:15}),this.getNextToken(),!1)}getVariableVector(){let e=[];do{if(this.getCurrentToken().type!=="IDENTIFIER")return[];e.push(this.getCurrentToken());let n=this.getNextToken()?.type;if(n===void 0)throw new Error("Unexpected undefined token. Code 30");if(n!=="COMMA"&&n!=="RBRACKET")return this.errors.push({message:`Expected COMMA. Got: '${this.stringifyTokenContent(this.getCurrentToken())}'`,range:this.getCurrentPosition(),code:14}),e;if(this.getNextToken(),n==="RBRACKET")break}while(e[e.length-1].type!=="RBRACKET"&&this.currentTokenIndex<this.tokens.length);return e}parseExpression(){let e=this.getCurrentToken(),n,r=!0;switch(e.type){case"STRING":case"VECTOR":r=!1,n={type:e.type,value:e.content};break;case"NUMBER":n={type:e.type,value:e.content};break;case"NATIVE_FUNCTION":case"IDENTIFIER":case"CELL_ARRAY_ACCESS":case"STRUCT_ACCESS":this.getNextToken(),this.getCurrentToken().type==="LPARENT"?n=this.parseFunctionCall(e):this.getCurrentToken().type==="LSQUIRLY"?n=this.parseCellArrayAccess(e):n={type:e.type,value:e.content,position:this.getCurrentPosition(e)},this.getPrevToken();break;case"AT":{this.getNextToken();let s=this.getFunctionArguments();this.validateFnCallArgs(s),this.getNextToken();let d=this.parseExpression();return{type:"ANONYMOUS_FUNCTION_DEFINITION",value:"@",position:this.getCurrentPosition(e),functionData:{args:s},RHO:d}}case"LPARENT":if(this.getNextToken(),n=this.parseExpression(),this.getCurrentToken().type!=="RPARENT"){this.errors.push({message:"Expected closing parenthesis ')'",range:this.getCurrentPosition(),code:13});return}break;case"LBRACKET":return{type:"VARIABLE_VECTOR",value:this.getVectorArgs()[0]};case"LSQUIRLY":{let s=this.parseCellArray();return s===null?void 0:{type:"CELL_ARRAY",value:s?.content}}case"NL":this.errors.push({message:"Unexpected new line in expression.",range:this.getCurrentPosition(),code:oe.UNEXPECTED_NL});return;default:this.errors.push({message:`Unexpected token. ${this.stringifyTokenContent(e)}. Case ${e.type}`,range:this.getCurrentPosition(),code:12});return}let i=this.getNextToken();if(i===void 0)throw new Error("Unexpected undefined token. Code 40");return r&&this.isBinaryOperator(i.type)?(this.getNextToken(),{type:"BINARY_OPERATION",value:i?.content??"",RHO:this.parseExpression(),LHO:n}):n}parseCellArrayAccess(e){let n=this.skipNL(!0);if(n!==void 0)if(n.type==="COLON"){let r=this.skipNL(!0);if(r===void 0)return;if(r.type!=="RSQUIRLY"){this.errors.push({message:"Missing closing token '}'",code:oe.CELL_ARR_ACCESS_MISSING_END,range:{start:this.tokens[this.currentTokenIndex-3].position?.start??J.start,end:r.position?.end??J.end}}),this.getPrevToken();return}return this.getNextToken(),{type:"CELL_ARRAY_ACCESS",value:[n],position:this.tokens[this.currentTokenIndex-3].position??J}}else{let r=0,i=[n];this.getPrevTokenSkipNL();do{if(r++,this.skipNL(!0),!this.isTokenValidBasicDataType(this.getCurrentToken(),!1))break;i.push(this.getCurrentToken()),this.skipNL(!0),this.getCurrentToken().type!=="COMMA"&&this.getCurrentToken().type!=="RSQUIRLY"&&this.errors.push({message:`Unexpected token '${JSON.stringify(this.getCurrentToken().content)}'`,code:oe.CELL_ARR_ACCESS_BAD_ARGS,range:{start:e.position?.start??J.start,end:this.getCurrentPosition().end}})}while(r<je&&i[i.length-1].type!=="RSQUIRLY");return this.logErrorMaxCallsReached(r,"Missing '}'. Could not parse cell array access",oe.CELL_ARR_ACCESS_MISSING_END)?void 0:(this.getNextToken(),{type:"CELL_ARRAY_ACCESS",value:i,position:this.tokens[this.currentTokenIndex-3].position??J})}}isTokenValidBasicDataType(e,n){let r=e.type==="CELL_ARRAY_ACCESS"||e.type==="STRUCT_ACCESS"||e.type==="IDENTIFIER_REFERENCE"||e.type==="IDENTIFIER"||e.type==="NUMBER"||e.type==="STRING";return!r&&(n===void 0||n===!0)&&this.errors.push({message:`Expected a valid data type. Got '${this.stringifyTokenContent()}'`,range:this.getCurrentPosition(),code:11}),r}parseFunctionCall(e){let n=this.getFunctionArguments();return this.validateFnCallArgs(n),this.getNextToken(),{type:"FUNCTION_CALL",value:e.content,position:this.getCurrentPosition(e),functionData:{args:n}}}getFunctionArguments(){let e=[];if(this.getCurrentToken().type!=="LPARENT")return this.errors.push({message:`Expected '(' for function call. Got: ${this.getCurrentToken().type}`,range:this.getCurrentPosition(),code:10}),e;do{let n=this.skipNL(!0),r=this.skipNL(!0);if(this.getPrevToken(),n.type==="IDENTIFIER"&&r.type==="EQUALS"){this.getNextToken();let s=this.skipNL(!0);this.isTokenDataType(s)||this.errors.push({message:`Expected a valid default value. Got ${this.stringifyTokenContent(s)}`,range:this.getCurrentPosition(s),code:9}),e.push({type:"DEFAULT_VALUE_ARGUMENT",content:n.content,position:n.position,defaultValue:s}),this.getNextToken(),n=null}else if(n.type==="IDENTIFIER"){let s=this.skipNL(!0);if(s.type==="LPARENT"){let d=this.getFunctionArguments();this.getNextToken(),this.validateFnCallArgs(d)}else s.type==="LSQUIRLY"&&this.parseCellArrayAccess(n)}else{if(n.type==="RPARENT")return e;if(n.type==="LBRACKET")e.push(this.getVector(n)),n=null;else if(n.type==="LSQUIRLY"){let s=this.parseCellArray();if(n=null,s===null)return e;e.push(s)}else if(this.isTokenValidBasicDataType(n))this.getNextToken();else return this.errors.push({message:`Expected valid argument. Got ${this.stringifyTokenContent(n)}`,range:this.getCurrentPosition(),code:8}),e}n!==null&&e.push(n);let i=this.skipNL();if(i.type!=="COMMA"&&i.type!=="RPARENT")return this.errors.push({message:`Expected ',' or ')'. Got '${i.type}'`,range:this.getCurrentPosition(),code:oe.EXPECTED_COMMA_PAREN}),e}while(this.getCurrentToken().type!=="RPARENT"&&this.getCurrentToken().type!=="EOF");return this.getCurrentToken().type==="EOF"&&this.errors.push({message:"Expected closing parenthesis ')' for function call",range:this.getCurrentPosition(),code:oe.MISSING_PAREN}),e}stringifyTokenContent(e){return e===void 0&&(e=this.getCurrentToken()),Array.isArray(e.content)?`[${e.content.map(n=>n.content).join(", ")}]`:e.content}skipNL(e=!1){let n=0,r=this.getCurrentToken();for(e&&(r=this.getNextToken());this.getCurrentToken().type==="NL"&&n<=je;)r=this.getNextToken(),n++;return this.logErrorMaxCallsReached(n,"Found too many new lines",oe.TOO_MANY_NL),r===void 0?this.getPrevToken():r}isBinaryOperator(e){return e==="SUBTRACTION"||e==="DIVISION"||e==="ADDITION"||e==="MULTIPLICATION"}isEOF(e){return e!=null?e.type==="EOF":this.getCurrentToken().type==="EOF"}isEndFunctionToken(e){return e!=null?e.type==="KEYWORD"&&(e.content==="end"||e.content==="endfunction"):this.getCurrentToken().type==="KEYWORD"&&(this.getCurrentToken().content==="end"||this.getCurrentToken().content==="endfunction")}isTokenDataType(e){return e!=null?e.type==="IDENTIFIER"||e.type==="VECTOR"||e.type==="STRING"||e.type==="NUMBER"||e.type==="IDENTIFIER_REFERENCE"||e.type==="CELL_ARRAY"||e.type==="STRUCT_ACCESS"||e.type==="STRUCT":this.getCurrentToken().type==="IDENTIFIER"||this.getCurrentToken().type==="VECTOR"||this.getCurrentToken().type==="STRING"||this.getCurrentToken().type==="CELL_ARRAY"||this.getCurrentToken().type==="STRUCT_ACCESS"||this.getCurrentToken().type==="STRUCT"||this.getCurrentToken().type==="NUMBER"}logErrorMaxCallsReached(e,n,r,i){return e>=je?(this.errors.push({message:n,range:this.getCurrentPosition(i),code:r}),!0):!1}getStatements(){return this.statements}makeAST(){if(this.tokens.length<4)return{type:"Program",body:this.statements};let e=0;do{let n=this.parseStatement();n!==null&&this.statements.push(n),e++}while(this.getCurrentToken().type!=="EOF"&&e<je);return e>=je&&this.errors.push({message:"Maximum amount of statements reached.",range:this.getCurrentPosition(),code:oe.AST_MAX_STMNT_REACHED}),{type:"Program",body:this.statements}}getCurrentPosition(e){return e===void 0&&this.getCurrentToken()!==void 0?this.getCurrentToken().position:e===void 0&&this.getCurrentToken()===void 0?J:e?.position!==null&&e?.position!==void 0?e.position:J}getErrors(){return this.errors.forEach(e=>{if(e?.range===void 0)throw new Error("Unexpected undefined Range. "+JSON.stringify(e))}),this.errors}getWarnings(){return this.warnings}};var _n=1e4,fi=class{constructor(e=""){this.currPos=0;this.nextPos=0;this.tokens=[];this.keywords=jc();this.nativeFunctions=si();this.text=e,this.readChar()}setInitialConditions(){this.currPos=0,this.nextPos=0,this.currChar="",this.nextChar="",this.tokens.length=0}postTokenizationHook(){this.makeStructAccess(),this.makeCellArrayAccess(),this.makeIdentifierReferences()}makeCellArrayAccess(){let e=[],n=0,r=0,i=0;for(;n<this.tokens.length&&r<_n;)if(r++,n<this.tokens.length-2&&(this.tokens[n].type==="IDENTIFIER"||this.tokens[n].type==="STRUCT_ACCESS")&&this.tokens[n+1].type==="LSQUIRLY")if(n+3<this.tokens.length&&(this.tokens[n+2].type==="COLON"||this.isBasicTokenData(this.tokens[n+2]))&&this.tokens[n+3].type==="RSQUIRLY"){e.push({type:"CELL_ARRAY_ACCESS",content:[this.tokens[n],this.tokens[n+1],this.tokens[n+2],this.tokens[n+3]],position:{start:this.tokens[n]?.position?.start??J.start,end:this.tokens[n+3]?.position?.end??J.end}}),n=n+4;continue}else if(n+5<this.tokens.length&&this.isBasicTokenData(this.tokens[n+2])&&this.tokens[n+3].type==="COLON"&&this.isBasicTokenData(this.tokens[n+4])&&this.tokens[n+5].type==="RSQUIRLY"){e.push({type:"CELL_ARRAY_ACCESS",content:[this.tokens[n],this.tokens[n+1],this.tokens[n+2],this.tokens[n+3],this.tokens[n+4],this.tokens[n+5]],position:{start:this.tokens[n].position?.start??J.start,end:this.tokens[n+5].position?.end??J.end}}),n=n+6;continue}else if(this.isBasicTokenData(this.tokens[n+2])&&this.tokens[n+3].type==="COMMA"){let s=[this.tokens[n],this.tokens[n+1],this.tokens[n+2],this.tokens[n+3]],d=n+4;for(;d+1<this.tokens.length&&i<_n;){if(i++,!this.isBasicTokenData(this.tokens[d]))return;if(s.push(this.tokens[d]),s.push(this.tokens[d+1]),this.tokens[d+1].type==="RSQUIRLY")break;d=d+2}e.push({type:"CELL_ARRAY_ACCESS",content:s,position:{start:this.tokens[n].position?.start??J.start,end:s[s.length-1].position?.end??J.end}}),n=n+s.length;continue}else{e.push(this.tokens[n]),n++;continue}else{e.push(this.tokens[n]),n++;continue}if(r>=_n){console.log("ERROR 1");return}if(i>=_n){console.log("ERROR 2");return}this.tokens.length=0,this.tokens.push(...e)}isBasicTokenData(e){return e.type==="NUMBER"||e.type==="STRING"||e.type==="IDENTIFIER"||e.type==="STRUCT_ACCESS"||e.type==="CELL_ARRAY_ACCESS"}makeIdentifierReferences(){let e=[],n=0;for(;n<this.tokens.length;)n<this.tokens.length-1&&this.tokens[n].type==="AT"&&this.tokens[n+1].type==="IDENTIFIER"?(e.push({type:"IDENTIFIER_REFERENCE",position:{start:this.tokens[n].position?.start??J.start,end:this.tokens[n+1].position?.end??J.end},content:[this.tokens[n],this.tokens[n+1]]}),n=n+2):(e.push(this.tokens[n]),n++);this.tokens.length=0,this.tokens.push(...e)}makeStructAccess(){let e=[],n=0;for(;n<this.tokens.length;)if(n<this.tokens.length-3&&this.tokens[n].type==="IDENTIFIER"&&this.tokens[n+1].type==="PERIOD"&&this.tokens[n+2].type==="IDENTIFIER"){let r=n+2,i=[this.tokens[n],this.tokens[n+1],this.tokens[n+2]];for(;r<this.tokens.length-3&&this.tokens[r+1].type==="PERIOD"&&this.tokens[r+2].type==="IDENTIFIER";)r=r+2;let s={type:"STRUCT_ACCESS",content:i,position:{start:this.tokens[n].position?.start??J.start,end:i[i.length-1].position?.end??J.end}};e.push(s),n=r+1}else e.push(this.tokens[n]),n++;this.tokens.length=0,this.tokens.push(...e)}updateText(e){this.text=e,this.setInitialConditions(),this.readChar()}getAllTokens(){let e=0,n=this.getNextToken();for(;n.type!=="EOF"&&e<=_n;)n=this.getNextToken(),e++;if(e>=_n)throw new Error("Tokens calls exeeded. "+JSON.stringify(this.text)+" -> "+JSON.stringify(this.tokens.map(r=>r.type)));return this.postTokenizationHook(),this.tokens}getNextToken(){for(;this.currChar===" ";)this.readChar();let e=lu(this.currChar);if(e!==void 0&&this.isValidStartingToken(e))return this.readChar(),this.addToken({...e,position:this.getPositionAfterCursor(e.type!=="EOF"?e.content:"")});if(this.currChar==="#"||this.currChar==="%"){let n=this.isCodeBreak();if(n!==void 0)return this.addToken(n);let r=this.readComment();return this.addToken({type:"COMMENT",content:r,position:this.getPositionAfterCursor(r)})}else if(Wc(this.currChar)){let n=this.readLiteral();return this.addToken({...this.tokenFromLiteral(n),position:this.getPositionAfterCursor(n)})}else if(Uc(this.currChar)){let n=this.readNumber();return this.addToken({type:"NUMBER",content:n,position:this.getPositionAfterCursor(n)})}else if(this.currChar==='"'||this.currChar==="'"){let n=this.readLiteralString();return this.addToken({type:"STRING",content:n,position:this.getPositionAfterCursor(n)})}else return this.readChar(),this.addToken({type:"ILLEGAL",content:"illegal",position:this.getPositionAfterCursor(this.currChar)})}isCodeBreak(){let e=`${this.currChar}${this.nextChar}`;if(e==="##"||e==="%%"){let n=this.readComment();return{type:"CODE_BREAK",content:n,position:this.getPositionAfterCursor(n)}}}getPositionAfterCursor(e){let n=this.currPos-e.length,r=this.currPos;this.currPos=n;let[i,s]=this.getRowsColsCursor(),[d,v]=this.getRowsColsCursor(e),l={start:{line:i,character:s},end:{line:d,character:v}};return this.currPos=r,l}isValidStartingToken(e){if(e.type!=="MODULUS")return!0;let n=this.tokens[this.tokens.length-1];return n!==void 0&&(n.type==="IDENTIFIER"||n.type==="NUMBER")}readComment(){let e="";do e+=this.currChar,this.readChar();while(this.currChar!==`
`&&this.currPos<this.text.length);return e}addToken(e){return this.tokens.push(e),e}tokenFromLiteral(e){return this.keywords.includes(e)?{type:"KEYWORD",content:e,position:this.getPosition(e)}:this.nativeFunctions.includes(e)?{type:"NATIVE_FUNCTION",content:e,position:this.getPosition(e)}:{type:"IDENTIFIER",content:e,position:this.getPosition(e)}}getPosition(e){let[n,r]=this.getRowsColsCursor(),[i,s]=this.getRowsColsCursor(e);return{start:{line:n,character:r},end:{line:i,character:s}}}getRowsColsCursor(e=null){let n=e!==null?this.currPos+e.length+1:this.currPos;return Qc({text:this.text,characterPosition:n})}readChar(){if(this.currPos>=this.text.length||this.text.length<=3){this.currChar="\0",this.nextChar="\0";return}this.nextPos===0?(this.currChar=this.text[0],this.nextChar=this.text[1],this.currPos=1,this.nextPos=2):this.nextPos>=this.text.length?(this.currChar=this.nextChar,this.nextChar="\0",this.currPos=this.nextPos):(this.currChar=this.nextChar,this.nextChar=this.text[this.nextPos],this.currPos=this.nextPos,this.nextPos++)}readLiteral(){let e="";for(;/[a-zA-Z0-9_]/.test(this.currChar)&&this.currPos<=this.text.length;)e+=this.currChar,this.readChar();return e}readNumber(){let e="";for(;/\d/.test(this.currChar)||/\.\d/.test(this.currChar+this.nextChar)||/e\d/.test(this.currChar+this.nextChar)||/e[++-]/.test(this.currChar+this.nextChar)||/-\d/.test(this.currChar+this.nextChar);)e+=this.currChar,this.readChar();return e}readLiteralString(){let e=this.currChar;do this.readChar(),e+=this.currChar;while(this.currChar!=='"'&&this.currChar!=="'"&&this.currChar!==`
`&&this.currPos<this.text.length);return this.readChar(),e}};var hi=class{constructor(){this.references=[];this.definitions=[];this.errors=[];this.warnings=[]}visitProgram(e){for(let n of e.body)this.visitStatement(n);this.finishHook()}getErrors(){return this.errors}visitStatement(e){if(e!=null)switch(e.type){case"ASSIGNMENT":if(e.LHE===void 0)return;e.LHE.type==="FUNCTION_DEFINITION"?this.visitExpression(e.LHE,"ASSIGNMENT",e.context):(this.visitExpression(e.LHE,"ASSIGNMENT",e.context),this.visitExpression(e.RHE,"ASSIGNMENT",e.context,!1));break;case"FUNCTION_DEFINITION":if(e.LHE===void 0)return;this.visitExpression(e.LHE,"FUNCTION_DEFINITION",e.context),(e?.RHE).forEach(n=>{this.visitStatement(n)});break;case"MO_ASSIGNMENT":if(e.LHE===void 0)return;this.visitExpression(e.LHE,"MO_ASSIGNMENT",e.context),this.visitExpression(e.RHE,"MO_ASSIGNMENT",e.context,!1);break;case"FUNCTION_CALL":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"FUNCTION_CALL",e.context);break;case"REFERENCE_CALL_VAR_FUNC":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"REFERENCE_CALL_VAR_FUNC",e.context);break;case"FOR_STMNT":if(e?.LHE===void 0)return;this.visitExpression(e.LHE,"FOR_STMNT",e.context);case"IF_STMNT":case"DO_STMNT":case"SWITCH_STMNT":case"WHILE_STMNT":(e?.RHE).forEach(n=>{this.visitStatement(n)});break}}visitExpression(e,n,r,i=!0){if(e!=null)switch(e.type){case"IDENTIFIER":if((n==="ASSIGNMENT"||n==="FUNCTION_DEFINITION")&&i){let s=n==="FUNCTION_DEFINITION"?this.getNodeFunctionArgs(e).map(d=>{if(d.type!=="IDENTIFIER"&&d.type!=="DEFAULT_VALUE_ARGUMENT")return null;let v=d.type==="DEFAULT_VALUE_ARGUMENT"?"DEFAULT_ARGUMENT":"ARGUMENT",l=d.type==="DEFAULT_VALUE_ARGUMENT"?this.getDefaultValueContent(d):"",g=this.getTokenPosition(d),y={name:d.content,type:v,content:l,position:g,documentation:"",context:r};return this.definitions.push(y),y}).filter(d=>d!==null):[];this.definitions.push({name:e.value,position:e.position??J,type:n==="ASSIGNMENT"?"VARIABLE":"FUNCTION",documentation:this.getDocumentationOrLineDefinition(e),arguments:s,context:r}),this.references.push({name:e.value,position:this.getExpressionPosition(e),type:n==="ASSIGNMENT"?"VARIABLE":"FUNCTION",documentation:e?.functionData?.description??""})}else n==="FUNCTION_CALL"?this.references.push({name:e.value,position:this.getExpressionPosition(e),type:"FUNCTION",documentation:e?.functionData?.description??"",args:this.getFunctionArgsAsStrings(e?.functionData?.args)}):n==="FOR_STMNT"?this.definitions.push({name:e.value,type:"VARIABLE",position:e.position??J,documentation:e.lineContent??"",context:r}):this.references.push({name:e.value,position:this.getExpressionPosition(e),type:"VARIABLE",documentation:e?.functionData?.description??""});if(e?.functionData?.args!==void 0){let d=this.getArgumentIdentifiersList(e).map(v=>({name:v.content,position:this.getTokenPosition(v),type:"VARIABLE",documentation:this.getDocumentationOrLineDefinition(e)}));this.references.push(...d)}e?.RHO!==null&&Array.isArray(e.RHO)&&e.RHO.forEach(s=>{this.visitStatement(s)});break;case"BINARY_OPERATION":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,null,r),this.visitExpression(e.RHO,null,r,!1);break;case"FUNCTION_DEFINITION":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,"FUNCTION_DEFINITION",e.LHO.functionData?.contextCreated??""),Array.isArray(e.RHO)&&e.RHO.forEach(s=>{this.visitStatement(s)});break;case"KEYWORD":if(e?.LHO===void 0)return;this.visitExpression(e.LHO,null,r),this.visitExpression(e.RHO,null,r,!1);break;case"ANONYMOUS_FUNCTION_DEFINITION":e?.LHO?.value!==void 0&&e?.LHO?.position!==void 0&&this.definitions.push({name:e.LHO.value,position:e.LHO.position,type:"ANONYMOUS_FUNCTION",documentation:this.getDocumentationOrLineDefinition(e),context:r,arguments:e?.functionData?.args?.map(s=>({context:e?.functionData?.contextCreated??"",name:s.content,type:"ARGUMENT",position:this.getTokenPosition(s),documentation:""}))??[]}),this.references.push(...e?.functionData?.args?.map(s=>({name:s.content,position:this.getExpressionPosition(e),type:this.getReferenceTypeFromNode(e),documentation:e?.functionData?.description??""}))??[]),this.visitExpression(e.RHO,null,r,!1);break;case"VARIABLE_VECTOR":if(!Array.isArray(e.value)||!(e?.value?.length>1))return;e?.value!==void 0&&Array.isArray(e.value)&&e.value.forEach(s=>{if(s.type==="VECTOR"){this.getTokenIdentifiers(s).forEach(d=>{this.references.push({name:d.content,type:"VARIABLE",position:this.getTokenPosition(d),documentation:""})});return}s.type==="IDENTIFIER"&&this.definitions.push({name:s.content,type:"VARIABLE",position:this.getTokenPosition(s),documentation:this.getDocumentationOrLineDefinition(e),context:r})}),e.value.forEach(s=>{s.type==="IDENTIFIER"&&this.references.push({name:s.content,position:this.getTokenPosition(s),type:"VARIABLE",documentation:e?.functionData?.description??""})});break;case"FUNCTION_CALL":if(this.references.push({name:e.value,position:this.getExpressionPosition(e),documentation:this.getDocumentationOrLineDefinition(e),type:"FUNCTION"}),e?.functionData?.args===void 0)break;this.references.push(...this.getArgumentIdentifiersList(e).map(s=>({name:s.content,position:this.getTokenPosition(s),type:"VARIABLE",documentation:this.getDocumentationOrLineDefinition(e)})));break;case"REFERENCE_CALL_VAR_FUNC":this.references.push({name:e.value,position:this.getExpressionPosition(e),documentation:this.getDocumentationOrLineDefinition(e),type:"VARIABLE"});break}}getFunctionArgsAsStrings(e,n=0){if(n>300)throw new Error("Max calls exceeded in getFunctionArgsAsStrings. Tell a dev");return e===void 0?[]:typeof e=="string"?[e]:e.flatMap(r=>typeof r.content=="string"?[r.content]:Array.isArray(r.content)?this.getFunctionArgsAsStrings(r.content):[])}getArgumentIdentifiersList(e){return e?.functionData?.args===void 0?[]:e.functionData.args.flatMap(n=>this.getTokenIdentifiers(n))}getTokenIdentifiers(e){return e.type==="VECTOR"?e.content.flatMap(n=>this.getTokenIdentifiers(n)):e.type==="IDENTIFIER"||e.type==="DEFAULT_VALUE_ARGUMENT"?[e]:[]}getExpressionPosition(e){return e.position===void 0?J:e.position}getTokenPosition(e){return e.position===null?J:e.position}getDefaultValueContent(e){return e?.defaultValue?.content===void 0||Array.isArray(e?.defaultValue?.content)?"":e.defaultValue.content}getNodeFunctionArgs(e){return e?.functionData?.args===void 0?[]:e.functionData.args}getDocumentationOrLineDefinition(e){return e?.functionData?.description!==void 0?e?.functionData?.description:e?.lineContent?e.lineContent:(e?.RHO===void 0||Array.isArray(e.RHO),"")}getReferenceTypeFromNode(e){return e.type==="FUNCTION_CALL"||e.type==="FUNCTION_DEFINITION"||e.type==="ANONYMOUS_FUNCTION_DEFINITION"?"FUNCTION":"VARIABLE"}finishHook(){let e=this.definitions.map(i=>i.name),n=si(),r=this.references.map(i=>i.name);this.references.forEach(i=>{if(i.name==="addpath"){let s=i?.args?i.args:[];s.length===0?this.errors.push({message:"Missing path argument",code:oe.MISSING_PATH,range:i.position}):s.length>1&&this.errors.push({message:"Too many arguments",code:oe.TOO_MANY_ARGS,range:i.position});let d=s[0].split(":");d.length>1&&this.warnings.push({message:"Not recommended to use multiple paths separated with ':'. May not work properly in all systems (personal advice and experienced, not said octave.",code:0,range:i.position}),d.forEach(v=>{ci(eu(v)).forEach(g=>{this.warnings.push({message:`Could not load '${g}'`,code:0,range:i.position})})})}}),r.forEach((i,s)=>{n.includes(i)||e.includes(i)||this.errors.push({message:`Could not find reference '${i}'`,code:oe.VISITOR_COULDNT_FIND_REF,range:this.references[s].position})})}};var fu=require("fs"),hu=Ae(Es());var He=process.env.NODE_ENV==="dev"?null:(0,Bt.createConnection)(Bt.ProposedFeatures.all),nn=new Bt.TextDocuments(du.TextDocument),_t=new Map,Jn=new Map;nn.onDidChangeContent(t=>{ai(t.document.uri,t.document.getText())});nn.onDidOpen(t=>{let e=t.document.getText(),n=t.document.uri;Ge.set(n,e)});He?.onInitialize(t=>ru({params:t,connection:He}));He?.onInitialized(async t=>{await iu({params:t,connection:He})});He?.onDefinition(async t=>await au({params:t,documents:nn}));He?.onReferences(t=>{let e=t.textDocument.uri,n=nn.get(e);return n===void 0?[]:ou(n,t.position)});He?.onDidChangeConfiguration(t=>{if(li?Rs(t.settings.settings):Rs(Cs),wt.enableInitFile){let e=(0,fu.readFileSync)(wt.defaultInitFile).toString(),n=hu.URI.file(wt.defaultInitFile).toString();Ge.set(n,e)}});nn.onDidClose(t=>{let e=t.document.uri;Ge.delete(e)});He?.onCompletion(t=>su({params:t}));He?.onCompletionResolve(t=>t);He&&nn.listen(He);He?.listen();He?.onExit(()=>{Jn.forEach(t=>{clearTimeout(t)}),Jn.clear()});function ai(t,e){Jn.has(t)&&clearTimeout(Jn.get(t)),Jn.set(t,setTimeout(()=>{let n=Ge.get(t),r=e??n?.getText();if(n==null)return;let s=new fi(r).getAllTokens(),d=new di(s),v=d.makeAST(),l=new hi,g=l.getErrors();l.visitProgram(v),_t.set(t,l);let y=d.getErrors().map(D=>bs(D,"error")),_=d.getWarnings().map(D=>bs(D,"warn")),b=[...y,..._,...g];if(b.length>wt.maxNumberOfProblems){let D={range:{start:{line:0,character:0},end:{line:0,character:1}},message:"Maximum number of problems reached",severity:Bt.DiagnosticSeverity.Error,source:"mlang"};He?.sendDiagnostics({uri:t,diagnostics:[D]}).catch(I=>{throw new Error(I)})}else He?.sendDiagnostics({uri:t,diagnostics:b}).catch(D=>{throw new Error(D)})},wt.defaultDebounceTimeMS))}0&&(module.exports={connection,documents,updateDocumentData,visitors});
